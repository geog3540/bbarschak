(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9603],{8266:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(7590)}])},54397:function(e,t,n){"use strict";n.d(t,{W:function(){return b}});var r=n(85893),s=n(67294),o=n(14921),i=n(80026),a=n(41664),c=n.n(a),l=n(11163),u=n(37497),d=n(89905),h=n(97058),p=n(97559),m=n(19671);const g=e=>{let{onClose:t,announcement:{fields:n},currentUser:a}=e;const g=(0,l.useRouter)(),{0:f}=(0,s.useState)((()=>new Date)),{content:v,image:y,buttonText:b,buttonLink:x}=n,j=(0,s.useMemo)((()=>x?new URL(x,"https://observablehq.com"):void 0),[x]),w=(0,s.useMemo)((()=>{try{return(null===j||void 0===j?void 0:j.pathname)!==g.asPath&&(!(n.startDate&&new Date(n.startDate)>f)&&!(n.endDate&&new Date(n.endDate)<f))}catch(e){return(0,i.Tb)(e),!1}}),[f,n,g.asPath,j]);(0,s.useEffect)((()=>{(null===j||void 0===j?void 0:j.pathname)===g.asPath&&t()}),[t,j,g.asPath]);const C=(0,s.useCallback)((()=>{t(),(0,m.MR)((0,m.a$)({type:"marketing:view:productAnnouncementEngageClick",currentUser:a,data:{name:n.name,buttonText:n.buttonText,buttonLink:n.buttonLink},eventVersion:1}))}),[t,a,n]),k=(0,s.useCallback)((()=>{t(),(0,m.MR)((0,m.a$)({type:"marketing:view:productAnnouncementDismissClick",currentUser:a,data:{name:n.name},eventVersion:1}))}),[t,a,n]);return w?(0,r.jsx)(o.h,{children:(0,r.jsxs)("div",{className:"ba b--light-silver br2 shadow-5 relative bg-white z-2",style:{maxWidth:"315px",bottom:30,right:30,position:"fixed"},children:[(0,r.jsx)(u.hU,{colorless:!0,icon:d.Z,className:"absolute bg-white right-0 ma2",onClick:k,solidBackground:!0,"data-testid":"announcement-banner-close"}),(0,r.jsx)(h.Z,{image:y,alt:"Announcement image"}),(0,r.jsxs)("div",{className:"pa3","data-testid":"announcement-banner-div",children:[v&&(0,r.jsx)(p.Z,{className:"pb3",document:v}),j?(0,r.jsx)(c(),{href:j.toString(),className:"white bg-blue b--blue animate-all pointer primary-button-shadow hover-bg-dark-blue hover-b--dark-blue f6 fw6 br2 ba relative pa2 flex items-center justify-center no-underline",onClick:C,children:b}):(0,r.jsx)(u.KM,{className:"w-100",text:b||"Got it!",onClick:C})]})]})}):null};var f=n(40821);var v=n(40042);const y="announcement_entry_id",b=(0,v.$j)((e=>{let{currentUser:t,decorations:n}=e;return{currentUser:t,decorations:n}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,dispatch:n}=e;const{0:o,1:i}=(0,s.useState)(!1),{data:a}=function(){let e,{skipFetch:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{data:n,error:r}=(0,f.ZP)(t?null:"/api/cms/entries?content_type=announcement&limit=1&order=-sys.createdAt",(async e=>{const t=await fetch(e);if(!t.ok)throw await t.json();return t.json()}),{revalidateOnFocus:!1});return n&&n.items.length>0&&(e=n.items[0]),{data:e,error:r}}({skipFetch:!t}),c=null===a||void 0===a?void 0:a.sys.id;(0,s.useEffect)((()=>{if(!t||!c)return;t.settings.announcement_entry_id!==c&&i(!0)}),[t,c,n]);const l=(0,s.useCallback)((()=>{i(!1),c&&n({type:"updateCurrentUserSetting",key:y,value:c})}),[n,c]);return a&&o?(0,r.jsx)(g,{announcement:a,onClose:l}):null}))},82469:function(e,t,n){"use strict";var r=n(85893),s=n(94184),o=n.n(s),i=n(60443);t.Z=e=>{let{children:t,singleScreen:n=!1}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:o()("w-100 mw-max-width ph4-l ph3 center",n?"flex flex-column":""),style:n?{minHeight:"calc(100vh - 8rem)"}:{},children:(0,r.jsx)("div",{className:n?"flex-grow-1":"",style:n?{}:{minHeight:"calc(100vh - 24rem)"},children:t})}),(0,r.jsx)(i.Z,{minimal:n})]})}},73779:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r=n(85893);n(67294);const s=[1,2,3,4,5].map((e=>(0,r.jsx)("div",{},e)))},77025:function(e,t,n){"use strict";n.d(t,{H:function(){return y},W:function(){return v}});var r=n(85893),s=n(56424),o=n(67294),i=n(37497),a=n(16691),c=n(75713),l=n(11233),u=n(58171),d=n(24576),h=n(93452),p=n(19671),m=n(66421),g=n(65538);const f=e=>{let{collection:t,isNew:n,onDismiss:g,submitCollection:f,currentUser:v}=e;const{owner:y}=t,{0:b,1:x}=(0,o.useState)(""),{0:j,1:w}=(0,o.useState)("private"),{0:C,1:k}=(0,o.useState)(!1),{0:S,1:M}=(0,o.useState)("");function N(e){e.preventDefault(),g(),b!==t.title&&(0,p.MR)((0,p.y6)({type:"collection:manage:setTitle",data:{},collection:t,currentUser:v,eventVersion:1})),j!==t.type&&(0,p.MR)((0,p.y6)({type:"collection:manage:setType",data:{newSetting:j},collection:t,currentUser:v,eventVersion:1})),C!==t.ordered&&(0,p.MR)((0,p.y6)({type:"collection:manage:setOrdered",data:{newSetting:C},collection:t,currentUser:v,eventVersion:1})),S!==t.description&&(0,p.MR)((0,p.y6)({type:"collection:manage:setDescription",data:{},collection:t,currentUser:v,eventVersion:1})),f({id:t.id,title:b,type:j,ordered:C,description:S,owner:y},t.title)}return(0,o.useEffect)((()=>{x(t.title),w(t.type),k(t.ordered),M(t.description)}),[x,w,k,M,t]),(0,r.jsx)(s.Vq,{onDismiss:g,"aria-labelledby":"modal-title",children:(0,r.jsxs)(c.l,{onSubmit:N,children:[(0,r.jsx)(h.xB,{title:n?"Create collection":"Edit collection",onDismiss:g}),(0,r.jsx)(h.fe,{children:(0,r.jsxs)("div",{className:"pt3",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"var(--spacing-medium)"},children:[(0,r.jsxs)("div",{className:"flex flex-column",children:[(0,r.jsx)("label",{className:"pb2 f6 fw5 mid-gray",htmlFor:"name",children:"Title"}),(0,r.jsx)(l.Z,{type:"text",name:"title",value:b,maxLength:250,placeholder:"Collection Title",onChange:e=>x(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex flex-column",children:[(0,r.jsx)("label",{className:"pb2 f6 fw5 mid-gray",htmlFor:"type",children:"Visibility"}),(0,r.jsxs)(u.P,{name:"type",className:"w-100",onChange:e=>w(e.target.value),value:j,children:[(0,r.jsx)("option",{value:"private",children:"team"===y.type?"Team Private":"Private"}),(0,m.Fh)(v,y)&&(0,r.jsx)("option",{value:"public",children:"Public"})]})]}),(0,r.jsxs)("div",{className:"flex flex-column",style:{gridColumnEnd:"span 2"},children:[(0,r.jsx)("label",{className:"pb2 f6 fw5 mid-gray",htmlFor:"name",children:"Description"}),(0,r.jsx)(d.g,{className:"h3 lh-copy",name:"description",value:S,maxLength:250,autoResize:!0,onChange:e=>M(e.target.value)})]}),(0,r.jsxs)("div",{style:{gridColumnEnd:"span 2"},children:[(0,r.jsx)(a.X,{id:"ordered",label:"Ordered",checked:C,onChange:e=>k(e.target.checked)}),(0,r.jsx)("div",{className:"pt2 pb1 f6 gray lh-f6",children:"Ordered collections allow you to configure the order in which notebooks are displayed to readers."})]})]})}),(0,r.jsx)(h.mz,{children:(0,r.jsxs)(i.CQ,{children:[(0,r.jsx)(i.kq,{text:"Cancel",onClick:g}),(0,r.jsx)(i.KM,{text:n?"Create collection":"Save changes",onClick:N})]})})]})})},v=(0,g.$j)((e=>{let{context:t,currentUser:n}=e;return{isNew:!0,currentUser:n,collection:{id:"",title:"",type:"private",description:"",ordered:!1,owner:t.context||n}}}),(e=>({submitCollection(t){e({type:"createCollection",collection:t})}})))(f),y=(0,g.$j)(((e,t)=>{let{currentUser:n}=e,{collection:r}=t;return{isNew:!1,collection:r,currentUser:n}}),(e=>({submitCollection(t,n){e({type:"editCollection",collection:t,oldTitle:n})}})))(f)},40452:function(e,t,n){"use strict";n.d(t,{j:function(){return x}});var r=n(41799),s=n(69396),o=n(93452),i=n(78111),a=n(85893),c=n(67294),l=n(8433),u=n(19671),d=n(65538);const h=(0,d.$j)((e=>{let{currentUser:t}=e;return{currentUser:t}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,onDismiss:n,collection:r,dispatch:s}=e;return(0,a.jsx)(o.On,{title:"Move to trash",icon:l.Z,description:"Are you sure you want to delete this collection? This operation cannot be undone. Notebooks in the collection will not be deleted.",onCancel:n,onConfirm:()=>{n(),s({type:"deleteCollection",collection:r}),(0,u.MR)((0,u.y6)({type:"collection:manage:delete",data:{},collection:r,currentUser:t,eventVersion:1}))},destructive:!0})}));var p=n(77025);const m=(0,d.$j)(null,(e=>({dispatch:e})))((e=>{let{onDismiss:t,dispatch:n}=e;return(0,a.jsx)(o.On,{title:"Remove section from homepage",icon:l.Z,description:"If you delete the \u201cQuick guides\u201d section from your homepage, you can add it back at any time on your Settings page.",onCancel:t,onConfirm:()=>{t(),n({type:"updateCurrentUserSetting",key:"guides",value:"hide"})}})}));var g=n(56424),f=n(28925),v=n(37497),y=n(75713);const b=(0,d.$j)((e=>{let{currentUser:t}=e;return{currentUser:t}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,dispatch:n,onDismiss:r,collection:s}=e;const{0:i,1:l}=(0,c.useState)(""),{custom_thumbnail:d,default_thumbnail:h}=s;return(0,a.jsx)(g.Vq,{onDismiss:r,"aria-labelledby":"modal-title",children:(0,a.jsxs)(y.l,{onSubmit:function(e){e.preventDefault(),n({type:"setCollectionThumbnail",thumbnail:i,collection:s}),(0,u.MR)((0,u.y6)({type:"collection:manage:setThumbnail",data:{},collection:s,currentUser:t,eventVersion:1})),r()},children:[(0,a.jsx)(o.xB,{title:"Set thumbnail",onDismiss:r}),(0,a.jsx)(o.fe,{children:(0,a.jsx)(f.E,{thumbnail:d,defaultThumbnail:h,onValueChange:e=>{l(e)}})}),(0,a.jsx)(o.mz,{children:(0,a.jsxs)(v.CQ,{children:[(0,a.jsx)(v.kq,{text:"Cancel",onClick:r}),(0,a.jsx)(v.KM,{text:"Set image",type:"submit"})]})})]})})})),x=(0,o.zm)((0,s.Z)((0,r.Z)({},i.$),{createCollection:p.W,editCollection:p.H,deleteCollection:h,hideGuides:m,setThumbnail:b}))},23559:function(e,t,n){"use strict";n.d(t,{T:function(){return i},u:function(){return o}});var r=n(85893),s=n(36448);const o=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"ph3 pv4 tc ba b--silver br3 b--dashed bw1",children:(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"f6 tc mid-gray lh-copy",children:t})})})};function i(e){let{type:t,owner:n,context:r}=e;const o=r?"team"===r.type?"Your team doesn't have":"You don't have":"".concat((0,s.RX)(n)," doesn't have");return"".concat(o," any public ").concat(t,".")}},9234:function(e,t,n){"use strict";n.d(t,{a:function(){return y}});var r=n(41799),s=n(69396),o=n(99534),i=n(85893),a=n(60357),c=n.n(a),l=n(94184),u=n.n(l),d=n(67294),h=n(51440),p=n(73779),m=n(23559);var g=e=>(0,i.jsx)("svg",(0,s.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 2C2.22386 2 2 2.22386 2 2.5V6.5C2 6.77614 2.22386 7 2.5 7H6.5C6.77614 7 7 6.77614 7 6.5V2.5C7 2.22386 6.77614 2 6.5 2H2.5ZM9.5 2C9.22386 2 9 2.22386 9 2.5V6.5C9 6.77614 9.22386 7 9.5 7H13.5C13.7761 7 14 6.77614 14 6.5V2.5C14 2.22386 13.7761 2 13.5 2H9.5ZM2 9.5C2 9.22386 2.22386 9 2.5 9H6.5C6.77614 9 7 9.22386 7 9.5V13.5C7 13.7761 6.77614 14 6.5 14H2.5C2.22386 14 2 13.7761 2 13.5V9.5ZM9.5 9C9.22386 9 9 9.22386 9 9.5V13.5C9 13.7761 9.22386 14 9.5 14H13.5C13.7761 14 14 13.7761 14 13.5V9.5C14 9.22386 13.7761 9 13.5 9H9.5Z",fill:"currentColor"})}));var f=e=>(0,i.jsx)("svg",(0,s.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2.5C2 2.22386 2.22386 2 2.5 2H13.5C13.7761 2 14 2.22386 14 2.5V3.5C14 3.77614 13.7761 4 13.5 4H2.5C2.22386 4 2 3.77614 2 3.5V2.5ZM2 5.5C2 5.22386 2.22386 5 2.5 5H8.5C8.77614 5 9 5.22386 9 5.5V6.5C9 6.77614 8.77614 7 8.5 7H2.5C2.22386 7 2 6.77614 2 6.5V5.5ZM2.5 9C2.22386 9 2 9.22386 2 9.5V10.5C2 10.7761 2.22386 11 2.5 11H13.5C13.7761 11 14 10.7761 14 10.5V9.5C14 9.22386 13.7761 9 13.5 9H2.5ZM2 12.5C2 12.2239 2.22386 12 2.5 12H8.5C8.77614 12 9 12.2239 9 12.5V13.5C9 13.7761 8.77614 14 8.5 14H2.5C2.22386 14 2 13.7761 2 13.5V12.5Z",fill:"currentColor"})})),v=n(37724);function y(e){var{listTitle:t,response:n,items:a,filters:l,filterName:y,emptyMessage:b,children:x,ordered:j=!1,pagination:w=!0,sorts:C,canFormat:k=!0,columns:S=1,headingSeparator:M,className:N="mb7"}=e,T=(0,o.Z)(e,["listTitle","response","items","filters","filterName","emptyMessage","children","ordered","pagination","sorts","canFormat","columns","headingSeparator","className"]);const[P,Z]=function(e,t){const{0:n,1:r}=(0,d.useState)(t);return(0,d.useEffect)((()=>{const t=v.X.getItem(e);t&&r(t)}),[e]),(0,d.useEffect)((()=>{v.X.setItem(e,n.toString())}),[e,n]),[n,r]}("listFormat","grid"),O=k&&!j?P:"list",U=2===S,R=(0,i.jsxs)("div",{className:"grid"===O?"listing-grid":"",style:U?{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))",gridColumnGap:"2rem"}:{},children:[0===n.results.length&&b&&(0,i.jsx)("div",{className:"mb4",style:{gridColumn:"1 / -1"},children:(0,i.jsx)(m.u,{children:b})}),n.results.map(((e,t)=>(0,i.jsx)("div",{className:u()("display-grid","list"===O&&t>0&&"curated_result"!==e.type&&!U?"bt b--light-silver pt2":""),children:x(e,O,t)},e.id))),p.y]});return(0,i.jsxs)("div",(0,s.Z)((0,r.Z)({},T),{className:"jsx-bef707de879ebfe8 "+(N||""),children:[(0,i.jsxs)("div",{className:"jsx-bef707de879ebfe8 flex pv2 justify-between",children:[t,l?l():(0,i.jsx)("div",{className:"jsx-bef707de879ebfe8"}),!j&&(0,i.jsxs)("div",{className:"jsx-bef707de879ebfe8 flex items-center flex-column flex-row-ns self-end",children:[C||(0,i.jsx)("div",{className:"jsx-bef707de879ebfe8"}),k&&(0,i.jsxs)("div",{className:"jsx-bef707de879ebfe8 mv1 flex mt0-ns mt2 ba b--silver br2 items-stretch self-end",children:[(0,i.jsx)("button",{"aria-label":"Display as grid",onClick:()=>Z("grid"),className:"jsx-bef707de879ebfe8 "+(u()("clean-button bn ma0 pointer br2 br--left tooltipped tooltipped-s hover-dark-gray hover-bg-near-white pa1 flex items-center","grid"===P?"dark-gray bg-near-white":"moon-gray bg-transparent")||""),children:(0,i.jsx)(g,{})}),(0,i.jsx)("div",{className:"jsx-bef707de879ebfe8 br b--silver"}),(0,i.jsx)("button",{"aria-label":"Display as list",onClick:()=>Z("list"),className:"jsx-bef707de879ebfe8 "+(u()("clean-button bn ma0 pointer br2 br--left tooltipped tooltipped-s hover-dark-gray hover-bg-near-white pa1 flex items-center","list"===P?"dark-gray bg-near-white ":"moon-gray bg-transparent")||""),children:(0,i.jsx)(f,{})})]})]})]}),w?(0,i.jsx)(h.t,{response:n,itemName:a,filterName:y,headingSeparator:M,children:R}):R,(0,i.jsx)(c(),{id:"bef707de879ebfe8",children:".listing-grid.jsx-bef707de879ebfe8{display:grid;grid-gap:1.75em;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}@media screen and (min-width:30em)and (max-width:50em){.listing-grid.jsx-bef707de879ebfe8{grid-template-columns:repeat(2,1fr)}}.clean-button.jsx-bef707de879ebfe8:focus{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}"})]}))}},64600:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(85893),s=(n(67294),n(51811));const o=e=>{let{sort:t,direction:n,setSort:o,setDirection:i,relevance:a,publicOnly:c=!1}=e;return(0,r.jsx)(s.P,{sort:t,direction:n,setSort:o,setDirection:i,sortOptions:(0,r.jsxs)(r.Fragment,{children:[a?(0,r.jsx)("option",{value:"relevance",children:"Relevance"}):null,c?null:(0,r.jsx)("option",{value:"edited",children:"Edited"}),c?null:(0,r.jsx)("option",{value:"created",children:"Created"}),(0,r.jsx)("option",{value:"title",children:"Title"}),(0,r.jsx)("option",{value:"likes",children:"Likes"}),(0,r.jsx)("option",{value:"published",children:"Published"})]})})}},51440:function(e,t,n){"use strict";n.d(t,{t:function(){return p}});var r=n(41799),s=n(69396),o=n(85893),i=n(60357),a=n.n(i),c=n(94184),l=n.n(c),u=n(11163);n(67294);var d=n(40287),h=n(84193);function p(e){let{response:t,itemName:n="items",children:i,filterName:c,headingSeparator:p=!0}=e;const{page:m,per_page:g,total:f,truncated:v,results:{length:y}}=t,b=Math.ceil(f/g),x=(m-1)*g+1,j=x+y-1;let w=c&&"all"!==c?"".concat(c," ").concat(n):n;function C(){return f>g?(0,o.jsxs)("div",{className:"gray",children:["Showing"," ",x===j?(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:"dark-gray",children:j.toLocaleString("en-US")})," of ",(0,o.jsx)("span",{className:"dark-gray",children:x.toLocaleString("en-US")})," ",w]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{className:"dark-gray",children:[x.toLocaleString("en-US"),"-",j.toLocaleString("en-US")]})," of ",(0,o.jsxs)("span",{className:"dark-gray",children:[f.toLocaleString("en-US"),v?"+":""]})," ",w]})]}):(0,o.jsxs)("div",{className:"gray",children:[f>1?"Showing all ":f>0?"Showing ":"",(0,o.jsxs)("span",{className:"dark-gray",children:[f.toLocaleString("en-US"),v?"+":""]})," ",w]})}function k(e){let{direction:t,currentPage:n}=e;const{asPath:i}=(0,u.useRouter)(),a=new URL(i,"https://observablehq.com"),c=n+("prev"===t?-1:1);c<=1?a.searchParams.delete("page"):a.searchParams.set("page",String(Math.min(c,b)));const p={prev:c<1,next:c>Math.min(b,100)}[t],m="prev"===t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{className:"mr1 ph2s",style:{transform:"rotate(180deg)"}})," ","Prev"]}):(0,o.jsxs)(o.Fragment,{children:["Next ",(0,o.jsx)(d.Z,{className:"ml1"})]}),g={title:"".concat("prev"===t?"Previous":"Next"," page"),className:l()(p?"o-40 pen":"hover-blue","mh1 gray f7 lh-solid pv2 clean-button dib ph2 no-underline flex items-center justify-center")};return p?(0,o.jsx)("span",(0,s.Z)((0,r.Z)({},g),{children:m})):(0,o.jsx)(h.Z,{href:a.toString(),children:(0,o.jsx)("a",(0,s.Z)((0,r.Z)({},g),{children:m}))})}function S(e){let{className:t=""}=e;return f>g?(0,o.jsxs)("div",{className:"jsx-6dbde6417f0925cf "+(l()("flex",t)||""),children:[(0,o.jsx)(k,{direction:"prev",currentPage:m}),(0,o.jsx)(k,{direction:"next",currentPage:m}),(0,o.jsx)(a(),{id:"6dbde6417f0925cf",children:".clean-button:focus{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}"})]}):(0,o.jsx)("div",{style:{height:32}})}return 1===f&&(w=w.slice(0,-1)),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:l()("flex items-center justify-between pv1 mb2 f7 fw5",p?"bt b--light-silver":""),children:[(0,o.jsx)(C,{}),(0,o.jsx)(S,{className:"nr2"})]}),i,f>g&&(0,o.jsxs)("div",{className:"mt4 f7 fw5 tc",children:[(0,o.jsx)(C,{}),(0,o.jsx)("div",{className:"mt2",children:(0,o.jsx)(S,{className:"justify-center"})})]})]})}},51811:function(e,t,n){"use strict";n.d(t,{P:function(){return u}});var r=n(85893),s=(n(67294),n(37497)),o=n(58171),i=n(41799),a=n(69396);var c=e=>(0,r.jsxs)("svg",(0,a.Z)((0,i.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,r.jsx)("path",{d:"M8 4L15 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M8 8L12 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M4 3V13M4 13L1 10.5M4 13L7 10.5",stroke:"currentColor",strokeWidth:"2"})]}));var l=e=>(0,r.jsxs)("svg",(0,a.Z)((0,i.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,r.jsx)("path",{d:"M8 12L15 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M8 8L12 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M4 13L4 3M4 3L7 5.5M4 3L0.999999 5.5",stroke:"currentColor",strokeWidth:"2"})]}));function u(e){let{sort:t,direction:n,setSort:i,setDirection:a,sortOptions:u}=e;return(0,r.jsxs)("div",{className:"flex mr2-ns items-center",children:[(0,r.jsx)("label",{className:"mr2 f7 fw6 gray lh-f7",htmlFor:"sort",children:"Sort"}),(0,r.jsx)(o.g,{id:"sort",value:t,onChange:e=>i(e.target.value||void 0),children:u}),(0,r.jsx)(s.hU,{className:"br2 tooltipped tooltipped-sw","aria-label":"Sort order",onClick:()=>a("desc"===n?"asc":"desc"),icon:"desc"===n?c:l})]})}},97058:function(e,t,n){"use strict";var r=n(41799),s=n(99534),o=n(85893),i=n(18943);t.Z=e=>{var{image:t,alt:n}=e,a=(0,s.Z)(e,["image","alt"]);if("undefined"===typeof t)return null;const{file:c,description:l}=t.fields;return(0,o.jsx)("img",(0,r.Z)({src:(0,i.GR)(c.url),alt:null!==n&&void 0!==n?n:l},a))}},97559:function(e,t,n){"use strict";var r=n(41799),s=n(85893),o=n(60357),i=n.n(o),a=n(74129),c=n(86437);t.Z=e=>{let{document:t,renderMark:n={},renderNode:o={},className:l}=e;if("undefined"===typeof t)return null;if("string"===typeof t)throw new Error("Document is not a RichText object and should be rendered directly");const u={renderMark:(0,r.Z)({},n),renderNode:(0,r.Z)({[c.BLOCKS.PARAGRAPH]:(e,t)=>(0,s.jsxs)("p",{style:{margin:0},className:"jsx-17502f83cc37dac7",children:[t,(0,s.jsx)(i(),{id:"17502f83cc37dac7",children:"p.jsx-17502f83cc37dac7:not(:last-of-type){padding-bottom:var(--spacing-medium)}"})]}),[c.BLOCKS.UL_LIST]:(e,t)=>(0,s.jsx)("ul",{className:"pl3",style:{listStyleType:"disc",margin:0},children:t}),[c.BLOCKS.LIST_ITEM]:(e,t)=>(0,s.jsxs)("li",{className:"jsx-1aac4797f0960583",children:[t,(0,s.jsx)(i(),{id:"1aac4797f0960583",children:"li.jsx-1aac4797f0960583:not(:last-of-type){padding-bottom:var(--spacing-medium)}"})]})},o)};return(0,s.jsx)("div",{className:l,children:(0,a.h)(t,u)})}},43489:function(e,t,n){"use strict";n.d(t,{i:function(){return i},y:function(){return a}});var r=n(85893),s=n(94184),o=n.n(s);const i=e=>{let{className:t}=e;return(0,r.jsx)("span",{className:o()("dib ba br2 ph1 fw5 f7",t),style:{lineHeight:"var(--line-height-f7)",height:"var(--line-height-f7)"},children:"Guest"})};function a(e){let{showGuestLozenge:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{owner:(0,r.jsx)(r.Fragment,{children:"Owner"}),member:(0,r.jsx)(r.Fragment,{children:"Editor"}),viewer:(0,r.jsx)(r.Fragment,{children:"Viewer"}),guest_viewer:(0,r.jsxs)("span",{children:["Viewer",t&&(0,r.jsxs)(r.Fragment,{children:["\xa0",(0,r.jsx)(i,{className:"dark-gray"})]})]}),guest_member:(0,r.jsxs)("span",{children:["Editor",t&&(0,r.jsxs)(r.Fragment,{children:["\xa0",(0,r.jsx)(i,{})]})]})}[e]}},65878:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(41799),s=n(99534),o=n(85893),i=(n(67294),n(95542)),a=n(51970);function c(e){return t=>{var{error:n}=t,c=(0,s.Z)(t,["error"]);const l=(0,a.S)(c);return n?(0,o.jsx)(i.Z,{error:n,initialCurrentUser:l.initialCurrentUser,initialContext:null}):(0,o.jsx)(e,(0,r.Z)({},l))}}},18943:function(e,t,n){"use strict";n.d(t,{GR:function(){return a},r_:function(){return c}});var r=n(41799),s=n(69396),o=(n(42474),n(10159),n(39593)),i=n.n(o);n(83454);new(i())({max:1e3,ttl:6e5});function a(e){if(!e.startsWith("/"))return e;return new URL(e,"https://observablehq.com").toString()}function c(e,t){const n=e.items.filter(t);return(0,s.Z)((0,r.Z)({},e),{items:n})}},28067:function(e,t,n){"use strict";n.d(t,{T:function(){return s},r:function(){return o}});var r=n(51289);function s(e,t,n){let r=e[t];return void 0===r&&void 0!==n?n:(Array.isArray(r)&&(r=r[0]),"boolean"===typeof n?!!r&&"false"!==r:r)}function o(e){const t=r.Qg?location.pathname:"/",n=new URLSearchParams;return Object.entries(e).forEach((e=>{let[t,r]=e;r&&n.append(t,String(r))})),"".concat(t,"?").concat(n.toString())}},7590:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return te},default:function(){return ne}});var r=n(85893),s=n(41799),o=n(69396),i=n(60357),a=n.n(i),c=n(19171),l=n(94184),u=n.n(l),d=n(41664),h=n.n(d),p=n(11163),m=n(67294),g=n(38106),f=n(54397),v=n(82469),y=n(40452),b=n(34049),x=n(37497),j=n(16691),w=n(20042),C=n(60803),k=n(74878),S=n(54256),M=n(22027),N=n(60138),T=n(89905),P=n(9234),Z=n(62806),O=n(23105),U=n(64600),R=n(75288),L=n(66170),D=n(39736),I=n(602),E=n(44754),_=n(12447),V=n(19671),F=n(28067),q=n(3142),H=n(81816),A=n(65538);const B=e=>{let{query:t,className:n="",setQuery:s}=e;const[o,i,c]=(0,E.G)(t,500),l=(0,m.useRef)(null),d=c.length>=2?c:"";return(0,m.useEffect)((()=>{var e;null===(e=l.current)||void 0===e||e.focus()}),[]),(0,m.useEffect)((()=>{d!==t&&s(d)}),[d,s,t]),(0,r.jsxs)("div",{style:{height:32},className:"jsx-256c544e8b3531d3 "+(u()("flex items-center bb b--silver pl1 mb2-ns",n)||""),children:[(0,r.jsx)(N.Z,{className:"top gray"}),(0,r.jsx)("input",{type:"text",placeholder:"Search for notebooks",value:o,onChange:e=>i(e.target.value),ref:l,className:"jsx-256c544e8b3531d3 form-default-clear inner-input bn fw6 flex-auto ph2 pv1 f4 dark-gray bg-white hover-near-black mb1"}),(0,r.jsx)(x.hU,{icon:T.Z,onClick:()=>i(""),style:{width:28,height:28,marginRight:2},colorless:!0,disabled:!o}),(0,r.jsx)(a(),{id:"256c544e8b3531d3",children:".inner-input.jsx-256c544e8b3531d3::-webkit-input-placeholder{color:var(--moon-gray)}.inner-input.jsx-256c544e8b3531d3:-moz-placeholder{color:var(--moon-gray)}.inner-input.jsx-256c544e8b3531d3::-moz-placeholder{color:var(--moon-gray)}.inner-input.jsx-256c544e8b3531d3:-ms-input-placeholder{color:var(--moon-gray)}.inner-input.jsx-256c544e8b3531d3::-ms-input-placeholder{color:var(--moon-gray)}.inner-input.jsx-256c544e8b3531d3::placeholder{color:var(--moon-gray)}"})]})},X=e=>{let{query:t,notebooks:n,sorts:s,page:o,currentUser:i,className:a,useES:c}=e;return(0,r.jsx)(P.a,{className:a,emptyMessage:"We couldn\u2019t find any documents that matched your search query.",response:n,sorts:s,items:"notebooks",headingSeparator:!1,children:(e,n,s)=>"curated_result"===e.type?(0,r.jsx)(L.H,{format:n,result:e,saveCuratedListingSelectionEvent:n=>function(e){let{notebook:n,trigger:r,rank:s}=e;(0,V.MR)((0,V.a$)({type:"search:resultSelected",data:{query:t,resultId:n.id,resultSource:"curated",rank:s,page:+o,source:"searchList",trigger:r,resultTitle:n.title},eventVersion:3,currentUser:i}))}({notebook:e,rank:s+1,trigger:0===n.detail?"keypress":"click"})}):(0,r.jsx)(O.pg,{format:n,notebook:e,saveListingSelectionEvent:n=>function(e){let{notebook:n,rank:r,trigger:s}=e;(0,V.MR)((0,V.a$)({type:"search:resultSelected",data:{query:t,resultId:n.id,resultSource:c?"elasticsearch":"postgres",rank:r,page:+o,source:"searchList",trigger:s,resultTitle:n.title},eventVersion:3,currentUser:i}))}({notebook:e,rank:s+1,trigger:0===n.detail?"keypress":"click"})})})};function z(e,t){const n=$(t)?{accessOnlyYou:(0,F.T)(e,"accessOnlyYou",!1),accessShared:(0,F.T)(e,"accessShared",!1),accessTeam:(0,F.T)(e,"accessTeam",!1),accessUnlisted:(0,F.T)(e,"accessUnlisted",!1),accessPublic:(0,F.T)(e,"accessPublic",!1)}:{};return(0,s.Z)({query:(0,F.T)(e,"query",""),onlyOwner:(0,F.T)(e,"onlyOwner",!1),creator:(0,F.T)(e,"creator",""),owner:(0,F.T)(e,"owner",!1),team:(0,F.T)(e,"team",""),onlyTitle:(0,F.T)(e,"onlyTitle",!1),page:(0,F.T)(e,"page",1),sort:(0,F.T)(e,"sort","relevance"),direction:(0,F.T)(e,"direction","desc"),inDocs:(0,F.T)(e,"inDocs",!1),useES:(0,F.T)(e,"useES",(0,q.lJ)(t)?"true":"false")},n)}function $(e){if(!e)return!1;return[e.tier,...e.teams.map((e=>e.tier))].some((e=>["pro","pro_enterprise"].includes(e)))}const W=e=>{let{currentUser:t}=e;const{push:n,query:i}=(0,p.useRouter)(),c=z(i,t),{onlyOwner:l,creator:u,owner:d,team:m,accessOnlyYou:g,accessShared:f,accessTeam:v,accessUnlisted:y,accessPublic:b,inDocs:x,onlyTitle:C}=c,{data:k}=(0,I.h_)((()=>t?"/user/@".concat(t.login):null)),S=null===t||void 0===t?void 0:t.teams.map((e=>({is_teammate:!1,github_login:null,avatar_url:e.avatar_url,bio:e.bio,home_url:e.home_url,id:e.id,login:e.login,name:e.name,tier:e.tier,following_count:e.following_count,followers_count:e.followers_count,following:e.following}))),{data:M}=(0,I.h_)((()=>u||l?"/user/@".concat(u||(l&&t?t.login:"")):null));function N(e){return e?e.login:l&&t?t.login:void 0}const{data:T}=(0,I.h_)((()=>m?"/user/@".concat(m):null));const P=$(t);return(0,r.jsxs)("div",{className:"jsx-613e49dced453db4 flex flex-column mt3 mr4 mr4-ns",children:[(0,r.jsxs)("div",{className:"jsx-613e49dced453db4 search-controls",children:[(0,r.jsx)("div",{className:"jsx-613e49dced453db4 pv2 f7 gray fw5",children:"Creator"}),(0,r.jsxs)("div",{id:"creatorDiv",className:"jsx-613e49dced453db4",children:[(0,r.jsx)(w.o,{value:M,type:"individual",expandVertically:!0,onSelectUser:function(e){n((0,F.r)((0,o.Z)((0,s.Z)({},c),{creator:N(e),owner:d?N(e):void 0,onlyOwner:void 0,page:void 0})))},initialSuggestions:k?[k]:[]}),(0,r.jsx)(j.X,{label:"Personal notebooks only",checked:d,disabled:void 0===M,onChange:e=>{return t=e.target.checked,r=M,void n((0,F.r)((0,o.Z)((0,s.Z)({},c),{creator:N(r),owner:t?N(r):void 0,onlyOwner:void 0,page:void 0})));var t,r},className:"near-black",title:void 0===M?"Specify a creator to use this option":void 0})]}),(0,r.jsx)("div",{className:"jsx-613e49dced453db4 pv2 f7 gray fw5",children:"Team"}),(0,r.jsx)(w.o,{value:T,type:"team",onSelectUser:function(e){n((0,F.r)((0,o.Z)((0,s.Z)({},c),{team:e?e.login:void 0,page:void 0})))},initialSuggestions:S,expandVertically:!0}),P&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-613e49dced453db4 pv2 f7 gray fw5",children:"Access"}),(0,r.jsxs)("div",{className:"jsx-613e49dced453db4",children:[(0,r.jsx)(j.X,{label:"Only you",checked:g,onChange:e=>{return t=e.target.checked,void n((0,F.r)((0,o.Z)((0,s.Z)({},c),{accessOnlyYou:t,page:void 0})));var t}}),(0,r.jsx)(j.X,{label:"Shared",checked:f,onChange:e=>{return t=e.target.checked,void n((0,F.r)((0,o.Z)((0,s.Z)({},c),{accessShared:t,page:void 0})));var t}}),(0,r.jsx)(j.X,{label:"Team",checked:v,onChange:e=>{return t=e.target.checked,void n((0,F.r)((0,o.Z)((0,s.Z)({},c),{accessTeam:t,page:void 0})));var t}}),(0,r.jsx)(j.X,{label:"Unlisted",checked:y,onChange:e=>{return t=e.target.checked,void n((0,F.r)((0,o.Z)((0,s.Z)({},c),{accessUnlisted:t,page:void 0})));var t}}),(0,r.jsx)(j.X,{label:"Public",checked:b,onChange:e=>{return t=e.target.checked,void n((0,F.r)((0,o.Z)((0,s.Z)({},c),{accessPublic:t,page:void 0})));var t}})]})]}),(0,r.jsx)("div",{className:"jsx-613e49dced453db4 pv2 f7 gray fw5",children:"Other"}),(0,r.jsxs)("div",{className:"jsx-613e49dced453db4",children:[(0,r.jsx)(j.X,{label:"Notebook titles",checked:C,onChange:e=>{return t=e.target.checked,void n((0,F.r)((0,o.Z)((0,s.Z)({},c),{onlyTitle:t,page:void 0})));var t}}),(0,r.jsx)(j.X,{label:"Site documentation",checked:x,onChange:e=>{return t=e.target.checked,void n((0,F.r)((0,o.Z)((0,s.Z)({},c),{inDocs:t,page:void 0})));var t}})]})]}),(0,r.jsxs)("div",{className:"jsx-613e49dced453db4 mt4 flex flex-column",children:[(0,r.jsx)(h(),{href:"/@observablehq/searching-on-observable",className:"blue",children:"Search tips"}),(0,r.jsx)(h(),{href:"https://github.com/observablehq/feedback/issues/new?assignees=ajangus&labels=Search&template=feature_request.md&title=Search%20feedback",className:"blue mt2",children:"Provide search feedback"})]}),(0,r.jsx)(a(),{id:"613e49dced453db4",children:".search-controls.jsx-613e49dced453db4{display:grid;grid-template-columns:4rem 13rem;overflow-x:visible;row-gap:.5rem}"})]})},G=(0,A.$j)((e=>{let{currentUser:t}=e;return{currentUser:t}}),null)((e=>{let{currentUser:t}=e;const{replace:n,push:i,query:a}=(0,p.useRouter)(),l=z(a,t),{query:u,onlyOwner:d,creator:h,sort:x,direction:j,page:w,useES:N}=l;function T(e){i((0,F.r)((0,o.Z)((0,s.Z)({},l),{query:e,page:void 0})))}let P;(0,m.useEffect)((()=>{(0,V.MR)((0,V.a$)({type:"search:searchPageLoaded",data:{query:u,page:+w,sort:x,direction:j},eventVersion:2,currentUser:t}))}),[u,w,x,j,t]);const{fullSearchQuery:O,searchSSRPath:L}=function(e,t){const n=z(e,t),r=n.query.trim(),s=Y(n,t,r),o=""===r&&"true"!==n.useES?null:"".concat("true"===n.useES?"/search":"/documents/search","?").concat((0,H.P)({query:Y(n,t,n.query),sort:n.sort,direction:n.direction,page:n.page||1}));return{fullSearchQuery:s,searchSSRPath:o}}(a,t);let{data:E,isValidating:q=!1,error:A}=(0,I.h_)(L);A&&(E=void 0,q=!1,P="Unable to get search results for that query");let $=(0,m.useMemo)((()=>E?(0,Z.x)(E):void 0),[E]);if(!d&&""===h){const e=(0,g.O)(u);e.length>0&&1===w&&($=$?(0,o.Z)((0,s.Z)({},$),{results:[...e,...$.results]}):{page:1,per_page:1,total:0,truncated:!1,results:e})}const{0:G,1:Q}=(0,m.useState)(!0),K=(0,_.GS)(_.ro);return(0,r.jsxs)("div",{children:[(0,r.jsx)(b.Z,{content:"Search ".concat(u)}),(0,r.jsx)(R.Z,{showSearch:!1}),(0,r.jsx)(y.j,{}),(0,r.jsx)(D.F1,{}),(0,r.jsx)(f.W,{}),(0,r.jsx)(v.Z,{children:(0,r.jsxs)("div",{className:"flex-ns db",children:[K&&(0,r.jsx)(B,{className:"mt3",query:u,setQuery:T}),K&&(0,r.jsxs)(c.pJ,{open:G,onChange:()=>Q(!G),children:[(0,r.jsx)(c.lG,{as:"button",className:"f7 fw5 gray ph0 pt2 pb0 bn bg-transparent flex items-center",children:G?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"pr1",children:"Hide filters"}),(0,r.jsx)(C.Z,{})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"pr1",children:"Show filters"}),(0,r.jsx)(k.Z,{})]})}),(0,r.jsx)(c.V2,{as:"div",children:(0,r.jsx)(W,{currentUser:t})})]}),!K&&(0,r.jsx)(W,{currentUser:t}),(0,r.jsxs)("div",{className:"flex flex-column flex-grow-1",children:[!K&&(0,r.jsx)(B,{className:"mt3",query:u,setQuery:T}),(0,r.jsxs)("div",{className:"mb7",children:[$?(0,r.jsx)(X,{className:"mb0",query:O,sorts:(0,r.jsx)(U.I,{sort:x,direction:j,setSort:function(e){n((0,F.r)((0,o.Z)((0,s.Z)({},l,e?{sort:e,direction:["title"].includes(e)?"asc":"desc"}:null),{page:void 0})))},setDirection:function(e){n((0,F.r)((0,o.Z)((0,s.Z)({},l,e?{direction:e}:null),{page:void 0})))},relevance:!0}),notebooks:$,page:w,currentUser:t,useES:"true"===N}):null,P?(0,r.jsxs)("div",{className:"pa3 flex justify-center",children:[(0,r.jsx)(S.Z,{className:"mr2"})," ",P]}):q?(0,r.jsxs)("div",{className:"pa3 flex justify-center",children:[(0,r.jsx)(M.Z,{className:"blue mr2"})," Loading\u2026"]}):null]})]})]})})]})}));function Y(e,t,n){const r=[];if(""!==e.creator?(r.push("creator:".concat(e.creator)),e.owner&&r.push("owner:".concat(e.creator))):e.onlyOwner&&t&&r.push("creator:".concat(t.login)),""!==e.team&&r.push("team:".concat(e.team)),!(e.published&&e.unlisted&&e.includePrivate&&e.includePublic)){const t=[];e.published&&t.push("is:published"),e.unlisted&&t.push("is:linkshared","is:unlisted"),e.includePrivate&&t.push("is:private"),e.includePublic&&t.push("is:public"),t.length>1?r.push("(".concat(t.join(" | "),")")):1===t.length&&r.push(t[0])}if(e.accessOnlyYou||e.accessShared||e.accessTeam||e.accessUnlisted||e.accessPublic){const t=[];e.accessOnlyYou&&t.push("share:private"),e.accessShared&&t.push("share:shared"),e.accessTeam&&t.push("share:team"),e.accessUnlisted&&t.push("is:linkshared","is:unlisted"),e.accessPublic&&t.push("is:public","is:published"),t.length>1?r.push("(".concat(t.join(" | "),")")):1===t.length&&r.push(t[0])}return e.inDocs&&r.push("in:docs"),e.onlyTitle?r.push("title:(".concat(n.trim(),")")):r.push(n.trim()),r.join(" ")}var Q=n(65878),K=n(40042),J=n(24165),ee=n(21252);var te=!0,ne=(0,Q.Z)((e=>{const t=(0,ee.M)(J.f,e);return(0,r.jsx)(K.zt,{store:t,children:(0,r.jsx)(G,{})})}))},68298:function(e,t,n){"use strict";n.d(t,{R:function(){return d}});var r=n(11163),s=n.n(r),o=n(602),i=n(19671),a=n(70915),c=n(36448);function l(){s().replace(s().asPath)}var u=n(17152);const d={forkRequested:async(e,t,n)=>{let{notebook:r,currentUser:s}=e;if(r.isForking)return;const o=await(0,u.Fe)(s,r,t,n);o?(n({type:"showSuccessToast",message:"Notebook forked to ".concat(o.owner.login),key:"fork"}),n({type:"forkSucceeded",id:o.id})):n({type:"forkFailed"})},createCollection:async(e,t,n)=>{let{context:r,currentUser:o}=e,{collection:{type:c,title:l,description:u}}=t;const d=r.context;n({type:"showProcessingToast",key:"createCollection",message:"Creating collection\u2026"});try{const e=await(0,a.BL)(l,c,d||o,u);if(!e)return void n({type:"showErrorToast",key:"createCollection",message:"Oops, Creating collection failed. Try again?"});(0,i.MR)((0,i.y6)({type:"collection:manage:create",data:{trigger:"click",source:"createCollectionModal"},eventVersion:1,collection:e,currentUser:o})),n({type:"showSuccessToast",key:"createCollection",message:"Collection created."}),s().push((0,a.WG)(e))}catch(h){n({type:"showErrorToast",key:"createCollection",message:"Oops, Creating collection failed. Try again?"})}},editCollection:async(e,t,n)=>{let{collection:r,oldTitle:s}=t;n({type:"showProcessingToast",key:"editCollection",message:'Editing collection "'.concat(s,'"\u2026')});try{const{id:e,title:t,description:i,type:a,ordered:c}=r;await(0,o.Fv)("/collection/".concat(e,"/edit"),{title:t,description:i,type:a,ordered:c}),n({type:"showSuccessToast",key:"editCollection",message:'Collection "'.concat(s,'" edited.')}),l()}catch(i){n({type:"showErrorToast",key:"editCollection",message:'Oops, Editing collection "'.concat(s,'" failed. Try again?')})}},deleteCollection:async(e,t,n)=>{let{collection:r}=t;const{id:i}=r;n({type:"showProcessingToast",key:"deleteCollection",message:"Deleting collection\u2026"});try{await(0,o.Fv)("/collection/".concat(i,"/delete")),n({type:"showSuccessToast",key:"deleteCollection",message:"Collection deleted successfully!."}),s().replace((0,c.$2)(r.owner))}catch(a){n({type:"showErrorToast",key:"deleteCollection",message:"Oops, deleting collection failed. Try again?"})}},setCollectionThumbnail:async(e,t,n)=>{let{collection:r,thumbnail:s}=t;const{title:i,id:a}=r;n({type:"showProcessingToast",key:"setCollectionThumbnail",message:"Setting thumbnail for ".concat(i,"\u2026")});try{await(0,o.Fv)("/collection/".concat(a,"/thumbnail"),{thumbnail:s||null}),n({type:"showSuccessToast",key:"setCollectionThumbnail",message:'Collection "'.concat(i,'" thumbnail set.')}),l()}catch(c){n({type:"showErrorToast",key:"setCollectionThumbnail",message:"Oops, setting thumbnail failed. Try again?"})}},updateCollectionInCollections:async(e,t,n)=>{let{currentUser:r}=e,{addTo:s,removeFrom:a,onDismiss:c,collectionId:u}=t;(await Promise.allSettled([...s.map((e=>(0,o.Fv)("/collection/".concat(e.id,"/add"),{collection_listing_id:u}))),...a.map((e=>(0,o.Fv)("/collection/".concat(e.id,"/remove"),{collection_listing_id:u})))])).some((e=>"fulfilled"!==e.status))?n({type:"showErrorToast",message:"Oops, collections update failed. Try again?",key:"collections"}):(s.forEach((e=>(0,i.MR)((0,i.y6)({type:"collection:manage:addCollectionListing",data:{addedListingId:u},collection:e,currentUser:r,eventVersion:1})))),a.forEach((e=>(0,i.MR)((0,i.y6)({type:"collection:manage:removeCollectionListing",data:{removedListingId:u},collection:e,currentUser:r,eventVersion:1}))))),l(),c()}}},77180:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});const r={selectNotebook:(e,t)=>{let{notebook:n}=t;return n}}},24165:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var r=n(41799),s=n(68298),o=n(77180),i=n(810),a=n(54937);const c=()=>({type:"dashboard",slices:{notebook:{initialState:{},reducers:(0,r.Z)({},a.x,o.L)}},listeners:(0,r.Z)({},i.l,s.R)})},27011:function(e,t,n){e.exports=function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),s=n(t);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},s=Object.keys(e),o=0;o<s.length;o++)n=s[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(e),o=0;o<s.length;o++)n=s[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r,s=u(t);return!(r=n?(e=u(this).constructor,Reflect.construct(s,arguments,e)):s.apply(this,arguments))||"object"!=typeof r&&"function"!=typeof r?p(this):r}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,s=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw o}}return n}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return new Promise((function(n,r){var s,o=new Image;o.onload=function(){return n(o)},o.onerror=r,0==(null!==(s=e)&&!!s.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&t&&(o.crossOrigin=t),o.src=e}))}var b,x=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),j="undefined"!=typeof File,w={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},C=x?w.touch:w.desktop,k="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,S={x:.5,y:.5},M=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,s.default.Component);var e,t,n,r=m(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i(p(t=r.call(this,e)),"state",{drag:!1,my:null,mx:null,image:S}),i(p(t),"handleImageReady",(function(e){var n=t.getInitialSize(e.width,e.height);n.resource=e,n.x=.5,n.y=.5,n.backgroundColor=t.props.backgroundColor,t.setState({drag:!1,image:n},t.props.onImageReady),t.props.onLoadSuccess(n)})),i(p(t),"clearImage",(function(){t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.setState({image:S})})),i(p(t),"handleMouseDown",(function(e){(e=e||window.event).preventDefault(),t.setState({drag:!0,mx:null,my:null})})),i(p(t),"handleMouseUp",(function(){t.state.drag&&(t.setState({drag:!1}),t.props.onMouseUp())})),i(p(t),"handleMouseMove",(function(e){var n,r,s,o,i,a,c,u,d,h,p,m,g,f,v,y;e=e||window.event,!1!==t.state.drag&&(e.preventDefault(),s={mx:n=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:r=e.targetTouches?e.targetTouches[0].pageY:e.clientY},y=t.props.rotate,y=(y%=360)<0?y+360:y,t.state.mx&&t.state.my&&(o=t.state.mx-n,i=t.state.my-r,a=t.state.image.width*t.props.scale,c=t.state.image.height*t.props.scale,d=(u=t.getCroppingRect()).x,h=u.y,d*=a,h*=c,p=function(e){return e*(Math.PI/180)},m=Math.cos(p(y)),f=h+-o*(g=Math.sin(p(y)))+i*m,v={x:(d+o*m+i*g)/a+1/t.props.scale*t.getXScale()/2,y:f/c+1/t.props.scale*t.getYScale()/2},t.props.onPositionChange(v),s.image=l(l({},t.state.image),v)),t.setState(s),t.props.onMouseMove(e))})),i(p(t),"setCanvas",(function(e){t.canvas=e})),t.canvas=null,t}return e=c,(t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(k=1);var e,t,n=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(n),document&&(e=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},t=C.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),x&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===S||this.clearImage();var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(n),this.paintImage(n,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=C.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),x&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,r=e.rotate,s=e.border,o={},i=g(this.getBorders(s),2),a=i[0],c=i[1],l=t,u=n;return this.isVertical()?(o.width=u,o.height=l):(o.width=l,o.height=u),o.width+=2*a,o.height+=2*c,{canvas:o,rotate:r,width:t,height:n,border:s}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),t.backgroundColor&&(r.fillStyle=t.backgroundColor,r.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),r.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=t):(r.width=t,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:e.x-t/2,y:e.y-n/2,width:t,height:n},s=0,o=1-r.width,i=0,a=1-r.height;return(this.props.disableBoundaryChecks||1<t||1<n)&&(s=-r.width,i=-r.height,a=o=1),l(l({},r),{},{x:Math.max(s,Math.min(r.x,o)),y:Math.max(i,Math.min(r.y,a))})}},{key:"loadImage",value:function(e){var t;j&&e instanceof File?this.loadingImage=(t=e,new Promise((function(e,n){var r=new FileReader;r.onload=function(t){try{var r=y(t.target.result);e(r)}catch(t){n(t)}},r.readAsDataURL(t)})).then(this.handleImageReady).catch(this.props.onLoadFailure)):"string"==typeof e&&(this.loadingImage=y(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var n,r,s=this.getDimensions();return t/e<s.height/s.width?r=e*((n=this.getDimensions().height)/t):n=t*((r=this.getDimensions().width)/e),{height:n,width:r}}},{key:"paintImage",value:function(e,t,n,r){var s,o=3<arguments.length&&void 0!==r?r:k;t.resource&&(s=this.calculatePosition(t,n),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(o,o),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,s.x,s.y,s.width,s.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(s.x,s.y,s.width,s.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=g(this.getBorders(t),2),r=n[0],s=n[1],o=this.getCroppingRect(),i=e.width*this.props.scale,a=e.height*this.props.scale,c=-o.x*i,l=-o.y*a;return this.isVertical()?(c+=s,l+=r):(c+=r,l+=s),{x:c,y:l,height:a,width:i}}},{key:"paint",value:function(e){e.save(),e.scale(k,k),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,n,r,s,o,i,a,c,l=this.props.borderRadius,u=this.getDimensions(),d=g(this.getBorders(u.border),2),h=d[0],p=d[1],m=u.canvas.height,f=u.canvas.width;l=Math.max(l,0),l=Math.min(l,f/2-h,m/2-p),e.beginPath(),t=e,s=f-2*(n=h),o=m-2*(r=p),0===(i=l)?t.rect(n,r,s,o):(a=s-i,c=o-i,t.translate(n,r),t.arc(i,i,i,Math.PI,1.5*Math.PI),t.lineTo(a,0),t.arc(a,i,i,1.5*Math.PI,2*Math.PI),t.lineTo(s,c),t.arc(a,c,i,2*Math.PI,.5*Math.PI),t.lineTo(i,o),t.arc(i,c,i,.5*Math.PI,Math.PI),t.translate(-n,-r)),e.rect(f,0,-f,m),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),n=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,h(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),r=this.getDimensions(),o={width:r.canvas.width,height:r.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},i={width:r.canvas.width*k,height:r.canvas.height*k,style:l(l({},o),t)};return i[C.react.down]=this.handleMouseDown,x&&(i[C.react.mouseDown]=this.handleMouseDown),s.default.createElement("canvas",a({ref:this.setCanvas},i,n))}}])&&o(e.prototype,t),n&&o(e,n),c}();return i(M,"propTypes",{scale:r.default.number,rotate:r.default.number,image:r.default.oneOfType([r.default.string].concat(function(e){if(Array.isArray(e))return v(e)}(b=j?[r.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(b)||f(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:r.default.oneOfType([r.default.number,r.default.arrayOf(r.default.number)]),borderRadius:r.default.number,width:r.default.number,height:r.default.number,position:r.default.shape({x:r.default.number,y:r.default.number}),color:r.default.arrayOf(r.default.number),backgroundColor:r.default.string,crossOrigin:r.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:r.default.func,onLoadSuccess:r.default.func,onImageReady:r.default.func,onImageChange:r.default.func,onMouseUp:r.default.func,onMouseMove:r.default.func,onPositionChange:r.default.func,disableBoundaryChecks:r.default.bool,disableHiDPIScaling:r.default.bool,disableCanvasRotation:r.default.bool}),i(M,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),M}(n(45697),n(67294))},24654:function(){},98280:function(e,t,n){"use strict";n.d(t,{ZP:function(){return a},wx:function(){return o},yi:function(){return i}});var r=n(22954);function s(e,t){return function(n){return e+n*t}}function o(e,t){var n=t-e;return n?s(e,n>180||n<-180?n-360*Math.round(n/360):n):(0,r.Z)(isNaN(e)?t:e)}function i(e){return 1===(e=+e)?a:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):(0,r.Z)(isNaN(t)?n:t)}}function a(e,t){var n=t-e;return n?s(e,n):(0,r.Z)(isNaN(e)?t:e)}},22954:function(e,t){"use strict";t.Z=e=>()=>e},79591:function(e,t,n){"use strict";n.d(t,{ZP:function(){return i},hD:function(){return c}});var r=n(4447);function s(e,t,n,r,s){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*s)/6}var o=n(98280),i=function e(t){var n=(0,o.yi)(t);function s(e,t){var s=n((e=(0,r.B8)(e)).r,(t=(0,r.B8)(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),c=(0,o.ZP)(e.opacity,t.opacity);return function(t){return e.r=s(t),e.g=i(t),e.b=a(t),e.opacity=c(t),e+""}}return s.gamma=e,s}(1);function a(e){return function(t){var n,s,o=t.length,i=new Array(o),a=new Array(o),c=new Array(o);for(n=0;n<o;++n)s=(0,r.B8)(t[n]),i[n]=s.r||0,a[n]=s.g||0,c[n]=s.b||0;return i=e(i),a=e(a),c=e(c),s.opacity=1,function(e){return s.r=i(e),s.g=a(e),s.b=c(e),s+""}}}var c=a((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],a=r>0?e[r-1]:2*o-i,c=r<t-1?e[r+2]:2*i-o;return s((n-r/t)*t,a,o,i,c)}}));a((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],a=e[(r+1)%t],c=e[(r+2)%t];return s((n-r/t)*t,o,i,a,c)}}))}},function(e){e.O(0,[3714,5021,2656,8764,6817,270,6954,793,6086,3993,6646,6948,8367,9853,8780,5542,7105,8616,709,8111,1861,9774,2888,179],(function(){return t=8266,e(e.s=t);var t}));var t=e.O();_N_E=t}]);