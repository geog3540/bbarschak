"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2218],{64804:function(e,t,n){var o=n(41799),r=n(69396),s=n(85893);n(67294);t.Z=e=>(0,s.jsxs)("svg",(0,r.Z)((0,o.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,s.jsx)("path",{d:"M2 6C2 5.44772 2.44772 5 3 5H10C10.5523 5 11 5.44772 11 6V13C11 13.5523 10.5523 14 10 14H3C2.44772 14 2 13.5523 2 13V6Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M4 2.00004L12 2.00001C13.1046 2 14 2.89544 14 4.00001V12",stroke:"currentColor",strokeWidth:"2"}),e.children]}))},98768:function(e,t,n){var o=n(41799),r=n(69396),s=n(85893);n(67294);t.Z=e=>(0,s.jsxs)("svg",(0,r.Z)((0,o.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,s.jsx)("path",{d:"M6 9.5L3 6L6 2.5",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M4 6C5.91616 6 7.69217 6 9.49994 6C11.4329 6 13 7.567 13 9.5V9.5C13 11.433 11.433 13 9.5 13H9",stroke:"currentColor",strokeWidth:"2"})]}))},952:function(e,t,n){var o=n(41799),r=n(69396),s=n(85893);n(67294);t.Z=e=>(0,s.jsxs)("svg",(0,r.Z)((0,o.Z)({viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor"},e),{children:[(0,s.jsx)("circle",{r:"1.5",cx:"8",cy:"2.5"}),(0,s.jsx)("circle",{r:"1.5",cx:"8",cy:"7.5"}),(0,s.jsx)("circle",{r:"1.5",cx:"8",cy:"12.5"})]}))},86253:function(e,t,n){n.d(t,{V:function(){return we}});var o=n(85893),r=n(60357),s=n.n(r),a=n(94184),i=n.n(a),l=n(67294),c=n(60138),d=n(7138),u=n(48634),p=n(64804),v=n(42568),m=n(84236),f=n(4242);const h=e=>{let{node:t,value:n,formattedValue:r,displayValue:s,columnName:a,columnSummary:l}=e;const c=(0,m.O$)(l.type,n),d=(0,f.I0)();return(0,o.jsxs)(u.v2,{children:[(0,o.jsx)(v.j2,{className:i()(l.type,"w-100 h-100 bn bg-transparent pointer"),title:r,style:{font:"inherit",fontVariantNumeric:"inherit",padding:"4px 6px",textAlign:"inherit"},children:s}),(0,o.jsx)(u.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 overflow-auto","data-cy":"cell-filter-popover",children:(0,o.jsxs)(v.sd,{children:[(0,o.jsx)(v.sN,{onSelect:async()=>await navigator.clipboard.writeText(r),children:(0,o.jsxs)("div",{className:"flex items-center pv1",children:[(0,o.jsx)(p.Z,{className:"mr1"}),"Copy value"]})}),(0,o.jsx)("div",{className:"bt b--light-gray"}),(0,o.jsxs)("div",{className:"gray ph3 pv2 f7",children:["Filter ",(0,o.jsx)("span",{className:"fw6",children:a})," by value"]}),c.map((e=>(0,o.jsx)(v.sN,{style:{fontWeight:500,maxWidth:300},onSelect:()=>function(e,o){let r;r="v"===e||"nv"===e?{type:"primitive",value:o}:"date"===l.type?{type:"date",value:Number(n)}:{type:"primitive",value:n},d({id:t.id,type:"setDataOperations",operations:{filter:[...t.data.operations.filter,{type:e,operands:[{type:"column",value:a},r]}]}})}(e,l.type),children:(0,o.jsx)("div",{className:"truncate",children:"".concat((0,m.a8)(e,l.type)).concat("v"!==e&&"nv"!==e?" ".concat(r):"")})},e)))]})})]})},b=l.memo((function(e){let{data:t,node:n,summary:r,hoveredCell:a,setHoveredCell:l,colWidths:c,searchInfo:u}=e;const{mode:p}=n;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("tbody",{className:"jsx-9207bb13fdf50237 "+(i()("table"===p&&"pointer")||""),children:null===t||void 0===t?void 0:t.rows.map(((e,s)=>{const v=new Map(u?u[s].matches:[]);return(0,o.jsxs)("tr",{"data-cy":"cell-table-result-row",onPointerEnter:()=>l({row:s}),onPointerLeave:()=>l(void 0),className:"jsx-9207bb13fdf50237",children:[(0,o.jsx)("td",{className:"jsx-9207bb13fdf50237",children:u?u[s].index:s}),r&&Array.from(r.columns,((r,u)=>{let[f,b]=r;var g;const y=null===(g=t.operations.sort)||void 0===g?void 0:g.find((e=>{let{column:t}=e;return t===f})),x=(0,m.t2)(f,t.operations),k=y||x,w=e[f],j=(0,d.getTypeValidator)(b.type),S=j(w)?(0,m.QI)(b.type)(w):w instanceof Error?"<unavailable>":"".concat(w),M=v.get(f)?function(e,t){if(!e)return e;const n=new Set(t.map((e=>Array.from({length:e[1]-e[0]},((t,n)=>n+e[0])))).flat()),r=[];for(let o=0;o<e.length;o++){const t=n.has(o),s=r.length>0?r[r.length-1]:null;(null===s||void 0===s?void 0:s.highlighted)===t?s.part+=e[o]:r.push({highlighted:t,part:e[o]})}return r.map(((e,t)=>{let{highlighted:n,part:r}=e;return n?(0,o.jsx)("span",{className:"b",children:r},"".concat(r).concat(t)):r}))}(S,v.get(f)):S,_=(null===c||void 0===c?void 0:c.get(f))||150,R=(null===a||void 0===a?void 0:a.column)===f&&a.row===s;return(0,o.jsx)("td",{style:"table"===p&&R?{backgroundColor:"var(--light-silver)",border:"1px solid var(--moon-gray)"}:void 0,title:7*S.length>_?S:void 0,onPointerEnter:()=>l({column:f,row:s}),onPointerLeave:()=>l(void 0),className:"jsx-9207bb13fdf50237 "+(i()(k?"bg-washed-yellow":"",b.type,j(w)&&""!==w?"":"gray fw4")||""),children:"table"===p&&R?(0,o.jsx)(h,{node:n,value:w,formattedValue:S,displayValue:M,columnName:f,columnSummary:b}):(0,o.jsx)("div",{style:{padding:"4px 6px"},className:"jsx-9207bb13fdf50237",children:M})},u)})),(0,o.jsx)("td",{style:{width:"99%"},className:"jsx-9207bb13fdf50237"})]},s)}))}),(0,o.jsx)(s(),{id:"9207bb13fdf50237",children:"tbody.jsx-9207bb13fdf50237{max-height:300px;overflow-y:scroll}td.jsx-9207bb13fdf50237{padding:0px;border:1px solid var(--light-silver);border-bottom:solid 1px transparent;border-right:solid 1px transparent;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}tr.jsx-9207bb13fdf50237:hover{background-color:var(--near-white)}tr.jsx-9207bb13fdf50237:first-child td.jsx-9207bb13fdf50237{border-top:solid 1px transparent}td.jsx-9207bb13fdf50237:first-child{border-left:none}td.jsx-9207bb13fdf50237:nth-child(1){text-align:center;color:var(--moon-gray);padding:0 4px}.number.jsx-9207bb13fdf50237,.integer.jsx-9207bb13fdf50237,.bigint.jsx-9207bb13fdf50237{text-align:right}.number.jsx-9207bb13fdf50237,.integer.jsx-9207bb13fdf50237,.bigint.jsx-9207bb13fdf50237,.date.jsx-9207bb13fdf50237{font-variant-numeric:tabular-nums}"})]})}));var g=n(41799),y=n(69396),x=n(33090),k=n(99534);var w=e=>{var{direction:t}=e,n=(0,k.Z)(e,["direction"]);return(0,o.jsxs)("svg",(0,y.Z)((0,g.Z)({width:"8",height:"12",viewBox:"0 0 8 12",fill:"none"},n),{children:[(0,o.jsx)("path",{d:"M2.08062 5.5L5.91938 5.5C6.75788 5.5 7.22405 4.53007 6.70024 3.8753L4.78087 1.47609C4.38054 0.975679 3.61946 0.97568 3.21913 1.47609L1.29976 3.87531C0.775945 4.53007 1.24212 5.5 2.08062 5.5Z",fill:"asc"===t?"var(--dark-blue)":"desc"===t?"var(--faint-blue)":"var(--washed-blue)"}),(0,o.jsx)("path",{d:"M5.91938 6.5H2.08062C1.24212 6.5 0.775946 7.46993 1.29976 8.1247L3.21913 10.5239C3.61946 11.0243 4.38054 11.0243 4.78087 10.5239L6.70024 8.12469C7.22405 7.46993 6.75788 6.5 5.91938 6.5Z",fill:"desc"===t?"var(--dark-blue)":"asc"===t?"var(--faint-blue)":"var(--washed-blue)"})]}))},j=n(952),S=n(89905),M=n(98768),_=n(26836);const R=e=>{let{dispatch:t,id:n,nodeData:r,name:a,schema:c}=e;const{0:d,1:u}=(0,l.useState)(a),{0:p,1:v}=(0,l.useState)(),m=(0,l.useRef)(null);function f(e){if(0===e.length)return void u(a);var o;const s=null!==(o=r.operations.names)&&void 0!==o?o:[],i=new Map(s.map((e=>{let{column:t,name:n}=e;return[t,n]}))),l=s.map((e=>{let{name:t}=e;return t})).concat(c?Array.from(c.keys()).filter((e=>!i.has(e))):[]),d=(0,_.Q)(e,new Set(l)),p=null===r.operations.select.columns&&(null===c||void 0===c?void 0:c.size)?{select:{columns:Array.from(c.keys())}}:r.operations.select,v=s.find((e=>{let{name:t}=e;return t===a})),m=v?v.column:a;t({id:n,type:"setDataOperations",operations:(0,y.Z)((0,g.Z)({},p),{names:[...s.filter((e=>{let{column:t}=e;return t!==m})),...m!==d?[{column:m,name:d}]:[]]})})}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{ref:m,type:"text",maxLength:256,value:d,placeholder:a,onKeyDown:e=>{if("Enter"===e.key){const t=e.target;t.value!==a&&f(t.value),t.blur()}},onFocus:()=>v(!0),onBlur:e=>{e.target.value!==a&&f(e.target.value),v(!1)},onChange:e=>u("".concat(e.target.value)),className:"jsx-bc569f74a99de77c "+(i()(p&&"w-100","dark-gray truncate b br1 ph0 mv1 bg-transparent")||"")}),p&&(0,o.jsx)("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>{var e;const o=null===(e=r.operations.names)||void 0===e?void 0:e.find((e=>{let{name:t}=e;return t===a}));var s,i;(u(null!==(s=null===o||void 0===o?void 0:o.column)&&void 0!==s?s:a),o)&&t({id:n,type:"setDataOperations",operations:{names:null===(i=r.operations.names)||void 0===i?void 0:i.filter((e=>{let{name:t}=e;return t!==a}))}})},className:"jsx-bc569f74a99de77c bn bg-transparent gray pointer",children:(0,o.jsx)(M.Z,{height:14,width:14})}),(0,o.jsx)(s(),{id:"bc569f74a99de77c",children:"input.jsx-bc569f74a99de77c{border:none}input.jsx-bc569f74a99de77c:hover,input.jsx-bc569f74a99de77c:focus{-webkit-box-shadow:0 0 0 1px var(--light-gray);-moz-box-shadow:0 0 0 1px var(--light-gray);box-shadow:0 0 0 1px var(--light-gray)}input.jsx-bc569f74a99de77c::-webkit-input-placeholder{color:var(--gray)}input.jsx-bc569f74a99de77c:-moz-placeholder{color:var(--gray)}input.jsx-bc569f74a99de77c::-moz-placeholder{color:var(--gray)}input.jsx-bc569f74a99de77c:-ms-input-placeholder{color:var(--gray)}input.jsx-bc569f74a99de77c::-ms-input-placeholder{color:var(--gray)}input.jsx-bc569f74a99de77c::placeholder{color:var(--gray)}"})]})};var U=n(94587),C=n(88398),N=n(18776),V=n(83062),E=n(918),D=n(23838);const O=e=>{let{color:t="var(--observable-mid-gray)",text:n="Some values",backgroundColor:r="#E2E2E2",borderColor:s="#E2E2E2",height:a=30,width:i=160}=e;return(0,o.jsx)("div",{className:"tc observable-mid-gray fw4 sans-serif",style:{height:a,width:i,padding:"5px",border:"1px solid ".concat(s),backgroundColor:r,color:t,marginTop:"4px",borderRadius:"5px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:n,children:n})};var I=n(19799),T=n(69935),Z=n(95414),P=n(81416),L=n(74834),F=n(55917),A=n(1504),z=n(26599),B=n(84839),W=n(26589);const q={empty:{background:"rgba(211, 152, 23, .4)",rect:"rgb(211, 152, 23)",text:"#8D640D",stroke:"none"},unique:{background:"#E2E2E2",rect:"#E2E2E2",text:"#6E6E6E",stroke:"#E2E2E2"},default:{background:"rgba(123,146,209, .4)",rect:"rgba(123,146,209)",text:"#2B50B0",stroke:"#97BBF4"}};function H(e){return(0,I.WU)(",")(e)}function Y(e,t,n){return"date"===n?function(e,t){return t>T.Z.offset(e)?(0,W.g0)("'%y"):t>Z.Z.offset(e)?(0,W.g0)("%b '%y"):t>P.Ox.offset(e)?(0,W.g0)("%b %e"):t>L.Z.offset(e)?(0,W.g0)("%a %e"):t>F.Z.offset(e)?(0,W.g0)("%I %p"):t>A.Z.offset(e)?(0,W.g0)("%I:%M"):t>z.Z.offset(e)?(0,W.g0)(":%S"):t>B.Z.offset(e)?(0,W.g0)(".%L"):(0,W.g0)("%a %e")}(new Date(e||0),new Date(t||0)):function(e,t,n){let o;switch(n){case"integer":case"bigint":if(o=(0,I.WU)("d"),t-e<=30)return e=>o(e-1e-12);break;case"number":o=(0,I.WU)("~f");break;default:throw new Error("Unsupported number type: ".concat(n))}const r=Math.max(...[e,t].map(Math.abs));if(r<10||r>=1e4){const n=r<1?"~f":"~s";for(let r=2;r<8&&(o=(0,I.WU)(",.".concat(++r).concat(n)),o(e)===o(t));++r);}return o}(e||0,t||0,n)}function X(e,t){return"".concat(H(e)," ").concat(1===e?"row":"rows","  (").concat(function(e){const t=(0,I.WU)(".2p");return"100%"===t(e)&&1!==e?">99%":t(e)}((e||t)/t),")")}const G=e=>{let{name:t,colSummary:n,colFilteredSummary:r={},ready:s,formatter:a=String,hoveredValue:i,filters:c,setOperations:u,sendOperationsAnalyticsEvent:p,setChartLabel:v}=e;const{0:m,1:f}=(0,l.useState)(-1),h=130,b=30,{numMissing:x,nRows:k,type:w,data:j}=n,{data:S,numMissing:M}=r,_=e=>{var t;const n=e.nativeEvent.offsetX>z.range()[1]?x>0?-2:-1:Z?0:(0,U.ml)(L,z.invert(e.nativeEvent.offsetX))-1;f(n);const o=-2===n?x:null===(t=j[n])||void 0===t?void 0:t.count;v(o?X(o,k):void 0)};const R=(0,l.useRef)(null);function I(e){let{x:t}=e;return(0,o.jsx)("rect",{x:t,width:H,height:2,fill:"black",y:31,pointerEvents:"none"})}const T=0===j.length&&x>0,Z=1===j.length&&j[0].x1===j[0].x2,P=T||Z&&0===x,{x1:L,xMin:F,xMax:A,xScale:z,yScale:B,hoveredFormat:W,binWidth:H}=(0,l.useMemo)((()=>{var e,t;const n=j.map((e=>e.x1)),o=0===x?h:h/(j.length+2)*j.length;var r;const s=null!==(r=(0,C.Z)(j,(e=>e.x1)))&&void 0!==r?r:0;var a;const i=null!==(a=(0,N.Z)(j,(e=>e.x2)))&&void 0!==a?a:1,l=(0,E.Z)().domain([s,i]).range([0,o]),c=j.length?Z?o:l(j[0].x2)-l(j[0].x1)-1:0,d=(0,N.Z)([x||0,(0,N.Z)(j,(e=>e.count))||0]);return{x1:n,xMin:s,xMax:i,xScale:l,yScale:(0,E.Z)().domain([0,d]).range([b,0]),hoveredFormat:Y(null===(e=j[0])||void 0===e?void 0:e.x1,null===(t=j[0])||void 0===t?void 0:t.x2,w),binWidth:c}}),[j,h,b,x,w,Z]),G="symbol"!==typeof i,J=!(0,d.getTypeValidator)(w)(i,w),K=c&&c.filter((e=>e.operands[0].value===t&&"nv"===e.type)).length>0,$=-1===m?null:-2===m?{x1:z.invert(+z.range()[1]+H),x2:z.invert(h),count:x}:j[m],Q=Y(m<0?F:null===$||void 0===$?void 0:$.x1,m<0?A:null===$||void 0===$?void 0:$.x2,w);function ee(e,t,n){return(0,o.jsxs)("g",{children:[t>0&&(0,o.jsx)("rect",{x:+z.range()[1]+H,width:H,height:Math.max(1,B(0)-B(t)),y:Math.min(B(t),B(0)-1),fill:null!==n&&void 0!==n?n:q.empty.rect,fillOpacity:G&&!J||m>-1?.4:1,stroke:K?"black":"none"}),e.map(((e,t)=>(0,o.jsx)("rect",{x:Z?z.range()[0]:z(e.x1),width:H,height:0===e.count?0:(0,N.Z)([1,B(0)-B(e.count)]),y:0===e.count?B(0):Math.min(B(e.count),B(0)-1),fill:n||q.default.rect,fillOpacity:G||t!==m&&-1!==m?.4:1},t)))]})}const te=x>0?z.range()[1]:h,ne=(0,l.useMemo)((()=>(0,V.Yu)().extent([[0,0],[te,31]]).on("brush end",(e=>{var n;const o=c?c.filter((e=>e.operands[0].value!==t)):[];if(void 0===e.sourceEvent)return;if(!e.selection)return u((e=>o.length||e.filter?(0,y.Z)((0,g.Z)({},e),{filter:o.length?o:void 0}):e)),void p({filter:o.length?o:void 0});const[r,s]=Z?z.domain():e.selection.map(z.invert);o.push({type:"gte",operands:[{type:"column",value:"".concat(t)},{type:"date"===w?w:"primitive",value:r}]}),o.push({type:"lte",operands:[{type:"column",value:t},{type:"date"===w?w:"primitive",value:s}]}),o.push({type:"v",operands:[{type:"column",value:t},{type:"primitive",value:w}]}),u((e=>(0,y.Z)((0,g.Z)({},e),{filter:o}))),"end"===e.type&&"mouseup"===(null===(n=e.sourceEvent)||void 0===n?void 0:n.type)&&p({filter:o})}))),[te,c,b,t,u,z,w,Z,p]),oe=s?()=>{(0,D.Z)(R.current).call(ne.clear);let e,n=[];for(const o of null!==c&&void 0!==c?c:[])o.operands[0].value!==t?n.push(o):"nv"===o.type&&(e=!0);e||n.push({type:"nv",operands:[{type:"column",value:t},{type:"primitive",value:w}]}),n=0===n.length?void 0:n,u((e=>(0,y.Z)((0,g.Z)({},e),{filter:n}))),p({filter:n})}:void 0;var re;(0,l.useEffect)((()=>{var e,n;if(void 0===c)return;const o=c.filter((e=>e.operands[0].value===t)),r=null===(e=o.find((e=>"gte"===e.type)))||void 0===e?void 0:e.operands[1],s=null===(n=o.find((e=>"lte"===e.type)))||void 0===n?void 0:n.operands[1];if(void 0===r||void 0===s||r.value===s.value)return;const a=(0,D.Z)(R.current);a.call(ne),a.call(ne.move,[z(r.value),z(s.value)])}),[z,c,ne,t]),(0,l.useEffect)((()=>{if(!s)return;const e=(0,D.Z)(R.current);e.call(ne),c||e.call(ne.move,null)}),[c,ne,t,s]);const se=-2===m?"invalid ".concat(w):Q(null!==(re=null===$||void 0===$?void 0:$.x1)&&void 0!==re?re:F);var ae;let ie=-2===m?"":Q(null!==(ae=null===$||void 0===$?void 0:$.x2)&&void 0!==ae?ae:A);var le,ce;return ie===se&&(ie=""),(0,o.jsxs)("div",{style:{marginBottom:"12px"},children:[P&&(0,o.jsx)(O,{backgroundColor:T?q.empty.background:q.default.background,color:T?q.empty.text:q.default.text,borderColor:T?q.empty.text:q.default.text,height:b,width:h,text:T?"all values: invalid ".concat(w):"all values: ".concat(a(j[0].x1||0))}),!P&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("svg",{style:{overflow:"visible"},height:b,width:h,children:[ee(j,x,c?"#d1d1d1":void 0),S&&ee(S,null!==M&&void 0!==M?M:0),(0,o.jsx)("line",{y1:31,y2:31,x1:z.range()[0],x2:z.range()[1],strokeWidth:.5,stroke:"#d3d3d3"}),(0,o.jsx)("rect",{onPointerEnter:_,onPointerMove:_,onPointerLeave:function(){f(-1),v(void 0)},width:132,x:-1,height:50,fillOpacity:.1,fill:"white"}),G&&(x>0&&J?(0,o.jsx)(I,{x:+z.range()[1]+H}):(0,o.jsx)("line",{x1:z(i),x2:z(i),y1:0,y2:b,strokeWidth:2,stroke:q.default.rect})),-1!==m&&(0,o.jsx)(I,{x:-2===m?+z.range()[1]+H:Z?z.range()[0]:z(null===$||void 0===$?void 0:$.x1)}),x>0&&-1===m&&(0,o.jsx)("text",{className:"fw4",x:+z.range()[1]+3*H/2,y:45,fill:q.empty.rect,textAnchor:"middle",children:"\u2300"}),x>0&&s&&(0,o.jsx)("rect",{fill:"none",stroke:(null===c||void 0===c?void 0:c.some((e=>e.operands[0].value===t&&"n"===e.type)))?"#d2d2d2":"none",width:H,x:+z.range()[1]+H,onPointerDown:oe,height:b,style:{cursor:"pointer"}}),(0,o.jsx)("g",{ref:R})]}),(0,o.jsxs)("div",{className:"fw4 relative mid-gray",style:{pointerEvents:"none",zIndex:-1},children:[!(G&&J)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"absolute",style:{left:"".concat(-2===m?+z.range()[1]+ +H:z(null!==(le=null===$||void 0===$?void 0:$.x1)&&void 0!==le?le:F),"px"),transform:$?"translate(-100%, 0)":"",color:-2===m?q.empty.rect:"#555555"},children:se}),(0,o.jsx)("div",{className:"absolute",style:{left:"".concat(z(null!==(ce=null===$||void 0===$?void 0:$.x2)&&void 0!==ce?ce:A),"px"),transform:$?"translate(0, 0)":"translate(-100%, 0)"},children:ie})]}),G&&(x>0&&J?(0,o.jsx)("div",{className:"bg-white absolute",style:{left:"".concat(+z.range()[1]+H,"px"),transform:"translate(-100%, 0)",color:q.empty.rect},children:"invalid ".concat(w)}):(0,o.jsx)("div",{className:"bg-white absolute",style:{left:"".concat(z(i),"px"),paddingLeft:"4px",paddingRight:"4px",borderRadius:"5px",transform:"translate(-50%, 0)",color:"rgb(44, 85, 172)"},children:W(i)}))]})]})]})};var J=n(72255),K=n(40477),$=n(98837);const Q="<empty string>",ee=e=>{let{colSummary:t,hoveredValue:n,name:r,ready:s,setOperations:a,filters:c,filteredData:d,sendOperationsAnalyticsEvent:u,setChartLabel:p}=e;const v=(0,l.useMemo)((()=>null===c||void 0===c?void 0:c.filter((e=>e.operands[0].value===r))),[c,r]),f=130,h=30,{type:b,data:x,isUnique:k,numCategories:w}=t,j=(0,l.useMemo)((()=>(null===v||void 0===v?void 0:v.map((e=>{const{type:t}=e;if("nv"===t)return"invalid ".concat(b);if("in"===t)return e.operands.filter((e=>"primitive"===e.type)).map((e=>e.value));if("nin"===t){const t=e.operands.filter((e=>"primitive"===e.type)).map((e=>e.value));return x.filter((e=>1!==e.categoryType&&!t.includes(e.label))).map((e=>e.label))}return[]})).flat())||[]),[x,v,b]),S=null===v||void 0===v?void 0:v.map((e=>{let{type:t}=e;return t})),M=w,{0:_,1:R}=(0,l.useState)(-1),C=s?e=>{const t=e.nativeEvent.offsetX<=5?1:e.nativeEvent.offsetX-5,n=D.invert(t),o=(0,U.Nw)(V,n)-1,s=T[o],i=[];if(1===s.categoryType){(null===S||void 0===S?void 0:S.includes("nv"))||i.push({type:"nv",operands:[{type:"column",value:r},{type:"primitive",value:b}]})}else if(2===s.categoryType){if(!(null===S||void 0===S?void 0:S.includes("nin"))){const e={type:"nin",operands:[{type:"column",value:r}]};for(const t of T)0===t.categoryType&&e.operands.push({type:"primitive",value:t.label});i.push({type:"v",operands:[{type:"column",value:r},{type:"primitive",value:b}]}),i.push(e)}}else{const t=s.label;let n=(null===S||void 0===S?void 0:S.includes("in"))?j:[];if(e.getModifierState("Meta")){const e=n.indexOf(t);e>-1?n.splice(e,1):n.push(t)}else n=1===n.length&&n[0]===t?[]:[t];n.length>=1&&i.push({type:"in",operands:[{type:"column",value:r},...n.map((e=>({type:"primitive",value:e})))]})}var l;const d=[...null!==(l=null===c||void 0===c?void 0:c.filter((e=>{let{operands:t}=e;return t[0].value!==r})))&&void 0!==l?l:[],...i];a((e=>(0,y.Z)((0,g.Z)({},e),{filter:d.length?d:void 0}))),u({filter:d.length?d:void 0})}:void 0;function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rect";return 1===e?q.empty[t]:2===e?q.unique[t]:q.default[t]}const{x1:V,xScale:D,total:I,allScaled:T,displayData:Z,filteredScaled:P,smallCategories:L}=(0,l.useMemo)((()=>{const e=x.map((e=>e.x1)),t=(0,E.Z)().domain([0,1]).range([0,f]),n=(0,J.Z)(x,(e=>e.count)),o=x.map((e=>(0,g.Z)({width:t(e.x2-e.x1)},e)));let r=-1,s=-1;const a=o.filter(((e,t)=>1===e.categoryType?(r=t,!1):2!==e.categoryType||(s=t,!1))),i=d&&d.length>0?new Map(d.map((e=>["".concat(e.label).concat(e.categoryType),e.count]))):void 0,l=(0,K.Z)($.Z).right(a.map((e=>e.width)),2),c=a.slice(0,l);l<a.length-1&&c.push(a.slice(l,a.length).reduce(((e,t)=>({label:"small display",categoryType:3,x1:0,x2:0,count:e.count+t.count,width:e.width+t.width})))),s>=0&&c.push(o[s]),r>=0&&c.push(o[r]);const u=o.filter((e=>e.width<2));return{x1:e,xScale:t,total:n,allScaled:o,displayData:c,filteredScaled:i,smallCategories:u}}),[x,d]);(0,l.useEffect)((()=>{if(n===m.V8)return R(-1),void p(void 0);const e=typeof n!==b?null:n;var t;const o=null===e?T.find((e=>1===e.categoryType)):null!==(t=T.find((t=>t.label===e)))&&void 0!==t?t:T.find((e=>2===e.categoryType));var r;const s=null!==(r=null===o||void 0===o?void 0:o.x1)&&void 0!==r?r:0,a=(0,U.Nw)(V,s);R(a),p(a>=0&&a<T.length?X(T[a].count,I):void 0)}),[n,V,T,b,p,I]);const F=-1===_?null:T[_];var A;return(0,o.jsxs)("div",{className:"relative",style:{marginBottom:"16px"},children:[(k||1===M)&&(0,o.jsx)(O,{height:h,backgroundColor:2===x[0].categoryType?q.unique.background:1===x[0].categoryType?q.empty.background:q.default.background,color:2===x[0].categoryType?q.unique.text:1===x[0].categoryType?q.empty.text:q.default.text,borderColor:2===x[0].categoryType?q.unique.text:1===x[0].categoryType?q.empty.text:q.default.text,text:2===x[0].categoryType?x[0].label:1===x[0].categoryType?"all values: invalid ".concat(b):'all values: "'.concat(x[0].label,'"'),width:f}),!k&&M>1&&(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsxs)("div",{style:{width:f,height:h,marginBottom:"3px",display:"flex",borderRadius:"5px",overflow:"hidden"},children:[Z.map(((e,t)=>{const n=!(2!==e.categoryType||!(null===S||void 0===S?void 0:S.includes("nin")))||(!(1!==e.categoryType||!(null===S||void 0===S?void 0:S.includes("nv")))||j.includes(e.label)),r=c?((null===P||void 0===P?void 0:P.get("".concat(e.label).concat(e.categoryType)))||0)/e.count*100:100,s=2===e.categoryType?"unique":"".concat(""===e.label?Q:e.label);return(0,o.jsx)("div",{title:s,className:"flex items-center fw4 sans-serif",style:{background:3===e.categoryType?"repeating-linear-gradient(\n                      to right,\n                      ".concat(c?"#d1d1d1":q.default.rect," 0px,\n                      ").concat(c?"#d1d1d1":q.default.rect," 1px,\n                      ").concat(c?"white":q.default.stroke," 1px,\n                      ").concat(c?"white":q.default.stroke," 2px\n                    )"):c?"linear-gradient(to top, ".concat(N(e.categoryType,"rect")," ").concat(r,"%, #d1d1d1 ").concat(r,"%, #d1d1d1 ").concat(100-r,"%)"):N(e.categoryType,"rect"),width:e.width,height:h,borderColor:n?"black":c?"white":N(e.categoryType,"stroke"),borderWidth:n?"1px":t===Z.length-1?"0px":"0px 1px 0px 0px",borderStyle:"solid",opacity:-1===_||(null===F||void 0===F?void 0:F.label)===e.label&&F.categoryType===e.categoryType&&F.width>=1?1:.4,textAlign:"center",borderRadius:0===t?"5px 0px 0px 5px":t===Z.length-1?"0px 5px 5px 0px":"0px",position:"relative",boxSizing:"border-box"},children:e.count/I>.1&&"small display"!==e.label&&(0,o.jsx)("span",{style:{overflow:"hidden",width:"calc(100% - 4px + ".concat(n?"1px":"0px",")"),left:n?"-1px":"0px",position:"absolute",padding:"0px 2px",color:2===e.categoryType?q.unique.text:"white"},children:s})},"".concat(e.label,"_").concat(e.categoryType))})),v&&L.length>0&&j.map((e=>{var t;const n=null===(t=L.find((t=>t.label===e)))||void 0===t?void 0:t.x1;return void 0===n?null:(0,o.jsx)("div",{style:{width:f*n,height:h,position:"absolute",borderRight:"1px solid ".concat(q.default.rect)}},"highlight-mark".concat(e))})),(null===F||void 0===F?void 0:F.width)<2&&(0,o.jsx)("div",{style:{width:f*(null!==(A=null===F||void 0===F?void 0:F.x1)&&void 0!==A?A:0),height:h,position:"absolute",borderRight:"1px solid ".concat(q.default.rect)}})]}),(0,o.jsx)("div",{onPointerMove:e=>{const t=e.nativeEvent.offsetX<5?1:e.nativeEvent.offsetX-5,n=D.invert(t),o=(0,U.Nw)(V,n)-1;R(o),p(o>=0&&o<T.length?X(T[o].count,I):void 0)},onPointerLeave:function(){p(void 0),R(-1)},onPointerDown:C,className:i()("absolute",s?"pointer":""),style:{top:"0px",left:"-".concat(5,"px"),width:"".concat(140,"px"),height:50,backgroundColor:"rgba(255,255,255, .01)"}}),(0,o.jsx)("div",{className:"mid-gray fw4 absolute",style:{pointerEvents:"none",height:"15px",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:j.length>0?j.map((e=>""===e?Q:e)).join(", "):F?"".concat(""===F.label?Q:F.label):"".concat(H(M)," ").concat(M>1?"categories":"category")})]})]})};var te=n(90793),ne=n(14416),oe=n(76522),re=n(49516);const se=e=>{let{value:t,inferredType:n,node:r,name:s}=e;const a=(0,ne.I0)(),i=["raw","other","array","object","buffer","integer"];return(0,o.jsxs)(te.vz,{onChange:e=>{var t,o;const i=(null===(o=null===(t=r.data.operations.names)||void 0===t?void 0:t.find((e=>{let{name:t}=e;return s===t})))||void 0===o?void 0:o.column)||s,l="auto"===e?n:e,c=r.data.operations.filter.filter((e=>e.operands[0].value!==i));var d;a({type:"setDataOperations",id:r.id,operations:{types:[...(null!==(d=r.data.operations.types)&&void 0!==d?d:[]).filter((e=>e.name!==i)),{name:s,type:l}],filter:c}})},value:t===n?"auto":t,className:"pointer",style:{flexShrink:"0"},children:[(0,o.jsxs)(te.Y4,{className:"flex items-center fw4 mid-gray outline-0 mb2",children:[(0,o.jsx)("div",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis"},children:t}),(0,o.jsx)(te.r9,{className:"inline-flex items-center gray ml1",children:(0,o.jsx)(oe.Z,{})})]}),(0,o.jsxs)(te.jI,{className:"shadow-4 bg-white ba b--silver br2 mt1 pb1 pt1",style:{width:"160px"},children:[(0,o.jsx)("div",{className:"gray f7 ph2 pt1 pb1",children:"Column type"}),(0,o.jsx)("div",{className:"bb b--silver mt1 mb1"}),(0,o.jsxs)(te.uf,{className:"outline-0",style:{padding:0,margin:0},children:[(0,o.jsx)(ae,{value:"auto",selected:n===t,sideLabel:n},"auto"),(0,o.jsx)(ae,{value:"raw",selected:"raw"===t},"raw"),(0,o.jsx)("div",{className:"bb b--silver mt1 mb1"}),Array.from(m.IG).filter((e=>!i.includes(e))).map((e=>(0,o.jsx)(ae,{value:e,selected:e===t&&n!==t},e)))]})]})]})},ae=e=>{let{value:t,selected:n,sideLabel:r}=e;return(0,o.jsxs)(te.wt,{value:t,className:"flex pl2 pr3 pv1 f6 fw5 dark-gray pointer",style:{gap:"8px"},children:[n?(0,o.jsx)(re.Z,{style:{flex:"0 0 16px"}}):(0,o.jsx)("div",{style:{flex:"0 0 16px"}}),(0,o.jsxs)("div",{className:i()("flex selected",r&&"items-center justify-between w-100 truncate"),children:[(0,o.jsx)("span",{className:"truncate",children:t}),r&&(0,o.jsx)("span",{className:"gray fw4",children:r})]})]},t)};function ie(e,t){if(void 0===t)return[];const n=[];if("continuous"===t.summaryType){if(void 0!==e.find((e=>{let{type:t}=e;return"nv"===t})))return t.numMissing>0?e:[];const i=e.find((e=>{let{type:t}=e;return"gte"===t})),l=e.find((e=>{let{type:t}=e;return"lte"===t}));if(void 0===l||void 0===i)return[];if(o=i.operands[1].value,r=l.operands[1].value,s=t.min,a=t.max,!(o<a&&s<r))return[];for(const o of e){const e=o.operands[0];if("in"!==o.type&&"nin"!==o.type)if("lte"===o.type&&o.operands[1].value>t.max){const r={type:o.type,operands:[e,{type:"primitive",value:t.max}]};n.push(r)}else if("gte"===o.type&&o.operands[1].value<t.min){const r={type:o.type,operands:[e,{type:"primitive",value:t.min}]};n.push(r)}else n.push(o)}}else{const o=new Set(t.data.map((e=>e.label)));for(const t of e){const e=t.operands[0];if("lt"!==t.type&&"gt"!==t.type&&("in"===t.type||"nin"===t.type)){const r=t.operands.filter((e=>{let{type:t,value:n}=e;return"primitive"===t&&o.has(n)}));r.length>0&&n.push({type:t.type,operands:[e,...r]})}}}var o,r,s,a;return n}const le=e=>{let{name:t,canShowSummaries:n,setDraggingColumn:r,width:a,node:i,schema:c,setColumnsFlash:d,colSummary:u,colFilteredSummary:p,operations:v,hoveredValue:h,setOperations:b,isUntypedDialect:x,ready:k,embed:j}=e;var S,M,_;const{id:U}=i,C=(0,f.I0)(),N=(0,f.v9)((e=>{let{notebook:t}=e;var n;return"pending"===(null===(n=t.workerStatus.get(U))||void 0===n?void 0:n.status)})),V=n?70:void 0,E=null===(S=v.sort)||void 0===S?void 0:S.find((e=>{let{column:n}=e;return n===t})),D=(0,m.t2)(t,v),O=E||D,I="table"===i.mode,{0:T,1:Z}=(0,l.useState)(!1),{0:P,1:L}=(0,l.useState)(),F=(0,l.useCallback)((e=>{const{filter:t,sort:n}=e;C({type:"setLocalOperations",id:U,operations:{filter:t,sort:n}})}),[C,U]);return(0,o.jsxs)("th",{onMouseUp:()=>r(void 0),style:{width:a,padding:5,height:V,background:O?"var(--washed-yellow)":""},className:"jsx-86b862ef0ed2c097 fw4 mid-gray",children:[(0,o.jsxs)("div",{className:"jsx-86b862ef0ed2c097 flex justify-between items-center",children:["table"===i.mode?(0,o.jsx)(R,{dispatch:C,id:U,nodeData:i.data,name:t,schema:c}):(0,o.jsx)("div",{title:t,className:"jsx-86b862ef0ed2c097 dark-gray truncate b",children:t}),(0,o.jsxs)("div",{style:{visibility:T||void 0!==E?"visible":void 0},className:"jsx-86b862ef0ed2c097 pl1 flex items-center column-menu",children:[(0,o.jsx)("button",{onClick:e=>{return n=t,o=e.shiftKey,void b((e=>{var t;const r=null===(t=e.sort)||void 0===t?void 0:t.find((e=>{let{column:t}=e;return t===n})),s=void 0===r?{column:n,direction:o?"desc":"asc"}:"asc"===r.direction?{column:n,direction:"desc"}:void 0;return F({sort:s?[s]:void 0}),(0,y.Z)((0,g.Z)({},e),{sort:s?[s]:void 0})}));var n,o},title:"Sort column",className:"jsx-86b862ef0ed2c097 pointer bn pl1 pr0 pv1 bg-transparent",children:(0,o.jsx)(w,{direction:(null===E||void 0===E?void 0:E.column)===t?E.direction:void 0})}),!j&&(0,o.jsx)(ce,{allowTableOperations:I,setFocus:Z,hide:function(){const e=Array.from((null===c||void 0===c?void 0:c.keys())||[]);if(!N&&I){var n;const s=null===(n=i.data.operations.names)||void 0===n?void 0:n.find((e=>{let{name:n}=e;return n===t}));var o;const a=null!==(o=null===s||void 0===s?void 0:s.column)&&void 0!==o?o:t;var r;C({type:"setDataOperations",id:U,operations:{select:{columns:(null!==(r=i.data.operations.select.columns)&&void 0!==r?r:e).filter((e=>e!==a))}},source:"table"}),d&&d(!0)}},currentSort:null===(_=null===(M=v.sort)||void 0===M?void 0:M.find((e=>{let{column:n}=e;return n===t})))||void 0===_?void 0:_.direction,onSort:function(e){b((n=>{const o=e?[{column:t,direction:e}]:void 0;return F({sort:o}),(0,y.Z)((0,g.Z)({},n),{sort:o})}))}})]})]}),(0,o.jsx)("div",{className:"jsx-86b862ef0ed2c097 mb2 h1",children:P||(x&&"table"===i.mode?(0,o.jsx)(se,{value:u.type,inferredType:u.inferred,node:i,name:t},"type"):u.type)}),n&&("categorical"===u.summaryType?(0,o.jsx)(ee,{name:t,colSummary:u,ready:k,filteredData:null===p||void 0===p?void 0:p.data,hoveredValue:h,setOperations:b,filters:v.filter,sendOperationsAnalyticsEvent:F,setChartLabel:L}):(0,o.jsx)(G,{colSummary:u,ready:k,colFilteredSummary:p,formatter:(0,m.QI)(u.type),hoveredValue:(A=h,A instanceof Date||"symbol"===typeof A||null===A||void 0===A?A:Number(A)),name:t,filters:v.filter,setOperations:b,sendOperationsAnalyticsEvent:F,setChartLabel:L})),(0,o.jsx)("button",{onMouseDown:()=>r(t),className:"jsx-86b862ef0ed2c097 resize-handle"}),(0,o.jsx)(s(),{id:"86b862ef0ed2c097",children:"th.jsx-86b862ef0ed2c097{position:relative;background:var(--white);border-bottom:solid 1px var(--light-silver);border-left:solid 1px var(--light-silver);z-index:1}th.jsx-86b862ef0ed2c097 .column-menu.jsx-86b862ef0ed2c097{visibility:hidden}th.jsx-86b862ef0ed2c097:hover .column-menu.jsx-86b862ef0ed2c097{visibility:visible}th.jsx-86b862ef0ed2c097:first-child{border-left:none;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:30px;padding:7px}th: hover {z-index:9999}.resize-handle.jsx-86b862ef0ed2c097{background-color:var(--transparent);border:none;display:block;padding:0px;position:absolute;cursor:col-resize;width:3px;right:0;top:0;z-index:1;height:100px}.resize-handle.jsx-86b862ef0ed2c097:hover{background-color:var(--light-silver)}"})]},t);var A},ce=e=>{let{allowTableOperations:t,onSort:n,hide:r,currentSort:s,setFocus:a}=e;const i=[void 0,"asc","desc"],l="flex w-100 pv1 ph2 bg-transparent bn hover-bg-light-silver items-center pointer hover-b--silver fw6 tl";return(0,o.jsx)(v.v2,{children:e=>{let{isExpanded:c}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v.j2,{title:"Column actions","aria-label":"Column actions",onClick:()=>a(c),className:"bn pa0 bg-transparent washed-blue pointer",children:(0,o.jsx)(j.Z,{})}),(0,o.jsx)(v.YI,{style:{width:"200px"},"data-cy":"table-head-menu-popover",className:"bg-white ba b--silver br2 shadow-4 outline-0",children:(0,o.jsxs)("div",{className:"dark-gray fw6 pv2",children:[i.map((e=>{const t=e?"Sort ".concat(e,"ending"):"No sorting";return(0,o.jsxs)("button",{title:t,className:l,onClick:()=>n(e),children:[(0,o.jsx)(x.E,{className:"flex",checked:e?s===e:!s,readOnly:!0}),(0,o.jsx)(w,{direction:e,className:"mr2"}),(0,o.jsx)("div",{children:t})]},null!==e&&void 0!==e?e:"undefined")})),t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"mt1 bt b--silver pt2"}),(0,o.jsxs)("button",{title:"Hide column","aria-label":"Hide column",className:l,onClick:()=>{r()},children:[(0,o.jsx)(S.Z,{className:"pr2"}),(0,o.jsx)("div",{children:"Hide"})]})]})]})})]})}})};var de=n(60486),ue=n(60803),pe=n(48627),ve=n(10718);const me=e=>{let{node:t,summary:n,filteredSummary:r,hoveredRow:a,operations:i,setOperations:c,colWidths:d,setColWidths:u,setColumnsFlash:p,embed:v,tableRef:h}=e;var b;const{id:g,data:y}=t,x=(0,f.I0)(),k=(0,l.useRef)(0),w=(0,l.useRef)(null),j=(0,l.useRef)(),S=(0,ve.pN)(y,x,t.mode),{0:M,1:_}=(0,l.useState)(null),{0:R,1:U}=(0,l.useState)();var C;const N="table"!==(null===(b=y.display)||void 0===b?void 0:b.mode)||(null===(C=y.display.showSummaries)||void 0===C||C),V=!(!N||!(null===n||void 0===n?void 0:n.nRows))&&n.nRows>1;function E(){var e;w.current=requestAnimationFrame(E),null===(e=h.current)||void 0===e||e.scrollBy(k.current,0),u((e=>{if(!R)return e;const t=new Map(e),n=e.get(R);return t.set(R,Math.max(150,(null!==n&&void 0!==n?n:0)+k.current)),t}))}const D=(0,l.useCallback)((()=>{U(void 0),w.current&&(cancelAnimationFrame(w.current),w.current=null)}),[]);return(0,l.useEffect)((()=>{if(null===y.source.name)j.current=void 0,_(null);else{const e=new pe.FJ(y.source);j.current=e,e.run(x).then((t=>{e===j.current&&_(t)}),(()=>{e===j.current&&_(null)}))}}),[x,y.source]),(0,l.useEffect)((()=>(window.addEventListener("mouseup",D),()=>window.removeEventListener("mouseup",D))),[D]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("thead",{onPointerMove:e=>{R&&(u((t=>{const n=new Map(t),o=t.get(R);return n.set(R,Math.max(150,(null!==o&&void 0!==o?o:0)+e.movementX)),n})),function(e){var t;const n=null===(t=h.current)||void 0===t?void 0:t.getBoundingClientRect();k.current=n&&e-n.right+30>0?5:0,k.current&&!w.current?w.current=requestAnimationFrame(E):w.current&&!k.current&&(cancelAnimationFrame(w.current),w.current=null)}(e.clientX))},className:"jsx-a65a0a1008c23a01 sticky top-0 v-top tl",children:(0,o.jsxs)("tr",{className:"jsx-a65a0a1008c23a01",children:[(0,o.jsx)("th",{role:"button","data-cy":"cell-table-header-row",onClick:()=>{x({type:"setDisplay",id:g,display:{mode:"table",showSummaries:!N}})},className:"jsx-a65a0a1008c23a01",children:(0,o.jsx)(ue.Z,{style:{transform:N?"":"rotate(-90deg)",transition:"transform 150ms ease"}})}),n&&Array.from(n.columns,(e=>{let[s,l]=e;const u=a?a[s]:m.V8,f=(null===d||void 0===d?void 0:d.get(s))||150;return(0,o.jsx)(le,{name:s,hoveredValue:u,width:f,canShowSummaries:V,colSummary:l,colFilteredSummary:null===r||void 0===r?void 0:r.columns.get(s),operations:i,setOperations:c,node:t,setDraggingColumn:U,ready:n.ready,setColumnsFlash:p,isUntypedDialect:(0,de.$S)(null===M||void 0===M?void 0:M.dialect),schema:S,embed:v},s)})),(0,o.jsx)("th",{style:{width:"99%"},className:"jsx-a65a0a1008c23a01"})]})}),(0,o.jsx)(s(),{id:"a65a0a1008c23a01",children:"th.jsx-a65a0a1008c23a01{position:relative;background:var(--white);border-bottom:solid 1px var(--light-silver);border-left:solid 1px var(--light-silver)}th.jsx-a65a0a1008c23a01:first-child{border-left:none;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:30px;padding:7px}.resize-handle.jsx-a65a0a1008c23a01{background-color:var(--transparent);border:none;display:block;padding:0px;position:absolute;cursor:col-resize;width:3px;right:0;top:0;z-index:1;height:100px}.resize-handle.jsx-a65a0a1008c23a01:hover{background-color:var(--light-silver)}"})]})};var fe=n(3961),he=n(44754),be=n(69150),ge=n(72760);class ye extends fe.i{async process(e){return await e({type:"request_table_summary",node_id:this._id,filters:this._filters})}constructor(e,t){super(),this._id=e,this._filters=t}}class xe extends fe.i{async process(e){return await e({type:"request_table_rows",node_id:this._id,operations:this._operations,start:this._start,end:this._end,search:this._search})}constructor(e,t,n,o,r){super(),this._id=e,this._start=t,this._end=n,this._operations=o,this._search=r}}const ke="var(--border-radius-2)",we=l.memo((function(e){let{node:t,operations:n,setOperations:r,setColumnsFlash:a,embed:d}=e;var u,p;const{id:v,pinned:m}=t,h=(0,f.I0)();var g;const{generation:y,leftRadius:x,bottomRadius:k}=(0,f.v9)((e=>{let{notebook:{hoverId:t,focusId:n,workerStatus:o}}=e;var r,s;return{generation:null!==(g=null===(r=o.get(v))||void 0===r||null===(s=r.display)||void 0===s?void 0:s.generation)&&void 0!==g?g:-1,leftRadius:t===v||n===v?void 0:ke,bottomRadius:n===v||m?void 0:ke}})),{0:w,1:j}=(0,l.useState)(),{0:S,1:M}=(0,l.useState)(),{0:_,1:R}=(0,l.useState)(),{0:U,1:C}=(0,l.useState)(20),{0:N,1:V}=(0,l.useState)(),{0:E,1:D}=(0,l.useState)(new Map),[O,I,T]=(0,he.G)(""),Z=(0,l.useRef)(null),P=(0,l.useRef)(null),L=(0,l.useRef)(),F=(0,l.useRef)(),A=(0,l.useRef)(),z=(null===w||void 0===w?void 0:w.generation)===y&&w.operations===n&&w.debouncedSearch===T?w.rows.length:0;(0,l.useEffect)((()=>{const e=new ye(v);L.current=e,e.run(h).then((t=>{e===L.current&&M(t)}),(t=>{e===L.current&&console.error("table data failed: ".concat(t))}))}),[v,h,y]),(0,l.useEffect)((()=>{if(!n.filter)return void R(void 0);const e=new ye(v,n.filter);F.current=e,e.run(h).then((t=>{e===F.current&&R(t)}),(t=>{e===F.current&&console.error("table data failed: ".concat(t))}))}),[v,h,y,n.filter]),(0,l.useEffect)((()=>{if(z>=U)return;const e=new xe(v,z,U,n,T);A.current=e,e.run(h).then((t=>{e===A.current&&j((e=>({rows:(null===e||void 0===e?void 0:e.generation)!==y||e.operations!==n||e.debouncedSearch!==T?t.rows:e.rows.concat(t.rows),searchInfo:t.searchInfo,generation:y,operations:n,debouncedSearch:T})))}),(t=>{e===A.current&&console.error("table data failed: ".concat(t))}))}),[v,h,n,y,z,U,T]),(0,l.useEffect)((()=>{r((e=>{var t;if(void 0===S||void 0===e.filter&&void 0===e.sort)return e;let n=[];if(e.filter){const t=e.filter.reduce(((e,t)=>{const n=t.operands[0].value;return e.has(n)?e.get(n).push(t):e.set(n,[t]),e}),new Map);for(const[e,o]of t.entries()){const t=ie(o,S.columns.get(e));n=[...n,...t]}}const o=Array.from(S.columns.keys()),r=null===(t=e.sort)||void 0===t?void 0:t.filter((e=>o.includes(e.column)));return{filter:n.length?n:void 0,sort:(null===r||void 0===r?void 0:r.length)?r:void 0}}))}),[S,r]),(0,l.useEffect)((()=>{var e;null===(e=Z.current)||void 0===e||e.scrollTo({top:0}),C(20)}),[t,n,T]),(0,l.useEffect)((()=>{(null===S||void 0===S?void 0:S.columns)&&D(new Map(Array.from(S.columns.entries(),(e=>{let[t,n]=e;var o;const r=null!==(o=n.maxLength)&&void 0!==o?o:0;return[t,7*r<150?150:7*r<250?250:350]}))))}),[S]),(0,l.useEffect)((()=>h({id:v,type:"tableSearch"})),[h,v,T]);var B,W;return(0,o.jsxs)("div",{className:"jsx-fec60529c9a8369d relative pea",children:[(0,o.jsx)("div",{ref:Z,onScroll:e=>{let{currentTarget:t}=e;t.scrollHeight-t.scrollTop<492&&z>=U&&C(U+20)},style:{margin:"0 -14px",borderTopLeftRadius:x,borderTopRightRadius:ke},className:"jsx-fec60529c9a8369d container overflow-auto bt bl br b--light-silver",children:(0,o.jsxs)("table",{style:{tableLayout:"fixed"},className:"jsx-fec60529c9a8369d w-100 dark-gray ma0 nowrap overflow-visible",children:[w&&(0,o.jsx)(me,{node:t,summary:S,filteredSummary:_,hoveredRow:N?w.rows[N.row]:void 0,operations:n,setOperations:r,colWidths:E,setColWidths:D,setColumnsFlash:a,embed:d,tableRef:Z}),w&&(0,o.jsx)(b,{data:w,node:t,summary:S,hoveredCell:N,setHoveredCell:V,colWidths:E,searchInfo:w.searchInfo})]})}),void 0!==(null===S||void 0===S?void 0:S.nRows)?(0,o.jsxs)("div",{style:{margin:"0 -14px",height:be.T6+5,borderBottomLeftRadius:x&&k,borderBottomRightRadius:k},className:"jsx-fec60529c9a8369d "+(i()("mid-gray f7 flex items-center justify-between b--light-silver pv1 ph2",S.nRows>0?"ba":"br bl bb")||""),children:[(0,ge.u2)(t)&&(0,o.jsx)("div",{className:"jsx-fec60529c9a8369d mr2",children:(0,ge.u2)(t)}),(0,o.jsxs)("div",{style:{padding:"2px"},className:"jsx-fec60529c9a8369d ba b--light-silver flex items-center br2",children:[(0,o.jsx)("button",{onClick:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.focus()},className:"jsx-fec60529c9a8369d bn pa0 bg-transparent flex items-center gray pointer",children:(0,o.jsx)(c.Z,{})}),(0,o.jsx)("input",{ref:P,value:O,style:{font:"13px/1.2 var(--sans-serif)"},disabled:!S.ready,onChange:e=>{I(e.target.value)},name:"search",placeholder:"Search",className:"jsx-fec60529c9a8369d bn fw5"})]}),(null===w||void 0===w?void 0:w.searchInfo)&&(0,o.jsx)("div",{className:"jsx-fec60529c9a8369d ml1",children:"".concat(w.searchInfo.length.toLocaleString()," ").concat(1===w.searchInfo.length?"match":"matches")}),(0,o.jsx)("div",{className:"jsx-fec60529c9a8369d ml-auto",children:(null!==(B=null===(u=n.filter)||void 0===u?void 0:u.length)&&void 0!==B?B:0)+(null!==(W=null===(p=n.sort)||void 0===p?void 0:p.length)&&void 0!==W?W:0)>0&&(0,o.jsx)("button",{onClick:()=>{const e={filter:void 0,sort:void 0};r(e),h({type:"setLocalOperations",id:v,operations:e})},className:"jsx-fec60529c9a8369d bn br2 f6 fw6 pv1 ph2 mr2 bg-white blue pointer",children:"Reset"})}),(0,o.jsxs)("div",{style:{fontVariantNumeric:"tabular-nums"},className:"jsx-fec60529c9a8369d",children:[void 0!==(null===_||void 0===_?void 0:_.nRows)&&"".concat(_.nRows.toLocaleString()," of "),S.nRows.toLocaleString(),1===S.nRows?" row":" rows"]})]}):null,(0,o.jsx)(s(),{id:"fec60529c9a8369d",children:".container.jsx-fec60529c9a8369d{max-height:369px}table.jsx-fec60529c9a8369d{font:13px/1.2 var(--sans-serif);border-collapse:separate;border-spacing:0}input.jsx-fec60529c9a8369d::-webkit-input-placeholder{font-weight:500;color:var(--gray)}input.jsx-fec60529c9a8369d:-moz-placeholder{font-weight:500;color:var(--gray)}input.jsx-fec60529c9a8369d::-moz-placeholder{font-weight:500;color:var(--gray)}input.jsx-fec60529c9a8369d:-ms-input-placeholder{font-weight:500;color:var(--gray)}input.jsx-fec60529c9a8369d::-ms-input-placeholder{font-weight:500;color:var(--gray)}input.jsx-fec60529c9a8369d::placeholder{font-weight:500;color:var(--gray)}"})]})}))},84269:function(e,t,n){n.d(t,{Z:function(){return D}});var o=n(41799),r=n(85893),s=n(63999),a=n(64063),i=n.n(a),l=n(11163),c=n.n(l),d=n(67294),u=n(9580),p=n(4778),v=n(602),m=n(74080),f=n(48873),h=n(86500),b=n(50826),g=n(72215),y=n(33042),x=n(5315),k=n(31343),w=n(69150),j=n(88725),S=n(66421),M=n(928),_=n(3142),R=n(58671),U=n(4242);function C(e){return N(e.input)&&N(e.stack)&&N(e.message)&&N(e.name)}function N(e){return void 0===e||"string"===typeof e}const V=new Map;let E=0;function D(e){let{state:t,currentUser:n,dispatch:a,initialWorkerEvents:i,allowInternalNavigation:l=!0,location:N}=e;const{owner:D,model:I,files:T,heights:Z,workerTasks:P}=t,L=(0,_.DF)(t),F=(0,_.cE)(t),A=(0,d.useRef)(),z=(0,d.useRef)(),B=(0,d.useRef)(),W=(0,d.useRef)(),q=(0,d.useRef)(),H=(0,d.useRef)(),Y=(0,d.useRef)(I.nodes[0]),X=(0,d.useRef)(),G=(0,d.useRef)(),J=(0,d.useRef)(),K=(0,d.useRef)(),$=(0,d.useRef)(),Q=(0,d.useRef)(),ee=(0,d.useRef)(),te=(0,d.useRef)(new Map),ne=(0,d.useRef)(),oe=(0,d.useRef)(t.saveVersion),re=(0,d.useRef)(I),se=(0,d.useRef)(new Map);ne.current=t.saveVersion,re.current=I;const{authorization:ae}=(0,U.v9)((e=>{let{authorization:t}=e;return{authorization:t}})),ie=ae.apiKey;function le(e,t,n){let o,r;void 0===t&&void 0===n?(o=!1,r=new Promise(((e,o)=>{t=e,n=o}))):o=!0;const s=++E;return e.id=s,V.set(s,[t,n,o]),B.current(e),r}function ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;const{pathname:n,search:o,hash:r}=t;Q.current===n&&ee.current===r||(Q.current=n,ee.current=r,e.push({type:"navigate",pathname:n,search:o,hash:r}))}function de(){return Math.min(oe.current,re.current.version)}function ue(){return"".concat(t.id,"@").concat(de())}function pe(e){return e.toModuleURL(ue())}function ve(e){return void 0!==re.current.resolve("notebook",e)}function me(){return!((0,m.QY)(t)&&(0,S.mG)(t))||ne.current>=de()}function fe(e){return!F||void 0!==e.login&&e.login!==D.login}async function he(e,t,n,o){const r={id:t,specifier:"".concat(n)};if(te.current.set(e,r),o&&!ve(n)){const t=await async function(e){try{const{specifiers:t}=await(0,v.a8)("/document/".concat(e,"/imports?resolutions=").concat(ue(),"&importer=").concat(F?D.login:"anonymous"),{signal:$.current});return Object.entries(t).filter((e=>{let[,{owner:t}]=e;return t!==D.login})).map((e=>{let[t,{resolution:n}]=e;return{type:"notebook",specifier:t,value:n}}))}catch(t){if(404===t.status)return[];throw t}}(n);if(te.current.get(e)!==r)return;t.length&&function(e){for(const{specifier:t,value:n}of e)se.current.set(t,n);a({type:"resolveDependencies",resolutions:e,trigger:"implicit",source:"cellEvaluation"})}(t)}if(fe(n))return r.module=pe(n),void ye();r.needsToBeSigned=!0,be(),ye()}function be(){if(me())for(const[,e]of te.current)e.needsToBeSigned&&(e.needsToBeSigned=!1,ge(e))}async function ge(e){try{const{import_path:o,owner:r,secrets:s,database_clients:a}=await(t=e.specifier,n={signal:$.current},(0,v.a8)("/document/".concat(t,"/import?v=4&resolutions=").concat(ue()),n));r.id===D.id?(e.module="".concat("https://api.observablehq.com").concat(o),s&&await xe(s),a&&we(a)):e.module=pe(M.Z.parse(e.specifier))}catch(o){if("AbortError"===o.name)return;e.error=o instanceof k.ZP&&404===o.status?"Notebook '".concat(e.specifier,"' not found"):o.message}var t,n;ye()}function ye(){if(!me())return;const e=B.current;for(const[t,n]of te.current){const{id:o,specifier:r,module:s,error:a}=n;a?(e({type:"resolve_import",id:o,specifier:r,error:a}),te.current.delete(t)):"string"===typeof s&&(e({type:"resolve_import",id:o,specifier:r,module:s}),te.current.delete(t))}}async function xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!F)return;if(!e.length)return void(void 0===G.current&&(G.current=null,t.unshift({type:"reset_secret",delay:!1})));G.current||(G.current=ke());const n=B.current,o=X.current,r=G.current;let s;e.some((e=>!o.has(e)))&&(t.unshift({type:"reset_secret",delay:!0}),s=!0);const a=await r,i=[];for(const l of e)o.has(l)||(o.add(l),a.has(l)&&i.push([l,a.get(l)]));(i.length||s)&&n({type:"resolve_secrets",secrets:i})}async function ke(){let e;if(ie)e=await(0,v.a8)("/document/".concat(t.id,"/secrets/embed"),{headers:{"Content-Type":"application/json",Authorization:"apikey ".concat(ie)}});else if("team"===D.type)e=await(0,v.a8)("/team/".concat(D.id,"/secrets"));else if(e=await(0,v.a8)("/user/secrets"),D.id!==(null===n||void 0===n?void 0:n.id))throw new Error("access denied");return new Map(e.map((e=>{let{name:t,value:n}=e;return[t,n]})))}function we(e){if(F)for(const t of e)J.current.add(t)}(0,d.useEffect)((()=>{function e(){const e=[];ce(e,N),e.length&&B.current({type:"bundle",events:e})}return addEventListener("hashchange",e),()=>removeEventListener("hashchange",e)}),[N]),(0,d.useEffect)((()=>{function e(){B.current({type:"blur"})}function t(){var e;document.activeElement===z.current&&(a({type:"selectionClear"}),null===(e=window.getSelection())||void 0===e||e.removeAllRanges())}return t(),addEventListener("focus",e),addEventListener("blur",t),()=>{removeEventListener("focus",e),removeEventListener("blur",t)}}),[a]);const je=(0,b.y)(n,t,"current_user_emails");(0,d.useEffect)((()=>{if(n&&L){const{login:e,name:t,bio:r,home_url:s,avatar_url:a,identities:i}=n;K.current=(0,o.Z)({login:e,name:t,bio:r,url:s,avatar:a},je&&{email:i.concat(n).map((e=>e.email)).find((e=>!!e))})}else K.current=void 0}),[L,je,n]),(0,d.useEffect)((()=>{const e=(0,j.vE)(D),n=new AbortController;let o=[];l&&o.push({type:"allow_internal_navigation"}),(null===i||void 0===i?void 0:i.length)&&o.push({type:"bundle",events:i});const r=document.createElement("iframe");r.style.width="calc(100% + ".concat(2*w.Mv,"px)"),r.style.margin="0 ".concat(-w.Mv,"px"),r.style.border="none",r.scrolling="no",r.sandbox=j.Ar,r.allow=j.sq,r.src="".concat(e,"/next/").concat(p.xF),addEventListener("message",d),A.current.appendChild(r);const s=r.contentWindow;function d(n){if(!n.isTrusted||n.origin!==e||n.source!==s)return;const i=n.data;if(void 0!==i.id){const{id:e}=i,t=V.get(e);if(t){const[n,o,r]=t,{error:s}=i;return void(r?((void 0!==s||i.done)&&V.delete(e),void 0!==s?o(s):n(i)):(V.delete(e),void 0!==s?o(s):n(i.value)))}}else switch(i.type){case"hello":return void function(){if(!o)return;for(const t of o)s.postMessage(t,e);o=null}();case"resize":return void function(e){let{node_id:t,height:n}=e;(0,x.qX)(a,(e=>{let{heights:o}=e;return o.push({type:"worker",id:+t,height:+n})}))}(i);case"hover":return void function(e){let{node_id:t}=e;a({type:"hover",id:+t})}(i);case"errors":return void function(e){let{errors:t}=e;if(!(t instanceof Map))return;for(const[n,o]of t)if("number"!==typeof n||null!==o&&!C(o))return;a({type:"workerErrors",errors:t})}(i);case"navigate":return void(l&&function(e){let{pathname:t,search:n,hash:o}=e;const r="".concat(t).concat(n).concat(o);c().push(r)}(i));case"display":return void function(e){let{node_id:t,mode:n}=e;(0,h.I)(a,(e=>{let{displayModes:o}=e;return o.set(+t,n)}))}(i);case"pending":case"fulfilled":case"rejected":return void function(e){let{type:t,node_id:n,suggestions:o,chartSpec:r}=e;(0,h.I)(a,(e=>{let{statuses:s,suggestions:a,chartSpecs:i}=e;s.set(+n,"".concat(t)),void 0!==o&&a.set(+n,o),void 0!==r&&i.set(+n,r)}))}(i);case"request_database_token":return void async function(e){const n=B.current;if(!F)return void n({type:"resolve_database_token",name:e,error:u.uW});if(!J.current.has(e))return void n({type:"resolve_database_token",name:e,error:"Database not allowed"});let o;try{o=ie?await(0,v.Fv)("/document/".concat(t.id,"/data-connector/token/embed"),{name:e},{headers:{"Content-Type":"application/json",Authorization:"apikey ".concat(ie)}}):await(0,v.Fv)("".concat("team"===D.type?"/team/".concat(D.id):"/user","/data-connector/token"),{name:e})}catch(r){return void n({type:"resolve_database_token",name:e,error:"Database not found"})}n({type:"resolve_database_token",name:e,token:o})}(i.name);case"request_cloud_file":return void async function(e){const t=B.current;if(!F)return void t({type:"resolve_cloud_file",name:e,error:u.Px});const n=re.current.resolve("cloud_file",e);if(!n)return void t({type:"remove_file",name:e});try{t({type:"resolve_cloud_file",name:e,url:await(0,f.w)(D,{type:"cloud_file",specifier:e,value:n})})}catch(o){t({type:"resolve_cloud_file",name:e,error:o.message})}}(i.name);case"request_private_file":return void function(e){const t=B.current;if(!F)return void t({type:"resolve_private_file",name:e,error:u.Js});t({type:"resolve_private_file",name:e})}(i.name);case"current_user":return void async function(){const e=B.current;await e({type:"current_user",currentUser:K.current})}();case"escape":return void(document.activeElement===r&&(window.focus(),a({type:"blur"})))}}return z.current=r,B.current=t=>{o?o.push(t):s.postMessage(t,e)},W.current=-1,q.current=new Map,H.current=new Map,X.current=new Set,J.current=new Set,$.current=n.signal,()=>{a({type:"workerGoodbye"}),removeEventListener("message",d),B.current=void 0,W.current=void 0,q.current=void 0,H.current=void 0,X.current=void 0,G.current=void 0,J.current=void 0,$.current=void 0,Q.current=void 0,ee.current=void 0,z.current=void 0,r.remove(),r.src="about:blank",n.abort()}}),[L,l,F,D,a,i,ie,t.id]);const Se=I.nodes.length;return(0,d.useEffect)((()=>{if(!z.current)return;const e=(0,x.hY)(Z)+(Se+1)*w.KI;z.current.style.height="".concat(e,"px")}),[Se,Z]),(0,d.useEffect)((()=>{const e=[],n=[],o=[],r=[];if(function(e,t,n,o,r,a,i,l,c){const d=e.current<0?s.Z.create(t).events.filter((e=>e)):t.history.slice(e.current),u=new Set;let p=!1;for(const s of d){const{type:d}=s;switch(d){case"modify_data":if(O(s)){const{node_id:e,new_node_data:t}=s;n.push({type:"modify_display",node_id:e,new_node_data:t});continue}case"mode_node":case"insert_node":case"modify_node":case"modify_name":{const{node_id:i,new_next_node_id:l,new_node_mode:p,new_node_data:v}=s,m=(0,R.Z)((0,y.DY)(t,i)||{value:"",mode:"js",name:null}),f={type:d,node_id:i,new_node_value:m,new_next_node_id:l,new_node_mode:p,new_node_data:v};"import"===m.type?o.push({nodeId:i,value:m,shouldCapture:e.current>=0&&s.version>c}):(m.secrets&&r.push(...m.secrets),m.databaseClients&&a.push(...m.databaseClients)),u.add(i),n.push(f);break}case"move_node":{const{node_id:e,new_next_node_id:t}=s;n.push({type:d,node_id:e,new_next_node_id:t});break}case"remove_node":{const{node_id:e}=s;n.push({type:d,node_id:e});break}case"resolve_dependency":{const{version:e,specifier:t,specifier_type:o,new_resolution:r}=s;if("cloud_file"===o)r?n.push({type:"insert_file",name:t,cloud:!0}):n.push({type:"remove_file",name:t});else if("notebook"===o){const n=l.get(t);n&&n===r?l.delete(t):i.current<e&&(p=!0,i.current=e)}break}}}p&&function(e,t,n,o){for(const r of e.nodes){if(t.has(r.id))continue;t.add(r.id);const s=(0,R.Z)((0,y.DY)(e,r.id)||{value:"",mode:"js",name:null});"import"===s.type&&(n.push({nodeId:r.id,value:s,shouldCapture:!1}),o.push({type:"modify_node",node_id:r.id,new_node_value:s}))}}(t,u,o,n);e.current=t.history.length}(W,I,e,n,o,r,oe,se.current,t.saveVersion),function(e,t,n){if(e.current!==t){const o=e.current;e.current=t;for(const[e,r]of t){const t=o.get(e);if((0,g.ki)(r))if((0,g.ki)(t)){if("pending"===t.status&&void 0===t.blob&&"pending"!==r.status){const{url:t,mimeType:o}=r;n.push({type:"modify_file",name:e,url:t,mimeType:o})}else if("pending"===t.status&&t.blob&&"pending"!==r.status&&t.mimeType!==r.mimeType){const{blob:t,mimeType:o}=r;n.push({type:"modify_file",name:e,blob:t,mimeType:o})}}else{const{url:t,blob:o,mimeType:s,privateBucketId:a}=r;n.push({type:"insert_file",name:e,url:t,blob:o,mimeType:s,privateBucketId:a})}}for(const[e,r]of o){const o=t.get(e);!(0,g.ki)(o)&&(0,g.ki)(r)&&n.push({type:"remove_file",name:e})}}}(q,T,e),function(e,t,n){if(e.current!==t){const o=e.current;e.current=t;for(const[e,{editor:r,comments:s,display:a}]of t){const t=r+s+a;(o.has(e)?o.get(e).editor+o.get(e).comments+o.get(e).display:0)!==t&&n.push({type:"offset_node",node_id:e,height:t})}for(const[e,{editor:r}]of o)t.has(e)||0===r||n.push({type:"offset_node",node_id:e,height:0})}if(n.length){const e=new Map;for(const{type:o,node_id:r}of n)switch(o){case"insert_node":{const n=t.get(r);n&&e.set(r,n.editor+n.comments+n.display);break}case"remove_node":e.delete(r)}for(const[t,o]of e)n.push({type:"offset_node",node_id:t,height:o})}}(H,Z,e),function(e){for(const{nodeId:t,value:n,shouldCapture:o}of e){const e=M.Z.parse(n.specifier);null===e?n.module=n.specifier:(n.notebook=e.toNotebookURL(),fe(e)&&(!o||ve(e))&&me()?n.module=pe(e):(n.module=++E,he(t,n.module,e,o)))}}(n),xe(o,e),we(r),ce(e,N),e.length&&B.current({type:"bundle",events:e}),function(e,t,n){const o=t.nodes[0];if(o!==e.current||n.some((e=>{let{type:t,node_id:n}=e;return"modify_node"===t&&n===o.id})))return e.current=o,!0;return!1}(Y,I,e)){(I.version>t.initialLatestVersion||I.version>t.saveVersion)&&async function(){const e=I.nodes[0].id,t=await le({type:"extract_title",node_id:e});a({type:"title",value:"".concat(t).slice(0,255)})}()}!function(e){if(e.size)for(const t of[...e])e.delete(t),t.resolve(t.process(le))}(P),be(),ye()})),(0,r.jsx)("div",{ref:A})}function O(e){const{type:t,old_node_data:n,new_node_data:o}=e;return"modify_data"===t&&!i()(null===n||void 0===n?void 0:n.display,null===o||void 0===o?void 0:o.display)}},48873:function(e,t,n){n.d(t,{a:function(){return i},w:function(){return l}});var o=n(80026),r=n(9580),s=n(602),a=n(4598);function i(e){const t=/^([a-zA-Z]+):\/\/(.*)$/.exec(e.specifier);if(!t)return null;const n=Object.entries(a.c).find((e=>{let[,{shorthand:n}]=e;return n===t[1]}));return n?{provider:n[0],name:t[2],specifier:e.specifier,path:e.value}:null}async function l(e,t){const n=i(t);if(!n)throw(0,o.uT)("Invalid cloud file path: ".concat(t.value)),new Error("Invalid cloud file path.");return async function(e,t){let n;try{const o="team"===e.type?"/team/".concat(e.id):"/user";n=await(0,s.Fv)("".concat(o,"/cloud-file/token"),{provider:t.provider,path:t.path})}catch(o){throw new Error(r.t5)}return"".concat("https://connector.observableusercontent.com","/file?token=").concat(encodeURIComponent(n))}(e,n)}},87099:function(e,t,n){function o(e,t){const n=URL.createObjectURL(e);r(n,t),URL.revokeObjectURL(n)}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),n.remove()}n.d(t,{G:function(){return r},L:function(){return o}})},5315:function(e,t,n){function o(e){return e?e.worker+e.display:0}function r(e){let t=0;for(const{total:n}of e.values())t+=n;return t}function s(e,t,n,o){let r=0;const s=new ResizeObserver((e=>{let[s]=e;const i=s.contentRect.height;i!==r&&(r=i,a(o,(e=>{let{heights:o}=e;return o.push({type:n,id:t,height:r})})))}));return s.observe(e),{disconnect(){s.disconnect(),0!==r&&(r=0,a(o,(e=>{let{heights:o}=e;return o.push({type:n,id:t,height:r})})))}}}n.d(t,{Gv:function(){return o},hY:function(){return r},jn:function(){return s},qX:function(){return a}});const a=(0,n(22225).J)((()=>({type:"cellHeight",heights:[]})))},8802:function(e,t,n){n.d(t,{Z:function(){return s}});let o=0;const r=new WeakMap;function s(e){let t=r.get(e);return void 0===t&&r.set(e,t=o++),t}},98957:function(e,t,n){n.d(t,{O:function(){return s}});var o=n(11163),r=n.n(o);const s=(e,t)=>{let{base:n,target:o}=t;const s="".concat(n.id).concat(n.version?"@".concat(n.version):""),a="".concat(o.id).concat(o.version?"@".concat(o.version):"");r().push("/compare/".concat(s,"...").concat(a))}},33199:function(e,t,n){n.d(t,{C:function(){return I}});var o=n(19671),r=n(33042);const s=(e,t)=>{let{notebook:n,currentUser:r}=e,{type:s,id:a,trigger:i,source:l}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:insert",data:{cellIds:[a],trigger:i,source:l,before:"insertBefore"===s},eventVersion:3,notebook:n,currentUser:r}))},a=(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:move",data:{cellIds:[s]},eventVersion:3,notebook:n,currentUser:r}))},i=(e,t)=>{let{notebook:n,currentUser:s}=e,{type:a,id:i,trigger:l}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:split",data:{cellIds:[i],mode:(0,r.DY)(n.model,i).mode,trigger:l,source:"nodeEditor",before:"splitBefore"===a},eventVersion:1,notebook:n,currentUser:s}))};function l(e,t){return e.length>t?"".concat(e.slice(0,t-1),"\u2026"):e}var c=n(88725);var d=n(19170);var u=n(24205);function p(e,t,n,r){switch(e){case"help":(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"files":(0,o.MR)((0,o.ym)({type:"notebook:view:filesPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"history":(0,o.MR)((0,o.ym)({type:"notebook:view:historyPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"minimap":(0,o.MR)((0,o.ym)({type:"notebook:view:minimapPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"insights":(0,o.MR)((0,o.ym)({type:"notebook:view:insightsPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"find":(0,o.MR)((0,o.ym)({type:"notebook:view:findPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"dependencies":(0,o.MR)((0,o.ym)({type:"notebook:view:dependenciesPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"guide":(0,o.MR)((0,o.ym)({type:"notebook:view:guidePaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"databases":(0,o.MR)((0,o.ym)({type:"notebook:view:databasesPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}))}}var v=n(21571),m=n(6025),f=n(60066),h=n(6022),b=n(98957),g=n(47977),y=n(70668),x=n(87099);var k=n(81931),w=n(17152),j=n(3729),S=n(91398),M=n(59201),_=n(30453),R=n(51133),U=n(38559),C=n(99223),N=n(99494),V=n(3361),E=n(8740),D=n(71503),O=n(30169);const I={acceptCompletion:(e,t)=>{let{notebook:n,currentUser:r}=e,{origin:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:acceptCompletion",data:{origin:s},eventVersion:1,notebook:n,currentUser:r}))},acceptSnippet:N.eY,acknowledgeSuggestionClosed:E.G6,addTag:D._U,addedDatabase:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:addDatabase",data:{cellIds:[s]},eventVersion:1,notebook:n,currentUser:r}))},closeSuggestion:E.nK,closeSuggestionSucceeded:u.JB,cloudFileSnippet:g.zX,commentComposeCancel:(e,t)=>{let{notebook:n,currentUser:r}=e,{nodeId:s,trigger:a,content:i,source:l}=t;var c;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:cancel",data:{cellIds:[s],length:i.length,trigger:a,source:l},eventVersion:4,notebook:n,currentUser:r})),n.comments.has(s)&&0!==(null===(c=n.comments.get(s))||void 0===c?void 0:c.length)||(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:hideComments",data:{cellIds:[s],cancelCompose:!0,trigger:a,source:"commentBox"},eventVersion:2,notebook:n,currentUser:r}))},commentComposeOpen:(e,t)=>{let{notebook:n,currentUser:r}=e,{nodeId:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:openCompose",data:{cellIds:[s],trigger:a,source:i},eventVersion:3,notebook:n,currentUser:r}))},commentCreated:(e,t)=>{let{notebook:n,currentUser:r}=e,{nodeId:s,source:a}=t;const i=(0,c.o7)(n,s),l=(0,c.HS)(n,s),d=new Set;for(const o of l)d.add(o.user.id);for(const o of i)d.add(o.user.id);const u=l.some((e=>e.user.id===(null===r||void 0===r?void 0:r.id)))||i.some((e=>e.user.id===(null===r||void 0===r?void 0:r.id)));(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:submit",data:{cellIds:[s],commentsOnCell:l.length+i.length,unresolvedCommentsOnCell:l.length,commentersOnCell:d.size,userHasCommentedOnCell:u,trigger:"click",source:a},eventVersion:4,notebook:n,currentUser:r}))},commentDeleted:(e,t)=>{let{notebook:n,currentUser:r}=e,{comment:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:delete",data:{cellIds:[s.node_id],userIsCommentAuthor:s.user.id===(null===r||void 0===r?void 0:r.id),trigger:a,source:i},eventVersion:3,notebook:n,currentUser:r}))},commit:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:edit:evaluate",data:{cellIds:[s],trigger:a,source:i},eventVersion:6,notebook:n,currentUser:r})),ga("send","event","Notebook","Edit"),gtag("event","Edit",{event_category:"Notebook"})},copyDatabaseCode:g.ZG,copyFileCode:[k.Nz,u.Hf],deleteTag:D.Pn,disableAutosave:e=>{let{notebook:t,currentUser:n}=e;(0,o.MR)((0,o.ym)({type:"notebook:view:autosaveDisabled",eventVersion:1,notebook:t,currentUser:n}))},dismissPane:e=>{let{notebook:t,page:n,currentUser:o}=e;null!==n.pane&&p(n.pane,null,t,o)},dismissWelcomeMatBanner:()=>{(0,o.MR)((0,o.a$)({type:"marketing:view:dismissWelcomeBanner",data:{experiment:null},eventVersion:1,currentUser:null}))},dragEnded:a,downloadCode:[async e=>{let{notebook:t}=e;const{id:n,saveVersion:o}=t,r=await fetch("".concat("https://api.observablehq.com","/document/").concat(n,"@").concat(o,"/download?v=3"),{credentials:"include"}),{tarball_path:s}=await r.json();(0,x.G)("".concat("https://api.observablehq.com").concat(s))},u.kg],downloadCloudFile:g.Tv,downloadFile:u.lA,exitVersionedMode:m.Q,createDocumentKey:y.H,fileMarkedForDeletion:u.hO,replaceFile:k.bC,fileReplaced:u.tq,focusDefinition:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:view:focusDefinition",data:{cellIds:[s],trigger:a,source:i},eventVersion:1,notebook:n,currentUser:r}))},focusError:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:view:focusError",data:{cellIds:[s]},eventVersion:1,notebook:n,currentUser:r}))},forkRequested:w.J1,embedModalCopy:u.M6,helpPaneLinkClicked:(e,t)=>{let{notebook:n,currentUser:r}=e,{section:s,url:a}=t;(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneLink",data:{section:s,url:a},eventVersion:1,notebook:n,currentUser:r}))},hideComments:(e,t)=>{let{notebook:n,currentUser:r}=e,{nodeId:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:hideComments",data:{cellIds:[s],cancelCompose:!1,trigger:a,source:i},eventVersion:2,notebook:n,currentUser:r}))},insertAfter:s,insertBefore:s,insertCloudFile:g.Xm,insertDatabase:g._E,insertFile:u.Nl,insertSnippet:N.ns,like:S.v,liked:(e,t)=>{let{notebook:n,currentUser:r}=e,{liked:s}=t;(0,o.MR)((0,o.ym)({type:s?"notebook:social:like":"notebook:social:unlike",data:{},eventVersion:4,notebook:n,currentUser:r})),ga("send","event","Social","Like"),gtag("event","Like",{event_category:"Social"})},loadCompare:[b.O,(e,t)=>{let n,{notebook:r,currentUser:s}=e,{trigger:a,source:i,base:l,target:c,loadType:d}=t;if("reverse"!==d){switch(d){case"fork":n="notebook:view:compareFork";break;case"latest":n="notebook:view:compareLatest";break;case"published":n="notebook:view:comparePublished"}(0,o.MR)((0,o.ym)({type:n,data:{base:(0,o.tb)(l,s),target:(0,o.tb)(c,s),trigger:a,source:i},eventVersion:1,notebook:r,currentUser:s}))}}],loadVersion:j.n,loadedVersion:(e,t)=>{let{notebook:n,currentUser:r}=e,{body:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:view:historyNavigate",data:{loadedVersion:s.version,navigationType:"version"},eventVersion:5,notebook:n,currentUser:r}))},attachLocalFiles:k.Mq,localFilesAttached:u.fe,moveDown:a,moveUp:a,notebookFilePickerOpened:u.Bv,openHelpArticle:(e,t)=>{let{notebook:n,currentUser:r}=e,{article:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:view:helpArticleOpened",data:{article:s},eventVersion:1,notebook:n,currentUser:r}))},closeInsertMenu:(e,t)=>{let{notebook:n,currentUser:r}=e,{trigger:s,filter:a,selectedItem:i}=t;void 0!==i&&(i=l(i,50)),(0,o.MR)((0,o.ym)({type:"notebook:view:nodeInserterMenuClosed",data:{trigger:s,filter:l(a,50),selectedItem:i},eventVersion:1,notebook:n,currentUser:r})),gtag("event","Node inserter menu",{event_category:"Notebook",event_label:i})},openInsertMenu:(e,t)=>{let{notebook:n,currentUser:r}=e,{before:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:view:nodeInserterMenuOpened",data:{trigger:a,source:i,before:s},eventVersion:1,notebook:n,currentUser:r}))},pauseLiveEdits:_.Dq,pauseLiveEditsSuccess:_.Z6,relicense:u.mB,remove:(e,t)=>{let{notebook:n,currentUser:s}=e,{id:a}=t;const i=(0,r.DY)(n.model,a);(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:delete",data:{cellIds:[a],includesLastCell:1===n.model.nodes.length,mode:null===i||void 0===i?void 0:i.mode},eventVersion:5,notebook:n,currentUser:s}))},requestSnippets:N.d1,removeCloudFile:g.kc,resolveComments:(e,t)=>{let{notebook:n,currentUser:r}=e,{nodeId:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:resolve",data:{cellIds:[s],commentCount:(0,c.HS)(n,s).length,trigger:a,source:i},eventVersion:3,notebook:n,currentUser:r}))},resumeLiveEdits:_.gY,resumeLiveEditsSuccess:_.SK,revertRequested:R._$,replaceCurrent:(e,t)=>{let{notebook:n,currentUser:r}=e,{trigger:s,source:a}=t;const{caseSensitiveSearch:i,wholeWordSearch:l,regexSearch:c}=n;(0,o.MR)((0,o.ym)({type:"notebook:edit:replaceCurrent",data:{numSearchResults:(0,d.n)(n.searchResults),caseSensitiveSearch:i,wholeWordSearch:l,regexSearch:c,trigger:s,source:a},eventVersion:1,notebook:n,currentUser:r}))},replaceAll:[U.Rt,(e,t)=>{let{notebook:n,currentUser:r}=e,{trigger:s,source:a}=t;const{caseSensitiveSearch:i,wholeWordSearch:l,regexSearch:c}=n;(0,o.MR)((0,o.ym)({type:"notebook:edit:replaceAll",data:{numSearchResults:(0,d.n)(n.searchResults),caseSensitiveSearch:i,wholeWordSearch:l,regexSearch:c,trigger:s,source:a},eventVersion:1,notebook:n,currentUser:r}))}],reportAbuse:h.e5,selectionCut:C.S2,selectionCopy:C.S2,selectionInsert:(e,t)=>{let{notebook:n,currentUser:s}=e,{trigger:a,before:i=!1,inherit:l=!1}=t;const{selectionFocusId:c}=n;null!==c&&(0,o.MR)(l?(0,o.ym)({type:"notebook:cells:manage:split",data:{cellIds:[c],mode:(0,r.DY)(n.model,c).mode,trigger:a,source:"nodeSelection",before:i},eventVersion:1,notebook:n,currentUser:s}):(0,o.ym)({type:"notebook:cells:manage:insert",data:{cellIds:[c],trigger:a,source:"nodeSelection",before:i},eventVersion:3,notebook:n,currentUser:s}))},sendSuggestion:E.gd,sendSuggestionFailed:u.Hh,sendSuggestionSucceeded:u.yy,setAuthorAcceptance:v.jp,setAuthors:v.Yx,setMode:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s,source:a,trigger:i,mode:l}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setMode",data:{cellIds:[s],source:a,trigger:i,mode:l},eventVersion:1,notebook:n,currentUser:r}))},setChartConfig:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s,config:a,options:i,source:l}=t;const c=a&&Object.keys(a).filter((e=>"options"!==e)).map((e=>{var t,n,o;return"mark"===e?{key:e,value:null===(t=a[e])||void 0===t?void 0:t.value}:{key:e,type:null===(n=a[e])||void 0===n?void 0:n.type,reduce:null===(o=a[e])||void 0===o?void 0:o.reduce}})),d=i&&Object.keys(i);(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setChartConfig",data:{cellIds:[s],config:c,options:d,source:l},eventVersion:1,notebook:n,currentUser:r}))},setDataSource:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s,source:a}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setDataSource",data:{cellIds:[s],source:a.type},eventVersion:1,notebook:n,currentUser:r}))},setDataOperations:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s,operations:a,source:i="editor"}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setDataOperations",data:{cellIds:[s],operations:Object.keys(a),source:i},eventVersion:3,notebook:n,currentUser:r}))},setLocalOperations:(e,t)=>{let{notebook:n,currentUser:s}=e,{id:a,operations:i}=t;var l,c,d;const u=null===(l=(0,r.DY)(n.model,a))||void 0===l?void 0:l.mode;var p;const v=null!==(p=null===(c=i.filter)||void 0===c?void 0:c.map((e=>{let{type:t}=e;return t})))&&void 0!==p?p:null;var m;const f=null!==(m=null===(d=i.sort)||void 0===d?void 0:d.map((e=>{let{direction:t}=e;return t})))&&void 0!==m?m:null;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setLocalOperations",data:{cellIds:[a],filter:v,sort:f,mode:u},eventVersion:1,notebook:n,currentUser:s}))},setName:(e,t)=>{let{notebook:n,currentUser:s}=e,{id:a,source:i}=t;const{mode:l}=(0,r.DY)(n.model,a);(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setName",data:{cellIds:[a],source:i,trigger:"keypress",mode:l},eventVersion:1,notebook:n,currentUser:s}))},setOpenCollection:[M.Ge,e=>{let{notebook:t,currentUser:n}=e;(0,o.MR)((0,o.ym)({type:"notebook:view:changeCurrentCollection",data:{trigger:"click",source:"collectionsSidebar"},eventVersion:1,notebook:t,currentUser:n}))}],showModal:[O.k,(e,t)=>{let{currentUser:n,notebook:r}=e;switch(t.modal){case"license":(0,o.MR)((0,o.ym)({type:"notebook:view:licenseModal",data:{},eventVersion:2,notebook:r,currentUser:n}));break;case"addDatabase":(0,o.MR)((0,o.ym)({type:"notebook:view:addDatabaseModal",data:{},eventVersion:1,notebook:r,currentUser:n}));break;case"addCloudFile":(0,o.MR)((0,o.ym)({type:"notebook:view:cloudProviderModal",data:{},eventVersion:1,notebook:r,currentUser:n}));break;case"cloudFile":{const{provider:e}=t.modalProps;(0,o.MR)((0,o.ym)({type:"notebook:view:cloudFileModal",data:{provider:e},eventVersion:1,notebook:r,currentUser:n}));break}case"replaceFile":(0,o.MR)((0,o.ym)({type:"notebook:view:replaceFileModal",data:{},eventVersion:1,notebook:r,currentUser:n}));break;case"embed":(0,o.MR)((0,o.ym)({type:"notebook:manage:embedModalOpen",data:{trigger:"click",source:t.source},eventVersion:3,notebook:r,currentUser:n}))}}],showComments:(e,t)=>{let{notebook:n,currentUser:r}=e,{nodeId:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:showComments",data:{cellIds:[s],trigger:a,source:i},eventVersion:2,notebook:n,currentUser:r}))},showPane:M._k,showFindPane:U.zI,splitBefore:i,splitAfter:i,dismissSuggestionOpenBanner:e=>{let{notebook:t,currentUser:n}=e;(0,o.MR)((0,o.ym)({type:"notebook:view:suggestionOpenBannerDismissed",data:{base:(0,o.tb)(t.forkOf,n),target:(0,o.tb)(t,n)},eventVersion:1,notebook:t,currentUser:n}))},resolveDependencies:u.hX,showNotebookDependencyDetails:u.dX,signatureHelp:(e,t)=>{let{notebook:n,currentUser:s}=e,{id:a,data:i}=t;var l;const{model:c,signatureHelpDismissedSpan:d}=n,u=(0,r.DY)(c,a),p=null===i||void 0===i||null===(l=i.applicableSpan)||void 0===l?void 0:l.start;if(!u||p&&p===d)return;void 0!==p&&(0,o.MR)((0,o.ym)({type:"notebook:cells:view:showSignatureHelp",eventVersion:1,notebook:n,currentUser:s}))},signatureHelpDismiss:(e,t)=>{let{notebook:n,currentUser:s}=e,{id:a,source:i}=t;const{model:l,signatureHelpData:c}=n;(0,r.DY)(l,a)&&c&&(0,o.MR)((0,o.ym)({type:"notebook:cells:view:dismissSignatureHelp",data:{source:i},eventVersion:1,notebook:n,currentUser:s}))},tableSearch:(e,t)=>{let{notebook:n,currentUser:r}=e,{id:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:tableSearch",data:{cellIds:[s]},eventVersion:1,notebook:n,currentUser:r}))},toggleHelpPaneSection:(e,t)=>{let{notebook:n,page:r,currentUser:s}=e,{section:a}=t;r.helpPaneSectionsOpen.has(a)?function(e,t,n){(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneSectionCollapsed",data:{section:e},eventVersion:1,notebook:t,currentUser:n}))}(a,n,s):function(e,t,n){(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneSectionExpanded",data:{section:e},eventVersion:1,notebook:t,currentUser:n}))}(a,n,s)},toggleCollectionsSidebar:e=>{let{notebook:t,currentUser:n,page:r}=e;(0,o.MR)((0,o.ym)({type:r.collectionsSidebarOpen?"notebook:view:collectionsSidebarDismissed":"notebook:view:collectionsSidebarOpened",data:{},eventVersion:1,notebook:t,currentUser:n}))},toggleDependencyLock:u.JS,upgradeDependency:u.Nz,togglePane:[M.Ez,(e,t)=>{let{page:n,notebook:r,currentUser:s}=e,{pane:a}=t;n.pane===a?p(a,null,r,s):(n.pane&&p(n.pane,a,r,s),function(e,t,n){switch(e){case"help":(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"files":(0,o.MR)((0,o.ym)({type:"notebook:view:filesPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"history":(0,o.MR)((0,o.ym)({type:"notebook:view:historyOpen",data:{},eventVersion:5,notebook:t,currentUser:n}));break;case"minimap":(0,o.MR)((0,o.ym)({type:"notebook:view:minimapPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"insights":(0,o.MR)((0,o.ym)({type:"notebook:view:insightsPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"find":(0,o.MR)((0,o.ym)({type:"notebook:view:findPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"dependencies":(0,o.MR)((0,o.ym)({type:"notebook:view:dependenciesPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"guide":(0,o.MR)((0,o.ym)({type:"notebook:view:guidePaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"databases":(0,o.MR)((0,o.ym)({type:"notebook:view:databasesPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}))}}(a,r,s))}],togglePin:(e,t)=>{let{notebook:n,currentUser:s}=e,{id:a}=t;const i=!(0,r.DY)(n.model,a).pinned;(0,o.MR)((0,o.ym)({type:i?"notebook:cells:manage:pin":"notebook:cells:manage:unpin",data:{cellIds:[a]},eventVersion:3,notebook:n,currentUser:s}))},toggleResolvedComments:(e,t)=>{let{notebook:n,currentUser:r}=e,{nodeId:s,trigger:a,source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:toggleResolved",data:{cellIds:[s],expanded:!n.expandedResolvedComments.has(s),trigger:a,source:i},eventVersion:2,notebook:n,currentUser:r}))},updateCommentingLock:[f.h,u.F5],updateSubscription:V.M,updateSubscriptionSucceeded:(e,t)=>{let{notebook:n,currentUser:r}=e,{status:s,trigger:a,source:i}=t;void 0!==a&&(0,o.MR)((0,o.ym)({type:"notebook:social:updateSubscription",data:{status:s,trigger:a,source:i},eventVersion:1,notebook:n,currentUser:r}))},welcomeMatNotebookClick:(e,t)=>{let{currentUser:n}=e,{clickedNotebookId:r}=t;(0,o.MR)((0,o.a$)({type:"marketing:view:welcomeMatNotebookClick",data:{clickedNotebookId:r},eventVersion:1,currentUser:n}))}}},94578:function(e,t,n){n.d(t,{c:function(){return a},q:function(){return i}});var o=n(59201),r=n(3894);var s=n(38559);function a(){let{initialCollection:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{pane:null,collectionsSidebarOpen:!!e,suggestionOpenBannerDismissed:!1,helpPaneSectionsOpen:o.y3,helpArticlesOpen:[],replaceInputExpanded:!1,findOptionsInputExpanded:!1,guide:null,expandedDatabases:new Set,expandedTables:new Set,databaseSchemas:new Map,tableSchemas:new Map}}const i={togglePane:o.lx,dismissPane:o.rE,toggleCollectionsSidebar:o.P4,openCollectionsSidebar:o._O,dismissSuggestionOpenBanner:()=>({suggestionOpenBannerDismissed:!0}),collectionsUpdated:o.Yd,toggleHelpPaneSection:o.GJ,closeHelpArticle:o.Gr,openHelpArticle:o.LZ,showNotebookDependencyDetails:(e,t)=>{let{specifier:n}=t;return{pane:"dependencies",dependenciesPaneSpecifier:n}},removeDependenciesPaneSpecifier:()=>({dependenciesPaneSpecifier:void 0}),toggleFindOptionsExpanded:s.lc,toggleReplaceInputExpanded:s.$k,toggleDatabasesPaneDatabase:(e,t)=>{let{expandedDatabases:n}=e,{db:o}=t;const s=(0,r.x2)(o);return n=new Set(n),n.has(s)?n.delete(s):n.add(s),{expandedDatabases:n}},toggleDatabasesPaneTable:(e,t)=>{let{expandedTables:n}=e,{db:o,table:s}=t;const a=(0,r.hS)(o,s);return n=new Set(n),n.has(a)?n.delete(a):n.add(a),{expandedTables:n}},updateDatabasesPaneDatabaseSchema:(e,t)=>{let{databaseSchemas:n}=e,{db:o,tables:s}=t;return n=new Map(n),n.set((0,r.x2)(o),s),{databaseSchemas:n}},updateDatabasesPaneTableSchema:(e,t)=>{let{tableSchemas:n}=e,{db:o,table:s,columns:a}=t;return n=new Map(n),n.set((0,r.hS)(o,s),a),{tableSchemas:n}},refreshDatabasesPaneSchema:(e,t)=>{let{expandedDatabases:n,databaseSchemas:o,tableSchemas:s}=e,{db:a}=t;n=new Set(n),o=new Map(o),s=new Map(s);const i=(0,r.x2)(a);n.add(i);const l=o.get(i);if(o.delete(i),l)for(const c of l)s.delete((0,r.hS)(a,c));return{tableSchemas:s,databaseSchemas:o,expandedDatabases:n}}}},4778:function(e){e.exports=JSON.parse('{"xF":"worker-fd95503b.html","Bl":"worker-embed-preview-4cda3f23.html"}')}}]);