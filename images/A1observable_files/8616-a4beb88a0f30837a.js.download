(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8616],{61187:function(e,t,n){var o={".":7138,"./":7138,"./arquero":29391,"./arquero.js":29391,"./arrow":57938,"./arrow.js":57938,"./dependencies":67363,"./dependencies.js":67363,"./dependency":10170,"./dependency.js":10170,"./dom":81820,"./dom/":81820,"./dom/canvas":76342,"./dom/canvas.js":76342,"./dom/context2d":24937,"./dom/context2d.js":24937,"./dom/download":32938,"./dom/download.js":32938,"./dom/element":63380,"./dom/element.js":63380,"./dom/index":81820,"./dom/index.js":81820,"./dom/input":37585,"./dom/input.js":37585,"./dom/range":57170,"./dom/range.js":57170,"./dom/select":31106,"./dom/select.js":31106,"./dom/svg":55895,"./dom/svg.js":55895,"./dom/text":30281,"./dom/text.js":30281,"./dom/uid":81831,"./dom/uid.js":81831,"./duckdb":93874,"./duckdb.js":93874,"./fileAttachment":98513,"./fileAttachment.js":98513,"./files":46155,"./files/":46155,"./files/buffer":43825,"./files/buffer.js":43825,"./files/index":46155,"./files/index.js":46155,"./files/text":9974,"./files/text.js":9974,"./files/url":12174,"./files/url.js":12174,"./generators":26785,"./generators/":26785,"./generators/disposable":12238,"./generators/disposable.js":12238,"./generators/filter":45731,"./generators/filter.js":45731,"./generators/index":26785,"./generators/index.js":26785,"./generators/input":13443,"./generators/input.js":13443,"./generators/map":33921,"./generators/map.js":33921,"./generators/observe":61367,"./generators/observe.js":61367,"./generators/queue":49042,"./generators/queue.js":49042,"./generators/range":52707,"./generators/range.js":52707,"./generators/valueAt":15890,"./generators/valueAt.js":15890,"./generators/worker":8179,"./generators/worker.js":8179,"./html":46566,"./html.js":46566,"./index":7138,"./index.js":7138,"./leaflet":53861,"./leaflet.js":53861,"./library":64739,"./library.js":64739,"./md":21715,"./md.js":21715,"./mermaid":29376,"./mermaid.js":29376,"./mutable":30221,"./mutable.js":30221,"./now":3666,"./now.js":3666,"./promises":15898,"./promises/":15898,"./promises/delay":52984,"./promises/delay.js":52984,"./promises/index":15898,"./promises/index.js":15898,"./promises/tick":22989,"./promises/tick.js":22989,"./promises/when":37782,"./promises/when.js":37782,"./require":19204,"./require.js":19204,"./resolve":95545,"./resolve.js":95545,"./sqlite":64054,"./sqlite.js":64054,"./svg":54745,"./svg.js":54745,"./table":77642,"./table.js":77642,"./template":19225,"./template.js":19225,"./tex":40667,"./tex.js":40667,"./that":5243,"./that.js":5243,"./vegalite":70423,"./vegalite.js":70423,"./width":10282,"./width.js":10282,"./xlsx":40538,"./xlsx.js":40538};function r(e){return Promise.resolve().then((function(){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n(o[e])}))}r.keys=function(){return Object.keys(o)},r.id=61187,e.exports=r},60486:function(e,t,n){"use strict";n.d(t,{$S:function(){return i},A2:function(){return l},CH:function(){return a},RN:function(){return o},Vv:function(){return c},m4:function(){return d},ns:function(){return s},yD:function(){return r}});const o=["sql","sqlite","postgres","bigquery","snowflake","mysql","mssql","oracle","databricks","duckdb","mongosql"];function r(e){return"array"===e||"csv"===e||"tsv"===e||"json"===e||"arrow"===e||"parquet"===e||"arquero"===e}function i(e){return"array"===e||"csv"===e||"tsv"===e||"json"===e}const s=["count","distinct","sum","min","max","mean","median","mode"],a=["x","y","color","size","fx","fy","mark"],c=["bar","dot","line","area","rule"],l=["linear","log","sqrt","symlog","point","band"],d=["linear","log","sqrt","symlog","categorical","ordinal"]},3357:function(e,t,n){"use strict";n.d(t,{Hk:function(){return J},f8:function(){return W},hD:function(){return V},B7:function(){return N},Xk:function(){return A},Cq:function(){return F},L7:function(){return xe},eu:function(){return M},aS:function(){return O}});var o=n(34790),r=n(59119),i=n(14456),s=n(53695),a=n(9606),c=n(74822),l=n(1864),d=n(58489),u=n(63213),f=n(18680),p=n(92858),h=n(41799),m=n(69396),g=n(85893);const y=e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M3 13C3 11.8954 3.89543 11 5 11H9C10.1046 11 11 11.8954 11 13V25C11 26.1046 10.1046 27 9 27H5C3.89543 27 3 26.1046 3 25V13Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M12 16C12 14.8954 12.8954 14 14 14H18C19.1046 14 20 14.8954 20 16V25C20 26.1046 19.1046 27 18 27H14C12.8954 27 12 26.1046 12 25V16Z",fill:"currentColor"}),(0,g.jsx)("rect",{x:"21",y:"18",width:"8",height:"9",rx:"2",fill:"currentColor"}),(0,g.jsx)("path",{d:"M30 8C30 6.89543 30.8954 6 32 6H36C37.1046 6 38 6.89543 38 8V25C38 26.1046 37.1046 27 36 27H32C30.8954 27 30 26.1046 30 25V8Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M39 13C39 11.8954 39.8954 11 41 11H45C46.1046 11 47 11.8954 47 13V25C47 26.1046 46.1046 27 45 27H41C39.8954 27 39 26.1046 39 25V13Z",fill:"currentColor"})]})),v=e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 5H17V13H15V7H13V13H9V5Z M29 5H41V13H39V7H37V13H35V7H33V13H29V5Z M27 5H19V15H23V13H27V5ZM25 7H23V11H25V7Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M22 21.5858L25 24.5858L28 21.5858 M25 16L25 24",stroke:"currentColor",strokeWidth:"2"})]})),x=e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M3 5C3 3.89543 3.89543 3 5 3H35C36.1046 3 37 3.89543 37 5V8C37 9.10457 36.1046 10 35 10H5C3.89543 10 3 9.10457 3 8V5Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M3 13C3 11.8954 3.89543 11 5 11H29C30.1046 11 31 11.8954 31 13V16C31 17.1046 30.1046 18 29 18H5C3.89543 18 3 17.1046 3 16V13Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M3 21C3 19.8954 3.89543 19 5 19H23C24.1046 19 25 19.8954 25 21V24C25 25.1046 24.1046 26 23 26H5C3.89543 26 3 25.1046 3 24V21Z",fill:"currentColor"})]})),b=e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"5 5 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M35.625 24.5C28.875 24.5 28.875 15.5 22.125 15.5",stroke:"currentColor",strokeWidth:"2"}),(0,g.jsx)("path",{d:"M37.875 15.5L34.5 18.875V12.125L37.875 15.5Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M37.875 24.5L34.5 27.875V21.125L37.875 24.5Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M35.625 15.5C28.875 15.5 28.875 24.5 22.125 24.5",stroke:"currentColor",strokeWidth:"2"})]}));var w,C,k,S=n(3961);!function(e){e.Data="data",e.Snippet="snippet",e.Reference="reference",e.Stdlib="stdlib",e.JavaScript="javascript"}(w||(w={})),function(e){e[e.JavaScriptLocal=99]="JavaScriptLocal",e[e.Reference=98]="Reference",e[e.Stdlib=97]="Stdlib",e[e.Data=96]="Data",e[e.Snippet=95]="Snippet",e[e.JavaScriptCell=94]="JavaScriptCell",e[e.JavaScript=93]="JavaScript"}(C||(C={})),function(e){e.Global="global",e.Snippet="snippet",e.Cell="cell",e.Local="local",e.Stdlib="stdlib",e.File="file",e.Database="database",e.Secret="secret",e.Property="property",e.Dot="dot",e.Markdown="markdown",e.Mermaid="mermaid"}(k||(k={}));class _ extends S.i{async process(e){const t=await e({type:"autocomplete",variable:this._variable,paths:this._paths});return(n=Array.from(t,(e=>({label:e,type:w.JavaScript,boost:C.JavaScript,detail:k.Property,origin:"worker"}))),e=>{if(!n.length)return null;const{name:t,from:o}=(0,r.qz)(e.state).resolve(e.pos,-1);return{from:"PropertyName"===t?o:e.pos,options:n,span:/\w*$/}})(this._context);var n}constructor(e,t,n){super(),this._context=e,this._variable=t,this._paths=n}}var Z=n(602),j=n(75030),L=n(26836);function M(e){return(t,n,r,i)=>{const s=t.state.field(f.rr);(0,o.DB)(e((e=>(0,L.Q)(e,s))))(t,n,r,i)}}const V={".cm-tooltip.cm-tooltip-autocomplete":{border:"none",background:"none",marginTop:"2px","& > ul":{backgroundColor:"var(--white)",border:"solid 1px var(--silver)",borderRadius:"var(--border-radius-2)",boxShadow:"var(--box-shadow-4)",color:"var(--dark-gray)",font:"var(--font-size-6) var(--sans-serif)",minWidth:"min(212px, 95vw)",maxHeight:"212px","& > li":{padding:"4px 6px",lineHeight:"24px"},"& > li[aria-selected]":{color:"var(--near-black)",backgroundColor:"var(--observable-focus-lightest-blue)"}}},".cm-completionDetail":{fontStyle:"normal",opacity:"1",color:"var(--gray)",float:"right"},".cm-completionMatchedText":{fontWeight:"bold",textDecoration:"none"},".cm-completionIcon":{width:"24px",position:"relative",marginRight:"4px",opacity:"1","&:after":{content:"''",position:"absolute",width:"24px",height:"24px",bottom:"-7px",left:"0px",borderRadius:"var(--border-radius-1)",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none'%3E%3Cstyle%3E.a%7Bfill:%23929292;%7D%3C/style%3E%3Cpath d='M16.9 17.1C16.3 17.7 15.5 18 14.6 18H13.5V16H14.6C15 16 15.3 15.8 15.5 15.7 15.6 15.5 15.7 15.3 15.7 15V14.5C15.7 14.2 15.7 13.8 16.1 13 16.5 12.4 17.3 12 17.3 12 17.3 12 16.5 11.7 16.1 11.1 15.7 10.3 15.7 9.8 15.7 9.5V9C15.7 8.7 15.6 8.5 15.5 8.3 15.3 8.2 15 8 14.6 8H13.5L13.5 6H14.6C15.5 6 16.3 6.3 16.9 6.9 17.5 7.5 17.7 8.3 17.7 9V9.5C17.7 9.7 17.7 10.1 17.9 10.5 18 10.6 18.1 10.7 18.2 10.8 18.4 10.9 18.6 11 19 11V13C18.6 13 18.4 13.1 18.2 13.2 18.1 13.3 18 13.4 17.9 13.5 17.7 13.9 17.7 14.3 17.7 14.5V15C17.7 15.7 17.5 16.5 16.9 17.1Z' class='a'/%3E%3Cpath d='M7.1 17.1C7.7 17.7 8.5 18 9.4 18H10.5V16H9.4C9 16 8.7 15.8 8.5 15.7 8.4 15.5 8.3 15.3 8.3 15V14.5C8.3 14.2 8.3 13.8 7.9 13 7.5 12.4 6.8 12 6.8 12 6.8 12 7.5 11.7 7.9 11.1 8.3 10.3 8.3 9.8 8.3 9.5V9C8.3 8.7 8.4 8.5 8.5 8.3 8.7 8.2 9 8 9.4 8H10.5L10.5 6H9.4C8.5 6 7.7 6.3 7.1 6.9 6.5 7.5 6.3 8.3 6.3 9V9.5C6.3 9.7 6.3 10.1 6.1 10.5 6 10.6 5.9 10.7 5.8 10.8 5.6 10.9 5.4 11 5 11V13C5.4 13 5.6 13.1 5.8 13.2 5.9 13.3 6 13.4 6.1 13.5 6.3 13.9 6.3 14.3 6.3 14.5V15C6.3 15.7 6.5 16.5 7.1 17.1Z' class='a'/%3E%3C/svg%3E \")",backgroundSize:"'cover'"}},".cm-snippetFieldPosition":{verticalAlign:"initial"},".cm-completionIcon-data":{"&:after":{backgroundImage:"url(\"data:image/svg+xml, %3csvg width='24' height='24' viewBox='-4 -4 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' stroke-width='2' %3e%3cpath d='M7.19855 2.52175L7.88131 1.79111L7.19855 2.52175ZM12.6 11.7764L13.2581 11.0234L12.6 11.7764ZM5.34191 6.76078L11.9419 12.5293L13.2581 11.0234L6.65809 5.2549L5.34191 6.76078ZM10.8958 13.6864L3.35462 6.63385L1.98852 8.09459L9.52965 15.1472L10.8958 13.6864ZM6.51578 3.25238L13.8172 10.0755L15.1828 8.61419L7.88131 1.79111L6.51578 3.25238ZM3.08395 3.55474C3.91017 2.45311 5.50967 2.31219 6.51578 3.25238L7.88131 1.79111C6.0058 0.0384695 3.02413 0.301162 1.48395 2.35474L3.08395 3.55474ZM3.35462 6.63385C2.49183 5.82695 2.37516 4.49978 3.08395 3.55474L1.48395 2.35474C0.162683 4.11642 0.380169 6.59044 1.98852 8.09459L3.35462 6.63385ZM11.993 13.6551C11.6977 13.9647 11.2082 13.9786 10.8958 13.6864L9.52965 15.1472C10.6432 16.1886 12.3878 16.1388 13.4402 15.0356L11.993 13.6551ZM11.9419 12.5293C12.2764 12.8216 12.2996 13.3337 11.993 13.6551L13.4402 15.0356C14.5328 13.8903 14.4499 12.0651 13.2581 11.0234L11.9419 12.5293Z' fill='%23929292' /%3e%3c/svg%3e\")"}},".cm-completionIcon-snippet":{"&:after":{backgroundImage:"url(\"data:image/svg+xml,%0A%3Csvg width='24' height='24' viewBox='-4 -4 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13 3H3C2.44772 3 2 3.44772 2 4V12C2 12.5523 2.44772 13 3 13H13C13.5523 13 14 12.5523 14 12V4C14 3.44772 13.5523 3 13 3Z' stroke='%23929292' stroke-width='2' /%3E%3Crect x='4' y='9' width='2' height='2' rx='0.5' fill='%23929292' /%3E%3Crect x='7' y='5.5' width='2' height='5.5' rx='0.5' fill='%23929292' /%3E%3Crect x='10' y='7' width='2' height='4' rx='0.5' fill='%23929292' /%3E%3C/svg%3E%0A\")"}},".cm-completionIcon-reference, .cm-completionIcon-stdlib":{"&:after":{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='-4 -4 24 24' fill='%23929292' fillRule='evenodd' clipRule='evenodd' %3E%3Cpath d='M3 1.75C2.30964 1.75 1.75 2.30964 1.75 3C1.75 3.69036 2.30964 4.25 3 4.25C3.69036 4.25 4.25 3.69036 4.25 3C4.25 2.30964 3.69036 1.75 3 1.75ZM0.25 3C0.25 1.48122 1.48122 0.25 3 0.25C4.51878 0.25 5.75 1.48122 5.75 3C5.75 4.51878 4.51878 5.75 3 5.75C1.48122 5.75 0.25 4.51878 0.25 3Z' /%3E%3Cpath d='M13 11.75C12.3096 11.75 11.75 12.3096 11.75 13C11.75 13.6904 12.3096 14.25 13 14.25C13.6904 14.25 14.25 13.6904 14.25 13C14.25 12.3096 13.6904 11.75 13 11.75ZM10.25 13C10.25 11.4812 11.4812 10.25 13 10.25C14.5188 10.25 15.75 11.4812 15.75 13C15.75 14.5188 14.5188 15.75 13 15.75C11.4812 15.75 10.25 14.5188 10.25 13Z' /%3E%3Cpath d='M10 12C9.44771 12 9 11.5523 9 11V5C9 3.34315 7.65685 2 6 2H5V4H6C6.55228 4 7 4.44772 7 5V11C7 12.6569 8.34315 14 10 14H11V12H10Z' /%3E%3C/svg%3E\")"}},".cm-completionIcon-text":{"&:after":{backgroundImage:"url(\"data:image/svg+xml,%0A%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.29552 11.1791C8.0027 11.1791 8.6196 10.8922 8.83526 10.4595H8.93557V11.1013H10.9417V7.38168C10.9417 6.18557 10.0239 5.5 8.41396 5.5C6.79398 5.5 5.76582 6.18071 5.6956 7.29902H7.51119C7.62654 7.04618 7.88233 6.92463 8.28858 6.92463C8.6848 6.92463 8.92554 7.09967 8.92554 7.38168V7.78524L7.81211 7.84845C6.31751 7.93111 5.5 8.51943 5.5 9.51619C5.5 10.5178 6.21721 11.1791 7.29552 11.1791ZM8.09799 9.83709C7.70679 9.83709 7.46103 9.65233 7.46103 9.36546C7.46103 9.09804 7.7118 8.923 8.14313 8.89382L8.92554 8.84034V9.16125C8.92554 9.5405 8.55941 9.83709 8.09799 9.83709Z' fill='%23929292'/%3E%3Cpath d='M16.2832 15.4043C17.6925 15.4043 18.5 14.3833 18.5 12.594C18.5 10.7901 17.7076 9.78361 16.2832 9.78361C15.5108 9.78361 14.924 10.1337 14.6632 10.7463H14.5629V7.84845H12.5066V15.3265H14.5127V14.4805H14.613C14.8588 15.064 15.4757 15.4043 16.2832 15.4043ZM15.4757 11.3201C16.0324 11.3201 16.3935 11.8209 16.3935 12.594C16.3935 13.3768 16.0374 13.8679 15.4757 13.8679C14.909 13.8679 14.5579 13.3816 14.5529 12.5988C14.5579 11.816 14.919 11.3201 15.4757 11.3201Z' fill='%23929292'/%3E%3Cpath d='M11.2878 15.0284C11.1925 13.5746 10.2396 12.7626 8.62461 12.7626C6.68363 12.7626 5.69559 13.7302 5.69559 15.6264C5.69559 17.5324 6.68363 18.5 8.62461 18.5C10.2045 18.5 11.1975 17.6734 11.2878 16.2828H9.42707C9.36689 16.7593 9.09606 17.0024 8.62461 17.0024C8.02275 17.0024 7.75192 16.5794 7.75192 15.6264C7.75192 14.6832 8.02275 14.2601 8.62461 14.2601C9.09606 14.2601 9.36689 14.5227 9.42707 15.0284H11.2878Z' fill='%23929292'/%3E%3C/svg%3E%0A\")"}}},T=[["function ${name}(${params}) {\n\t${}\n}","function"],["class ${Name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}","class"]].map((e=>{let[t,n]=e;return{apply:(0,o.DB)(t),label:I(n),type:w.JavaScript,boost:C.JavaScript,detail:k.Snippet,origin:"javascriptSnippets"}}));function I(e){if(!/^[a-z0-9.`[\]_\- ]+$/i.test(e))throw new Error("invalid label: ".concat(e));return e.replace(/ /g,"\xa0")}const D=[["md`${}`","md`` [Markdown]",H],["htl.html`${}`","html``"],["htl.svg`${}`","svg``"],["tex`${}`","tex``"],["dot`${}`","dot`` [Graphviz]",H],["mermaid`${}`","mermaid``",H]].map((e=>{let[t,n,r=(e=>e)]=e;return{apply:r((0,o.DB)(t)),label:I(n),type:w.Stdlib,boost:C.Stdlib,detail:k.Stdlib,origin:"stdlib"}})),R=[['DatabaseClient("${}")',"DatabaseClient",H],['FileAttachment("${}")',"FileAttachment",H],['Secret("${}")',"Secret",H],["Generators.observe(notify => {\n\t${}\n})","Generators.observe"],["Promises.delay(${duration})","Promises.delay"],["Promises.tick(${duration})","Promises.tick"],["invalidation"],["visibility()","visibility"],["width"],["now"],["d3","D3"],["_","_ [Lodash]"],["vl","vl [Vega-Lite]"],["Inputs"],["Plot"],["aq","aq [Arquero]"],["Arrow","Apache Arrow"],["L","L [Leaflet]"],["htl","htl [Hypertext Literal]"],["DuckDBClient.of({${name}: ${data}})","DuckDBClient"],["SQLiteDatabaseClient.open(${source})","SQLiteDatabaseClient"],["topojson","TopoJSON"],["aapl"],["alphabet"],["cars"],["citywages"],["diamonds"],["flare"],["industries"],["miserables"],["olympians"],["penguins"],["weather"]].map((e=>{let[t,n=t,r=(e=>e)]=e;return{apply:r((0,o.DB)(t)),label:I(n),type:w.Stdlib,boost:C.Stdlib,detail:k.Stdlib,origin:"stdlib"}}));function H(e){return(t,n,r,s)=>{e(t,n,r,s),t instanceof i.tk&&(0,o.WA)(t)}}const P=[["let ${name};","let"],["const ${name} = ${value};","const"],["for (let ${index} = 0; ${index} < ${length}; ++${index}) {\n\t${}\n}","for loop"],["for (const ${value} of ${values}) {\n\t${}\n}","for of loop"],["try {\n\t${}\n} catch (${error}) {\n\t${}\n}","try catch"]].map((e=>{let[t,n]=e;return{apply:(0,o.DB)(t),label:I(n),type:w.JavaScript,boost:C.JavaScript,detail:k.Snippet,origin:"blockSnippets"}})),A=[{text:'import {${cell}} from "@${user}/${notebook}"',label:"Import notebook",description:"Reuse any code on Observable",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M22 21.5858L25 24.5858L28 21.5858",stroke:"currentColor",strokeWidth:"2"}),(0,g.jsx)("path",{d:"M25 16L25 24",stroke:"currentColor",strokeWidth:"2"}),(0,g.jsx)("path",{d:"M19 7C19 5.89543 19.8954 5 21 5H27L31 9V17C31 18.1046 30.1046 19 29 19H27V17H29V10H26V7H21V17H23V19H21C19.8954 19 19 18.1046 19 17V7Z",fill:"currentColor"})]}))},{text:'${library} = import("https://cdn.skypack.dev/${library}@${version}")',label:"Import library",description:"Load modern JS libraries from npm",thumbnail:v},{text:'${library} = require("${library}@${version}")',label:"Require library",description:"Load legacy JS libraries from npm",thumbnail:v}].map((e=>{let{text:t,label:n,description:r,thumbnail:i}=e;return{thumbnail:i,description:r,apply:(0,o.DB)(t),label:I(n),type:w.JavaScript,boost:C.Snippet,detail:k.Snippet,origin:"importSnippets"}}));let $;function U(e){return(void 0!==$||($=R.concat(Array.from((0,j.r)(),(e=>({apply:(0,o.DB)(e),label:e,type:w.JavaScript,boost:C.JavaScript,detail:k.Global,origin:"global"}))))),$).concat(Array.from(e.state.field(f.rr),(e=>({apply:(0,o.DB)(e),label:e,type:w.Reference,boost:C.Reference,detail:k.Cell,origin:"references"}))))}const E=[{text:'${weather}.filter((${d}, i) => ${d.location === "New York"})',label:"Filter array"},{text:"${weather}.map((${d}, i) => ${d.temp_max})",label:"Map array"},{text:"${1:weather}.reduce((reduce, d, i) => ${2:reduce + d.precipitation}, ${3:0})",label:"Reduce array"},{text:"[...${weather}].sort((a, b) => b.${precipitation} - a.${precipitation})",label:"Sort array"}].map((e=>{let{text:t,label:n}=e;return{thumbnail:b,apply:(0,o.DB)(t),label:I(n),type:w.Snippet,boost:C.Snippet,detail:k.Snippet,origin:"transformSnippets"}})),O=[{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.areaY(${aapl}, {x: "${Date}", y: "${Close}"}),\n\t\tPlot.ruleY([0])\n\t]\n})',label:"Area chart",description:"Values over time as filled areas",thumbnail:e=>(0,g.jsx)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,g.jsx)("path",{d:"M12.0417 18.2281L4 25C3.63098 25.369 3.89233 26 4.41421 26H45.0001C45.5523 26 46.0001 25.5523 46.0001 25V5.20711C46.0001 5.0745 45.9474 4.94732 45.8536 4.85355C45.6584 4.65829 45.3418 4.65829 45.1465 4.85355L36.3787 13.6213C35.8161 14.1839 35.0531 14.5 34.2574 14.5H26.7427C25.9471 14.5 25.184 14.8161 24.6214 15.3787L21.4792 18.5208C20.5905 19.4096 19.2419 19.6501 18.1007 19.1234L15.2312 17.799C14.1748 17.3114 12.9317 17.4787 12.0417 18.2281Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.areaY(${weather.slice(-365)}, {x: "${date}", y1: "${temp_min}", y2: "${temp_max}", curve: "step"})\n\t]\n})',label:"Band area chart",description:"Values over time as filled areas",thumbnail:e=>(0,g.jsx)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,g.jsx)("path",{d:"M12.0416 18.2281L4.11345 24.9045C4.03861 24.9675 3.97743 25.0451 3.93367 25.1327C3.62808 25.7438 4.26801 26.3962 4.88495 26.1024L12.5552 22.4499C13.167 22.1586 13.8594 22.0829 14.5196 22.2353L18.7752 23.2174C19.5588 23.3982 20.3821 23.2569 21.0604 22.8252L24.9634 20.3415C25.3172 20.1163 25.7143 19.9679 26.129 19.9056L35.0005 18.5749C35.3312 18.5253 35.6512 18.4208 35.9475 18.2656L44.392 13.8423C45.3806 13.3245 46 12.3007 46 11.1848V5.20711C46 5.0745 45.9473 4.94732 45.8536 4.85355C45.6583 4.65829 45.3417 4.65829 45.1464 4.85355L36.3787 13.6213C35.8161 14.1839 35.053 14.5 34.2574 14.5H26.7426C25.947 14.5 25.1839 14.8161 24.6213 15.3787L21.4792 18.5208C20.5904 19.4096 19.2419 19.6501 18.1007 19.1234L15.2312 17.799C14.1747 17.3114 12.9316 17.4787 12.0416 18.2281Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))},{text:'Plot.plot({\n\ty: {\n\t\ttickFormat: "s"\n\t},\n\tmarks: [\n\t\tPlot.areaY(${industries}, {x: "${date}", y: "${unemployed}", fill: "${industry}"}),\n\t\tPlot.ruleY([0])\n\t]\n})',label:"Stacked area chart",description:"Values over time as filled areas",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M12.0415 18.2282L4.05513 24.9536C4.01851 24.9844 3.98576 25.0196 3.9576 25.0583C3.67249 25.4502 3.95242 26 4.43704 26H44.9999C45.5522 26 45.9999 25.5523 45.9999 25V5.20711C45.9999 5.0745 45.9472 4.94732 45.8535 4.85355C45.6582 4.65829 45.3416 4.65829 45.1464 4.85355L36.3786 13.6213C35.816 14.1839 35.0529 14.5 34.2573 14.5H26.7425C25.9469 14.5 25.1838 14.8161 24.6212 15.3787L21.4791 18.5208C20.5903 19.4096 19.2418 19.6501 18.1006 19.1234L15.2311 17.799C14.1746 17.3114 12.9315 17.4787 12.0415 18.2282Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,g.jsx)("path",{d:"M2.5 26L12.0338 22.3681C12.6675 22.1267 13.3522 22.0503 14.0235 22.1462L18.4871 22.7839C19.4614 22.9231 20.4527 22.6982 21.2716 22.1523L24.7876 19.8082C25.5707 19.2862 26.5128 19.057 27.4482 19.1609L33.6581 19.8509C34.5286 19.9476 35.4067 19.756 36.1578 19.3053L47.5 12.5",stroke:"#f5f5f5"})]}))},{text:'Plot.plot({\n\tx: {\n\t\ttype: "log"\n\t},\n\tmarks: [\n\t\tPlot.arrow(${citywages}, {\n\t\t\tx1: "${POP_1980}",\n\t\t\ty1: "${R90_10_1980}",\n\t\t\tx2: "${POP_2015}",\n\t\t\ty2: "${R90_10_2015}",\n\t\t\tbend: true\n\t\t})\n\t]\n})',label:"Arrow chart",description:"Connected pairs of values",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("line",{x1:"17.0882",y1:"23.5885",x2:"32.5885",y2:"9.91178",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,g.jsx)("line",{x1:"32.4215",y1:"24.7095",x2:"39.7095",y2:"5.57849",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,g.jsx)("line",{x1:"24.4148",y1:"21.7125",x2:"29.7125",y2:"7.58521",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,g.jsx)("line",{x1:"37.4019",y1:"21.7185",x2:"40.7185",y2:"12.5981",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,g.jsx)("line",{x1:"6.04284",y1:"19.5864",x2:"21.5864",y2:"4.95716",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,g.jsx)("line",{x1:"7.05652",y1:"24.5869",x2:"18.5869",y2:"13.9435",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.barY(${alphabet}, {x: "${letter}", y: "${frequency}", sort: {x: "y", reverse: true}}),\n\t\tPlot.ruleY([0])\n\t]\n})',label:"Bar chart",description:"Values by category as bars",thumbnail:y},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.barX(${alphabet}, {x: "${frequency}", y: "${letter}", sort: {y: "x", reverse: true}}),\n\t\tPlot.ruleX([0])\n\t]\n})',label:"Horizontal bar chart",description:"Values by category as bars",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M3 5C3 3.89543 3.89543 3 5 3H21C22.1046 3 23 3.89543 23 5V8C23 9.10457 22.1046 10 21 10H5C3.89543 10 3 9.10457 3 8V5Z",fill:"currentColor"}),(0,g.jsx)("rect",{x:"3",y:"11",width:"14",height:"7",rx:"2",fill:"currentColor"}),(0,g.jsx)("path",{d:"M3 21C3 19.8954 3.89543 19 5 19H31C32.1046 19 33 19.8954 33 21V24C33 25.1046 32.1046 26 31 26H5C3.89543 26 3 25.1046 3 24V21Z",fill:"currentColor"})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.rectY(${weather.slice(-42)}, {x: "${date}", y: "${wind}", interval: ${d3.utcDay}}),\n\t\tPlot.ruleY([0])\n\t]\n})',label:"Temporal bar chart",description:"Values over time as rects",thumbnail:y},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.boxX(${olympians}, {x: "${weight}", y: "${sport}", sort: {y: "x"}})\n\t]\n})',label:"Box plot",description:"Quantitative distributions as boxes",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"14.5",y:"6.5",width:"15",height:"7",rx:"0.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"22.5",y:"16.5",width:"15",height:"7",rx:"0.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"19",y:"6",width:"2",height:"8",fill:"currentColor"}),(0,g.jsx)("rect",{x:"31",y:"16",width:"2",height:"8",fill:"currentColor"}),(0,g.jsx)("path",{d:"M9 10C9 9.44772 9.44772 9 10 9H14V11H10C9.44772 11 9 10.5523 9 10V10Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M16 20C16 19.4477 16.4477 19 17 19H22V21H17C16.4477 21 16 20.5523 16 20V20Z",fill:"currentColor"}),(0,g.jsx)("rect",{x:"6",y:"9",width:"2",height:"2",rx:"1",fill:"currentColor"}),(0,g.jsx)("path",{d:"M30 9H36C36.5523 9 37 9.44772 37 10V10C37 10.5523 36.5523 11 36 11H30V9Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M38 19H43C43.5523 19 44 19.4477 44 20V20C44 20.5523 43.5523 21 43 21H38V19Z",fill:"currentColor"})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.cell(${weather.slice(-365)}, {\n\t\t\tx: ${d => d.date.getUTCDate()},\n\t\t\ty: ${d => d.date.getUTCMonth()},\n\t\t\tfill: "${temp_max}"\n\t\t})\n\t]\n})',label:"Cell chart",description:"Values by category in a grid",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"8.5",y:"12.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"15.5",y:"5.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"15",y:"12",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"22",y:"5",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"22",y:"12",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"29.5",y:"5.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"29.5",y:"12.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"36",y:"5",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"36",y:"12",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"8",y:"19",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"15.5",y:"19.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"22.5",y:"19.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"})]}))},{text:'Plot.plot({\n\tfacet: {\n\t\tdata: ${penguins},\n\t\tx: "${species}"\n\t},\n\tmarks: [\n\t\tPlot.frame(),\n\t\tPlot.dot(${penguins}, {x: "${culmen_length_mm}", y: "${culmen_depth_mm}"})\n\t]\n})',label:"Faceted chart",description:"Small multiples",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("circle",{cx:"8.5",cy:"20.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"11.5",cy:"11.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"13.5",cy:"15.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"17.5",cy:"19.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"31.5",cy:"14.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"33.5",cy:"10.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"42.5",cy:"7.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"39.5",cy:"11.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("path",{d:"M25 5L25 26",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.rectY(${olympians}, Plot.binX({y: "count"}, {x: "${weight}"})),\n\t\tPlot.ruleY([0])\n\t]\n})',label:"Histogram chart",description:"Quantitative distribution as bars",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M3 11C3 9.89543 3.89543 9 5 9H9C10.1046 9 11 9.89543 11 11V25C11 26.1046 10.1046 27 9 27H5C3.89543 27 3 26.1046 3 25V11Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M12 7C12 5.89543 12.8954 5 14 5H18C19.1046 5 20 5.89543 20 7V25C20 26.1046 19.1046 27 18 27H14C12.8954 27 12 26.1046 12 25V7Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M21 17C21 15.8954 21.8954 15 23 15H27C28.1046 15 29 15.8954 29 17V25C29 26.1046 28.1046 27 27 27H23C21.8954 27 21 26.1046 21 25V17Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M30 22C30 20.8954 30.8954 20 32 20H36C37.1046 20 38 20.8954 38 22V25C38 26.1046 37.1046 27 36 27H32C30.8954 27 30 26.1046 30 25V22Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M39 25C39 23.8954 39.8954 23 41 23H45C46.1046 23 47 23.8954 47 25V25C47 26.1046 46.1046 27 45 27H41C39.8954 27 39 26.1046 39 25V25Z",fill:"currentColor"})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.ruleY([0]),\n\t\tPlot.lineY(${aapl}, {x: "${Date}", y: "${Close}"})\n\t]\n})',label:"Line chart",description:"Values over time as lines",thumbnail:e=>(0,g.jsx)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,g.jsx)("path",{d:"M5.5 24.5L12.0258 18.3821C12.9169 17.5466 14.2257 17.3349 15.3348 17.8468L18.1007 19.1234C19.2419 19.6501 20.5904 19.4096 21.4792 18.5208L24.6213 15.3787C25.1839 14.8161 25.947 14.5 26.7426 14.5H34.2574C35.053 14.5 35.8161 14.1839 36.3787 13.6213L44.5 5.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.ruleY([0]),\n\t\tPlot.lineY(${1:aapl}, Plot.windowY({x: "${2:Date}", y: "${3:Close}", k: ${4:10}, reduce: "mean"}))\n\t]\n})',label:"Moving average line chart",description:"Values over time as smoothed lines",thumbnail:e=>(0,g.jsx)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,g.jsx)("path",{d:"M42.5 6.5L37.7448 12.3874C34.308 16.6425 28.5479 18.2447 23.4076 16.3755V16.3755C18.6077 14.6301 13.2295 15.9041 9.7226 19.6172L7 22.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.ruleY([0]),\n\t\tPlot.lineY(${industries}, {x: "${date}", y: "${unemployed}", z: "${industry}"})\n\t]\n})',label:"Multi-series line chart",description:"Multiple values over time as lines",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,g.jsxs)("g",{fillOpacity:"0.35",children:[(0,g.jsx)("path",{d:"M35.6702 11.5014C34.9458 10.8618 34.0064 10.5 33.0228 10.5H28.7119C27.2973 10.5 25.9878 11.2472 25.2682 12.4651L25.0793 12.7848C25.6086 12.598 26.1706 12.5 26.7426 12.5H34.2574C34.5226 12.5 34.7769 12.3946 34.9645 12.2071L35.6702 11.5014Z"}),(0,g.jsx)("path",{d:"M7.9091 19.5H5.5C4.94772 19.5 4.5 19.9477 4.5 20.5C4.5 21.0523 4.94772 21.5 5.5 21.5H5.77577L7.9091 19.5Z"}),(0,g.jsx)("path",{d:"M11.6242 21.5H14.0132C14.2281 21.5 14.4417 21.5347 14.6456 21.6026L17.885 22.6824C19.6731 23.2785 21.6348 22.5453 22.5936 20.9226L23.5871 19.2413L22.8934 19.935C21.4121 21.4163 19.1646 21.8171 17.2626 20.9393L14.4967 19.6627C14.127 19.4921 13.6907 19.5627 13.3937 19.8412L11.6242 21.5Z"}),(0,g.jsx)("path",{d:"M36.6257 15.9035L37.8067 17.4388C38.5639 18.4232 39.7353 19 40.9772 19H44.5C45.0523 19 45.5 18.5523 45.5 18C45.5 17.4477 45.0523 17 44.5 17H40.9772C40.3563 17 39.7705 16.7116 39.392 16.2194L38.182 14.6464L37.7929 15.0355C37.445 15.3834 37.0512 15.6747 36.6257 15.9035Z"}),(0,g.jsx)("path",{d:"M38.9524 8.21924L37.2871 7.14172C36.6398 6.72285 35.8851 6.5 35.1141 6.5H26.7427C25.6818 6.5 24.6644 6.92143 23.9143 7.67157L19.6716 11.9142C19.2965 12.2893 18.7878 12.5 18.2574 12.5H14.2082C13.5873 12.5 12.9748 12.6446 12.4194 12.9223L5.05283 16.6056C4.55885 16.8526 4.35863 17.4532 4.60562 17.9472C4.85261 18.4412 5.45328 18.6414 5.94726 18.3944L13.3138 14.7111C13.5915 14.5723 13.8978 14.5 14.2082 14.5H18.2574C19.3183 14.5 20.3357 14.0786 21.0858 13.3284L25.3285 9.08579C25.7035 8.71071 26.2123 8.5 26.7427 8.5H35.1141C35.4996 8.5 35.8769 8.61142 36.2006 8.82086L37.5061 9.66556L38.9524 8.21924Z"}),(0,g.jsx)("path",{d:"M40.9406 11.8879L43.9568 13.8396C44.4205 14.1396 45.0396 14.0069 45.3396 13.5433C45.6396 13.0796 45.507 12.4605 45.0433 12.1604L42.3869 10.4416L40.9406 11.8879Z"})]}),(0,g.jsx)("path",{d:"M5.5 24.5L12.0258 18.3821C12.9169 17.5466 14.2257 17.3349 15.3348 17.8468L18.1007 19.1234C19.2419 19.6501 20.5904 19.4096 21.4792 18.5208L24.6213 15.3787C25.1839 14.8161 25.947 14.5 26.7426 14.5H34.2574C35.053 14.5 35.8161 14.1839 36.3787 13.6213L44.5 5.5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.dot(${cars}, {x: "${power (hp)}", y: "${economy (mpg)}"})\n\t]\n})',label:"Scatterplot chart",description:"Correlation or distribution as dots",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("circle",{cx:"10.5",cy:"20.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"14.5",cy:"15.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"16.5",cy:"16.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"28.5",cy:"14.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"34.5",cy:"13.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"36.5",cy:"12.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"23.5",cy:"18.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"20.5",cy:"12.5",r:"2",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"40.5",cy:"8.5",r:"2",stroke:"currentColor"})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.tickX(${cars}, {x: "${economy (mpg)}", y: "${year}"})\n\t]\n})',label:"Tick chart",description:"Quantitative distributions as lines",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"8",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"11",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"19",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"22",y:"9",width:"5",height:"12",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"28",y:"9",width:"3",height:"12",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"32",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"40",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.barX(${olympians}, Plot.groupY({x: "count"}, {y: "${nationality}", sort: {y: "x", reverse: true, limit: 10}})),\n\t\tPlot.ruleX([0])\n\t]\n})',label:"Top 10 bar chart",description:"Group and sort categories by count",thumbnail:x},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.barX(${olympians}, Plot.groupY({x: "sum"}, {x: "${gold}", y: "${nationality}", sort: {y: "x", reverse: true, limit: 10}})),\n\t\tPlot.ruleX([0])\n\t]\n})',label:"Weighted top 10 bar chart",description:"Group and sort categories by value",thumbnail:x},{text:'Plot.plot({\n\tcolor: {\n\t\tscheme: "ylgnbu"\n\t},\n\tmarks: [\n\t\tPlot.hexagon(${olympians}, Plot.hexbin({fill: "sum"}, {x: "${weight}", y: "${height}"}))\n\t]\n})',label:"Hexbin chart",description:"Distribution as hexagonal bins",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,g.jsx)("path",{d:"M27 5L30.0311 6.75V10.25L27 12L23.9689 10.25V6.75L27 5Z"}),(0,g.jsx)("path",{d:"M19 19L22.0311 20.75V24.25L19 26L15.9689 24.25V20.75L19 19Z"}),(0,g.jsx)("path",{d:"M27 19L30.0311 20.75V24.25L27 26L23.9689 24.25V20.75L27 19Z"}),(0,g.jsx)("path",{d:"M23 12L26.0311 13.75V17.25L23 19L19.9689 17.25V13.75L23 12Z"}),(0,g.jsxs)("g",{fillOpacity:"0.35",children:[(0,g.jsx)("path",{d:"M19 5L22.0311 6.75V10.25L19 12L15.9689 10.25V6.75L19 5Z"}),(0,g.jsx)("path",{d:"M35 5L38.0311 6.75V10.25L35 12L31.9689 10.25V6.75L35 5Z"}),(0,g.jsx)("path",{d:"M15 12L18.0311 13.75V17.25L15 19L11.9689 17.25V13.75L15 12Z"}),(0,g.jsx)("path",{d:"M31 12L34.0311 13.75V17.25L31 19L27.9689 17.25V13.75L31 12Z"})]}),(0,g.jsxs)("g",{stroke:"currentColor",fill:"none",children:[(0,g.jsx)("path",{d:"M8.46891 7.03868L11 5.57735L13.5311 7.03868V9.96133L11 11.4226L8.46891 9.96133V7.03868Z"}),(0,g.jsx)("path",{d:"M8.46891 21.0387L11 19.5774L13.5311 21.0387V23.9613L11 25.4226L8.46891 23.9613V21.0387Z"}),(0,g.jsx)("path",{d:"M32.4689 21.0387L35 19.5774L37.5311 21.0387V23.9613L35 25.4226L32.4689 23.9613V21.0387Z"}),(0,g.jsx)("path",{d:"M36.4689 14.0387L39 12.5774L41.5311 14.0387V16.9613L39 18.4226L36.4689 16.9613V14.0387Z"})]})]}))},{text:'Plot.plot({\n\theight: 180,\n\tmarks: [\n\t\tPlot.dot(${cars}, Plot.dodgeY({x: "${weight (lb)}"}))\n\t]\n})',label:"Beeswarm chart",description:"Distribution as dodged dots",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,g.jsx)("circle",{cx:"7",cy:"23",r:"2"}),(0,g.jsx)("circle",{cx:"10",cy:"18",r:"2"}),(0,g.jsx)("circle",{cx:"13",cy:"23",r:"2"}),(0,g.jsx)("circle",{cx:"25",cy:"23",r:"2"}),(0,g.jsx)("circle",{cx:"31",cy:"23",r:"2"}),(0,g.jsx)("circle",{cx:"31",cy:"18",r:"2"}),(0,g.jsx)("circle",{cx:"40",cy:"8",r:"2"}),(0,g.jsx)("circle",{cx:"25",cy:"18",r:"2"}),(0,g.jsx)("circle",{cx:"40",cy:"18",r:"2"}),(0,g.jsxs)("g",{fillOpacity:"0.35",children:[(0,g.jsx)("circle",{cx:"37",cy:"23",r:"2"}),(0,g.jsx)("circle",{cx:"43",cy:"23",r:"2"}),(0,g.jsx)("circle",{cx:"19",cy:"23",r:"2"}),(0,g.jsx)("circle",{cx:"7",cy:"13",r:"2"}),(0,g.jsx)("circle",{cx:"31",cy:"13",r:"2"}),(0,g.jsx)("circle",{cx:"43",cy:"13",r:"2"}),(0,g.jsx)("circle",{cx:"31",cy:"8",r:"2"})]})]}))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.linearRegressionY(${penguins}, {x: "${culmen_length_mm}", y: "${culmen_depth_mm}", stroke: "${species}"})\n\t]\n})',label:"Linear regression",description:"Best-fit line with confidence band",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M3 13.9929V25.5901C3 26.2791 3.67724 26.7642 4.32901 26.541C8.08911 25.2528 18.9841 21.5945 26 20C32.4908 18.5248 41.1601 18.1371 45.0116 18.0357C46.1128 18.0067 47 17.1092 47 16.0076V4.44494C47 3.7462 46.3043 3.25974 45.6481 3.49983C42.0325 4.82277 31.9433 8.42199 25 10C18.4281 11.4936 9.0376 11.8724 4.98598 11.968C3.88448 11.994 3 12.8911 3 13.9929Z",fill:"currentColor",fillOpacity:"0.35"}),(0,g.jsx)("path",{d:"M5 20L45 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})),newUntil:new Date(Date.UTC(2022,7,15))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.voronoi(${penguins}, {x: "${culmen_depth_mm}", y: "${culmen_length_mm}", fill: "${species}", stroke: "white"})\n\t]\n})',label:"Voronoi diagram",description:"Delaunay partition by closest point",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,g.jsx)("path",{d:"M8.3406 3H4C3.44772 3 3 3.44772 3 4V26C3 26.5523 3.44771 27 4 27H6.33498L12.4139 12.5042L8.3406 3Z",fillOpacity:"0.35"}),(0,g.jsx)("path",{d:"M8.50373 27H28V18.7063L14.0566 13.7586L8.50373 27Z"}),(0,g.jsx)("path",{d:"M30 27H46C46.5523 27 47 26.5523 47 26V16.1714L37.1934 12.1596L30 18.4538V27Z"}),(0,g.jsx)("path",{d:"M47 14.0105V4C47 3.44772 46.5523 3 46 3H38V10.3286L47 14.0105Z"}),(0,g.jsx)("path",{d:"M36 3H10.5165L14.2468 11.7039L28.7823 16.8617L36 10.5462V3Z",fillOpacity:"0.35"})]})),newUntil:new Date(Date.UTC(2022,7,15))},{text:'Plot.plot({\n\tmarks: [\n\t\tPlot.density(${cars}, { x: "${power (hp)}", y: "${economy (mpg)}" })\n\t]\n})',label:"Density contours",description:"Density estimates for point clouds",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M4.44721 14.1056C3.95324 13.8586 3.35256 14.0588 3.10557 14.5528C2.85858 15.0468 3.05881 15.6474 3.55279 15.8944L4.44721 14.1056ZM18.6247 3.21913C18.1934 2.87412 17.5641 2.94404 17.2191 3.3753C16.8741 3.80657 16.944 4.43586 17.3753 4.78087L18.6247 3.21913ZM3.55279 15.8944C5.624 16.93 8.73521 18.1 11.941 18.4926C15.1278 18.8828 18.6028 18.5243 21.1644 16.2474L19.8356 14.7526C17.8972 16.4757 15.1222 16.8672 12.184 16.5074C9.26479 16.15 6.376 15.07 4.44721 14.1056L3.55279 15.8944ZM21.1644 16.2474C22.4476 15.1067 23.1371 13.8087 23.3476 12.45C23.5551 11.1103 23.2846 9.79682 22.7997 8.61925C21.8398 6.28808 19.9576 4.28549 18.6247 3.21913L17.3753 4.78087C18.5424 5.71451 20.1602 7.46192 20.9503 9.38075C21.3404 10.3282 21.5074 11.2647 21.3712 12.1438C21.2379 13.0038 20.8024 13.8933 19.8356 14.7526L21.1644 16.2474Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M4.5547 9.16795C4.09517 8.8616 3.4743 8.98577 3.16795 9.4453C2.8616 9.90483 2.98577 10.5257 3.4453 10.8321L4.5547 9.16795ZM12.0145 3.14251C11.5409 2.85836 10.9267 3.01192 10.6425 3.4855C10.3584 3.95908 10.5119 4.57334 10.9855 4.85749L12.0145 3.14251ZM3.4453 10.8321C5.0752 11.9186 7.70695 12.9628 10.1938 13.421C11.4418 13.6508 12.7115 13.7444 13.8368 13.5926C14.9509 13.4423 16.0557 13.0311 16.7809 12.1247L15.2191 10.8753C14.9443 11.2189 14.4241 11.4952 13.5694 11.6105C12.726 11.7243 11.6832 11.6617 10.5562 11.454C8.29305 11.0372 5.9248 10.0814 4.5547 9.16795L3.4453 10.8321ZM16.7809 12.1247C17.4806 11.25 17.6563 10.2597 17.4748 9.29877C17.3013 8.38009 16.8101 7.51583 16.2288 6.76355C15.0651 5.25767 13.3295 3.9315 12.0145 3.14251L10.9855 4.85749C12.1705 5.5685 13.6849 6.74233 14.6462 7.98645C15.1274 8.60917 15.4175 9.18241 15.5096 9.66998C15.5937 10.1153 15.5194 10.5 15.2191 10.8753L16.7809 12.1247Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M25.3575 3.4855C25.0733 3.01192 24.4591 2.85836 23.9855 3.14251C23.5119 3.42666 23.3584 4.04092 23.6425 4.5145L25.3575 3.4855ZM45.9005 12.495C46.45 12.55 46.9401 12.149 46.995 11.5995C47.05 11.05 46.649 10.5599 46.0995 10.505L45.9005 12.495ZM23.6425 4.5145C25.1785 7.07446 27.4912 10.3845 32.1838 11.9487L32.8162 10.0513C28.8176 8.71845 26.8215 5.92554 25.3575 3.4855L23.6425 4.5145ZM32.1838 11.9487C34.5441 12.7355 36.8273 12.7241 39.0583 12.6043C41.3251 12.4825 43.5 12.255 45.9005 12.495L46.0995 10.505C43.5 10.245 41.0977 10.4918 38.951 10.6071C36.7683 10.7244 34.8015 10.7131 32.8162 10.0513L32.1838 11.9487Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M31.7071 3.29289C31.3166 2.90237 30.6834 2.90237 30.2929 3.29289C29.9024 3.68342 29.9024 4.31658 30.2929 4.70711L31.7071 3.29289ZM46.3162 6.44868C46.8402 6.27404 47.1233 5.70772 46.9487 5.18377C46.774 4.65983 46.2077 4.37667 45.6838 4.55132L46.3162 6.44868ZM30.2929 4.70711C32.4744 6.88866 35.2264 8 38 8V6C35.7736 6 33.5256 5.11134 31.7071 3.29289L30.2929 4.70711ZM38 8C40.6413 8 43.2523 7.47001 46.3162 6.44868L45.6838 4.55132C42.7477 5.52999 40.3587 6 38 6V8Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M4.44721 18.6056C3.95324 18.3586 3.35256 18.5588 3.10557 19.0528C2.85858 19.5468 3.05881 20.1474 3.55279 20.3944L4.44721 18.6056ZM28.2 26.6C28.5314 27.0418 29.1582 27.1314 29.6 26.8C30.0418 26.4686 30.1314 25.8418 29.8 25.4L28.2 26.6ZM3.55279 20.3944C6.56062 21.8983 11.2452 24 16 24V22C11.7548 22 7.43938 20.1017 4.44721 18.6056L3.55279 20.3944ZM16 24C17.1398 24 18.3776 23.9361 19.5339 23.9059C20.7172 23.875 21.8667 23.8766 22.955 23.9942C25.1218 24.2285 26.931 24.9081 28.2 26.6L29.8 25.4C28.069 23.0919 25.6282 22.2715 23.17 22.0058C21.9458 21.8734 20.689 21.875 19.4817 21.9066C18.2474 21.9389 17.1102 22 16 22V24Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M4.44721 23.1056C3.95324 22.8586 3.35256 23.0588 3.10557 23.5528C2.85858 24.0468 3.05881 24.6474 3.55279 24.8944L4.44721 23.1056ZM9.25746 26.9701C9.79326 27.1041 10.3362 26.7783 10.4701 26.2425C10.6041 25.7067 10.2783 25.1638 9.74254 25.0299L9.25746 26.9701ZM3.55279 24.8944C4.61259 25.4243 7.181 26.451 9.25746 26.9701L9.74254 25.0299C7.819 24.549 5.38741 23.5757 4.44721 23.1056L3.55279 24.8944Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M35 26C33.4999 24 29.5 21 32.5 18C35.4999 15 42 16 46 17.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,g.jsx)("path",{d:"M41 26C39 25.0001 37.0001 23 38.5 21.5C40 20 44 21.5 46 23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})),newUntil:new Date(Date.UTC(2022,7,15))}].map((e=>{let{text:t,label:n,description:r,thumbnail:i,newUntil:s}=e;return{thumbnail:i,description:r,apply:(0,o.DB)(t),label:I(n),type:w.Snippet,boost:C.Snippet,detail:k.Snippet,origin:"plotSnippets",newUntil:s}})),F=[{apply:M((e=>"viewof #{".concat(e("button"),'} = Inputs.button("#{Click me}")'))),label:"Button input",shortLabel:"Button",description:"Do something on click",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"13",y:"11",width:"24",height:"8",rx:"1",fill:"currentColor",fillOpacity:"0.35"}),(0,g.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5",stroke:"currentColor"})]}))},{apply:M((e=>"viewof #{".concat(e("checkboxes"),'} = Inputs.checkbox(#{["A", "B"]}, {label: "#{Select some}", value: [#{"A"}]})'))),label:"Checkbox input",shortLabel:"Checkbox",description:"Choose one or many from a list",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"29.5",y:"8.5",width:"13",height:"13",rx:"1.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"7.5",y:"8.5",width:"13",height:"13",rx:"1.5",fill:"currentColor",stroke:"currentColor"}),(0,g.jsx)("path",{d:"M11 16L13 18L18 12",stroke:"#f5f5f5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))},{apply:M((e=>"viewof #{".concat(e("color"),'} = Inputs.color({label: "#{Favorite color}", value: "#{#4682b4}"})'))),label:"Color input",shortLabel:"Color",description:"Choose a color from a palette",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("defs",{children:(0,g.jsx)("clipPath",{id:"clip0_1995_7024",children:(0,g.jsx)("rect",{x:"3",y:"3",width:"44",height:"24",rx:"2",fill:"white"})})}),(0,g.jsxs)("g",{clipPath:"url(#clip0_1995_7024)",children:[(0,g.jsxs)("g",{stroke:"currentColor",children:[(0,g.jsx)("rect",{x:"6.5",y:"6.5",width:"5",height:"5",rx:"0.5"}),(0,g.jsx)("rect",{x:"14.5",y:"6.5",width:"5",height:"5",rx:"0.5"}),(0,g.jsx)("rect",{x:"22.5",y:"6.5",width:"5",height:"5",rx:"0.5"}),(0,g.jsx)("rect",{x:"30.5",y:"6.5",width:"5",height:"5",rx:"0.5"}),(0,g.jsx)("rect",{x:"38.5",y:"6.5",width:"5",height:"5",rx:"0.5"})]}),(0,g.jsxs)("g",{fill:"currentColor",children:[(0,g.jsxs)("g",{fillOpacity:"0.35",children:[(0,g.jsx)("rect",{x:"6",y:"14",width:"6",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"22",y:"14",width:"6",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"30",y:"14",width:"6",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"38",y:"14",width:"6",height:"6",rx:"1"})]}),(0,g.jsx)("rect",{x:"6",y:"22",width:"6",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"14",y:"22",width:"6",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"22",y:"22",width:"6",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"30",y:"22",width:"6",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"38",y:"22",width:"6",height:"6",rx:"1"})]})]}),(0,g.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor"})]}))},{apply:M((e=>"viewof #{".concat(e("date"),'} = Inputs.date({label: "#{Date}", value: "#{').concat((new Date).toISOString().slice(0,10),'}"})'))),label:"Date input",shortLabel:"Date",description:"Choose a date from a calendar",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsxs)("g",{stroke:"currentColor",children:[(0,g.jsx)("rect",{x:"35.5",y:"12.5",width:"7",height:"6",rx:"0.5"}),(0,g.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5"})]}),(0,g.jsxs)("g",{fill:"currentColor",children:[(0,g.jsx)("path",{d:"M36 11.5C36 11.2239 36.2239 11 36.5 11V11C36.7761 11 37 11.2239 37 11.5V13H36V11.5Z"}),(0,g.jsx)("path",{d:"M41 11.5C41 11.2239 41.2239 11 41.5 11V11C41.7761 11 42 11.2239 42 11.5V13H41V11.5Z"}),(0,g.jsx)("rect",{x:"36",y:"13",width:"6",height:"1"}),(0,g.jsx)("rect",{x:"7",y:"11",width:"24",height:"8",rx:"1",fillOpacity:"0.35"})]})]}))},{apply:M((e=>"viewof #{".concat(e("file"),'} = Inputs.file({label: "Data"})'))),label:"File input",shortLabel:"File",description:"Choose a local file",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsxs)("g",{stroke:"currentColor",children:[(0,g.jsx)("path",{d:"M42 18.5H37C36.7239 18.5 36.5 18.2761 36.5 18V12C36.5 11.7239 36.7239 11.5 37 11.5H39.5858C39.7184 11.5 39.8456 11.5527 39.9393 11.6464L41.1464 12.8536L42.3536 14.0607C42.4473 14.1544 42.5 14.2816 42.5 14.4142V18C42.5 18.2761 42.2761 18.5 42 18.5Z"}),(0,g.jsx)("path",{d:"M39.5 11.5V14C39.5 14.2761 39.7239 14.5 40 14.5H42.5"}),(0,g.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5"})]}),(0,g.jsx)("rect",{x:"7",y:"11",width:"24",height:"8",rx:"1",fill:"currentColor",fillOpacity:"0.35"})]}))},{apply:M((e=>"viewof #{".concat(e("radios"),'} = Inputs.radio(#{["A", "B"]}, {label: "#{Select one}", value: "#{A}"})'))),label:"Radio input",shortLabel:"Radio",description:"Choose one from a list",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"29.5",y:"8.5",width:"13",height:"13",rx:"6.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"7.5",y:"8.5",width:"13",height:"13",rx:"6.5",fill:"currentColor",stroke:"currentColor"}),(0,g.jsx)("circle",{cx:"14",cy:"15",r:"3",fill:"#f5f5f5"})]}))},{apply:M((e=>"viewof #{1:".concat(e("range"),'} = Inputs.range([#{2:0}, #{3:100}], {label: "#{Amount}", step: #{4:1}})'))),label:"Range input",shortLabel:"Range",description:"Choose a number with a slider",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"3.5",y:"12.5",width:"43",height:"5",rx:"2.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"3",y:"12",width:"31",height:"6",rx:"3",fill:"currentColor"}),(0,g.jsx)("circle",{cx:"32",cy:"15",r:"5.5",fill:"#f5f5f5",stroke:"currentColor"})]}))},{apply:M((e=>"viewof #{".concat(e("search"),"} = Inputs.search(#{cars})"))),label:"Search input",shortLabel:"Search",description:"Full-text search of tabular data",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5",stroke:"currentColor"}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0625 16.25C11.2706 16.25 12.25 15.2706 12.25 14.0625C12.25 12.8544 11.2706 11.875 10.0625 11.875C8.85438 11.875 7.875 12.8544 7.875 14.0625C7.875 15.2706 8.85438 16.25 10.0625 16.25ZM10.0625 17.5C11.961 17.5 13.5 15.961 13.5 14.0625C13.5 12.164 11.961 10.625 10.0625 10.625C8.16402 10.625 6.625 12.164 6.625 14.0625C6.625 15.961 8.16402 17.5 10.0625 17.5Z",fill:"currentColor"}),(0,g.jsx)("rect",{x:"11.7324",y:"16.6161",width:"1.25",height:"3.125",transform:"rotate(-45 11.7324 16.6161)",fill:"currentColor"})]}))},{apply:M((e=>"viewof #{".concat(e("select"),'} = Inputs.select(#{["A", "B"]}, {label: "#{Select one}"})'))),label:"Select input",shortLabel:"Select",description:"Choose one from a dropdown",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"6",y:"11",width:"23",height:"8",rx:"1",fill:"currentColor",fillOpacity:"0.35"}),(0,g.jsx)("path",{d:"M36 14L39 17L42 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,g.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5",stroke:"currentColor"})]}))},{apply:M((e=>"viewof #{".concat(e("table"),"} = Inputs.table(#{cars})"))),label:"Table input",shortLabel:"Table",description:"Choose rows from a tabular dataset",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor"}),(0,g.jsxs)("g",{fill:"currentColor",children:[(0,g.jsx)("rect",{x:"6",y:"6",width:"14",height:"4",rx:"1"}),(0,g.jsx)("rect",{x:"22",y:"6",width:"18",height:"4",rx:"1"}),(0,g.jsxs)("g",{fillOpacity:"0.35",children:[(0,g.jsx)("rect",{x:"6",y:"13",width:"8",height:"4",rx:"1"}),(0,g.jsx)("rect",{x:"6",y:"20",width:"10",height:"4",rx:"1"}),(0,g.jsx)("rect",{x:"22",y:"13",width:"22",height:"4",rx:"1"}),(0,g.jsx)("rect",{x:"22",y:"20",width:"21",height:"4",rx:"1"})]})]})]}))},{apply:M((e=>"viewof #{".concat(e("text"),'} = Inputs.text({label: "#{Name}"})'))),label:"Text input",shortLabel:"Text",description:"Freeform, single-line text input",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"7",y:"11",width:"11",height:"8",rx:"1",fill:"currentColor",fillOpacity:"0.35"}),(0,g.jsx)("path",{d:"M21 11V19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,g.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5",stroke:"currentColor"})]}))},{apply:M((e=>"viewof #{".concat(e("textarea"),'} = Inputs.textarea({label: "#{Description}"})'))),label:"Textarea input",shortLabel:"Textarea",description:"Freeform, multi-line text input",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor"}),(0,g.jsxs)("g",{fill:"currentColor",fillOpacity:"0.35",children:[(0,g.jsx)("rect",{x:"7",y:"7",width:"9",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"19",y:"7",width:"24",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"7",y:"17",width:"21",height:"6",rx:"1"})]}),(0,g.jsx)("path",{d:"M31 17V23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))},{apply:M((e=>"viewof #{".concat(e("toggle"),'} = Inputs.toggle({label: "#{Active}", value: #{true}})'))),label:"Toggle input",shortLabel:"Toggle",description:"Choose on or off",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"12",y:"8",width:"26",height:"14",rx:"7",fill:"currentColor"}),(0,g.jsx)("circle",{cx:"31",cy:"15",r:"5.5",fill:"#f5f5f5",stroke:"currentColor"})]}))},{apply:M((e=>"viewof #{".concat(e("form"),'} = Inputs.form({\n\t#{option1}: Inputs.checkbox([#{"A", "B"}], {label: "#{Select some}"}),\n\t#{option2}: Inputs.range([#{0, 100}], {label: "#{Amount}", step: 1}),\n\t#{option3}: Inputs.radio([#{"A", "B"}], {label: "#{Select one}"}),\n\t#{option4}: Inputs.select([#{"A", "B"}], {label: "#{Select one}"})\n})'))),label:"Form input",shortLabel:"Form",description:"Combine multiple inputs",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"20.5",y:"4.5",width:"9",height:"9",rx:"1.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"36.5",y:"4.5",width:"9",height:"9",rx:"1.5",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"4.5",y:"4.5",width:"9",height:"9",rx:"1.5",fill:"currentColor",stroke:"currentColor"}),(0,g.jsx)("path",{d:"M6.85742 9.71456L8.28599 11.1431L11.8574 6.85742",stroke:"#f5f5f5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,g.jsx)("rect",{x:"4.5",y:"20.5",width:"42",height:"4",rx:"2",stroke:"currentColor"}),(0,g.jsx)("rect",{x:"4",y:"20",width:"33",height:"5",rx:"2.5",fill:"currentColor"}),(0,g.jsx)("circle",{cx:"33.5",cy:"22.5",r:"4",fill:"#f5f5f5",stroke:"currentColor"})]}))}].map((e=>{let{apply:t,label:n,shortLabel:o,description:r,thumbnail:i}=e;return{description:r,thumbnail:i,apply:t,label:I(n),shortLabel:o,type:w.Snippet,boost:C.Snippet,detail:k.Snippet,origin:"inputSnippets"}})),N=[{apply:M((e=>"#{".concat(e("data"),'} = fetch("#{https://api.weather.gov/gridpoints/OKX/33,37/forecast}").then((response) => response.json())'))),label:"Fetch from URL",description:"Request a file or API via an HTTP",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 10C5 8.89543 5.89543 8 7 8H13L17 12V20C17 21.1046 16.1046 22 15 22H7C5.89543 22 5 21.1046 5 20V10ZM12 10H7V20H15V13H12V10Z",fill:"currentColor"}),(0,g.jsx)("rect",{x:"8",y:"14",width:"5",height:"2",fill:"currentColor"}),(0,g.jsx)("rect",{x:"8",y:"17",width:"6",height:"2",fill:"currentColor"}),(0,g.jsx)("circle",{cx:"39",cy:"15",r:"6.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,g.jsx)("line",{x1:"33",y1:"17.25",x2:"45",y2:"17.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,g.jsx)("path",{d:"M33 13H45",stroke:"currentColor",strokeWidth:"1.5"}),(0,g.jsx)("path",{d:"M39 9C39.5 9.83333 41.5 11.6875 41.5 15C41.5 19 39 21 39 21",stroke:"currentColor",strokeWidth:"1.5"}),(0,g.jsx)("path",{d:"M39 9C38.5 9.83333 36.5 11.6875 36.5 15C36.5 19 39 21 39 21",stroke:"currentColor",strokeWidth:"1.5"}),(0,g.jsx)("path",{d:"M21 15L19 15",stroke:"currentColor",strokeWidth:"2"}),(0,g.jsx)("path",{d:"M24 15L22 15",stroke:"currentColor",strokeWidth:"2"}),(0,g.jsx)("path",{d:"M27 15L25 15",stroke:"currentColor",strokeWidth:"2"}),(0,g.jsx)("path",{d:"M30 15L28 15",stroke:"currentColor",strokeWidth:"2"})]})),type:w.Snippet,boost:C.Snippet,detail:k.Snippet,origin:"dataSnippets"}],B=T.concat(D,O,E),q=[[M((e=>"#{".concat(e("name"),"} = #{1 + 2}"))),"expression cell"],[M((e=>"#{".concat(e("name"),"} = {\n\tfor (let i = 0; i < 100; ++i) {\n\t\tyield i;\n\t}\n}"))),"generator cell"],[M((e=>"#{".concat(e("name"),"} = {\n\treturn #{1 + 2};\n}"))),"block cell"],[M((e=>"mutable #{".concat(e("name"),"} = #{1 + 2}"))),"mutable cell"],[M((e=>"viewof #{".concat(e("name"),"} = htl.html`#{<input type=range>}`"))),"viewof cell"]].map((e=>{let[t,n]=e;return{apply:t,label:I(n),type:w.JavaScript,boost:C.JavaScriptCell,detail:k.Snippet,origin:"basicCellSnippets"}})).concat(A,N,F);function z(e){const t=(0,o.s1)(e.state),n=(0,o.dk)(e),r=e.state.field(a.l);return n&&r&&(r({type:"acceptSnippet",id:e.state.field(d.X),source:"Autocomplete menu"}),t&&r({type:"acceptCompletion",origin:t.origin})),n}const W=[{key:"Tab",run:z},{key:"Ctrl-Space",run:function(e){const t=(0,o.WA)(e),n=e.state.field(a.l);return t&&n&&n({type:"requestSnippets",id:e.state.field(d.X),trigger:"keypress",source:"Ctrl-Space"}),t}},{key:"Escape",run:o._B},{key:"ArrowDown",run:(0,o.gq)(!0)},{key:"ArrowUp",run:(0,o.gq)(!1)},{key:"PageDown",run:(0,o.gq)(!0,"page")},{key:"PageUp",run:(0,o.gq)(!1,"page")},{key:"Enter",run:z}],Y=new Set(["PropertyName",".",".?","MemberExpression","VariableName"]);function X(e){const t=e.state.field(a.l),n=(0,r.qz)(e.state).cursorAt(e.pos,-1);let o="?."===n.name||"."===n.name;const i=[];do{const{name:r,from:s,to:a}=n;if(!Y.has(r))break;if("PropertyName"===r&&o&&i.push(e.state.sliceDoc(s,a)),"?."!==r&&"."!==r||(o=!0),"VariableName"===r){const n=e.state.sliceDoc(s,a);return new _(e,n,i).run(t)}}while(n.prev());return null}function J(){return[(0,o.ys)({defaultKeymap:!1,override:[G((e=>ue(e)&&me(e)),(0,o.Mb)(q)),G((e=>pe(e)&&ge(e)),(0,o.Mb)(P)),G((e=>pe(e)&&function(e){return ae(e)||ge(e)||me(e)||le(e)}(e)),(0,o.Mb)(B)),G((e=>pe(e)&&se(e)),X),G((e=>pe(e)&&ae(e)),(e=>(0,o.Mb)(U(e))(e))),G((e=>ue(e)&&ie(e)),(e=>(0,o.Mb)(function(e){const t=(0,r.qz)(e.state).cursorAt(e.pos,-1),n=t.node.type.name;if("VariableName"!==n&&"PropertyName"!==n&&"PrivatePropertyName"!==n)return[];const o=[];do{const n=t.node;t.parent()&&t.firstChild();do{t.node!==n&&Q(t.node,o,e,t.node)}while(t.nextSibling())}while(t.parent());return o}(e))(e))),G((e=>pe(e)&&ee(e)),(e=>(0,o.Mb)(function(e){return e.state.field(c._).map((e=>({apply:(0,o.DB)(e),label:e,type:w.Data,boost:C.Data,detail:k.File,origin:"fileAttachments"})))}(e))(e))),G((e=>pe(e)&&te(e)),(async e=>(0,o.Mb)(await async function(e){const t=e.state.field(u.Z);if(!t)return[];return(await(0,Z.a8)("".concat("team"===t.type?"/team/".concat(t.id):"/user","/data-connectors?detail=false"))).map((e=>{let{name:t}=e;return{apply:(0,o.DB)(t),label:t,type:w.Data,boost:C.Data,detail:k.Database,origin:"databases"}}))}(e))(e))),G((e=>pe(e)&&ne(e)),(async e=>(0,o.Mb)(await async function(e){const t=e.state.field(u.Z);if(!t)return[];return(await(0,Z.a8)("".concat("team"===t.type?"/team/".concat(t.id):"/user","/secrets"))).map((e=>{let{name:t}=e;return{apply:(0,o.DB)(t),label:t,type:w.Data,boost:C.Data,detail:k.Secret,origin:"secrets"}}))}(e))(e))),G((e=>pe(e)&&function(e){return Ce(e)&&we(e)}(e)),(e=>(0,o.Mb)(function(e){switch(function(e){const t=(0,r.qz)(e.state).resolve(e.pos,-1).prevSibling;if("VariableName"===(null===t||void 0===t?void 0:t.name))return e.state.sliceDoc(t.from,t.to);return null}(e)){case"dot":return ve;case"md":return xe;case"mermaid":return ye;default:return[]}}(e))(e))),G((e=>function(e){return fe(e)&&!ce(e)}(e)&&we(e)),(0,o.Mb)(xe)),G((e=>pe(e)),(e=>(async e=>{const{state:t,pos:n}=e,r=t.field(p.c);if(!r||"js"!==(0,s.yq)(t))return null;const i=t.field(d.X);try{const t=await r.getCompletionsAtPosition(i,n);if(!t||t.isGlobalCompletion||t.isNewIdentifierLocation)return null;const s=t.entries.filter((e=>!e.isFromUncheckedFile));return s.length&&(re(["String"],0)(e)||se(e))&&(e.explicit=!0),(0,o.Mb)(s.map((e=>({label:e.name,detail:e.kind,type:w.JavaScript,boost:C.JavaScript,origin:"typescript"}))))(e)}catch(a){return console.error(a),null}})(e)))]}),i.tk.domEventHandlers({blur(e,t){(0,o._B)(t),(0,o.Rn)(t)}})]}function Q(e,t,n,o){switch(e.type.name){case"ParamList":case"ObjectPattern":case"ArrayPattern":for(let r=e.firstChild;r;r=r.nextSibling)Q(r,t,n,o);break;case"PropertyDeclaration":case"VariableDeclaration":case"MethodDeclaration":case"FunctionDeclaration":case"ClassDeclaration":{const o=[...e.getChildren("VariableDefinition"),...e.getChildren("PrivatePropertyDefinition"),...e.getChildren("PropertyDefinition"),...e.getChildren("ObjectPattern")];for(const r of o)Q(r,t,n,e)}break;case"PatternProperty":Q(e.lastChild,t,n,o);break;case"PrivatePropertyName":case"PrivatePropertyDefinition":case"PropertyName":case"PropertyDefinition":case"VariableDefinition":{if(e===o)break;const r=n.state.sliceDoc(e.from,e.to);if("constructor"===r&&("PropertyDefinition"===o.type.name||"MethodDeclaration"===o.type.name))break;t.push(function(e,t){switch(t.type.name){case"VariableDeclaration":case"ParamList":case"ClassDeclaration":case"FunctionDeclaration":case"MethodDeclaration":case"PropertyDeclaration":return{label:e,type:w.JavaScript,boost:C.JavaScriptLocal,detail:k.Local,origin:"local"}}return{label:e,type:w.JavaScript,origin:"local"}}(r,o));break}}}function G(e,t){return n=>e(n)?t(n):null}function K(e){return t=>{var n,o;const i=(0,r.qz)(t.state).resolve(t.pos,-1),{name:s}=i;if("String"===s&&"ArgList"===(null===(n=i.parent)||void 0===n?void 0:n.name)&&"VariableName"===(null===(o=i.parent.prevSibling)||void 0===o?void 0:o.name)&&t.pos===i.to-1){const{from:n,to:o}=i.parent.prevSibling;return t.state.sliceDoc(n,o)===e}return!1}}const ee=K("FileAttachment"),te=K("DatabaseClient"),ne=K("Secret");function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n=>{const o=(0,r.qz)(n.state).resolve(n.pos,t);return e.includes(o.name)}}function re(e){let t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return i=>{if(i===n)return t;n=i;for(let n=(0,r.qz)(i.state).resolve(i.pos,o);n;n=n.parent)if(e.includes(n.name))return t=!0,t;return t=!1,t}}const ie=oe(["VariableDefinition","VariableName","PropertyName","PrivatePropertyName","Number"]),se=oe([".","?.","PropertyName"]),ae=oe(["VariableName"]),ce=re(["Interpolation"]),le=oe(["InterpolationOpenMark"]);function de(e){return t=>t.state.field(l.C)===e}const ue=de("js"),fe=de("md");function pe(e){return ue(e)||ce(e)}function he(e){return t=>{var n,o;const i=(0,r.qz)(t.state).resolve(t.pos,-1);return i.name===e||"VariableName"===i.name&&"ExpressionStatement"===(null===(n=i.parent)||void 0===n?void 0:n.name)&&(null===(o=i.parent.parent)||void 0===o?void 0:o.name)===e}}const me=he("Cell"),ge=he("Block"),ye=[["graph TD\na--\x3eb\nb--\x3ec","graph TD"],["graph LR\na--\x3eb\nb--\x3ec","graph LR"]].map((e=>{let[t,n]=e;return{apply:(0,o.DB)(t),label:I(n),type:w.Snippet,boost:C.Snippet,detail:k.Mermaid,origin:"mermaidSnippets"}})),ve=[["graph g {\n\ta -- b -- c;\n}","graph"],["digraph g {\n\ta -> b -> c;\n}","digraph"]].map((e=>{let[t,n]=e;return{apply:(0,o.DB)(t),label:I(n),type:w.Snippet,boost:C.Snippet,detail:k.Dot,origin:"dotSnippets"}})),xe=[{text:"# ${heading}",label:"Heading 1",description:"Main headline",thumbnail:e=>(0,g.jsx)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,g.jsx)("path",{d:"M25.2607 21V8.31738H23.002V13.5908H16.832V8.31738H14.5645V21H16.832V15.498H23.002V21H25.2607ZM31.2197 21H33.4873V8.31738H31.2285L27.915 10.6465V12.7822L31.0703 10.5498H31.2197V21Z",fill:"currentColor"})}))},{text:"## ${heading}",label:"Heading 2",description:"Section headline",thumbnail:e=>(0,g.jsx)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,g.jsx)("path",{d:"M24.5361 20V10.1357H22.7793V14.2373H17.9805V10.1357H16.2168V20H17.9805V15.7207H22.7793V20H24.5361ZM26.6963 13.0547H28.3506C28.3506 12.0156 29.0342 11.3047 30.1074 11.3047C31.1396 11.3047 31.7549 11.9951 31.7549 12.8906C31.7549 13.6426 31.4541 14.1143 30.21 15.3721L26.792 18.8105V20H33.6416V18.5371H29.1846V18.4209L31.3037 16.3359C32.999 14.6748 33.498 13.875 33.498 12.7266C33.498 11.0859 32.165 9.88965 30.2031 9.88965C28.1455 9.88965 26.6963 11.1885 26.6963 13.0547Z",fill:"currentColor"})}))},{text:"### ${heading}",label:"Heading 3",description:"Subhead",thumbnail:e=>(0,g.jsx)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,g.jsx)("path",{d:"M24.4927 19V11.2495H23.1123V14.4722H19.3418V11.2495H17.9561V19H19.3418V15.6377H23.1123V19H24.4927ZM28.0483 15.541H29.0205C29.9766 15.541 30.5566 16.019 30.5566 16.7979C30.5566 17.5498 29.9282 18.0547 29.0366 18.0547C28.1396 18.0547 27.5327 17.5928 27.4736 16.873H26.147C26.2114 18.2749 27.3662 19.1934 29.0527 19.1934C30.7285 19.1934 31.9746 18.2266 31.9746 16.8945C31.9746 15.8364 31.314 15.1543 30.2612 14.9932V14.9019C31.083 14.6816 31.6685 14.064 31.6738 13.1294C31.6792 12.0176 30.75 11.0562 29.1011 11.0562C27.4199 11.0562 26.3672 12.0068 26.2974 13.3657H27.5972C27.6562 12.5923 28.1826 12.1626 29.0259 12.1626C29.8477 12.1626 30.3364 12.6675 30.3364 13.3066C30.3364 14.0103 29.7886 14.5044 28.9937 14.5044H28.0483V15.541Z",fill:"currentColor"})}))},{text:"| name   | quantity |\n| ------ | -------- |\n| apples | 12       |\n| pears  | 34       |",label:"Table",description:"Content in rows and columns",wrap:be,thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,g.jsx)("rect",{x:"14",y:"3",width:"2",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"14",y:"9",width:"2",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"14",y:"16",width:"2",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"14",y:"22",width:"2",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"34",y:"3",width:"2",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"34",y:"9",width:"2",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"34",y:"16",width:"2",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"34",y:"22",width:"2",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"3",y:"11",width:"9",height:"2",rx:"1"}),(0,g.jsx)("rect",{x:"38",y:"11",width:"9",height:"2",rx:"1"}),(0,g.jsx)("rect",{x:"18",y:"11",width:"14",height:"2",rx:"1"}),(0,g.jsxs)("g",{fillOpacity:"0.35",children:[(0,g.jsx)("rect",{x:"18",y:"3",width:"14",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"3",y:"3",width:"9",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"3",y:"16",width:"9",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"3",y:"22",width:"9",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"18",y:"16",width:"14",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"18",y:"22",width:"14",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"38",y:"22",width:"9",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"38",y:"16",width:"9",height:"5",rx:"1"}),(0,g.jsx)("rect",{x:"38",y:"3",width:"9",height:"5",rx:"1"})]})]}))},{text:"- ${text}",label:"Bulleted list",description:"Unordered series of items",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,g.jsxs)("g",{fillOpacity:"0.35",children:[(0,g.jsx)("rect",{x:"16",y:"3",width:"23",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"16",y:"12",width:"16",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"16",y:"21",width:"26",height:"6",rx:"1"})]}),(0,g.jsx)("circle",{cx:"10",cy:"6",r:"2"}),(0,g.jsx)("circle",{cx:"10",cy:"15",r:"2"}),(0,g.jsx)("circle",{cx:"10",cy:"24",r:"2"})]}))},{text:"1. ${text}",label:"Numbered list",description:"Ordered series of items",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,g.jsxs)("g",{fillOpacity:"0.35",children:[(0,g.jsx)("rect",{x:"16",y:"3",width:"23",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"16",y:"12",width:"16",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"16",y:"21",width:"26",height:"6",rx:"1"})]}),(0,g.jsx)("path",{d:"M8.89062 9H10.5469V3.36328H8.89062L7.47656 4.30859V5.69531L8.8125 4.8125H8.89062V9ZM7.41406 14.1953H8.92188C8.92188 13.7617 9.19141 13.4336 9.66406 13.4336C10.1055 13.4336 10.3359 13.7188 10.3359 14.043C10.3359 14.3281 10.25 14.5547 9.55859 15.1445L7.51172 16.8984V18H11.9922V16.7344H9.71484V16.6562L10.7734 15.75C11.6367 15.0117 11.9336 14.5781 11.9336 13.9062C11.9336 12.9219 11.1523 12.207 9.74609 12.207C8.35547 12.207 7.41406 13.0039 7.41406 14.1953ZM9.04297 23.6562H9.77344C10.25 23.6562 10.5391 23.8828 10.5391 24.2656C10.5391 24.6289 10.2344 24.8711 9.77734 24.8711C9.29297 24.8711 8.99219 24.6328 8.98438 24.25H7.40625C7.45703 25.4062 8.40234 26.1562 9.80469 26.1562C11.2305 26.1562 12.2227 25.4648 12.2227 24.4414C12.2227 23.7109 11.7578 23.207 10.918 23.0938V23.0156C11.5508 22.875 11.9922 22.4297 11.9922 21.7461C11.9922 20.8906 11.2422 20.207 9.85938 20.207C8.46094 20.207 7.55859 20.9297 7.55078 22.0664H9.04688C9.0625 21.6641 9.32812 21.418 9.78516 21.418C10.2109 21.418 10.4688 21.6523 10.4688 21.9883C10.4688 22.3398 10.207 22.5781 9.78125 22.5781H9.04297V23.6562Z"})]}))},{text:"> ${text}",label:"Blockquote",description:"Indented text",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,g.jsx)("rect",{x:"3",y:"3",width:"5",height:"6",rx:"1",fillOpacity:"0.35"}),(0,g.jsx)("rect",{x:"8",y:"12",width:"15",height:"6",rx:"1",fill:"currentColor"}),(0,g.jsx)("rect",{x:"3",y:"21",width:"14",height:"6",rx:"1",fillOpacity:"0.35"}),(0,g.jsx)("rect",{x:"27",y:"3",width:"14",height:"6",rx:"1",fill:"currentColor",fillOpacity:"0.35"}),(0,g.jsx)("rect",{x:"43",y:"3",width:"4",height:"6",rx:"1",fillOpacity:"0.35"}),(0,g.jsx)("rect",{x:"10",y:"3",width:"15",height:"6",rx:"1",fillOpacity:"0.35"}),(0,g.jsx)("rect",{x:"25",y:"12",width:"4",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"31",y:"12",width:"5",height:"6",rx:"1"}),(0,g.jsx)("rect",{x:"19",y:"21",width:"26",height:"6",rx:"1",fillOpacity:"0.35"})]}))},{text:"![${text}](${url})",label:"Image",description:"Display a picture or figure",thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("path",{d:"M11.2915 19.958L6 23V24H44V21.7428C44 20.8583 43.6097 20.0189 42.9333 19.4488L38.4286 15.6522L36.0789 13.5985C35.0125 12.6665 33.4395 12.6072 32.306 13.4564L25.8929 18.2609L21.9998 21.0448C21.2351 21.5917 20.2583 21.7484 19.3609 21.4683L13.6806 19.6952C12.8824 19.446 12.0164 19.5413 11.2915 19.958Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,g.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor",strokeOpacity:"0.35"}),(0,g.jsx)("circle",{cx:"16",cy:"12",r:"4",fill:"currentColor"})]}))},{text:"~~~\n${}\n~~~",label:"Code block",description:"Preformatted monospaced text",wrap:be,thumbnail:e=>(0,g.jsxs)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,g.jsx)("rect",{x:"4",y:"4",width:"42",height:"6",fill:"currentColor",fillOpacity:"0.35"}),(0,g.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor",strokeOpacity:"0.35"}),(0,g.jsx)("path",{d:"M28 13L32 17L28 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,g.jsx)("path",{d:"M22 21L18 17L22 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))},{text:"---${}",label:"Horizontal rule",description:"Section divider",wrap:be,thumbnail:e=>(0,g.jsx)("svg",(0,m.Z)((0,h.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,g.jsx)("rect",{x:"5",y:"14",width:"40",height:"2",rx:"1",fill:"currentColor"})}))}].map((e=>{let{text:t,label:n,description:r,wrap:i=(e=>e),thumbnail:s}=e;return{apply:i((0,o.DB)(t)),label:I(n),thumbnail:s,description:r,type:w.Snippet,boost:C.Snippet,detail:k.Markdown,origin:"mdSnippets"}}));function be(e){return(t,n,o,r)=>{t instanceof i.tk&&r!==t.state.doc.lineAt(r).to&&t.dispatch({changes:[{from:r,insert:"\n"}]}),e(t,n,o,r)}}function we(e){const t=e.state.doc.lineAt(e.pos);return!e.state.sliceDoc(t.from,e.pos).includes(" ")}const Ce=oe(["TemplateString"])},7469:function(e,t,n){"use strict";function o(e){return 0===e.doc.length}n.d(t,{Z:function(){return o}})},21684:function(e,t,n){"use strict";n.d(t,{Xl:function(){return F},_g:function(){return O},Hk:function(){return P},Bt:function(){return A}});var o=n(34790),r=n(45383),i=n(59119),s=n(49892),a=n(78120),c=n(14456),l=n(35524),d=n(3357),u=n(6917),f=n(53695),p=n(9606),h=n(41799),m=n(28641),g=n(25158);const y={visibility:"hidden"};function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"';return'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(t,">").concat(encodeURIComponent(e),"</svg>')")}var x=n(54667),b=n(69396);var w=n(2334),C=n(5952);var k=n(1864),S=n(18680),_=n(49475),Z=n(48152),j=n(730),L=n(64802),M=n(92858),V=n(30883),T=n(58489);var I=n(10420),D=n(69441);var R=n(40076),H=n(48764).Buffer;"undefined"===typeof btoa&&(n.g.btoa=e=>H.from("".concat(e),"binary").toString("base64"));const P={keymap:new a.F6,closeBrackets:new a.F6,modeExtensions:new a.F6,readOnly:new a.F6,sql:new a.F6,vimKeys:new a.F6},A=[...C.Y,...r.f$];function $(e){return e.replace(/\/$/,"").trim()}function U(e){try{return $(new URL(e).href)===$(e)}catch(t){return!1}}const E=[(0,d.Hk)(),a.Wl.highest(c.$f.of(d.f8))],O=[(0,o.vQ)(),a.Wl.high(c.$f.of(o.GA))],F=[_.zT,c.tk.theme((0,h.Z)({"&":{backgroundColor:"var(--near-white)",color:"var(--syntax-normal)",margin:"0px -14px",wordBreak:"break-word",borderRadius:"0.25rem",borderLeft:"solid ".concat(4,"px transparent"),"&.cm-focused":{outline:"none !important"},"&.cm-focused .cm-activeLine":{borderLeft:"solid ".concat(4,"px var(--observable-focus-blue)"),marginLeft:"-".concat(4,"px")},"&.cm-focused .cm-activeLine.cm-errorLine":{borderLeftColor:"var(--dark-red)"},"&.cm-focused .cm-matchingBracket":{backgroundColor:"transparent",color:"var(--syntax-matchbracket)"},"&:not(.cm-focused) .cm-cursor":y,"&:not(.cm-focused) .cm-placeholder":y,"&:not(.cm-focused) .cm-selectionBackground":y},".cm-scroller":{font:"var(--monospace-font)",overflow:"initial"},".cm-matchingBracket, &:not(.cm-focused) .cm-selectionMatch":{backgroundColor:"transparent"},".cm-line":{padding:"0 2px 0 10px","&:first-child":{marginRight:"20px"}},".cm-activeLine":{backgroundColor:"inherit"},".cm-errorLine":{borderLeft:"solid ".concat(4,"px var(--red)"),marginLeft:"-".concat(4,"px")},".cm-gutter-lint":{width:"0px"},".cm-gutters":{borderRight:"none"},".cm-lint-marker-error":{position:"absolute",borderLeft:"solid ".concat(4,"px var(--red)"),height:"21px",marginTop:"-3px",marginLeft:"-7px",content:"''"},".cm-lint-marker-error:before":{content:"''"},".cm-lintPoint":{position:"absolute",marginTop:"13px",marginLeft:"-3px",content:v('<path d="M10 6L6 2 2 6" fill="none" stroke="red" />','fill="none" viewBox="0 0 12 8" width="16" height="16" stroke-width="1.5" stroke-linecap="round"')},".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",borderRadius:"var(--border-radius-2)",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-tooltip-hover":{backgroundColor:"var(--white)",border:"solid 1px var(--silver)",borderRadius:"var(--border-radius-2)",boxShadow:"var(--box-shadow-4)",color:"var(--dark-gray)",font:"var(--font-size-6) var(--sans-serif)"},".cm-matchingBracket, .cm-nonmatchingBracket":{color:"inherit"},".node-hover &":{borderRadius:"0 0.25rem 0.25rem 0"},".node-focus &, .node-readonly &":{borderRadius:(0,g.t)()?"0 0.25rem 0 0":"0 0.25rem 0.25rem 0"},".node-select &, .node-toolbar &":{borderRadius:"0 0 0.25rem 0.25rem"},".node-toolbar.node-focus &, .node-toolbar.node-hover &, .node-toolbar.node-readonly &":{borderRadius:"0 0 0.25rem 0"},".node-focus &, .node-select &":{backgroundColor:"var(--observable-focus-lightest-blue)"},".node-readonly &":{color:"var(--gray)"},".node-add &":{backgroundColor:"var(--washed-green)"}},d.hD,(0,m.pK)("var(--observable-focus-dark-blue)"))),(0,Z.yC)(),(0,c.ZO)(),(0,c.AE)(),(0,s.sW)(),(0,i.nF)(l.$d),c.tk.lineWrapping,(0,r.m8)(),(0,c.Uw)(),a.yy.allowMultipleSelections.of(!0),a.yy.tabSize.of(2),(0,i.nY)(),(0,i.n$)(),(0,c.Zs)(),(N=65536,a.yy.changeFilter.of((e=>e.changes.newLength<=N))),a.yy.transactionFilter.of((e=>{const t=[];if(e.changes.iterChanges(((e,n,o,r,i)=>{let s=o;for(const a of i){let e=-1;for(;(e=a.indexOf("\0",e+1))>=0;)t.push({from:s+e,to:s+e+1,insert:"\ufffd"});s+=a.length}})),t.length){const n=a.as.of(t,e.changes.newLength);return(0,b.Z)((0,h.Z)({},e),{changes:e.changes.compose(n)})}return e})),(0,m.W$)(),(0,x.tU)(),(0,u.Cw)(),(0,j.kh)(),(0,S.vt)(),w.A,p.l,M.c,L.L7,L.UP,L.ss,c.tk.contentAttributes.of({"data-cy":"editor"}),a.yy.transactionExtender.of((function(e){const{effects:t,startState:n}=e,o=t.filter((e=>e.is(k.g)));let r=[];if(o.length>0){const e=n.field(k.C),{mode:t,data:i}=o[o.length-1].value;if(t!==e){const e=R.qz[t];r=[P.modeExtensions.reconfigure(e.extensions({settings:n.field(V.i),data:i})),P.keymap.reconfigure([c.$f.of([...e.keymap,...A])])]}}return{effects:r}})),a.yy.transactionFilter.of((function(e){const{newDoc:t,startState:n}=e,o=n.field(k.C);if(e.isUserEvent("input.paste")&&"md"===o){let o="";return e.changes.iterChanges(((e,n,r,i)=>{o||(o=t.sliceString(r,i))})),U(o)?n.changeByRange((e=>{const{from:t,to:r}=e,[i,s]=["](",")"],c=n.sliceDoc(t,r),l=(0,f.AB)(n,e,i,s),d=n.doc.sliceString(l.from,l.to),u=d.startsWith(i)&&d.endsWith(s),p=!c.length||u||U(c)?o:"[".concat(c,"](").concat(o,")"),h=t+p.length;return{range:a.xm.fromJSON({anchor:h,head:h}),changes:{from:t,to:r,insert:p}}})):e}return e})),c.tk.updateListener.of((e=>{let{view:t,state:n,focusChanged:o}=e;(0,D.f)(t,(()=>{const e=n.field(T.X),r=n.field(p.l);r&&(r({type:"edit",id:e,state:n}),t.hasFocus&&o&&r({type:"focus",id:e}))}))})),function(){function e(e,t,n){const o=n.state.field(p.l);if(!o||!t)return!1;const r=Array.prototype.filter.call(t.items,(e=>"file"===e.kind));if(!r.length)return!1;if(Array.prototype.some.call(t.items,(e=>"text/plain"===e.type)))return!1;const{fileUploadsOn:i,loginToUpload:s}=n.state.field(V.i);return i?(o({type:"attachLocalFiles",files:r.map((e=>e.getAsFile())),nodeId:n.state.field(T.X),nodeMode:n.state.field(k.C),source:"nodeEditor",trigger:"dragAndDrop"}),e.preventDefault(),!0):(s&&o({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"dragAndDrop",source:"nodeEditorDragAndDrop"}),!1)}return c.tk.domEventHandlers({drop:(t,n)=>!n.state.readOnly&&e(t,t.dataTransfer,n),paste:(t,n)=>!n.state.readOnly&&e(t,t.clipboardData,n)})}(),(0,I.p)(),(0,L.Tl)(),...E];var N},74822:function(e,t,n){"use strict";n.d(t,{C:function(){return i},_:function(){return r}});var o=n(91304);const[r,i]=(0,o.Z)([])},2093:function(e,t,n){"use strict";n.d(t,{D:function(){return a},G:function(){return s}});var o=n(59119);const r=new Set(["LineComment","BlockComment"]),i=new Set(["NamedBlockCell","NamedExpressionCell","NamedClassCell","NamedFunctionCell"]);function s(e,t){const n=(0,o.qz)(e);if("Cell"!==n.topNode.type.name)return null;let{firstChild:s}=n.topNode;for(;s&&r.has(s.type.name);)s=s.nextSibling;if(s&&i.has(s.type.name)){const e=s.getChild("VariableDefinition");if(e)return e;const n=s.getChild("QualifiedVariableDefinition");if(n)return t?n:n.getChild("VariableDefinition")}return null}function a(e){const t=(0,o.qz)(e);if("Cell"===t.topNode.type.name&&t.topNode.firstChild&&["NamedBlockCell","NamedExpressionCell"].includes(t.topNode.firstChild.type.name)){const e=t.topNode.firstChild.getChild("Equals");if(null===e||void 0===e?void 0:e.nextSibling)return e.nextSibling}return null}},2334:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var o=n(78120);let r=0;const i=o.QQ.define({create:()=>r++,update:e=>e})},63213:function(e,t,n){"use strict";n.d(t,{N:function(){return i},Z:function(){return r}});var o=n(91304);const[r,i]=(0,o.Z)(null)},28641:function(e,t,n){"use strict";n.d(t,{W$:function(){return y},pK:function(){return g},vT:function(){return u}});var o=n(78120),r=n(14456),i=n(7469),s=n(1864),a=n(40178),c=n(40076);const l="".concat((0,a._)("Alt-Backspace")," to delete this cell."),d=o.Py.define(),u=d.of(l);function f(e){const t=e.field(s.C),n=c.qz[t],o="tex"!==t&&"html"!==t?" ".concat((0,a._)("Ctrl-space")," for more options."):"",r=n.convertible?" Arrow \u2191/\u2193 to switch modes.":"";return"Type ".concat(n.label,", then ").concat((0,a._)("Shift-Enter"),".").concat(o).concat(r)}const p=o.QQ.define({create:e=>f(e),update(e,t){(0,i.Z)(t.state)&&(e=f(t.state));for(const n of t.effects)n.is(d)&&(e=n.value);return e}});class h extends r.l9{toDOM(){const e=document.createElement("div");return e.className="cm-placeholder",e.textContent=this.value,e}constructor(e){super(),this.value=e}}const m=r.lg.fromClass(class{update(e){(0,i.Z)(e.startState)===(0,i.Z)(e.state)&&e.startState.field(p)===e.state.field(p)||this.updateDeco(e.state)}updateDeco(e){this.placeholder=(0,i.Z)(e)?r.p.set(r.p.widget({widget:new h(e.field(p))}).range(0)):r.p.none}get decorations(){return this.placeholder}constructor(e){this.placeholder=r.p.none,this.updateDeco(e.state)}},{decorations:e=>e.decorations});function g(e){return{".cm-placeholder":{color:e,position:"absolute",fontFamily:"var(--sans-serif)",pointerEvents:"none",userSelect:"none",opacity:.6,overflowX:"hidden",whiteSpace:"nowrap",maxWidth:"95%","&::first-letter":{"text-transform":"uppercase"}}}}function y(){return[p,m]}},48152:function(e,t,n){"use strict";n.d(t,{K5:function(){return f},YE:function(){return c},j5:function(){return d},yC:function(){return p}});var o=n(14456),r=n(58489),i=n(91304);const s=o.tk.baseTheme({".cm-searchResult":{backgroundColor:"var(--observable-yellow)"},".cm-selectedSearchResult":{backgroundColor:"var(--observable-orange)"}}),[a,c]=(0,i.Z)(null),[l,d]=(0,i.Z)(null),[u,f]=(0,i.Z)(!1);function p(){return[s,a,l,u,g]}const h=o.p.mark({attributes:{class:"cm-searchResult"}}),m=o.p.mark({attributes:{class:"cm-selectedSearchResult"}}),g=o.lg.fromClass(class{update(e){const t=e.state.field(a),n=e.state.field(l),o=e.state.field(u);(e.viewportChanged||t!==this._previousSearchResults||n!==this._previousSelectedSearchResult||o!==this._previousSearchResultsVisible)&&(this._previousSearchResults=t,this._previousSelectedSearchResult=n,this._previousSearchResultsVisible=o,this.decorations=this.searchResultsDeco(e.view,t,n,o))}searchResultsDeco(e,t,n,i){if(!t||!i)return o.p.set([]);const s=e.state.field(r.X),a=[];for(const{from:o,to:r}of e.visibleRanges)for(let e=0;e<t.length;e++){const{pos:i,matchLength:c}=t[e];i>=o&&i<=r&&(n&&n.nodeId===s&&n.nodeResultIndex===e?a.push(m.range(i,i+c)):a.push(h.range(i,i+c)))}return o.p.set(a)}constructor(e){this.view=e,this._previousSearchResults=null,this._previousSelectedSearchResult=null,this._previousSearchResultsVisible=!1,this.decorations=this.searchResultsDeco(e,null,null,!1)}},{decorations:e=>e.decorations})},730:function(e,t,n){"use strict";n.d(t,{JN:function(){return d},Zt:function(){return a},_O:function(){return l},kh:function(){return c},mQ:function(){return s}});var o=n(78120),r=n(14456);const i=[["gold","translucent-gold"],["pink","translucent-pink"],["light-green","translucent-green"],["light-purple","translucent-purple"],["orange","translucent-orange"],["light-blue","translucent-blue"]];function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(i[(e+1)%i.length][t?1:0])}function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"var(--".concat(s(e,t),")")}function c(){return[d,h]}const l=o.Py.define(),d=o.QQ.define({create:()=>[],update(e,t){let{effects:n}=t;return n=n.filter((e=>e.is(l))),0===n.length?e:n.map((e=>e.value)).filter((e=>e))}});class u extends r.l9{toDOM(){const e=document.createElement("span");var t;return e.className="presence-widget",e.title=this.name,e.style.borderColor=a(this.order),e.style.setProperty("--presence-initials",'"'.concat((t=this.name,this.avatar?"":t.split(" ").filter((e=>e)).map((e=>e.charAt(0).toUpperCase())).join("").substring(0,2)),'"')),e.style.setProperty("--presence-avatar","url(".concat(this.avatar,")")),e.style.setProperty("--presence-color",a(this.order)),e}constructor(e,t,n){super(),this.name=e,this.avatar=t,this.order=n}}const f=e=>r.p.mark({attributes:{style:"background-color: ".concat(a(e,!0),";")}}),p=(e,t,n)=>r.p.widget({widget:new u(e,t,n)}),h=r.lg.fromClass(class{update(e){this.selectionsChanged(e)?this.decorations=this.decorationSet(e.state):this.decorations=this.decorations.map(e.changes)}selectionsChanged(e){return e.state.field(d)!==e.startState.field(d)}decorationSet(e){const t=e.field(d);return r.p.set(Array.from(this.getDecorations(t)),!0)}*getDecorations(e){for(const{selection:t,name:n,avatar:o,order:r}of e)for(const{head:e,empty:i,from:s,to:a}of t.ranges)yield p(n,o,r).range(e),i||(yield f(r).range(s,a))}constructor(e){this.view=e,this.decorations=this.decorationSet(e.state)}},{decorations:e=>e.decorations})},64802:function(e,t,n){"use strict";n.d(t,{L7:function(){return u},LV:function(){return f},Tl:function(){return x},UP:function(){return m},dF:function(){return g},ss:function(){return p},t2:function(){return d},vo:function(){return h}});var o=n(78120),r=n(14456),i=n(53695),s=n(9606),a=n(58489),c=n(91304),l=n(92858);function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"implicit";const n=e.state.field(a.X),o=e.state.field(u),r=e.state.field(p),i=e.state.field(s.l);return!(!r||!i||o)&&(i({type:"signatureHelpDismiss",id:n,source:t}),!0)}const[u,f]=(0,c.Z)(null),[p,h]=(0,c.Z)(!1),[m,g]=(0,c.Z)(null),y=o.QQ.define({create:v,update(e,t){let{state:n,docChanged:o,selection:r,startState:i}=t;return o||r?v(n,i):e},provide:e=>r.hJ.computeN([e],(t=>t.field(e)))});function v(e,t){const n=e.field(l.c);if(!n||"js"!==(0,i.yq)(e))return[];const o=e.selection.ranges.filter((e=>e.empty));if(!o.length)return[];const r=o[o.length-1].from,c=null===t||void 0===t?void 0:t.doc.toString().charAt(r-1),d="("===e.doc.toString().charAt(r-1)&&"("!==c,u=e.field(p),f=e.field(a.X),h=e.field(m);if(!h)return[];const g=document.createElement("div");return g.appendChild(h),g.setAttribute("class","cm-contextual-info cm-tooltip cm-tooltip-autocomplete"),n.getSignatureHelpItems(f,r,e.doc.toString()).then((t=>{const n=e.field(s.l);if(!t)return null===n||void 0===n?void 0:n({type:"signatureHelp",id:f});d||u?null===n||void 0===n||n({type:"signatureHelp",id:f,data:t}):null===n||void 0===n||n({type:"signatureHelp",id:f})})),[{pos:r,above:!0,create:()=>({dom:g,overlap:!0,offset:{x:0,y:4}})}]}function x(){return[y]}},92858:function(e,t,n){"use strict";n.d(t,{P:function(){return i},c:function(){return r}});var o=n(91304);const[r,i]=(0,o.Z)(null)},30883:function(e,t,n){"use strict";n.d(t,{C:function(){return i},i:function(){return r}});var o=n(91304);const[r,i]=(0,o.Z)({prettierOn:!1,closeBracketsOn:!0,fileUploadsOn:!1,loginToUpload:!0,spellcheckOn:!1,defaultCellMode:void 0,vimKeys:!1})},23545:function(e,t,n){"use strict";n.d(t,{R:function(){return i},W:function(){return s}});var o=n(41799),r=n(58489);const i={loaded:!1};function s(e){return n.e(1972).then(n.bind(n,1226)).then((t=>{function n(t){e({type:"blur",id:t.cm6.state.field(r.X)})}return Object.assign(i,(0,o.Z)({loaded:!0},t)),t.Vim.defineEx("write","w",(function(t){e({type:"commit",id:t.cm6.state.field(r.X),trigger:"keypress",source:"nodeEditor"})})),t.Vim.defineEx("quit","q",n),t.Vim.defineEx("wq","wq",n),t.Vim.defineEx("x","x",n),t.Vim.map("ZZ",":x","normal"),i}))}},76522:function(e,t,n){"use strict";var o=n(41799),r=n(69396),i=n(85893);n(67294);t.Z=e=>(0,i.jsx)("svg",(0,r.Z)((0,o.Z)({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),{children:(0,i.jsx)("path",{d:"M4.74329 10.1741C4.34605 10.6155 3.65395 10.6155 3.25671 10.1741L1.00207 7.66897C0.4229 7.02544 0.879592 6 1.74536 6L6.25464 6C7.12041 6 7.5771 7.02544 6.99793 7.66897L4.74329 10.1741Z",fill:"currentColor"})}))},10420:function(e,t,n){"use strict";n.d(t,{z:function(){return S},p:function(){return k}});var o=n(41799),r=n(34790),i=n(45383),s=n(14456),a=n(9606),c=n(7469),l=n(1864),d=n(58489),u=n(28641),f=n(18680);function p(e){return 1===e.selection.ranges.length&&e.selection.ranges[0].empty&&0===e.selection.ranges[0].from}function h(e){return 1===e.selection.ranges.length&&e.selection.ranges[0].empty&&e.selection.ranges[0].to===e.doc.length}var m=n(64802),g=n(30883),y=n(23545),v=n(2741),x=n(40076),b=n(65371);function w(e){return t=>{if(t.state.readOnly)return!1;const n=t.state.field(a.l);return!!n&&(n({type:e,id:t.state.field(d.X)}),!0)}}function C(e,t){if((0,m.t2)(e,"Escape"))return!0;if((0,i.g3)(e))return!0;if(function(e){return y.R.loaded&&y.R.getCM(e)}(e)&&"Escape"===t)return!0;const n=e.state.field(a.l);return!!n&&(n({type:"selectionBlur"}),!0)}function k(){return s.$f.of([{key:"Shift-Enter",run:S("keypress","nodeEditor")},{key:"Mod-s",run:S("keypress","nodeEditor")},{key:"Shift-Alt-f",run:e=>((0,r.Rn)(e),(0,b.Y)(e,!1),!0)},{key:"Mod-j",run(e){const t=e.state.field(a.l);if(!t)return!1;const n=e.plugin(f.YV);if(!n)return!1;const o=e.state.selection.main;let r;return n.decorations.between(o.from,o.to+1,((t,n)=>(r=e.state.doc.slice(t,n).toString(),!1))),!!r&&(t({type:"focusDefinition",name:r,id:e.state.field(d.X),trigger:"keypress",source:"Mod-j"}),!0)}},{key:"Shift-Mod-j",run(e){const t=e.state.field(a.l);return!!t&&(t({type:"focusUndo"}),!0)}},{key:"Backspace",run:e=>((0,c.Z)(e.state)&&e.dispatch({effects:[u.vT]}),!1)},{key:"Mod-Enter",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);if(!t)return!1;const{defaultCellMode:n}=e.state.field(g.i);return t(n?{type:"insertAfter",id:e.state.field(d.X),node:{mode:n},trigger:"keypress",source:"nodeEditor"}:{type:"openInsertMenu",id:e.state.field(d.X),before:!1,trigger:"keypress",source:"nodeEditor"}),!0}},{key:"Shift-Mod-Enter",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);if(!t)return!1;const{defaultCellMode:n}=e.state.field(g.i);return t(n?{type:"insertBefore",id:e.state.field(d.X),node:{mode:n},trigger:"keypress",source:"nodeEditor"}:{type:"openInsertMenu",id:e.state.field(d.X),before:!0,trigger:"keypress",source:"nodeEditor"}),!0}},{key:"Shift-Alt-Mod-Enter",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);if(!t)return!1;const{defaultCellMode:n}=e.state.field(g.i);return t(n?{type:"openInsertMenu",id:e.state.field(d.X),before:!0,trigger:"keypress",source:"nodeEditor"}:{type:"insertBefore",id:e.state.field(d.X),trigger:"keypress",source:"nodeEditor"}),!0}},{key:"Alt-Mod-Enter",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);if(!t)return!1;const{defaultCellMode:n}=e.state.field(g.i);return t(n?{type:"openInsertMenu",id:e.state.field(d.X),before:!1,trigger:"keypress",source:"nodeEditor"}:{type:"insertAfter",id:e.state.field(d.X),trigger:"keypress",source:"nodeEditor"}),!0}},{key:"Shift-Alt-Enter",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);return!!t&&(t({type:"splitBefore",id:e.state.field(d.X),trigger:"keypress"}),!0)}},{key:"Alt-Enter",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);return!!t&&(t({type:"splitAfter",id:e.state.field(d.X),trigger:"keypress"}),!0)}},{key:"Alt-Backspace",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);return!!t&&(!!p(e.state)&&(t({type:"mergeBefore",id:e.state.field(d.X)}),!0))}},{key:"Ctrl-Alt-d",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);return!!t&&(!!h(e.state)&&(t({type:"mergeAfter",id:e.state.field(d.X)}),!0))}},{key:"Mod-.",run:w("togglePin")},{key:"Mod-,",run:w("toggleDisplay")},{key:"Ctrl-Shift-p",run:w("togglePin")},{key:"Ctrl-Shift-ArrowDown",run:w("moveDown")},{key:"Ctrl-Shift-ArrowUp",run:w("moveUp")},{mac:"Cmd-Alt-ArrowDown",run:w("moveDown")},{mac:"Cmd-Alt-ArrowUp",run:w("moveUp")},{key:"Mod-Shift-Alt-ArrowDown",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);return!!t&&(t({type:"duplicate",id:e.state.field(d.X),before:!1}),!0)}},{key:"Mod-Shift-Alt-ArrowUp",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);return!!t&&(t({type:"duplicate",id:e.state.field(d.X),before:!0}),!0)}},{key:"Shift-Mod-u",run(e){if(e.state.readOnly)return!1;const t=e.state.field(a.l);if(!t)return!1;const{fileUploadsOn:n,loginToUpload:r}=e.state.field(g.i);if(!n)return r&&t({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"keypress",source:"fileUploadKeyboardShortcut"}),!0;const i={nodeId:e.state.field(d.X),nodeMode:e.state.field(l.C),trigger:"keypress"};return t((0,o.Z)({type:"notebookFilePickerOpened",source:"nodeEditor"},i)),(0,v.Z)().then((e=>{t((0,o.Z)({type:"attachLocalFiles",files:e,source:"nodeEditor"},i))})),!0}},{key:"Mod-Escape",run:e=>C(e,"Mod-Escape")},{key:"Escape",run:e=>C(e,"Escape")},{key:"Shift-Alt-ArrowDown",mac:"Alt-Tab",run(e){const t=e.state.field(a.l);return!!t&&(t({type:"focusAfter",id:e.state.field(d.X)}),!0)}},{key:"Shift-Alt-ArrowUp",mac:"Shift-Alt-Tab",run(e){const t=e.state.field(a.l);return!!t&&(t({type:"focusBefore",id:e.state.field(d.X)}),!0)}},{key:"Mod-ArrowDown",run(e){const t=e.state.field(a.l);return!(!t||!h(e.state))&&(t({type:"focusAfter",id:e.state.field(d.X),selectStart:!0}),!0)}},{key:"Mod-ArrowUp",run(e){const t=e.state.field(a.l);return!(!t||!p(e.state))&&(t({type:"focusBefore",id:e.state.field(d.X),selectEnd:!0}),!0)}},{key:"ArrowDown",run:e=>!e.state.readOnly&&(0,c.Z)(e.state)&&x.qz[e.state.field(l.C)].convertible&&Z(e,((e,t)=>Math.min(e+1,t-1)))},{key:"ArrowUp",run:e=>!e.state.readOnly&&(0,c.Z)(e.state)&&x.qz[e.state.field(l.C)].convertible&&Z(e,(e=>Math.max(e-1,0)))}])}function S(e,t){return n=>((0,r.Rn)(n),(0,r._B)(n),(0,m.t2)(n),n.state.field(g.i).prettierOn?((0,b.Y)(n).then((()=>_(n,e,t))),!0):_(n,e,t))}function _(e,t,n){const o=e.state.field(a.l);return!!o&&(o({type:"commit",id:e.state.field(d.X),trigger:t,source:n}),!0)}function Z(e,t){const n=Object.entries(x.qz).filter((e=>{let[,{convertible:t}]=e;return t})).map((e=>{let[t]=e;return t})),o=e.state.field(l.C),r=n.findIndex((e=>e===o)),i=n[t(r,n.length)],s=e.state.field(a.l);return!!s&&(s({type:"setMode",id:e.state.field(d.X),source:"cellMenu",trigger:"keypress",mode:i}),!0)}},69441:function(e,t,n){"use strict";n.d(t,{Z:function(){return m},f:function(){return h}});var o=n(14456),r=n(9606),i=n(2334),s=n(58489),a=n(63213),c=n(64802),l=n(92858),d=n(33494),u=n(3142);const f=new Set;let p=[];function h(e,t){!function(e){return f.has(e)}(e)?t():p.push(t)}class m{setState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this._isSettingState)throw this._isSettingState=!1,new Error("Reentrant editor setState call");try{this._isSettingState=!0;for(const[,e]of this._views)f.add(e);for(const[e,n]of function(e){const t=new Map;for(const n of e){const e=n.state.field(i.A);t.has(e)?t.get(e).push(n):t.set(e,[n])}return t}(t)){const t=this._views.get(e);t&&t.update(n)}this._states=e.editorStates;for(const[,e]of this._views){const t=e.state.field(s.X,!1);void 0!==t&&this._states.has(t)||this._disable(e)}if(this._focusId!==e.focusId){if(this._focusId=e.focusId,null!==this._focusId){const e=g(this._states,this._views,this._focusId);e&&e.focus()}else if(document.activeElement instanceof HTMLElement){var n;document.activeElement.blur(),null===(n=window.getSelection())||void 0===n||n.removeAllRanges()}}else if(null!==this._focusId)for(const e of t)if(e.scrollIntoView&&e.state.field(s.X)===this._focusId){const t=this._views.get(e.state.field(i.A));t&&!t.hasFocus&&t.focus()}if(this._selectedSearchResult!==e.selectedSearchResult)if(e.selectedSearchResult){const t=g(this._states,this._views,e.selectedSearchResult.nodeId);if(t){const{nodeId:n,nodeResultIndex:o}=e.selectedSearchResult,{node:r}=t.domAtPos(e.searchResults.get(n)[o].pos);r instanceof HTMLElement&&(0,d.zT)(r),this._selectedSearchResult=e.selectedSearchResult}}else this._selectedSearchResult=void 0;const o=(0,u.cE)(e)?e.owner:null;if(this._privateOwner!==o){this._privateOwner=o;const e={effects:a.N.of(o)};for(const t of this._views.values())t.dispatch(e)}this._spotlight(e)}finally{this._isSettingState=!1;for(const[,t]of this._views)f.delete(t);const e=p;p=[];for(const t of e)t()}}attach(e,t,n){if(this._views.has(e))throw new Error("Duplicate EditorView");const a=function(e,t){let n=y.get(e);if(!n){n=new Map;for(const[,t]of e)n.set(t.field(i.A),t);y.set(e,n)}return n.get(t)}(this._states,e),u=new o.tk({state:a});if(u.viewState.printing=!0,t.insertBefore(u.dom,t.firstChild),this._views.set(e,u),a){var f;const e=a.field(s.X),t=e===this._focusId,o=e===(null===(f=this._spotlightPos)||void 0===f?void 0:f.node);if(u.dispatch({effects:[r.a.of(this.dispatch),l.P.of(this.tsClient),c.dF.of(n)],scrollIntoView:t}),t&&u.focus(),o){const{node:e}=u.domAtPos(this._spotlightPos.pos);e instanceof HTMLElement&&(0,d.zT)(e)}}}detach(e){var t;const n=this._views.get(e),o=null===n||void 0===n?void 0:n.state.field(s.X,!1);if(o&&(null===(t=this.tsClient)||void 0===t||t.deleteFile(o)),!n)throw new Error("EditorView not found");this._disable(n),n.destroy(),this._views.delete(e)}_disable(e){e.dispatch({effects:[r.a.of(null)]})}refocus(){if(null===this._focusId)return!1;const e=g(this._states,this._views,this._focusId);return!!e&&(e.hasFocus||e.focus(),e.inView||e.dispatch({scrollIntoView:!0}),!0)}scrollIntoView(e){const t=g(this._states,this._views,e);return!!t&&(t.dispatch({scrollIntoView:!0}),!0)}repositionTooltips(e){const t=g(this._states,this._views,e);t&&(0,o.E2)(t)}_spotlight(e){if(!e.spotlightParticipant)return void(this._spotlightPos&&(this._spotlightPos=null));const t=e.participants.find((t=>t.id===e.spotlightParticipant));for(let n=0;n<t.node_ids.length;n++)if(null!==t.node_ids[n]){const e=t.node_ids[n],o=t.selections[n]?t.selections[n].ranges[t.selections[n].main].head:0;if(!this._spotlightPos||this._spotlightPos.node!==e||this._spotlightPos.pos!==o){this._spotlightPos={node:e,pos:o};const t=g(this._states,this._views,e);if(t){const{node:e}=t.domAtPos(this._spotlightPos.pos);e instanceof HTMLElement&&(0,d.zT)(e)}}}}applyCommand(e,t){const n=this._views.get(e);if(!n)throw new Error("EditorView not found");return!n.state.readOnly&&t(n)}constructor(e,t){this.dispatch=e,this.tsClient=t,this._views=new Map,this._states=new Map,this._focusId=null,this._privateOwner=null,this._isSettingState=!1,this._spotlightPos=null}}function g(e,t,n){const o=e.get(n);return o&&t.get(o.field(i.A))}const y=new WeakMap},48627:function(e,t,n){"use strict";n.d(t,{FJ:function(){return l},Y2:function(){return i},YG:function(){return c},n4:function(){return s},zL:function(){return a}});var o=n(3961),r=n(84236);class i extends o.i{async process(e){return(await e({type:"request_database_tables",source:this._source,schema:this._schema})).map((e=>({database:null!=e.database?String(e.database):void 0,schema:null!=e.schema?String(e.schema):void 0,table:String(e.name)})))}constructor(e,t){super(),this._source=e,this._schema=t}}class s extends o.i{async process(e){const t=await e({type:"request_table_schema",source:this._source,table:(0,r.me)(this._table),mode:this._mode});return new Map(t.map((e=>{var t,n;const o=null===(t=this._names)||void 0===t?void 0:t.find((t=>{let{column:n}=t;return n===e.name})),r=null===(n=this._types)||void 0===n?void 0:n.find((t=>{let{name:n}=t;return n===e.name}));var i,s;return[e.name,{type:null!==(i=null===r||void 0===r?void 0:r.type)&&void 0!==i?i:e.type,databaseType:e.databaseType,nullable:!1!==e.nullable,name:null!==(s=null===o||void 0===o?void 0:o.name)&&void 0!==s?s:e.name}]})))}constructor(e,t,n,o,r){super(),this._source=e,this._table=t,this._mode=n,this._names=o,this._types=r}}class a extends o.i{async process(e){return await e({type:"request_database_query",source:this._source,operations:this._operations})}constructor(e,t){super(),this._source=e,this._operations=t}}class c extends o.i{async process(e){return await e({type:"request_database_info",source:this._source})}constructor(e){super(),this._source=e}}class l extends o.i{async process(e){return await e({type:"request_data_source_info",source:this._source})}constructor(e){super(),this._source=e}}},3961:function(e,t,n){"use strict";n.d(t,{S:function(){return r},i:function(){return o}});class o{run(e){return this._promise||(this._promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),e({type:"workerTask",task:this})),this._promise}}class r extends o{process(e){const t=[];let n;function o(e){t.push({message:e}),n&&(n(),n=void 0)}function r(e){t.push({error:e}),n&&(n(),n=void 0)}return this.open((t=>e(t,o,r)),(()=>({[Symbol.asyncIterator](){return this},async next(){t.length||await new Promise((e=>(n=e,n)));const e=t.shift();if("error"in e)throw new Error(e.error);return e.message}})))}constructor(e){super(),this.open=e}}},10718:function(e,t,n){"use strict";n.d(t,{Nq:function(){return l},pN:function(){return d},vM:function(){return c}});var o=n(90793),r=n(48634),i=n(67294),s=n(48627),a=n(3894);function c(e,t){const{isExpanded:n}=(0,r.uF)();return d(e,t,"table",n)}function l(e,t){const{isExpanded:n}=(0,o.kR)();return d(e,t,"chart",n)}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"table",o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{0:r,1:c}=(0,i.useState)(),l=(0,i.useRef)(),d=(0,a.VQ)(e),u="operations"in e?e.operations.from.table:"",f="operations"in e?e.operations.names:void 0,p="operations"in e?e.operations.types:void 0;return(0,i.useEffect)((()=>c(void 0)),[d,u]),(0,i.useEffect)((()=>{if(!o)return;if(!d||"sql"===n)return c(new Map);const e=new s.n4(d,u,n,f,p);return l.current=e,e.run(t).then((t=>{e===l.current&&c(t)}),(t=>{e===l.current&&(console.error("Error fetching table schema: ",t),c(new Map))})),()=>{l.current=void 0}}),[d,u,t,n,o,f,p]),r}},3894:function(e,t,n){"use strict";n.d(t,{M7:function(){return i},Ov:function(){return l},U_:function(){return a},VQ:function(){return r},VS:function(){return p},h8:function(){return d},hS:function(){return f},w4:function(){return s},x2:function(){return u},zO:function(){return c}});var o=n(60486);function r(e){if(!("source"in e))throw new Error("missing source");const{source:t}=e;return null===t.name?null:t}function i(e){const t=r(e);if(null===t)throw new Error("empty source");return t}function s(e){switch(e){case"sql":return"SQL";case"postgres":return"PostgreSQL";case"sqlite":return"SQLite";case"bigquery":return"BigQuery";case"snowflake":return"Snowflake";case"oracle":return"Oracle";case"mysql":return"MySQL";case"mssql":return"SQL Server";case"duckdb":return"DuckDB";case"csv":return"CSV";case"tsv":return"TSV";case"json":return"JSON";case"arrow":return"Arrow";case"parquet":return"Parquet";case"arquero":return"Arquero";case"databricks":return"Databricks";case"mongosql":return"MongoDB";default:return e}}function a(e,t){return e.name===t.name&&e.type===t.type}function c(e,t){return function(e,t){return e<t?-1:e>t?1:0}(e.name,t.name)}function l(e){return(0,o.yD)(e)?e:d(e)}function d(e){return o.RN.includes(e)?e:"sql"}function u(e){return"".concat(e.type,":").concat(e.name)}function f(e,t){return JSON.stringify([u(e),p(t)])}function p(e){let{database:t,schema:n,table:o}=e;return t?"".concat(t,".").concat(n,".").concat(o):n?"".concat(n,".").concat(o):o}},96386:function(e,t,n){"use strict";n.d(t,{BY:function(){return i},Do:function(){return f},E6:function(){return u},_n:function(){return s},mD:function(){return d}});var o=n(72760);function*r(e){const t=new Map;for(const n of e)for(const e of(0,o.WN)(n))t.set(e,t.has(e)?null:n);for(const n of e)for(const e of(0,o.yL)(n)){const o=t.get(e);o&&(yield[n,o])}}const i=e=>l(e,!1),s=e=>l(e,!0),a=new WeakMap,c=new WeakMap;function l(e,t){const n=t?a:c,o=n.get(e);if(o)return o;const i=new Map;for(const r of e)i.set(r,[]);if(t)for(const[s,a]of r(e))i.get(a).push(s);else for(const[s,a]of r(e))i.get(s).push(a);return n.set(e,i),i}function d(e,t){const n=(new Set).add(e);for(const o of n)for(const e of t.get(o))n.add(e);return n.delete(e),n}function u(e){const t=s(e),n=i(e);return new Map(e.map((e=>{const r=n.get(e)||[],i=t.get(e)||[];return[e,{node:e,up:r,down:i,indirectUp:d(e,n),indirectDown:d(e,t),isIsland:!r.length&&!i.length&&!(0,o.q8)(e)}]})))}function f(e,t){return e.node===t.node?"same":t.indirectDown.has(e.node)&&t.indirectUp.has(e.node)?"circular":t.down.includes(e.node)?"direct downstream":t.up.includes(e.node)?"direct upstream":t.indirectDown.has(e.node)?"indirect downstream":t.indirectUp.has(e.node)?"indirect upstream":"none"}},86500:function(e,t,n){"use strict";function o(e){if(!e)return!1;for(const t in e)if("display"!==t)return!0;return!1}n.d(t,{I:function(){return r},w:function(){return o}});const r=(0,n(22225).J)((()=>({type:"workerStatus",displayModes:new Map,statuses:new Map,suggestions:new Map,chartSpecs:new Map})))},33042:function(e,t,n){"use strict";n.d(t,{$g:function(){return i},DY:function(){return r},o4:function(){return s},t$:function(){return a}});const o=new WeakMap;function r(e,t){return e.nodes[i(e,t)]}function i(e,t){let n=o.get(e.nodes);void 0===n&&(n=new Map(e.nodes.map(((e,t)=>[e.id,t]))),o.set(e.nodes,n));const r=n.get(t);return void 0===r?-1:r}function s(e,t){const n=i(e,t);return n<e.nodes.length-1?e.nodes[n+1].id:null}function a(e,t){const n=i(e,t);return n>0?e.nodes[n-1].id:null}},69150:function(e,t,n){"use strict";n.d(t,{KI:function(){return c},Lv:function(){return o},MT:function(){return r},Mv:function(){return a},NQ:function(){return l},Sf:function(){return u},T6:function(){return d},j:function(){return i},l6:function(){return s},re:function(){return f}});const o=55,r=52,i=386,s=280,a=14,c=17,l=25,d=29,u=41,f=20},65371:function(e,t,n){"use strict";n.d(t,{F:function(){return u},Y:function(){return d}});var o=n(41799),r=n(69396),i=n(78120),s=n(61539),a=n(63230),c=n(1864);function l(e){const t=[],n=function(e){function t(e,n){let o;if(Array.isArray(e))o=e.entries();else{if(!e||"object"!==typeof e||"string"!==typeof e.type)return e;o=Object.entries(e)}for(const[r,i]of o)e[r]=t(i,n);return Array.isArray(e)?e:n(e)||e}function n(e){return"CallExpression"===e.type?(e.type="OptionalCallExpression",e.callee=n(e.callee)):"MemberExpression"===e.type?(e.type="OptionalMemberExpression",e.object=n(e.object)):"TSNonNullExpression"===e.type&&(e.expression=n(e.expression)),e}return t(e,(e=>{if("ChainExpression"===e.type)return n(e.expression)}))}(s.b3.parse(e,{onComment:t,onToken:[],ranges:!0})),{body:o,id:r}=n,i=o&&null!==o.id&&("FunctionExpression"===o.type||"ClassExpression"===o.type)&&o.id;return{type:"Program",body:[r&&r!==i?n:n.body],start:0,end:e.length,comments:t}}async function d(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const s=await n.e(3502).then(n.t.bind(n,98645,23)),d=await n.e(8592).then(n.t.bind(n,43341,23)),{state:u}=e,f=u.field(c.C),p=u.doc.toString(),h=u.selection.main,m=h.from!==h.to;if("js"===f)if(m){const t={trailingComma:"none",parser:"typescript",plugins:[{parsers:{typescript:{astFormat:"estree",locStart:e=>e.start,locEnd:e=>e.end,parse:e=>{const t=[],n=[];if(e!==p){const i=a._b.parse(e,{ecmaVersion:13,onComment:t,onToken:n,ranges:!0,allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0,allowImportExportEverywhere:!0});return(0,r.Z)((0,o.Z)({},i),{comments:t})}return l(e)}}}}]},{formatted:n,cursorOffset:c}=s.formatWithCursor(p,(0,r.Z)((0,o.Z)({},t),{cursorOffset:h.to,rangeStart:h.from,rangeEnd:h.to})),d=i.jT.single(Math.min(h.from,n.length),Math.min(c,n.length));e.dispatch(u.update({changes:{from:0,to:p.length,insert:n},selection:d}))}else{const t=l(p),n=!t.body[0]||"ImportDeclaration"!==t.body[0].type;let{formatted:o,cursorOffset:r}=s.formatWithCursor(p,{trailingComma:"none",semi:n,parser:()=>t,cursorOffset:h.to});o=o.trim();const a=i.jT.single(Math.max(0,Math.min(r,o.length)));e.dispatch(u.update({changes:{from:0,to:p.length,insert:o},selection:a}))}else if("md"===f&&!t){const t=m?h.from:0,n=m?h.to:p.length,{formatted:o,cursorOffset:r}=s.formatWithCursor(p.slice(t,n),{parser:"markdown",cursorOffset:m?h.to-h.from:h.from,proseWrap:"always",plugins:[d]});return void e.dispatch(u.update({changes:{from:t,to:n,insert:o},selection:m?i.jT.single(h.from,h.from+r):i.jT.single(r)}))}}catch(s){s instanceof SyntaxError||console.error("prettier failed",s)}}async function u(e){try{const t=await n.e(3502).then(n.t.bind(n,98645,23)),o=l(e);return t.format(e,{trailingComma:"none",parser:()=>o}).trim()}catch(t){return console.error("prettier failed to format text",t),e}}},19170:function(e,t,n){"use strict";function o(e){if(!e)return 0;let t=0;for(const[,n]of e)t+=n.length;return t}function r(e,t){if(!e||!t)return;const{nodeId:n,nodeResultIndex:o}=t;let r=o;for(const[i,s]of e){if(n===i)break;r+=s.length}return r}n.d(t,{_:function(){return r},n:function(){return o}})},75107:function(e,t,n){"use strict";function o(e){return e.length>0}function r(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.normalize("NFD").replace(/[\u0300-\u036f'\u2018\u2019]/g,"").toLowerCase().split(t?/[^a-z0-9_.]+/g:/\W+/g).filter(o),r=n.length;let i=0,s=-1;for(;++s<r;)if((i+=n[s].length)>50){n[s]=n[s].substring(0,50-i+n[s].length);break}return n.slice(0,s+1).filter(Boolean).join("-")||"untitled"}n.d(t,{O:function(){return r}})},26836:function(e,t,n){"use strict";function o(e,t){let n=e,o=0;for(;t.has(n);)n=e+String(++o);return n}n.d(t,{Q:function(){return o}})},84236:function(e,t,n){"use strict";n.d(t,{$d:function(){return S},Ec:function(){return x},IG:function(){return a},Je:function(){return V},O$:function(){return k},QI:function(){return d},Tf:function(){return L},V8:function(){return c},Vi:function(){return j},YY:function(){return Z},a8:function(){return w},me:function(){return _},nq:function(){return b},t2:function(){return l},xm:function(){return C}});var o=n(7138),r=n(76348),i=n(92227),s=n(3894);const a=new Set(["string","number","date","boolean","buffer","integer","bigint","array","object","other","raw"]),c=Symbol("unhovered");function l(e,t){var n;const o=null===t||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.map((e=>e.operands.filter((e=>"column"===e.type))[0]));return null===o||void 0===o?void 0:o.find((t=>{let{value:n}=t;return n===e}))}function d(e){switch(e){case"number":case"integer":case"bigint":return f;case"date":return p;case"object":return h;case"boolean":return m;case"buffer":return g;default:return u}}function u(e){return"number"===typeof e?f(e):e instanceof Date?p(e):""===e?"<empty string>":"".concat(e)}function f(e){return 0===e?"0":e.toLocaleString("en-US")}function p(e){return(0,i.Z)(e,"Invalid Date")}function h(e){return JSON.stringify(e)}function m(e){return e?"TRUE":"FALSE"}function g(e){return"0x..."}const y=["n","nn"],v=["in","nin"];function x(e){return y.includes(e)}function b(e){return v.includes(e)}function w(e,t){if(void 0!==e&&void 0!==t)switch(e){case"eq":return"string"===t?"is":"=";case"ne":return"string"===t?"is not":"\u2260";case"c":return"contains";case"nc":return"does not contain";case"in":return"is in";case"nin":return"is not in";case"lt":return"date"===t?"is before":"<";case"gt":return"date"===t?"is after":">";case"lte":return"date"===t?"is on or before":"\u2264";case"gte":return"date"===t?"is on or after":"\u2265";case"n":return"is null";case"nn":return"is not null";case"v":return"is valid ".concat(t);case"nv":return"is not valid ".concat(t)}}function C(e){if(!e)return[];const{type:t,nullable:n}=e;let o;switch(t){case"boolean":o=["eq","ne"];break;case"string":o=["eq","ne","c","nc","in","nin"];break;case"number":case"integer":o=["eq","ne","lt","gt","lte","gte","in","nin"];break;case"date":o=["lt","gt","lte","gte"];break;default:return[]}return n?[...o,"n","nn","v","nv"]:o}function k(e,t){if(!(0,o.getTypeValidator)(e)(t))return["v","nv"];switch(e){case"boolean":case"string":return["eq","ne"];case"number":case"integer":case"date":return["lt","lte","eq","gte","gt","ne"];default:return[]}}function S(e,t){return(0,r.Bj)(e)[0].map((e=>e.trim())).map((e=>({type:"primitive",value:"number"===(null===t||void 0===t?void 0:t.type)?+e:e})))}function _(e){return"string"===typeof e?{table:e}:e}function Z(e,t){const n=_(e),o=_(t);return(null===n||void 0===n?void 0:n.database)===(null===o||void 0===o?void 0:o.database)&&(null===n||void 0===n?void 0:n.schema)===(null===o||void 0===o?void 0:o.schema)&&(null===n||void 0===n?void 0:n.table)===(null===o||void 0===o?void 0:o.table)}function j(e){return"object"===typeof e?(0,s.VS)(e):e}function L(e,t){return M(e.database,t.database)||M(e.schema,t.schema)||M(e.table,t.table)}function M(e,t){const n=void 0===e,o=void 0===t;return n||o?+o-+n:e<t?-1:e>t?1:0}function V(e){let[t,...n]=e,o="";for(const r of t)o+=r,n.length>0&&(o+="${".concat(JSON.stringify(n.shift()),"}"));return o}},58671:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(41799),r=n(69396),i=n(33083),s=n(40076),a=n(72760);function c(e){let t;try{t=(0,a.Hj)(e)}catch(n){if(!(n instanceof SyntaxError))throw n;const{message:e}=n;t=(0,a.Hj)({mode:"js",value:"{throw new SyntaxError(".concat(JSON.stringify(e),");}"),name:null,data:null})}if(null===t.body){const t=new Set,n=new Set,o=new Set;if((0,s.sO)(e)){const{name:o,type:r}=e.data.source;if(o)switch(r){case"database":case"DatabaseClient":t.add(o);break;case"FileAttachment":n.add(o)}}return{type:"empty",databaseClients:t,fileAttachments:n,secrets:o}}if("ImportDeclaration"===t.body.type){const{source:e,specifiers:n,injections:o}=t.body,{value:r}=e;return{type:"import",specifier:r,specifiers:n.map(l),injections:null===o||void 0===o?void 0:o.map(l)}}return(0,r.Z)((0,o.Z)({},(0,i.hp)(t)),{type:d(t),name:(0,a.u2)(e),databaseClients:new Set([...t.databaseClients.keys(),...t.tag?t.tag.databaseClients.keys():[]]),fileAttachments:new Set([...t.fileAttachments.keys(),...t.tag?t.tag.fileAttachments.keys():[]]),secrets:new Set([...t.secrets.keys(),...t.tag?t.tag.secrets.keys():[]])})}function l(e){return{imported:e.imported.name,local:e.local.name,mutable:e.mutable,view:e.view}}function d(e){let{id:t}=e;switch(null===t||void 0===t?void 0:t.type){case"MutableExpression":return"mutable";case"ViewExpression":return"viewof"}return"normal"}},22225:function(e,t,n){"use strict";function o(e){const t=new Map;return(n,o)=>{let r=t.get(n);r||(r=e(),t.set(n,r),requestAnimationFrame((()=>{t.delete(n),n(r)}))),o(r)}}n.d(t,{J:function(){return o}})},4242:function(e,t,n){"use strict";n.d(t,{$j:function(){return i},I0:function(){return s},v9:function(){return a},zt:function(){return o.zt}});var o=n(14416),r=n(54924);const i=(0,r.S3)();function s(){return(0,o.I0)()}const a=(0,r.gR)()},24205:function(e,t,n){"use strict";n.d(t,{Bv:function(){return g},CL:function(){return s},F5:function(){return d},Hf:function(){return w},Hh:function(){return p},JB:function(){return m},JS:function(){return S},M6:function(){return u},Nl:function(){return b},Nz:function(){return _},d$:function(){return a},dE:function(){return i},dX:function(){return Z},fe:function(){return y},hO:function(){return v},hX:function(){return k},kg:function(){return f},lA:function(){return C},mB:function(){return l},pf:function(){return c},tq:function(){return x},yy:function(){return h}});var o=n(19671),r=n(3142);const i=(e,t)=>{let{notebook:n,currentUser:i}=e,{publishLevel:s}=t;"shared"===s?(0,r.cg)(n)?(0,o.MR)((0,o.ym)({type:"notebook:manage:linkReshared",data:{},eventVersion:3,notebook:n,currentUser:i})):(0,o.MR)((0,o.ym)({type:"notebook:manage:linkSharingEnabled",data:{},eventVersion:3,notebook:n,currentUser:i})):(0,r.s9)(n)?((0,o.MR)((0,o.ym)({type:"notebook:manage:republish",data:{},eventVersion:1,notebook:n,currentUser:i})),ga("send","event","Notebook","Republish"),gtag("event","Republish",{event_category:"Notebook"})):((0,o.MR)((0,o.ym)({type:"notebook:manage:publish",data:{},eventVersion:5,notebook:n,currentUser:i})),ga("send","event","Notebook","Publish"),gtag("event","Publish",{event_category:"Notebook"}))},s=e=>{let{notebook:t,currentUser:n}=e;(0,r.s9)(t)?(0,o.MR)((0,o.ym)({type:"notebook:manage:unpublish",data:{},eventVersion:6,notebook:t,currentUser:n})):(0,o.MR)((0,o.ym)({type:"notebook:manage:linkSharingDisabled",data:{},eventVersion:3,notebook:t,currentUser:n}))},a=e=>{let{notebook:t,currentUser:n}=e;(0,o.MR)((0,o.ym)({type:"notebook:manage:trash",data:{},eventVersion:5,notebook:t,currentUser:n}))},c=(e,t)=>{let{notebook:n,currentUser:r}=e,{slug:i}=t;i?(0,o.MR)((0,o.ym)({type:"notebook:manage:slugSet",data:{},eventVersion:2,notebook:n,currentUser:r})):(0,o.MR)((0,o.ym)({type:"notebook:manage:slugsCleared",data:{},eventVersion:2,notebook:n,currentUser:r}))},l=(e,t)=>{let{notebook:n,currentUser:r}=e,{license:i}=t;n.model.license!==i&&(0,o.MR)((0,o.ym)({type:"notebook:edit:license",data:{license:i},eventVersion:2,notebook:n,currentUser:r}))},d=(e,t)=>{let{notebook:n,currentUser:r}=e,{locked:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:commentingLock",data:{locked:i},eventVersion:1,notebook:n,currentUser:r}))},u=(e,t)=>{let{notebook:n,currentUser:r}=e,{source:i}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:embedModalCopy",data:{trigger:"click",source:i},eventVersion:1,notebook:n,currentUser:r}))},f=(e,t)=>{let{notebook:n,currentUser:r}=e,{trigger:i,source:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:downloadNotebook",data:{trigger:i,source:s},eventVersion:2,notebook:n,currentUser:r}))},p=(e,t)=>{let{notebook:n,currentUser:r}=e,{base:i,target:s,trigger:a,source:c}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:suggestFailed",data:{from_id:s.id,to_id:i.id,base:(0,o.tb)(i,r),target:(0,o.tb)(s,r),trigger:a,source:c},eventVersion:4,notebook:n,currentUser:r}))},h=(e,t)=>{let{notebook:n,currentUser:r}=e,{base:i,target:s,source:a,trigger:c}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:suggest",data:{from_id:s.id,to_id:i.id,base:(0,o.tb)(i,r),target:(0,o.tb)(s,r),source:a,trigger:c},eventVersion:4,notebook:n,currentUser:r}))},m=(e,t)=>{let{notebook:n,currentUser:r}=e,{source:i,trigger:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:suggestionClosed",data:{base:(0,o.tb)(n.forkOf,r),target:(0,o.tb)(n,r),suggestionId:n.suggestionFrom.id,isSuggester:n.suggestionFrom.creator.id===r.id,source:i,trigger:s},eventVersion:1,notebook:n,currentUser:r}))},g=(e,t)=>{let{notebook:n,currentUser:r}=e,{trigger:i,source:s,nodeId:a,nodeMode:c}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:openNotebookFilePicker",data:{trigger:i,source:s,cellIds:a?[a]:[],nodeMode:c},eventVersion:1,notebook:n,currentUser:r}))},y=(e,t)=>{let{notebook:n,currentUser:r}=e;const{files:i,trigger:s,source:a,nodeMode:c}=t;i.length&&(0,o.MR)((0,o.ym)({type:"notebook:manage:attachFiles",data:{files:i.map((e=>{let{type:t,size:n}=e;return{mimeType:t,size:n}})),trigger:s,source:a,cellIds:void 0!==t.nodeId?[t.nodeId]:[],nodeMode:c},eventVersion:1,notebook:n,currentUser:r}))},v=(e,t)=>{let{notebook:n,currentUser:r}=e,{name:i}=t;const{status:s,size:a,mimeType:c}=n.files.get(i);(0,o.MR)((0,o.ym)({type:"notebook:manage:deleteFile",data:{status:s,size:a,mimeType:c},eventVersion:1,notebook:n,currentUser:r}))},x=(e,t)=>{let{notebook:n,currentUser:r}=e,{fileToReplace:i,fileToAttach:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:replaceFile",data:{oldMimeType:i.mimeType,oldSize:i.size,oldStatus:i.status,newMimeType:s.type,newSize:s.size},eventVersion:1,notebook:n,currentUser:r}))},b=(e,t)=>{let{notebook:n,currentUser:r}=e,{file:{status:i,size:s,mimeType:a}}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:insertFile",data:{status:i,size:s,mimeType:a},eventVersion:1,notebook:n,currentUser:r}))},w=(e,t)=>{let{notebook:n,currentUser:r}=e,{file:{status:i,size:s,mimeType:a}}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:copyFileCode",data:{status:i,size:s,mimeType:a},eventVersion:1,notebook:n,currentUser:r}))},C=(e,t)=>{let{notebook:n,currentUser:r}=e,{file:{status:i,size:s,mimeType:a}}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:downloadFile",data:{status:i,size:s,mimeType:a},eventVersion:1,notebook:n,currentUser:r}))},k=(e,t)=>{let{notebook:n,currentUser:r}=e,{source:i,trigger:s,resolutions:a}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:dependenciesResolve",data:{source:i,trigger:s,count:a.length},eventVersion:1,notebook:n,currentUser:r}))},S=(e,t)=>{let{notebook:n,currentUser:r}=e,{locked:i,bulk:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:dependenciesToggleLock",data:{status:i?"locked":"unlocked",bulk:!!s},eventVersion:1,notebook:n,currentUser:r}))},_=e=>{let{notebook:t,currentUser:n}=e;(0,o.MR)((0,o.ym)({type:"notebook:manage:dependenciesUpgrade",eventVersion:1,notebook:t,currentUser:n}))},Z=(e,t)=>{let{notebook:n,currentUser:r}=e,{status:i,updatesAvailable:s}=t;(0,o.MR)((0,o.ym)({type:"notebook:manage:dependenciesShowDetails",data:{status:i,updatesAvailable:s},eventVersion:1,notebook:n,currentUser:r}))}},21571:function(e,t,n){"use strict";n.d(t,{C2:function(){return c},KV:function(){return d},Yx:function(){return a},jp:function(){return l}});var o=n(41799),r=n(69396),i=n(602),s=n(19671);const a=async(e,t,n)=>{let{notebook:{id:o,authors:r},currentUser:a}=e,{authors:c}=t;const l=r.map((e=>e.id)),d=c.map((e=>e.id));try{await(0,i.Fv)("/document/".concat(o,"/authors"),{authors:c.map((e=>{let{id:t,description:n}=e;return{id:t,description:n}})),removedAuthors:l.filter((e=>!d.includes(e)))}),(0,s.MR)((0,s.a$)({type:"notebook:manage:setAuthors",data:{authors:c.length,approved:c.filter((e=>e.approved)).length,withDescription:c.filter((e=>e.description)).length},eventVersion:1,currentUser:a}))}catch(u){n({type:"showErrorToast",message:"Oops, failed to set authors. Refresh and try again?",key:"setAuthors"})}},c=(e,t)=>{let{authors:n}=t;return{authors:n}},l=async(e,t,n)=>{let{notebook:{id:o,authors:r},currentUser:a}=e,{value:c}=t;try{await(0,i.Fv)("/document/".concat(o,"/author/").concat(c?"accept":"reject")),(0,s.MR)((0,s.a$)({type:"notebook:manage:setAuthorAcceptance",data:{value:c,prevValue:null!==a&&r.some((e=>{let{id:t,approved:n}=e;return t===a.id&&!n}))},eventVersion:1,currentUser:a}))}catch(l){n({type:"showErrorToast",message:"Oops, failed to ".concat(c?"accept":"remove"," authorship. Refresh and try again?"),key:"setAuthorAcceptance"})}},d=(e,t)=>{let{authors:n}=e,{currentUser:i,value:s}=t;return s?{authors:n.map((e=>e.id===i.id?(0,r.Z)((0,o.Z)({},e),{approved:s}):e))}:{authors:n.filter((e=>e.id!==i.id))}}},6025:function(e,t,n){"use strict";n.d(t,{C:function(){return c},Q:function(){return a}});var o=n(41799),r=n(69396),i=n(11163),s=n.n(i);const a=e=>{let{notebook:{id:t}}=e;s().replace({pathname:"/[at]/[...specifiers]",query:(0,r.Z)((0,o.Z)({},s().query),{at:"d",specifiers:[t]})})},c=()=>({autosave:!1})},21312:function(e,t,n){"use strict";n.d(t,{N5:function(){return i},Yd:function(){return a},_O:function(){return s}});var o=n(602),r=n(19671);const i=async(e,t,n)=>{let{notebook:i,currentUser:s}=e,{addTo:a,removeFrom:c,onDismiss:l}=t;const{id:d}=i,u=await Promise.allSettled([...a.map((e=>(0,o.Fv)("/collection/".concat(e.id,"/add"),{document_listing_id:d}))),...c.map((e=>(0,o.Fv)("/collection/".concat(e.id,"/remove"),{document_listing_id:d})))]);n({type:"collectionsUpdated",addedTo:a.filter((e=>u.some((t=>"fulfilled"===t.status&&t.value&&t.value.collection_id===e.id)))),removedFrom:c.filter((e=>u.some((t=>"fulfilled"===t.status&&t.value&&t.value.collection_id===e.id)))),orphaned:"collections"in i&&i.collections.length+a.length<=c.length}),u.some((e=>"fulfilled"!==e.status))?n({type:"showErrorToast",message:"Oops, collections update failed. Try again?",key:"collections"}):(a.forEach((e=>(0,r.MR)((0,r.y6)({type:"collection:manage:addNotebookListing",data:{addedListingId:d},collection:e,currentUser:s,eventVersion:1})))),c.forEach((e=>(0,r.MR)((0,r.y6)({type:"collection:manage:removeNotebookListing",data:{removedListingId:d},collection:e,currentUser:s,eventVersion:1}))))),l(),n({type:"updatedNotebook"})},s=(e,t)=>{let{collection:n}=t;return{initialCollection:n}},a=(e,t)=>{let{addedTo:n,removedFrom:o}=t;return{collections:[...e.collections.filter((e=>!o.some((t=>t.id===e.id)))),...n.filter((t=>!e.collections.some((e=>e.id===t.id))))]}}},60066:function(e,t,n){"use strict";n.d(t,{h:function(){return r},q:function(){return i}});var o=n(602);const r=async(e,t,n)=>{let{notebook:{id:r}}=e,{locked:i}=t;try{await(0,o.Fv)("/document/".concat(r,"/commenting-lock"),{locked:i}),n({type:"showSuccessToast",message:"Commenting ".concat(i?"locked":"unlocked","."),key:"commentingLock"})}catch(s){n({type:"showErrorToast",message:"Locking comments failed. Try again?",key:"commentingLock"})}},i=(e,t)=>{let{commentingLock:n}=t;return{commentingLock:n}}},6022:function(e,t,n){"use strict";n.d(t,{A9:function(){return u},E:function(){return x},Fq:function(){return L},I5:function(){return M},Mb:function(){return f},Q8:function(){return m},Sh:function(){return l},Ty:function(){return g},UE:function(){return d},V5:function(){return b},dV:function(){return w},e5:function(){return j},hx:function(){return C},hz:function(){return p},m1:function(){return V},u0:function(){return h},uA:function(){return v}});var o=n(41799),r=n(69396),i=n(602),s=n(88725),a=n(3142),c=n(36448);function l(e){const t=new Map;for(const n of Z(e)){if(S(n))continue;const e=t.get(n.node_id);e?e.push(n):t.set(n.node_id,[n])}return t}function d(e,t,n){const o=(0,c.Hw)(e),r=n&&(0,c.Hw)(n),i=t&&e.forkOf&&t.id===e.forkOf.owner.id;for(const[s,c]of e.comments){const n=c.filter((t=>t.node_id<=e.saveVersion));n.some((e=>!(0,a.Wg)(e)))&&(o||r||i||t&&n.some((e=>e.user.id===t.id)))&&e.openComments.add(s)}}const u=(e,t)=>{let{comments:n,composingComments:i,openComments:s}=e,{comments:c}=t;n=new Map(n);for(const l of Z(c)){if(S(l)){for(let[e,t]of n){t=[...t];const o=t.findIndex((e=>!(0,a.tO)(e)&&e.id===l.id));-1!==o&&(t.splice(o,1),n.set(e,t),0===t.length&&s.has(e)&&!i.has(e)&&(s=new Set(s),s.delete(e)))}continue}if(_(l)){for(let e of n.values()){e=[...e];const t=e.findIndex((e=>!(0,a.tO)(e)&&e.id===l.id));if(-1!==t){const i=e[t];e[t]=(0,r.Z)((0,o.Z)({},i),{update_time:l.update_time,status:l.status}),n.set(l.node_id,e)}}continue}const e=[...n.get(l.node_id)||[]],t=e.findIndex((e=>!(0,a.tO)(e)&&e.id===l.id));-1===t&&(e.push(l),e.sort(k),n.set(l.node_id,e),s.has(l.node_id)||(s=new Set(s).add(l.node_id))),(0,a.Wg)(l)&&(e[t]=l,n.set(l.node_id,e))}return{comments:n,openComments:s}},f=(e,t)=>{let{composingComments:n,openComments:o,comments:r}=e,{nodeId:i}=t;var s;return n=new Set(n),n.delete(i),r.has(i)&&0!==(null===(s=r.get(i))||void 0===s?void 0:s.length)||(o=new Set(o),o.delete(i)),{composingComments:n,openComments:o}},p=(e,t)=>{let{composingComments:n,openComments:o}=e,{nodeId:r}=t;return{composingComments:new Set(n).add(r),openComments:new Set(o).add(r),selectionFocusId:null,selection:new Set}},h=(e,t)=>{let{openComments:n}=e,{nodeId:o}=t;return n=new Set(n),n.delete(o),{openComments:n}},m=(e,t)=>{let{nodeId:n}=t,{expandedResolvedComments:o,openComments:r}=e;const i=(0,s.HS)(e,n).length;return o=new Set(o),0===i?o.add(n):o.delete(n),{openComments:new Set(r).add(n),expandedResolvedComments:o}},g=(e,t)=>{let{comments:n}=e,{nodeId:i,status:s,commentId:a}=t;n=new Map(n);const c=[...n.get(i)||[]],l=c.findIndex((e=>e.id===a));if(-1!==l){const e=c[l];c[l]=(0,r.Z)((0,o.Z)({},e),{status:s}),n.set(i,c)}return{comments:n}};let y=0;const v=(e,t)=>{let{comments:n}=e,{nodeId:i,content:s,commentId:a}=t;n=new Map(n);const c=[...n.get(i)||[]],l=c.findIndex((e=>e.id===a)),d=c[l];return c[l]=(0,r.Z)((0,o.Z)({},d),{id:a,status:"updatePending",content:s}),n.set(i,c),{comments:n}},x=(e,t)=>{let{comments:n,composingComments:o,openComments:r}=e,{nodeId:i,content:s,currentUser:a}=t;var c;n=new Map(n);const l=[...n.get(i)||[]];return l.push({status:"local",create_time:new Date,update_time:null,content:s,node_id:i,nonce:++y,user:a}),n.set(i,l),o=new Set(o),o.delete(i),n.has(i)&&0!==(null===(c=n.get(i))||void 0===c?void 0:c.length)||(r=new Set(r),r.delete(i)),{composingComments:o,openComments:r,comments:n}},b=(e,t)=>{let{comments:n}=e,{nonce:o,id:r,createTime:i,updateTime:s}=t;n=new Map(n);for(let[c,l]of n)for(let e=l.length-1;e>=0;e--){const t=l[e];if((0,a.tO)(t)&&t.nonce===o)return l=[...l],l[e]={status:"unresolved",id:r,content:t.content,node_id:t.node_id,create_time:i,update_time:s,user:t.user,resolved:!1},n.set(c,l),{comments:n}}},w=(e,t)=>{let{comments:n}=e,{comment:i}=t;n=new Map(n);let s=[...n.get(i.node_id)];if((0,a.tO)(i))s=s.filter((e=>(0,a.tO)(e)&&e.nonce!==i.nonce));else for(let c=0;c<s.length;c++){const e=s[c];(0,a.tO)(e)||e.id!==i.id||(s[c]=(0,r.Z)((0,o.Z)({},e),{status:"deletePending"}))}return n.set(i.node_id,s),{comments:n}},C=(e,t)=>{let{comments:n,composingComments:o,openComments:r}=e,{ids:i}=t;n=new Map(n);for(let[s,c]of n){c=[...c];for(const e of i){const t=c.findIndex((t=>!(0,a.tO)(t)&&t.id===e));-1!==t&&c.splice(t,1)}n.set(s,c),0===c.length&&r.has(s)&&!o.has(s)&&(r=new Set(r),r.delete(s))}return{comments:n,openComments:r}};function k(e,t){return+e.create_time-+t.create_time}function S(e){return e.deleted}function _(e){return!!e.update_time&&!e.resolved}function Z(e){return e.map((e=>S(e)?e:_(e)?(0,r.Z)((0,o.Z)({},e),{status:"unresolved"}):(0,r.Z)((0,o.Z)({},e),{status:e.resolved?"resolved":"unresolved"})))}const j=async(e,t,n)=>{let{comment:{id:o,content:r},anonymous:s,reason:a}=t;const c={anonymous:s,reason:a,subject:{type:"document_comment",id:o,content:r}};try{await(0,i.Fv)("/report",c),n({type:"showSuccessToast",message:"Comment reported."})}catch(l){n({type:"showErrorToast",message:"Comment report failed.",key:"reportAbuse"})}},L=(e,t)=>{let{comments:n,openComments:i}=e,{nodeId:s}=t;n=new Map(n);const c=[...n.get(s)||[]].map((e=>(0,a.sH)(e)||(0,a.tO)(e)||(0,a.Wg)(e)?e:(0,r.Z)((0,o.Z)({},e),{status:"resolvePending"})));return n.set(s,c),i=new Set(i),i.delete(s),{comments:n,openComments:i}},M=(e,t)=>{let{comments:n}=e,{ids:i}=t;n=new Map(n);for(let[s,c]of n){c=[...c];for(const e of i){const t=c.findIndex((t=>!(0,a.tO)(t)&&t.id===e));-1!==t&&(c[t]=(0,r.Z)((0,o.Z)({},c[t]),{status:"resolved",resolved:!0}))}n.set(s,c)}return{comments:n}},V=(e,t)=>{let{expandedResolvedComments:n}=e,{nodeId:o}=t;return n=new Set(n),n.has(o)?n.delete(o):n.add(o),{expandedResolvedComments:n}}},47977:function(e,t,n){"use strict";n.d(t,{AK:function(){return C},GH:function(){return S},Qf:function(){return b},Tv:function(){return L},Xm:function(){return _},ZG:function(){return v},_E:function(){return x},kc:function(){return j},nD:function(){return Z},q5:function(){return y},zX:function(){return k}});var o=n(41799),r=n(69396),i=n(95690),s=n(83839),a=n(81931),c=n(48453),l=n(53556),d=n(23251),u=n(19671),f=n(33042),p=n(40076),h=n(72760),m=n(4598),g=n(26836);const y=(e,t)=>{let{source:n}=t;const{focusId:o,model:{nodes:r}}=e,i=null!==o?o:r[r.length-1].id;return(0,c.$T)(e,{id:i,before:!1,node:{mode:"sql",data:{source:n}},type:"insert"})},v=async(e,t,n)=>{let{db:o}=t;await navigator.clipboard.writeText(function(e){switch(e.type){case"cell":return e.name;case"database":case"DatabaseClient":return"DatabaseClient(".concat(JSON.stringify(e.name),")");case"FileAttachment":return"sqlite"===e.dialect?"FileAttachment(".concat(JSON.stringify(e.name),").sqlite()"):"FileAttachment(".concat(JSON.stringify(e.name),")")}}(o)),n({type:"showSuccessToast",message:"Copied to clipboard"})};const x=(e,t)=>{let{notebook:n,currentUser:o}=e,{source:r}=t;(0,u.MR)((0,u.ym)({type:"notebook:manage:insertDatabase",data:{name:r.name},eventVersion:1,notebook:n,currentUser:o}))},b=(e,t)=>{let{suggestion:n,id:r}=t,a=(0,f.DY)(e.model,r);if(!a)return;let l={},u=a.value;const p=e.editorStates.get(r).doc.toString();if(u!==p){u=p;const t=(0,i.v)(e,[{type:"modify_node",node_id:r,new_node_value:p}]);l=(0,o.Z)({},l,t),e=(0,o.Z)({},e,t),a=(0,f.DY)(e.model,r)}let m=(0,h.u2)(a);if(!m){m=(0,g.Q)("data",(0,s.e)(e.model.nodes));const t=(0,d.q)(e,{id:r,name:m});l=(0,o.Z)({},l,t),e=(0,o.Z)({},e,t)}const y=(0,c.$T)(e,n(m));return l=(0,o.Z)({},l,y),e=(0,o.Z)({},e,y),l};function w(e){let{notebook:t,provider:n,name:i,mimeType:d}=e;const{focusId:u,model:{nodes:f}}=t,h=null!==u?u:f[f.length-1].id,y=[{mode:"js",value:'FileAttachment("'.concat(m.c[n].shorthand,"://").concat(i,'")').concat((0,a.dH)(d))}];if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===d){const e=(0,g.Q)("workbook",(0,s.e)(f)),t=(0,g.Q)("data",(0,s.e)(f));y[0]={mode:"js",value:"".concat(e," = ").concat(y[0].value)},y.push({mode:"js",value:"".concat(e,".sheetNames")},{mode:"js",value:"".concat(t," = ").concat(e,'.sheet(0, {\n  headers: false,\n  // range: "A1:J10"\n})')},{mode:"table",data:{source:{type:"cell",name:t},operations:(0,r.Z)((0,o.Z)({},p.Zu.defaultNode.data.operations),{from:{table:(0,l.Z)({type:"cell",name:t,dialect:"array"})}})}})}return(0,c.cZ)(t,{id:h,before:!1,nodes:y,type:"insertAll"})}const C=(e,t)=>{let{provider:n,name:o,mimeType:r}=t;return w({notebook:e,provider:n,name:o,mimeType:r})},k=(e,t)=>{let{notebook:n,currentUser:o}=e,{provider:r,size:i,mimeType:s}=t;(0,u.MR)((0,u.ym)({type:"notebook:manage:cloudFileSnippet",data:{provider:r,size:i,mimeType:s},notebook:n,currentUser:o,eventVersion:1}))},S=(e,t)=>{let{provider:n,path:r,name:s,mimeType:c}=t;const{model:l}=e,d=new Set(l.resolutions.filter((e=>"cloud_file"===e.type)).map((e=>e.specifier))),u=(0,a.Tw)(d,(0,a.Nw)(s||"".concat(m.c[n].shorthand,"File"))),f=w({notebook:e,provider:n,mimeType:c,name:u}),p={type:"resolve_dependency",specifier_type:"cloud_file",specifier:"".concat(m.c[n].shorthand,"://").concat(u),new_resolution:r};return(0,o.Z)({},f,(0,i.v)((0,o.Z)({},e,f),[p]))},_=(e,t)=>{let{notebook:n,currentUser:o}=e,{provider:r,mimeType:i,size:s}=t;(0,u.MR)((0,u.ym)({type:"notebook:manage:insertCloudFile",data:{provider:r,mimeType:i,size:s},eventVersion:1,notebook:n,currentUser:o}))},Z=(e,t)=>{let{provider:n,name:o}=t;const r="".concat(m.c[n].shorthand,"://").concat(o);if(!e.model.resolve("cloud_file",r))return;const s={type:"resolve_dependency",specifier_type:"cloud_file",specifier:r,new_resolution:null};return(0,i.v)(e,[s])},j=(e,t)=>{let{notebook:n,currentUser:o}=e,{provider:r,size:i,mimeType:s}=t;(0,u.MR)((0,u.ym)({type:"notebook:manage:removeCloudFile",data:{provider:r,size:i,mimeType:s},eventVersion:1,notebook:n,currentUser:o}))},L=(e,t)=>{let{notebook:n,currentUser:o}=e,{provider:r,size:i,mimeType:s}=t;(0,u.MR)((0,u.ym)({type:"notebook:manage:downloadCloudFile",data:{provider:r,size:i,mimeType:s},eventVersion:1,notebook:n,currentUser:o}))}},67220:function(e,t,n){"use strict";n.d(t,{y:function(){return r},z:function(){return i}});var o=n(602);const r=async(e,t,n)=>{let{notebook:{id:r}}=e,{description:i,onDismiss:s}=t;try{n({type:"descriptionUpdated",description:(await(0,o.Fv)("/document/".concat(r,"/description"),{description:i})).description})}catch(a){n({type:"showErrorToast",message:"Oops, setting notebook description failed. Try again?",key:"description"})}s()},i=(e,t)=>{let{description:n}=t;return{description:n}}},70668:function(e,t,n){"use strict";n.d(t,{H:function(){return l},d:function(){return c}});var o=n(41799),r=n(69396),i=n(602),s=n(31343),a=n(62990);const c=(e,t)=>{let{documentKey:n}=t;return(0,r.Z)((0,o.Z)({},e),{documentKey:n})},l=async(e,t,n)=>{let{context:{context:o}}=e,{documentId:r,expirationDate:c,firstVersion:l,lastVersion:d}=t;n({type:"showProcessingToast",key:"createDocumentKey",message:'Creating notebook key "'.concat(r,'"\u2026')});const u="".concat(r," ").concat((0,a.mr)(new Date));try{const e=await(0,i.Fv)("/document/".concat(r,"/api-key"),{description:u,expire_time:c,first_version:l,last_version:d});n({type:"showSuccessToast",key:"createDocumentKey",message:"Notebook key created."}),n({type:"createDocumentKeySucceeded",documentId:r,documentKey:e})}catch(f){n({type:"showErrorToast",key:"createDocumentKey",message:f instanceof s.ZP&&400===f.status?"Can't create notebook key with user: ".concat(null===o||void 0===o?void 0:o.name,"}"):"Oops, API key creation failed. Try again?"})}}},12510:function(e,t,n){"use strict";n.d(t,{N:function(){return u},O:function(){return f}});var o=n(41799),r=n(95690),i=n(28100),s=n(83839),a=n(95585),c=n(2093),l=n(33042),d=n(26836);function u(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,s.e)(e.model.nodes);const{editorStates:r,model:i}=e;let a=r.get(t),{pinned:u,mode:f,data:p,name:h}=(0,l.DY)(i,t);if("js"===f){const e=(0,c.G)(a,!1);e&&(h=a.sliceDoc(e.from,e.to),o.add(h),h=(0,d.Q)(h.replace(/\d+$/g,""),o),a=a.update({changes:{from:e.from,to:e.to,insert:h}}).state)}else h&&(h=(0,d.Q)(h.replace(/\d+$/g,""),o));return h&&o.add(h),{editorState:a,insertEvent:{type:"insert_node",new_next_node_id:n?t:(0,l.o4)(i,t),new_node_value:"",new_node_pinned:u,new_node_mode:f,new_node_data:p,new_node_name:"js"===f?null:h}}}const f=(e,t)=>{let{id:n,before:s=!1}=t;const{editorState:c,insertEvent:l}=u(e,n,s),d=e.model.events.length,f=[l],p=e,h=(0,a.cn)(e);h&&f.push(h);const m=(0,r.v)(p,f),g=(0,o.Z)({},p,m),y=(0,i.N)(g,{changes:[{from:0,to:0,insert:c.doc}],selection:c.selection},d),v=(0,o.Z)({},g,y),x=(0,a.Aq)(v,d);return(0,o.Z)({},m,y,x)}},52054:function(e,t,n){"use strict";n.d(t,{AV:function(){return j},F2:function(){return C},GD:function(){return L},Hp:function(){return S},R9:function(){return Z},Sf:function(){return M},l8:function(){return k},qk:function(){return V}});var o=n(41799),r=n(99534),i=n(78120),s=n(14456),a=n(28100),c=n(83839),l=n(6917),d=n(21684),u=n(74822),f=n(1864),p=n(58489),h=n(63213),m=n(30883),g=n(23545),y=n(74080),v=n(40076),x=n(88725),b=n(66421),w=n(3142);function C(e){return{changes:i.as.of(e.changes,e.length)}}function k(e,t,n,o,r){const{id:a,value:c,mode:l,data:y}=e,x=v.qz[l];return i.yy.create({extensions:[f.C.init((()=>l)),d.Hk.vimKeys.of(t.vimKeys&&g.R.loaded?i.Wl.highest(g.R.vim()):[]),...d.Xl,p.X.init((()=>a)),m.i.init((()=>t)),d.Hk.modeExtensions.of(x.extensions({settings:t,data:y})),u._.init((()=>(0,w.Pu)(n).map((e=>e.name)))),h.Z.init((()=>o)),d.Hk.keymap.of(s.$f.of([...x.keymap,...d.Bt])),d.Hk.closeBrackets.of(t.closeBracketsOn?d._g:[]),d.Hk.readOnly.of(i.yy.readOnly.of(r)),d.Hk.sql.of([])],doc:c})}function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.editorStates=j(e,t),n.length>0&&_(e,n)}function _(e,t){let{editorStates:n}=Z(e,t);if(e.saveVersion<=x.Lr&&(0,b.mG)(e)){const t=e.model.nodes[0],o=n.get(t.id).doc,r="md"===t.mode&&"# Untitled"===o.toString()?i.jT.single(2,10):"js"===t.mode&&"md`# Untitled`"===o.toString()?i.jT.single(5,13):null;r&&({editorStates:n}=(0,a.N)({editorStates:n},{selection:r},t.id))}e.editorStates=n}function Z(e,t){let{editorStates:n,transactions:o}=e;for(let r=0;r<t.length;r++){const{node_id:e,value:i}=t[r];if(n.has(e)){const s=(0,l.cK)(n.get(e),[i]);if(s.changes.empty){t.splice(r--,1);continue}({transactions:o,editorStates:n}=(0,a.N)({transactions:o,editorStates:n},s,e))}}return{editorStates:n,transactions:o}}function j(e,t){const{model:{nodes:n},owner:o,files:r}=e,i=(0,w.cE)(e)?o:null,s={prettierOn:(0,w.wW)(t,o),closeBracketsOn:(0,w.CD)(t),fileUploadsOn:(0,b.Yb)(t)&&(0,y.j5)(t,e),loginToUpload:!t,spellcheckOn:(0,w.OA)(t),defaultCellMode:(0,w.Sx)(t),vimKeys:(0,w.S1)(t)};let a,l=new Map(n.map((t=>[t.id,k(t,s,r,i,(0,w.os)(e))])));return({editorStates:l,transactions:a}=(0,c.C)({editorStates:l,transactions:a},n)),l}function L(e){const t=new Map;for(const i of e){var{node_id:n}=i,o=(0,r.Z)(i,["node_id"]);t.has(n)?t.get(n).push(o):t.set(n,[o])}return t}function M(e,t,n){return null===n?t:(0,o.Z)({},t,(0,a.N)(e,{scrollIntoView:!0},n))}function V(e,t){const n={effects:[d.Hk.readOnly.reconfigure(i.yy.readOnly.of(t))]};let{editorStates:o,transactions:r}=e;for(const[i]of e.editorStates)({editorStates:o,transactions:r}=(0,a.N)({editorStates:o,transactions:r},n,i));return{editorStates:o,transactions:r}}},81931:function(e,t,n){"use strict";n.d(t,{Mq:function(){return L},Nz:function(){return P},dH:function(){return N},R$:function(){return R},GC:function(){return D},YJ:function(){return T},uu:function(){return S},pB:function(){return H},b1:function(){return I},QT:function(){return j},zJ:function(){return _},bC:function(){return V},Nw:function(){return $},Tw:function(){return A}});var o=n(41799),r=n(69396),i=n(78120),s=n(95690),a=n(28100),c=n(83839),l=n(48453),d=n(53556),u=n(53695),f=n(74822),p=n(33042),h=n(27193),m=n(75107),g=n(26836);const y=new Set("do if in for let new try var case else enum eval null this true void with await \n  break catch class const false super throw while yield delete export import public \n  return static switch typeof default extends finally package private continue \n  debugger function arguments interface protected implements instanceof\n  undefined NaN Infinity\n  ".split(/\s+/));function v(e,t){if(t){const t=e.split(".");e=t.slice(0,t.length-1).join("-")}return(0,g.Q)((0,m.O)(e).replace(/^[0-9-]+/g,"").replace(/-([_a-z0-9])/g,((e,t)=>t.toUpperCase()))||"untitled",y)}var x=n(40076),b=n(88725),w=n(72760),C=n(3142);function k(e){let{status:t,name:n,create_time:o,url:r,download_url:i,size:s,mime_type:a,private_bucket_id:c}=e;const l=new Date(o);switch(t){case"pending":return{status:"pending",name:n,createTime:l,mimeType:a,privateBucketId:c};case"deleted":return{status:"deleted",name:n,createTime:l,mimeType:a,privateBucketId:c};case"private":return{status:"private",name:n,createTime:l,url:r,downloadUrl:i,size:s,mimeType:a,privateBucketId:c};case"public":return{status:"public",name:n,createTime:l,url:r,downloadUrl:i,size:s,mimeType:a,privateBucketId:c}}}function S(e){return new Map(e.map((e=>[e.name,k(e)])))}const _=(e,t)=>{let{editorStates:n,files:o}=e,{file:r,ownUpload:i}=t;o=new Map(o);const s=k(r),{name:a}=s,c=o.get(a);if("local"!==(null===c||void 0===c?void 0:c.status)||i)void 0!==(null===c||void 0===c?void 0:c.blob)&&(s.blob=c.blob);else{const e=A(o,a);o.set(e,c),console.warn("renamed ".concat(a," \u21a6 ").concat(e))}o.set(a,s);const{editorStates:l,transactions:d}=Z(n,[],o);return{files:o,editorStates:l,transactions:d}};function Z(e,t,n){let o=e;const r=(0,C.Pu)(n).map((e=>e.name));for(const[i]of e)({editorStates:o,transactions:t}=(0,a.N)({editorStates:o,transactions:t},{effects:f.C.of(r)},i));return{editorStates:o,transactions:t}}const j=(e,t)=>{const{files:n}=t;if(!n.length)return;const r=new Map(e.files),s=[];for(const o of n){const e=A(r,$(o.name)),t={name:e,createTime:new Date,mimeType:o.type,status:"local",blob:o,size:o.size};r.set(e,t),s.push(t)}const{beforeId:d}=t;if(void 0!==d)return(0,o.Z)({files:r},Z(e.editorStates,[],r),(0,l.cZ)(e,{id:d,before:!0,nodes:s.map((t=>U(t.name,t.mimeType,e.model.nodes))),type:"insertAll"}));const{nodeId:f}=t;if(void 0===f)return(0,o.Z)({files:r},Z(e.editorStates,[],r));const p=e.editorStates.get(f),h=p.changeByRange((t=>{const n=p.doc.length||"js"!==(0,u.yq)(p,t)?s.map((e=>O(e.name,e.mimeType,(0,u.yq)(p,t)))).join(", "):s.length>1?function(e,t){return"".concat((0,g.Q)("data",(0,c.e)(t))," = Promise.all([\n  ").concat(e.map((e=>O(e.name,e.mimeType))).join(",\n  "),"\n])")}(s,e.model.nodes):E(s[0].name,s[0].mimeType,e.model.nodes);return{changes:{from:t.from,to:t.to,insert:n},range:i.jT.cursor(t.from+n.length)}}));let{editorStates:m}=e,y=[];return({editorStates:m,transactions:y}=(0,a.N)(e,h,f)),({editorStates:m,transactions:y}=Z(m,y,r)),{files:r,editorStates:m,transactions:y}},L=async(e,t,n)=>{const i=t.files.filter((e=>e.size>b.D_?(n({type:"showErrorToast",message:"Could not upload ".concat(e.name,": file exceeds the ").concat((0,h.BU)(b.D_)," limit."),key:"upload:".concat(e.name)}),!1):0!==e.size||(n({type:"showErrorToast",message:"Could not upload ".concat(e.name,": empty file.")}),!1)));n((0,r.Z)((0,o.Z)({},t),{type:"localFilesAttached",files:await Promise.all(i.map(M))}))};async function M(e){if(!e.type){if("SQLite format 3\0"===await new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=n,o.readAsText(e.slice(0,16))})))return new File([e],e.name,{type:"application/x-sqlite3"})}return e}const V=async(e,t,n)=>{let{fileToAttach:o,fileToReplace:r}=t;n({type:"fileReplaced",fileToAttach:await M(o),fileToReplace:r})},T=(e,t)=>{let{fileToAttach:n,fileToReplace:i}=t;const c=new Map(e.files),l=n,d=A(c,$(l.name));c.set(d,{name:d,createTime:new Date,mimeType:l.type,status:"local",blob:l,size:l.size});let{editorStates:u}=e,f=[];({editorStates:u,transactions:f}=Z(u,f,c));const h=new Map;for(const[s,a]of e.editorStates){const t=(0,p.DY)(e.model,s);if(t.value){const e=(0,w.Qc)((0,r.Z)((0,o.Z)({},t),{value:a.doc.toString()})),n=i.name;e.fileAttachments.has(n)&&h.set(s,e.fileAttachments.get(n))}}const m=[];for(const[o,r]of h)({editorStates:u,transactions:f}=(0,a.N)({editorStates:u,transactions:f},{changes:r.map((e=>{let{start:t,end:n}=e;return{from:t,to:n,insert:'"'.concat(d,'"')}}))},o)),m.push({type:"modify_node",node_id:o,new_node_value:u.get(o).doc.toString()});for(const s of e.model.nodes)if((0,x.sO)(s)){const e=s.data.source;"FileAttachment"===e.type&&e.name===i.name&&m.push({type:"modify_data",node_id:s.id,new_node_data:(0,r.Z)((0,o.Z)({},s.data),{source:(0,r.Z)((0,o.Z)({},e),{name:d})})})}return(0,o.Z)({files:c},(0,s.v)((0,r.Z)((0,o.Z)({},e),{files:c,editorStates:u,transactions:f}),m))},I=(e,t)=>{let{files:n}=e,{name:i}=t;const s=n.get(i);if("local"===s.status)return n=new Map(n),n.set(i,(0,r.Z)((0,o.Z)({},s),{status:"pending"})),{files:n}},D=(e,t)=>{let{files:n,editorStates:i}=e,{name:s}=t;const a=n.get(s);n=new Map(n),n.set(s,(0,r.Z)((0,o.Z)({},a),{status:"local"===a.status?"deleted":"deletepending"}));const{editorStates:c,transactions:l}=Z(i,[],n);return{files:n,editorStates:c,transactions:l}},R=(e,t)=>{let{files:n}=e,{name:i}=t;const s=n.get(i);if("deletepending"===s.status)return n=new Map(n),n.set(i,(0,r.Z)((0,o.Z)({},s),{status:"deleted"})),{files:n}},H=(e,t)=>{let{file:n}=t;const{focusId:o,model:r}=e,i=null!==o?o:r.nodes[r.nodes.length-1].id;return(0,l.$T)(e,{id:i,before:!1,node:U(n.name,n.mimeType,e.model.nodes),type:"insert"})},P=async(e,t,n)=>{let{file:o}=t;await navigator.clipboard.writeText(O(o.name,o.mimeType)),n({type:"showSuccessToast",message:"Copied to clipboard"})};function A(e,t){for(;e.has(t);)t=t.replace(/(?:@(\d+))?(?=\.|$)/,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"@".concat(+t+1)}));return t}function $(e){return e.replace(/[\\"'`${}@\x00-\x09\x0b-\x19]+/g,"-")}function U(e,t,n){switch(t){case"text/csv":case"text/tab-separated-values":return{mode:"table",name:(0,g.Q)(v(e,!0),(0,c.e)(n)),data:{source:{type:"FileAttachment",name:e},operations:(0,r.Z)((0,o.Z)({},x.Zu.defaultNode.data.operations),{from:{table:(0,d.Z)({type:"FileAttachment",name:e,dialect:"csv"})}})}};case"application/x-sqlite3":return{mode:"sql",name:"",data:{source:{type:"FileAttachment",name:e}}};default:return{mode:"js",value:E(e,t,n)}}}function E(e,t,n){return"".concat((0,g.Q)(v(e,!0),(0,c.e)(n))," = ").concat(O(e,t))}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"js";const o="FileAttachment(".concat(JSON.stringify(e),")");return"md"===n?"".concat(F(t)?"!":"","[").concat(e,"](${await ").concat(o,".url()})"):"html"===n?F(t)?'<img alt="'.concat(e,'" src="${await ').concat(o,'.url()}">'):'<a href="${await '.concat(o,'.url()}">').concat(e,"</a>"):"".concat(o).concat(N(t))}function F(e){return null===e||void 0===e?void 0:e.startsWith("image/")}function N(e){if(F(e))return".image()";switch(e){case"application/json":case"application/geo+json":return".json()";case"application/x-sqlite3":return".sqlite()";case"application/zip":return".zip()";case"text/csv":return".csv()";case"text/plain":return".text()";case"text/tab-separated-values":return".tsv()";case"application/xml":return".xml()";case"text/html":return".html()";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return".xlsx()";default:return""}}},95585:function(e,t,n){"use strict";n.d(t,{yv:function(){return b},SS:function(){return V},T_:function(){return x},ib:function(){return C},ug:function(){return k},I$:function(){return j},z1:function(){return L},s0:function(){return S},vG:function(){return _},zq:function(){return Z},N5:function(){return w},cn:function(){return p},L4:function(){return M},VH:function(){return v},Aq:function(){return m},$c:function(){return g},mX:function(){return h}});var o=n(41799),r=n(69396),i=n(78120),s=n(95690),a=n(28100),c=n(10019),l=n(54667),d=n(86500),u=n(33042),f=n(72760);function p(e){const{focusId:t,model:n,participants:o,editorStates:r}=e;if(null===t)return;if(o.some((e=>e.node_ids.includes(t))))return;const i=r.get(t);if(!i)return;const s=i.doc.toString(),{data:a,value:c}=(0,u.DY)(n,t);return!(0,d.w)(a)&&function(e){return/^\s*$/.test(e)}(s)&&n.nodes.length>1?{type:"remove_node",node_id:t}:s!==c?{type:"modify_node",new_node_value:s,node_id:t}:void 0}function h(e,t){if(null!==t){const n=e.length;e[n-1]!==t&&(e=(n<100?e:e.slice(100-n+1)).concat(t))}return e}function m(e,t,n){if(e.focusId!==t)return g(e,t,n)}function g(e,t,n){const r=(0,a.N)(e,{scrollIntoView:!0,selection:n},t),i=(0,c.Hr)((0,o.Z)({},e,r),e.focusId);return(0,o.Z)({focusId:t,focusStack:h(e.focusStack,t),selectionFocusId:null,selection:new Set,insertingId:void 0},r,i)}function y(e,t,n){if(e.focusId===t)return;const r=p(e),i=r&&(0,s.v)(e,[r]);return(0,o.Z)({},i,m((0,o.Z)({},e,i),t,n))}function v(e){return null!==e.focusId?(0,a.N)(e,{scrollIntoView:!0},e.focusId):void 0}const x=(e,t)=>{let{id:n}=t;return y(e,n)},b=(e,t)=>{let{id:n=e.focusId}=t;if(e.focusId===n)return w(e)};function w(e){if(null===e.focusId)return;const t=p(e),n=(0,c.Hr)(e,e.focusId);return(0,r.Z)((0,o.Z)({},t&&(0,s.v)((0,o.Z)({},e,n),[t]),n),{focusId:null})}const C=(e,t)=>{let{id:n,selectStart:o}=t;const{model:r,model:{nodes:s}}=e,a=(0,u.$g)(r,n);if(a>s.length-2)return;return y(e,s[a+1].id,o?i.jT.single(0):void 0)},k=(e,t)=>{let{id:n,selectEnd:o}=t;const{editorStates:r,model:s,model:{nodes:a}}=e,c=(0,u.$g)(s,n);if(c<1)return;const l=a[c-1].id;return y(e,l,o?i.jT.single(r.get(l).doc.length):void 0)},S=e=>{const{model:{nodes:t},focusId:n,focusStack:o}=e;return y(e,null!==n?n:o.length?o[o.length-1]:t[0].id)},_=e=>{const{model:{nodes:t},focusId:n,focusStack:o}=e;return y(e,null!==n?n:o.length?o[o.length-1]:t[t.length-1].id)},Z=e=>{const{focusStack:t}=e,n=t.length;if(n>1)return(0,r.Z)((0,o.Z)({},y(e,t[n-2])),{focusStack:t.slice(0,-1)})},j=(e,t)=>{let{name:n}=t;n=n.trim().replace(/\s+/g," ");const o=e.model.nodes.find((e=>(0,f.WN)(e).includes(n)));if(void 0!==o)return y(e,o.id)},L=(e,t)=>{let{id:n}=t;const{editorStates:o}=e,r=o.get(n),{jumpToError:s}=r.field(l.ei).find((e=>{let{jumpToError:t}=e;return t}))||{};if(!s)return;if(!o.has(s.id))return;const a=i.jT.single(Math.min(s.position,o.get(s.id).doc.length-1));return e.focusId===s.id?g(e,s.id,a):y(e,s.id,a)},M=(e,t)=>{let{id:n,before:r}=t;const{model:i}=e,s={insertingId:r?n:null===n?i.nodes[0].id:(0,u.o4)(i,n)},a=w((0,o.Z)({},e,s));return r&&(null===a||void 0===a?void 0:a.model)&&null!==n&&null!==s.insertingId&&!(0,u.DY)(a.model,s.insertingId)&&(s.insertingId=(0,u.o4)(i,n)),(0,o.Z)({selectionFocusId:null,selection:new Set},s,a)},V=()=>({insertingId:void 0})},17152:function(e,t,n){"use strict";n.d(t,{Fe:function(){return f},J1:function(){return u},L3:function(){return d},cL:function(){return l}});var o=n(11163),r=n.n(o),i=n(95757),s=n(23952),a=n(82018),c=n(37724);const l=()=>({isForking:!0}),d=()=>({isForking:!1}),u=async(e,t,n)=>{let{notebook:o,currentUser:i}=e;if(o.isForking)return;const s=await f(i,o,t,n);s?r().push("/[at]/[...specifiers]","/d/".concat(s.id)):n({type:"forkFailed"})};function f(e,t,n,o){let{trigger:r,source:l}=n;return new Promise((n=>{if(!e)return o({type:"showModal",modal:"login",modalProps:{loginReason:"fork",loginAction:()=>{c.y.setItem("forkId",t.id),c.y.setItem("fork",JSON.stringify({save_version:t.saveVersion,events:"model"in t?t.model.events.slice(t.saveVersion+1).map((e=>(0,i.e)(e))):[]}))}},trigger:r,source:l}),n(void 0);(0,s.NE)(e)?o({type:"showModal",modal:"fork",modalProps:{notebook:t,currentUser:e},trigger:"click",source:"notebookMenu"}):(o({type:"forkPending"}),n((0,a.R)({notebook:t,live:"public"===e.tier,currentUser:e,dispatch:o,trigger:r,source:l})))}))}},3729:function(e,t,n){"use strict";n.d(t,{X:function(){return d},n:function(){return l}});var o=n(41799),r=n(69396),i=n(99534),s=n(31788),a=n(602),c=n(90627);const l=async(e,t,n)=>{let{notebook:o,currentUser:r}=e,{version:s,autosave:l}=t;try{const e=await(0,a.a8)("/document/".concat(o.id,"@").concat(s)),{edit_unpublished:t,latest_version:c}=e;n({type:"loadedVersion",body:(0,i.Z)(e,["edit_unpublished","latest_version"]),editUnpublished:t,initialLatestVersion:c,currentUser:r,autosave:l})}catch(d){(0,c.S)({error:d,key:"load_".concat(o.id),message:"Unable to load the notebook at the specified version",dispatch:n})}},d=(e,t)=>{const{initialLatestVersion:n}=t;return(0,r.Z)((0,o.Z)({},(0,s.R)(e,t)),{initialLatestVersion:n,autosave:!!t.autosave&&t.body.version>=n,isPausedLoad:!1,documentKey:void 0})}},91398:function(e,t,n){"use strict";n.d(t,{l:function(){return i},v:function(){return r}});var o=n(602);const r=async(e,t,n)=>{let{notebook:{like:r,id:i},currentUser:s}=e,{trigger:a,source:c}=t;if(s){n({type:"liked",liked:!r});try{await(0,o.Fv)("/document/".concat(i,"/like"),{like:!r})}catch(l){n({type:"liked",liked:r}),n({type:"showErrorToast",message:r?"Oops, un-liking this notebook failed. Try again?":"Oops, liking this notebook failed. Try again?",key:"like"})}}else n({type:"showModal",modal:"login",modalProps:{loginReason:"like"},trigger:a,source:c})},i=(e,t)=>{let{likes:n}=e,{liked:o}=t;return{like:o,likes:Math.max(n+(o?1:-1),0)}}},48453:function(e,t,n){"use strict";n.d(t,{$T:function(){return v},A1:function(){return S},BE:function(){return x},Od:function(){return w},TN:function(){return m},Vt:function(){return b},XM:function(){return _},aB:function(){return C},cZ:function(){return y},kT:function(){return h},th:function(){return g},vi:function(){return k}});var o=n(41799),r=n(69396),i=n(99534),s=n(78120),a=n(63999),c=n(95690),l=n(28100),d=n(52054),u=n(95585),f=n(33042),p=n(40076);function h(e){const t=a.Z.of(e);return t.history=[],t}const m=(e,t)=>{let{value:n}=t;return(0,c.v)(e,[{type:"modify_title",new_node_value:n}])},g=(e,t)=>{let{id:n}=t;const s={type:"modify_node",node_id:n,new_node_value:e.editorStates.get(n).doc.toString()};let l=(0,c.v)(e,[s]),{model:d}=l,u=(0,i.Z)(l,["model"]);return d===e.model&&(d=new a.Z(e.model),d.history=e.model.history.concat((0,r.Z)((0,o.Z)({},s),{version:e.model.version}))),(0,r.Z)((0,o.Z)({},u),{model:d})},y=(e,t)=>{let{id:n,before:r,nodes:i}=t;if(!(i.length>0))throw new Error("must insert at least one node");const{model:a}=e,l=r?n:null===n?a.nodes[0].id:(0,f.o4)(a,n),d=i[i.length-1],h=i.map((e=>{let{mode:t="js",value:n=p.qz[t].defaultNode.value,name:o=p.qz[t].defaultNode.name,pinned:r=p.qz[t].defaultNode.pinned,data:i=p.qz[t].defaultNode.data}=e;return{type:"insert_node",new_next_node_id:l,new_node_name:o,new_node_pinned:r,new_node_value:n,new_node_mode:t,new_node_data:i}})),m=(0,u.cn)(e);m&&h.push(m);const g=(0,c.v)(e,h),y=a.events.length+i.length-1;return(0,o.Z)({},g,(0,u.Aq)((0,o.Z)({},e,g),y,d.value?s.jT.single(d.value.length):void 0))},v=(e,t)=>{let{id:n,before:o,node:r={}}=t;return y(e,{type:"insertAll",id:n,before:o,nodes:[r]})},x=(e,t)=>{let{id:n,node:o}=t;return v(e,{id:n,before:!1,node:o,type:"insert"})},b=(e,t)=>{let{id:n,node:o}=t;return v(e,{id:n,before:!0,node:o,type:"insert"})},w=(e,t)=>{let{id:n,focusAfter:i,focusBefore:s}=t;const{nodes:a}=e.model;if(a.length>1){let t=(0,c.v)(e,[{type:"remove_node",node_id:n}]);if(i||s){const s=(0,f.$g)(e.model,n)+(i?1:-1);t=(0,r.Z)((0,o.Z)({},t),{focusId:a[Math.max(0,Math.min(a.length,s))].id})}return t}{const t={changes:{from:0,to:e.editorStates.get(n).doc.length,insert:""}},{transactions:i,editorStates:s}=(0,l.N)(e,t,n),a=s.get(n);return(0,c.v)((0,r.Z)((0,o.Z)({},e),{transactions:i,editorStates:s}),[{type:"modify_node",node_id:n,new_node_value:a.doc.toString()}])}},C=(e,t)=>{let{id:n}=t;const o=(0,f.DY)(e.model,n).pinned;return(0,c.v)(e,[{type:o?"unpin_node":"pin_node",node_id:n}])},k=(e,t)=>{let{id:n}=t;const{nodes:o}=e.model,r=(0,f.$g)(e.model,n);if(r!==o.length-1)return(0,d.Sf)(e,(0,c.v)(e,[{type:"move_node",node_id:n,new_next_node_id:r<o.length-2?o[r+2].id:null}]),n)},S=(e,t)=>{let{id:n}=t;const{nodes:o}=e.model,r=(0,f.$g)(e.model,n);if(0!==r)return(0,d.Sf)(e,(0,c.v)(e,[{type:"move_node",node_id:n,new_next_node_id:o[r-1].id}]),n)},_=(e,t)=>{let{copyright:n,license:o}=t;const{model:r}=e,i=[];if(r.copyright!==n&&i.push({type:"modify_copyright",new_node_value:n}),r.license!==o&&i.push({type:"modify_license",new_node_value:o}),i.length)return(0,c.v)(e,i)}},59201:function(e,t,n){"use strict";n.d(t,{Ez:function(){return c},GJ:function(){return p},Ge:function(){return d},Gr:function(){return g},LZ:function(){return m},P4:function(){return u},Yd:function(){return f},_O:function(){return h},_k:function(){return s},lx:function(){return a},rE:function(){return l},y3:function(){return i}});var o=n(41799),r=n(602);const i=new Set(["gettingStarted","loadingData","exploringData","reusingCode","collaborating","troubleshooting","links","keyboardShortcuts"]);const s=(e,t,n)=>{let{page:o}=e,{pane:r}=t;o.pane!==r&&n({type:"togglePane",pane:r})},a=(e,t)=>{let{pane:n,focusKeyboardShortcuts:r}=t;return e.pane===n?e.guide&&"guide"!==n?{pane:"guide"}:{pane:null}:(0,o.Z)({pane:n},r&&{helpArticlesOpen:[],helpPaneSectionsOpen:new Set(["keyboardShortcuts"])})},c=(e,t,n)=>{let{page:o,decorations:{signpost:r}}=e,{pane:i}=t;o.pane!==i&&r&&r===function(e){return"help"===e?"help":null}(i)&&n({type:"dismissSignpost",trigger:"Implicit"})},l=e=>e.guide&&"guide"!==e.pane?{pane:"guide"}:{pane:null},d=async(e,t,n)=>{let{notebook:o}=e,{collection:i}=t,{initialCollection:s}=o;(null===s||void 0===s?void 0:s.id)!==i.id&&(s=await(0,r.a8)("/collection/@".concat(i.owner.login,"/").concat(i.slug))),n({type:"openCollectionsSidebar",collection:s})},u=e=>({collectionsSidebarOpen:!e.collectionsSidebarOpen}),f=(e,t)=>({collectionsSidebarOpen:!t.orphaned&&e.collectionsSidebarOpen}),p=(e,t)=>{let{helpPaneSectionsOpen:n}=e,{section:o}=t;return n=new Set(n),n.has(o)?n.delete(o):n.add(o),{helpPaneSectionsOpen:n}},h=()=>({collectionsSidebarOpen:!0}),m=(e,t)=>{let{helpArticlesOpen:n}=e,{article:o,reset:r}=t;return{helpArticlesOpen:r?[o]:n.concat(o)}},g=e=>{let{helpArticlesOpen:t}=e;return{helpArticlesOpen:t.slice(0,-1)}}},30453:function(e,t,n){"use strict";n.d(t,{Dq:function(){return a},SK:function(){return f},W8:function(){return l},Z6:function(){return u},eD:function(){return d},gY:function(){return c}});var o=n(41799),r=n(69396),i=n(602),s=n(19671);const a=async(e,t,n)=>{let{notebook:{pausedVersion:o,saveVersion:r,id:s}}=e;try{const e=await(0,i.Fv)("/document/".concat(s,"/pause"),{paused_version:r});if(null===e.paused_version)throw new Error("Unexpected null paused_version");n({type:"pauseLiveEditsSuccess",pausedVersion:e.paused_version}),n({type:"showSuccessToast",message:"".concat(o?"Paused version updated to":"Paused live editing at"," v").concat(e.paused_version),key:"pauseResume"})}catch(a){n({type:"showErrorToast",message:"Oops, pausing this notebook failed. Try again?",key:"pauseResume"})}},c=async(e,t,n)=>{let{notebook:{id:o}}=e;try{if(null!==(await(0,i.Fv)("/document/".concat(o,"/pause"),{paused_version:null})).paused_version)throw new Error("Unexpected non-null paused_version");n({type:"resumeLiveEditsSuccess"}),n({type:"showSuccessToast",message:"Resumed live editing",key:"pauseResume"})}catch(r){n({type:"showErrorToast",message:"Oops, resuming live edits on this notebook failed. Try again?",key:"pauseResume"})}},l=(e,t)=>{let{pausedVersion:n}=t;return{pausedVersion:n}},d=()=>({pausedVersion:null}),u=(e,t)=>{let{currentUser:n,notebook:i}=e,{pausedVersion:a}=t;(0,s.MR)((0,s.ym)({type:"notebook:manage:pauseUpdate",data:{previousPausedVersion:i.pausedVersion},currentUser:n,eventVersion:1,notebook:(0,r.Z)((0,o.Z)({},i),{pausedVersion:a})}))},f=e=>{let{currentUser:t,notebook:n}=e;(0,s.MR)((0,s.ym)({type:"notebook:manage:pauseUpdate",data:{previousPausedVersion:n.pausedVersion},currentUser:t,eventVersion:1,notebook:(0,r.Z)((0,o.Z)({},n),{pausedVersion:null})}))}},51133:function(e,t,n){"use strict";n.d(t,{$R:function(){return d},_$:function(){return f},oc:function(){return l},tR:function(){return u}});var o=n(41799),r=n(69396),i=n(99534),s=n(31788),a=n(602),c=n(27193);const l=()=>({isReverting:!0}),d=(e,t)=>(0,r.Z)((0,o.Z)({},(0,s.R)(e,t)),{isReverting:!1,saveTime:new Date,autosave:!0}),u=()=>({isReverting:!1}),f=async(e,t,n)=>{let{notebook:{id:o,model:r,isReverting:s},currentUser:l,page:{pane:d}}=e;if(s)return;const{remote:u,version:f}=t;n({type:"showProcessingToast",key:"revert",message:u?"".concat((0,c.Ui)(r)," was reverted to version ").concat(f,"\u2026"):"Reverting ".concat((0,c.Ui)(r)," to version ").concat(f,"\u2026")});try{const e=u?await(0,a.a8)("/document/".concat(o,"@").concat(t.saveVersion)):await(0,a.Fv)("/document/".concat(o,"/revert"),{version:f}),{edit_unpublished:s}=e;n({type:"revertSucceeded",body:(0,i.Z)(e,["edit_unpublished"]),editUnpublished:s,currentUser:l}),n({type:"showSuccessToast",key:"revert",message:"".concat((0,c.Ui)(r)," was reverted to version ").concat(f,".")}),"history"===d&&n({type:"dismissPane"})}catch(p){n({type:"revertFailed"}),n({type:"showErrorToast",key:"revert",message:"".concat((0,c.Ui)(r)," ").concat(u?"was":"could not be"," reverted. Please reload").concat(u?"":" or try again",".")})}}},38559:function(e,t,n){"use strict";n.d(t,{$k:function(){return U},Fz:function(){return C},IY:function(){return j},J2:function(){return R},Pp:function(){return V},QB:function(){return M},Rt:function(){return A},YU:function(){return w},gL:function(){return D},hf:function(){return Z},lc:function(){return T},oG:function(){return S},sA:function(){return H},sk:function(){return P},tT:function(){return I},wW:function(){return $},zI:function(){return L}});var o=n(41799),r=n(69396),i=n(78120),s=n(64063),a=n.n(s),c=n(95690),l=n(28100),d=n(95585),u=n(59201),f=n(48152),p=n(19170);const h=28;function m(e){let{searchTerm:t,content:n,caseInsensitive:o=!1,wholeWord:r=!1}=e;t instanceof RegExp||(r&&(t=t.trim()),o&&(n=n.toLocaleLowerCase(),t=t.toLocaleLowerCase()));const i=[];let s=-1;if(t instanceof RegExp){let e;for(;null!==(e=t.exec(n));)i.push({location:e.index,matchedText:e[0],captureGroups:e.slice(1)})}else for(;s<n.length-1;){const e=n.indexOf(t,s+1);if(-1===e)break;if(s=e,r){if(e>0&&/\b/.test(n[e-1]))break;if(e+t.length<n.length&&/\b/.test(n[e+t.length]))break}i.push({location:e,matchedText:n.substr(e,t.length),captureGroups:[]})}return i}function g(e,t){for(let n=0;n<t.length;n++)e=e.replaceAll("$".concat(n+1),t[n]);return e}function y(e){let{searchTerm:t,regexSearch:n}=e;return n?new RegExp(t,"gu"):t}function v(e){let{searchTerm:t,editorState:n,caseSensitiveSearch:o,wholeWordSearch:r}=e;const i=n.doc.toString(),s=[],a=[{location:0,matchedText:"\n",captureGroups:[]},...m({content:i,searchTerm:"\n"}),{location:i.length,matchedText:"\n",captureGroups:[]}];for(let c=0;c<a.length-1;c++){const e=a[c].location,n=a[c+1].location-1,l=i.substring(e,n+1);if(!l)continue;const d=m({content:l,searchTerm:t,caseInsensitive:!o,wholeWord:r});for(const t of d){const n=t.matchedText,o=t.location;if(n.length>=h){s.push({beforeText:"",termText:o>0?"\u2026".concat(n.substr(0,26),"\u2026"):"".concat(n.substr(0,27),"\u2026"),afterText:"",matchLength:n.length,captureGroups:t.captureGroups,pos:e+o});continue}const r=l.substr(o,n.length);let i,a;if(l.length<=h)i=l.substring(0,o),a=l.substring(o+n.length);else{const e=Math.floor(o+n.length/2);if(e-14<=0)i=l.substring(0,o),a="".concat(l.substring(o+n.length,27),"\u2026");else if(e+14>l.length)i="\u2026".concat(l.substring(l.length-h+1,o)),a=l.substring(o+n.length);else{const e=(h-n.length)/2-1,t=Math.floor(e),r=Math.ceil(e);i="\u2026".concat(l.substr(o-t,t)),a="".concat(l.substr(o+n.length,r),"\u2026")}}s.push({beforeText:i,termText:r,afterText:a,matchLength:n.length,captureGroups:t.captureGroups,pos:e+o})}}return s.length?s:void 0}function x(e){const{searchAnchor:t,searchResultsVisible:n,searchResults:i,selectedSearchResult:s,model:c}=e;let d;if(i&&(0,p.n)(i)>0){if(t){let e=!1;e:for(const{id:n}of c.nodes){const o=i.get(n);if(n===t.nodeId){if(e=!0,o)for(const[e,{pos:r}]of o.entries())if(r>=t.position){d={nodeId:n,nodeResultIndex:e};break e}}else if(e&&o){d={nodeId:n,nodeResultIndex:0};break e}}}d||(d=_(i,0)),a()(d,s)&&(d=s)}let{editorStates:u,transactions:h}=e;for(const[o]of u)({editorStates:u,transactions:h}=(0,l.N)({editorStates:u,transactions:h},{effects:[f.YE.of((null===i||void 0===i?void 0:i.get(o))||null),f.j5.of(d||null),f.K5.of(n)]},o));return(0,r.Z)((0,o.Z)({},e),{editorStates:u,transactions:h,selectedSearchResult:d})}function b(e,t){if(!e.searchTerm)return e;const{editorStates:n,searchTerm:i,caseSensitiveSearch:s,wholeWordSearch:a,regexSearch:c,searchResults:l,model:{nodes:d}}=e;let u;t||(t=Array.from(n.keys()));try{u=y({searchTerm:i,regexSearch:c})}catch(p){return x(e)}const f=new Map;for(const{id:o}of d){const e=n.get(o);if(e){const n=t.includes(o)?v({searchTerm:u,editorState:e,caseSensitiveSearch:s,wholeWordSearch:a}):l.get(o);n&&f.set(o,n)}}return x((0,r.Z)((0,o.Z)({},e),{searchResults:f}))}const w=(e,t)=>{let{nodeIds:n}=t;return b(e,n)},C=(e,t)=>{let{searchTerm:n}=t;const{editorStates:i,caseSensitiveSearch:s,wholeWordSearch:a,regexSearch:c,model:{nodes:l}}=e;if(!n)return x((0,r.Z)((0,o.Z)({},e),{searchTerm:"",searchResults:void 0,selectedSearchResult:void 0}));let d;try{d=y({searchTerm:n,regexSearch:c})}catch(f){return{searchTerm:n,searchResults:void 0,selectedSearchResult:void 0}}const u=new Map;for(const{id:o}of l){const e=i.get(o);if(e){const t=v({searchTerm:d,editorState:e,caseSensitiveSearch:s,wholeWordSearch:a});t&&u.set(o,t)}}return x((0,r.Z)((0,o.Z)({},e),{searchTerm:n,searchResults:u}))};function k(e,t){var n;if(!t)return;const{searchResults:o}=e,{nodeId:r,nodeResultIndex:i}=t,s=null===(n=null===o||void 0===o?void 0:o.get(r))||void 0===n?void 0:n[i];if(!s)return;let{editorStates:a,transactions:c}=e;for(const[d]of a)({editorStates:a,transactions:c}=(0,l.N)({editorStates:a,transactions:c},{effects:[f.j5.of(t)]},d));return{editorStates:a,transactions:c,selectedSearchResult:t,searchAnchor:{nodeId:r,position:s.pos}}}const S=(e,t)=>{let{selectedSearchResult:n}=t;return k(e,n)};function _(e,t){let n,o,r=0;for(const[i,s]of e){if(t<r+s.length){n=i,o=t-r;break}r+=s.length}return{nodeId:n,nodeResultIndex:o}}const Z=e=>{const{searchResults:t,selectedSearchResult:n}=e;if(!t||!n)return;const o=(0,p.n)(t),r=(0,p._)(t,n);return k(e,_(t,r<o-1?r+1:0))},j=e=>{const{searchResults:t,selectedSearchResult:n}=e;if(!t||!n)return;const o=(0,p.n)(t),r=(0,p._)(t,n);return k(e,_(t,r>0?r-1:o-1))},L=(e,t,n)=>(0,u._k)(e,{type:"showPane",pane:"find"},n),M=(e,t)=>{let{initialSearchTerm:n,anchorNodeId:r,anchorPosition:i=0}=t,s={};return void 0!==r&&(s.searchAnchor={nodeId:r,position:i},s.selectedSearchResult=void 0,e=(0,o.Z)({},e,s)),void 0===r&&void 0===n||(s=(0,o.Z)({},s,C(e,{type:"setSearchTerm",searchTerm:null!==n&&void 0!==n?n:e.searchTerm}))),s},V=(e,t)=>{let{editorStates:n,transactions:s,searchResultsVisible:a,searchAnchor:c}=e;const u="pane"in t&&("find"===t.pane&&!a);let p={searchResultsVisible:u,searchAnchor:u?c:void 0};if(u!==a){for(const[e]of n)({editorStates:n,transactions:s}=(0,l.N)({editorStates:n,transactions:s},{effects:[f.K5.of(u)]},e));p=(0,r.Z)((0,o.Z)({},p),{editorStates:n,transactions:s})}if(("dismissPane"===t.type||"find"===t.pane)&&a){const{selectedSearchResult:t,searchResults:n}=e;if(n&&t){const{nodeId:r,nodeResultIndex:s}=t,{pos:a,matchLength:c}=n.get(r)[s];p=(0,o.Z)({},p,(0,d.$c)((0,o.Z)({},e,p),r,i.jT.create([i.jT.range(a,a+c)])))}else p=(0,o.Z)({},p,(0,d.VH)(e))}return p},T=e=>{let{findOptionsInputExpanded:t}=e;return{findOptionsInputExpanded:!t}},I=e=>b((0,r.Z)((0,o.Z)({},e),{caseSensitiveSearch:!e.caseSensitiveSearch,regexSearch:!1})),D=e=>b((0,r.Z)((0,o.Z)({},e),{wholeWordSearch:!e.wholeWordSearch,regexSearch:!1})),R=e=>b((0,r.Z)((0,o.Z)({},e),{regexSearch:!e.regexSearch,caseSensitiveSearch:!1,wholeWordSearch:!1})),H=(e,t)=>{let{replaceTerm:n}=t;return{replaceTerm:n}},P=e=>{let{editorStates:t,transactions:n,selectedSearchResult:i,searchResults:s,replaceTerm:a}=e;if(!i||!s)return;t=new Map(t);const{nodeId:d,nodeResultIndex:u}=i,f=s.get(d),{pos:p,matchLength:h,captureGroups:m}=f[u];return e.regexSearch&&(a=g(a,m)),({editorStates:t,transactions:n}=(0,l.N)({editorStates:t,transactions:n},{changes:[{from:p,to:p+h,insert:a}]},d)),(0,c.v)((0,r.Z)((0,o.Z)({},e),{editorStates:t,transactions:n}),[{type:"modify_node",new_node_value:t.get(d).doc.toString(),node_id:d}])},A=(e,t,n)=>{let{notebook:{selectedSearchResult:o,searchResults:r}}=e;if(!o||!r)return;const i=(0,p.n)(r);n({type:"showSuccessToast",message:"Replaced ".concat(i," ").concat(1===i?"occurrence":"occurrences")})},$=e=>{let{editorStates:t,transactions:n,selectedSearchResult:i,searchResults:s,replaceTerm:a}=e;if(!i||!s)return;t=new Map(t);for(const[o,r]of s)({editorStates:t,transactions:n}=(0,l.N)({editorStates:t,transactions:n},{changes:r.map((t=>{let{pos:n,matchLength:o,captureGroups:r}=t,i=a;if(e.regexSearch)for(let e=0;e<r.length;e++)i=a=g(i,r);return{from:n,to:n+o,insert:i}}))},o));const d=[];for(const o of Array.from(s.keys())){const e=t.get(o).doc.toString();d.push({type:"modify_node",new_node_value:e,node_id:o})}return(0,c.v)((0,r.Z)((0,o.Z)({},e),{editorStates:t,transactions:n}),d)},U=e=>{let{replaceInputExpanded:t}=e;return{replaceInputExpanded:!t}}},99223:function(e,t,n){"use strict";n.d(t,{AG:function(){return b},BP:function(){return M},Fq:function(){return C},Kt:function(){return y},MP:function(){return x},PK:function(){return V},Qs:function(){return E},S2:function(){return U},SU:function(){return H},Sx:function(){return T},TW:function(){return k},Uo:function(){return v},WZ:function(){return j},bO:function(){return D},dZ:function(){return O},fV:function(){return $},q6:function(){return I},qg:function(){return g},sc:function(){return S},v2:function(){return R},vJ:function(){return L},wP:function(){return Z},zq:function(){return A}});var o=n(41799),r=n(69396),i=n(63999),s=n(95690),a=n(28100),c=n(83839),l=n(6022),d=n(12510),u=n(52054),f=n(95585),p=n(34318),h=n(96386),m=n(33042);const g=e=>{let t;if(null===e.selectionFocusId){const n=e.model.nodes[0].id;t={selectionFocusId:n,focusState:(0,f.mX)(e.focusStack,n)}}const n=(0,o.Z)({selection:new Set(e.model.nodes.map((e=>e.id)))},t);return(0,o.Z)({},n,(0,f.N5)((0,o.Z)({},e,n)))},y=(e,t)=>{let{add:n}=t,o=e.selectionFocusId;if(null!==o){const t=(0,m.$g)(e.model,o);if(t>=e.model.nodes.length-1)return;o=e.model.nodes[t+1].id}else o=e.focusStack.length?e.focusStack[e.focusStack.length-1]:e.model.nodes[0].id;return _(e,o,n)},v=(e,t)=>{let{add:n}=t,o=e.selectionFocusId;if(null!==o){const t=(0,m.$g)(e.model,o);if(t<=0)return;o=e.model.nodes[t-1].id}else o=e.focusStack.length?e.focusStack[e.focusStack.length-1]:e.model.nodes[e.model.nodes.length-1].id;return _(e,o,n)},x=e=>w(e,!0),b=e=>w(e);function w(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{selection:n,selectionFocusId:o,model:{nodes:r}}=e;if(null===o)return;const i=(t?h.BY:h._n)(r),s=Array.from((0,h.mD)((0,m.DY)(e.model,o),i),(e=>e.id));return{selection:new Set([o,...n,...s])}}const C=e=>{const{focusId:t,selection:n,selectionFocusId:o}=e;return null!==t?_(e,t):n.size>0?{selection:new Set}:null!==o?{selectionFocusId:null}:void 0},k=()=>({selection:new Set,selectionFocusId:null}),S=e=>{const{focusId:t}=e;if(null===t)return;const n={selectionFocusId:null,selection:new Set([t]),focusId:null};return(0,o.Z)({},n,(0,f.N5)((0,o.Z)({},e,n)))};function _(e,t,n){if(e.selectionFocusId===t)return;const r={selectionFocusId:t,selection:n&&null!==e.selectionFocusId?new Set(e.selection).add(e.selectionFocusId).add(t):e.selection,focusStack:(0,f.mX)(e.focusStack,t)};return(0,o.Z)({},r,(0,f.N5)((0,o.Z)({},e,r)))}const Z=e=>{if(null!==e.selectionFocusId)return(0,f.Aq)(e,e.selectionFocusId)},j=e=>{let{selection:t,selectionFocusId:n}=e;if(null!==n)return t=new Set(t),t.has(n)?t.delete(n):t.add(n),{selection:t}},L=(e,t)=>{let{model:n,selection:o}=e,{id:r}=t;if((0,m.DY)(n,r))return o=new Set(o),o.has(r)?o.delete(r):o.add(r),{selection:o}},M=e=>{const t=[...O(e)],n=t.filter((t=>!(0,m.DY)(e.model,t).pinned));return(0,s.v)(e,n.length?n.map((e=>({type:"pin_node",node_id:e}))):t.map((e=>({type:"unpin_node",node_id:e}))))},V=e=>{const t=Array.from(O(e),(t=>(0,m.DY)(e.model,t)));return(0,s.v)(e,(t.some(p.qU)?t.filter(p.qU):t.filter((e=>!(0,p.qU)(e)))).map(p.fb))},T=e=>{const t=Array.from(O(e),(e=>({type:"remove_node",node_id:e})));if(t.length<e.model.nodes.length)return(0,s.v)(e,t);const{node_id:n}=t.pop();return t.push({type:"modify_node",node_id:n,new_node_value:""}),(0,r.Z)((0,o.Z)({},(0,s.v)((0,o.Z)({},e,(0,a.N)(e,{changes:{from:0,to:e.editorStates.get(n).doc.length,insert:""}},n)),t)),{focusId:n,focusStack:[n],selection:new Set,selectionFocusId:null})},I=(e,t)=>{let{before:n}=t;const i=O(e),a=[],l=new Set,u=(0,c.e)(e.model.nodes);let p=null;for(const o of i){const{editorState:t,insertEvent:r}=(0,d.N)(e,o,n,u);r.new_node_value=t.doc.toString();const i=e.model.events.length+a.length;a.push(r),o===e.selectionFocusId&&(p=i),e.selection.has(o)&&l.add(i)}return(0,r.Z)((0,o.Z)({},(0,s.v)(e,a)),{selection:l,selectionFocusId:p,focusStack:(0,f.mX)(e.focusStack,p)})},D=e=>{const t=new Set(O(e)),n=(0,s.v)(e,Array.from(t,(t=>({type:"modify_node",node_id:t,new_node_value:e.editorStates.get(t).doc.toString()}))));for(let o=e.model.history.length,r=n.model.history.length;o<r;++o)t.delete(n.model.history[o].node_id);if(!t.size)return n;const a=new i.Z(n.model);a.history=n.model.history.slice();for(const o of t)a.history.push({type:"modify_node",node_id:o,new_node_value:(0,m.DY)(a,o).value});return(0,r.Z)((0,o.Z)({},n),{model:a})},R=e=>{const t=e.selectionFocusId;if(null!==t&&!(t>e.saveVersion))return(0,l.hz)(e,{nodeId:t})},H=(e,t)=>{let{before:n,inherit:r,mode:i="js"}=t;const{model:a,selectionFocusId:c}=e;if(null===c)return;const l=r?(0,m.DY)(a,c):null,d=(0,s.v)(e,[{type:"insert_node",new_next_node_id:n?c:(0,m.o4)(a,c),new_node_value:"",new_node_pinned:!l||l.pinned,new_node_mode:l?l.mode:i,new_node_data:l?l.data:null,new_node_name:""===(null===l||void 0===l?void 0:l.name)?l.name:null}]);return(0,o.Z)({},d,(0,f.Aq)((0,o.Z)({},e,d),a.events.length))};function P(e,t){const n=[],o=O(e),r=e.model.nodes;for(let i=r.length-1;i>=0;--i){const e=r[i].id;o.has(e)&&(n.push({type:"move_node",node_id:e,new_next_node_id:t}),t=e)}return(0,u.Sf)(e,(0,s.v)(e,n),e.selectionFocusId)}const A=e=>{const t=O(e),n=e.model.nodes;let o=null;for(let r=n.length-1;r>=0;--r)if(t.has(n[r].id)){o=r<n.length-2?n[r+2].id:null;break}return P(e,o)},$=e=>{const t=O(e),n=e.model.nodes;let o=null;if(t.has(n[0].id)){for(let r=1;r<n.length;++r)if(!t.has(n[r].id)){o=n[r].id;break}}else for(let r=1;r<n.length;++r)if(t.has(n[r].id)){o=n[r-1].id;break}return P(e,o)},U=(e,t)=>{let{notebook:n}=e,{clipboardData:o}=t;const r=O(n),i=[],s=[];for(const a of n.model.nodes)r.has(a.id)&&(i.push(a),s.push(n.editorStates.get(a.id).doc.toString()));o.setData("text/plain",s.join("\n\n")),o.setData("application/vnd.observablehq+json",JSON.stringify(i))},E=(e,t)=>{let{nodes:n}=t;var i;const a=null!==(i=e.selectionFocusId)&&void 0!==i?i:e.model.nodes[0].id,c=[],l=new Set;let d=null;for(const o of n){const t=e.model.events.length+c.length;c.push({type:"insert_node",new_next_node_id:a,new_node_value:o.value,new_node_pinned:o.pinned,new_node_mode:o.mode,new_node_data:o.data,new_node_name:o.name}),null===d&&(d=t),l.add(t)}return(0,r.Z)((0,o.Z)({},(0,s.v)(e,c)),{selection:l,selectionFocusId:d,focusStack:(0,f.mX)(e.focusStack,d)})};function O(e){let{selection:t,selectionFocusId:n}=e;return t.size||null===n?t:new Set([n])}},29878:function(e,t,n){"use strict";n.d(t,{TM:function(){return u},_4:function(){return d},pG:function(){return l}});var o=n(41799),r=n(69396),i=n(95690),s=n(95585),a=n(33042);function c(e){var t;let n;return n=!1===(null===(t=e.options.color)||void 0===t?void 0:t.legend)?(0,r.Z)((0,o.Z)({},e.options.color),{legend:!1}):"field"===e.color.type||e.color.reduce?(0,r.Z)((0,o.Z)({},e.options.color),{legend:!0}):e.options.color,(0,r.Z)((0,o.Z)({},e),{options:(0,o.Z)({},e.options,void 0!==n&&{color:n})})}const l={type:"undefined"},d={x:l,y:l,color:l,size:l,fx:l,fy:l,mark:{type:"undefined"},options:{}},u=(e,t)=>{let{id:n,config:l,options:u}=t;const f=(0,a.DY)(e.model,n);if(!f||"chart"!==f.mode)return;const p=null===l?d:(0,r.Z)((0,o.Z)({},f.data.config,l),{options:null===u?{}:(0,o.Z)({},f.data.config.options,u)}),h=(0,i.v)(e,[{type:"modify_data",node_id:n,new_node_data:(0,r.Z)((0,o.Z)({},f.data),{config:c(p)})}]);return(0,o.Z)({},h,(0,s.Aq)((0,o.Z)({},e,h),n))}},53556:function(e,t,n){"use strict";n.d(t,{Z:function(){return f},j:function(){return u}});var o=n(41799),r=n(69396),i=n(95690),s=n(28100),a=n(95585),c=n(60486),l=n(33042),d=n(40076);const u=(e,t)=>{let{id:n,source:c}=t;const u=(0,l.DY)(e.model,n);if(!u)return;const p=[],h=e.editorStates.get(n).doc.toString();u.value!==h&&p.push({type:"modify_node",node_id:n,new_node_value:h}),p.push({type:"modify_data",node_id:n,new_node_data:(0,o.Z)((0,r.Z)((0,o.Z)({},u.data),{source:c}),"table"===u.mode?{operations:(0,r.Z)((0,o.Z)({},d.Zu.defaultNode.data.operations),{from:{table:f(c)}})}:"chart"===u.mode?{config:(0,o.Z)({},u.data.config)}:null)});let m=(0,i.v)(e,p);return e=(0,o.Z)({},e,m),m=(0,o.Z)({},m,(0,a.Aq)(e,n)),e=(0,o.Z)({},e,m),m=(0,o.Z)({},m,(0,s.N)(e,{scrollIntoView:!0},n)),m};function f(e){if(!(0,c.yD)(e.dialect))return null;switch(e.type){case"cell":return e.name;case"FileAttachment":return e.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"");default:return null}}},34318:function(e,t,n){"use strict";n.d(t,{fb:function(){return p},pk:function(){return m},qU:function(){return d},r:function(){return u}});var o=n(41799),r=n(69396),i=n(64063),s=n.n(i),a=n(95690),c=n(86500),l=n(33042);function d(e){var t,n;return!!e&&"none"!==(null===(t=e.data)||void 0===t||null===(n=t.display)||void 0===n?void 0:n.mode)}const u=(e,t)=>{let{id:n}=t;const o=(0,l.DY)(e.model,n);if(o)return m(e,{type:"setDisplay",id:n,display:f(o)})};function f(e){var t;const n=null===(t=e.data)||void 0===t?void 0:t.display;var o;return"none"===(null===n||void 0===n?void 0:n.mode)?null!==(o=n.previousDisplay)&&void 0!==o?o:null:{mode:"none",previousDisplay:n}}function p(e){return h(e,f(e))}function h(e,t){let{id:n,data:i}=e;return s()(null===i||void 0===i?void 0:i.display,t)?null:{type:"modify_data",node_id:n,new_node_data:t?(0,r.Z)((0,o.Z)({},i),{display:t}):(0,c.w)(i)?(0,r.Z)((0,o.Z)({},i),{display:void 0}):null}}const m=(e,t)=>{let{id:n,display:r}=t;const i=(0,l.DY)(e.model,n);if(!i)return;const s=h(i,r);if(!s)return;let c;const d=e.editorStates.get(n).doc.toString();return i.value!==d&&(c=(0,a.v)(e,[{type:"modify_node",node_id:n,new_node_value:d}])),(0,o.Z)({},c,(0,a.v)((0,o.Z)({},e,c),[s]))}},23251:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var o=n(41799),r=n(69396),i=n(95690),s=n(28100),a=n(2093),c=n(33042),l=n(40076),d=n(72760);const u=(e,t)=>{let{id:n,name:u,replaceReferences:f}=t;const p=(0,c.DY)(e.model,n);if(!p)return;const h=(0,d.u2)(p);if(u===(h||""))return;let{editorStates:m,model:g,transactions:y}=e;return"js"===p.mode?({editorStates:m,model:g,transactions:y}=function(e,t,n){const r=function(e,t,n){let{editorStates:o,transactions:r}=n;const i=o.get(e.id),c=(0,a.G)(i,!1);if(c){const n=t?null:(0,a.D)(i),l=null===n?c.to:n.from;return(0,s.N)({editorStates:o,transactions:r},{changes:{from:c.from,to:l,insert:t}},e.id)}if(t)return(0,s.N)({editorStates:o,transactions:r},{changes:{from:0,to:0,insert:"".concat(t," = ")}},e.id);return{editorStates:o,transactions:r}}(e,t,n);return(0,o.Z)({},r,(0,i.v)((0,o.Z)({},n,r),[{type:"modify_node",node_id:e.id,new_node_value:r.editorStates.get(e.id).doc.toString()}]))}(p,u,e)):({editorStates:m,model:g,transactions:y}=function(e,t,n){const o=n.editorStates.get(e.id).doc.toString();return(0,i.v)(n,[...e.value!==o?[{type:"modify_node",node_id:e.id,new_node_value:o}]:[],{type:"modify_name",node_id:e.id,new_node_name:t}])}(p,u,e)),f&&h&&u?function(e,t,n){let{editorStates:a,model:c,transactions:u}=e;const f=[];for(const i of c.nodes){const e=a.get(i.id);if(i.value&&e){let c=!1;const l=(0,d.Qc)((0,r.Z)((0,o.Z)({},i),{value:e.doc.toString()}));for(let e=l.references.length-1;e>=0;e--){let o=l.references[e];"MutableExpression"!==o.type&&"ViewExpression"!==o.type||(o=o.id),o.name===t&&(c=!0,({editorStates:a,transactions:u}=(0,s.N)({editorStates:a,transactions:u},{changes:{from:o.start,to:o.end,insert:n}},i.id)))}c&&f.push({type:"modify_node",node_id:i.id,new_node_value:a.get(i.id).doc.toString()})}(0,l.sO)(i)&&"cell"===i.data.source.type&&i.data.source.name===t&&f.push({type:"modify_data",node_id:i.id,new_node_data:(0,r.Z)((0,o.Z)({},i.data),{source:(0,r.Z)((0,o.Z)({},i.data.source),{name:n})})})}return(0,o.Z)({},{editorStates:a,model:c,transactions:u},(0,i.v)((0,o.Z)({},e,{editorStates:a,model:c,transactions:u}),f))}((0,r.Z)((0,o.Z)({},e),{editorStates:m,model:g,transactions:y}),h,u):{editorStates:m,model:g,transactions:y}}},10019:function(e,t,n){"use strict";n.d(t,{Hr:function(){return l},M9:function(){return a},hg:function(){return c}});var o=n(41799),r=n(28100),i=n(64802),s=n(33042);const a=(e,t)=>{let{model:n,signatureHelpDismissedSpan:a,editorStates:c,transactions:l}=e,{id:d,data:u}=t;var f;const p=(0,s.DY)(n,d),h=null===u||void 0===u||null===(f=u.applicableSpan)||void 0===f?void 0:f.start;if(p&&(!h||h!==a))return(0,o.Z)({signatureHelpData:u,signatureHelpNodeId:d,signatureHelpDismissedSpan:null},(0,r.N)({editorStates:c,transactions:l},{effects:[i.LV.of(null),i.vo.of(void 0!==h)]},d))},c=(e,t)=>{let{id:n}=t;if((0,s.DY)(e.model,n))return l(e,n)};function l(e,t){let{editorStates:n,signatureHelpData:s,transactions:a}=e;var c;if(null==t||!s)return;const l=(null===(c=s.applicableSpan)||void 0===c?void 0:c.start)||null;return(0,o.Z)({signatureHelpData:void 0,signatureHelpDismissedSpan:l},(0,r.N)({editorStates:n,transactions:a},{effects:[i.LV.of(l),i.vo.of(!1)]},t))}},99494:function(e,t,n){"use strict";n.d(t,{I8:function(){return l},d1:function(){return f},eY:function(){return u},ns:function(){return d}});var o=n(41799),r=n(95690),i=n(28100),s=n(83839),a=n(48453),c=n(19671);const l=(e,t)=>{let{apply:n,imports:c,mode:l,label:d,afterId:u=(null!==e.focusId?e.focusId:e.focusStack.length?e.focusStack[e.focusStack.length-1]:e.model.nodes[e.model.nodes.length-1].id)}=t,f=(0,a.$T)(e,{id:u,before:!1,node:{mode:l},type:"insert"});const p=(e=(0,o.Z)({},e,f)).focusId;let h;if(n({dispatch:function(e){return h=e,h},state:e.editorStates.get(p)},{label:d},0,0),void 0!==c){const t=(0,s.e)(e.model.nodes),n=(0,r.v)(e,c.filter((e=>{let[n]=e;return!t.has(n)})).map((e=>{let[t,n]=e;return{type:"insert_node",new_next_node_id:null,new_node_value:"import {".concat(t,'} from "').concat(n,'"'),new_node_pinned:!0,new_node_mode:"js",new_node_data:null,new_node_name:null}})));f=(0,o.Z)({},f,n),e=(0,o.Z)({},e,n)}return(0,o.Z)({},f,(0,i.N)(e,h,p))},d=(e,t)=>{let{notebook:n,currentUser:o}=e,{label:r}=t;(0,c.MR)((0,c.ym)({type:"notebook:manage:insertSnippet",data:{label:r},eventVersion:1,notebook:n,currentUser:o}))},u=(e,t)=>{let{notebook:n,currentUser:o}=e,{id:r,source:i}=t;(0,c.MR)((0,c.ym)({type:"notebook:cells:manage:acceptSnippet",data:{cellIds:[r],source:i},eventVersion:1,notebook:n,currentUser:o}))},f=(e,t)=>{let{notebook:n,currentUser:o}=e,{id:r,trigger:i,source:s}=t;(0,c.MR)((0,c.ym)({type:"notebook:cells:manage:requestSnippets",data:{cellIds:[r],trigger:i,source:s},eventVersion:1,notebook:n,currentUser:o}))}},3361:function(e,t,n){"use strict";n.d(t,{M:function(){return i},Q:function(){return s}});var o=n(602),r=n(27193);const i=async(e,t,n)=>{let{notebook:{id:i,model:s}}=e,{status:a,trigger:c,source:l}=t;const d="comments"===a;try{const e=await(0,o.Fv)("/document/".concat(i,"/subscribe"),{status:a});c&&n({type:"showSuccessToast",message:d?'You will now receive emails for comments on "'.concat((0,r.Ui)(s),'".'):'You will no longer receive emails for comments on "'.concat((0,r.Ui)(s),'".')}),n({type:"updateSubscriptionSucceeded",status:e.status,trigger:c,source:l})}catch(u){c&&n({type:"showErrorToast",message:"Oops, subscribing to the notebook comments failed. Try again?",key:"updateSubscription"})}},s=(e,t)=>{let{status:n}=t;return{subscriptionState:n}}},8740:function(e,t,n){"use strict";n.d(t,{$b:function(){return l},BO:function(){return u},G6:function(){return g},Hh:function(){return h},PZ:function(){return y},gd:function(){return m},ky:function(){return d},ls:function(){return p},nK:function(){return f}});var o=n(41799),r=n(69396),i=n(11163),s=n.n(i),a=n(602),c=n(88725);const l=()=>({isClosingSuggestion:!0}),d=()=>({isClosingSuggestion:!1}),u=(e,t)=>{let{suggestion:n}=t;return{isClosingSuggestion:!1,suggestionFrom:n}},f=async(e,t,n)=>{let{notebook:i,currentUser:s}=e,{source:c,trigger:l}=t;n({type:"showProcessingToast",message:"Closing suggestion",key:"closeSuggestion"});try{await(0,a.Fv)("/suggestion/".concat(i.suggestionFrom.id,"/close")),n({type:"closeSuggestionSucceeded",suggestion:(0,r.Z)((0,o.Z)({},i.suggestionFrom),{closer:s,close_time:new Date}),source:c,trigger:l}),n({type:"showSuccessToast",message:"Suggestion closed",key:"closeSuggestion"})}catch(d){n({type:"closeSuggestionFailed"}),n({type:"showErrorToast",message:"Oops, closing the suggestion failed. Try again?",key:"closeSuggestion"})}},p=()=>({isSuggesting:!0}),h=()=>({isSuggesting:!1}),m=async(e,t,n)=>{let{notebook:o}=e,{description:r,trigger:i,source:l}=t;const d=o.id,u=o.forkOf.id,f={id:o.id,owner:o.owner},p={id:o.forkOf.id,owner:o.forkOf.owner};try{const e={to_id:u,from_title:o.model.title,version:o.model.version,description:r},t=await(0,a.Fv)("/document/".concat(d,"/suggest"),e);n({type:"sendSuggestionSucceeded",base:f,target:p,trigger:i,source:l});const h=(0,c.yY)(t);h!==location.pathname?s().push(h):s().reload()}catch(h){n({type:"sendSuggestionFailed",base:f,target:p,trigger:i,source:l}),n({type:"showErrorToast",message:"Oops, suggesting failed. Try again?"})}},g=async(e,t,n)=>{let{notebook:o}=e;try{n({type:"suggestionFromUpdated",updatedSuggestionFrom:await(0,a.Fv)("/suggestion/".concat(o.suggestionFrom.id,"/close-acknowledge"))})}catch(r){n({type:"showErrorToast",message:"Oops, acknowledging the suggestion was closed failed. Try again?"})}},y=(e,t)=>{let{updatedSuggestionFrom:n}=t;return{suggestionFrom:n}}},71503:function(e,t,n){"use strict";n.d(t,{Pn:function(){return s},_U:function(){return i},j7:function(){return c},v5:function(){return a}});var o=n(602),r=n(19671);const i=async(e,t,n)=>{let{notebook:i,currentUser:s}=e;const{tag:a,documentId:c}=t;try{await(0,o.Fv)("/document/".concat(c,"/tag/add"),{tag:a}),n({type:"addTagConfirm",tag:a}),(0,r.MR)((0,r.ym)({type:"notebook:manage:addTag",data:{tag:a},eventVersion:1,currentUser:s,notebook:i}))}catch(l){n({type:"showErrorToast",message:"Error adding tag: ".concat(a)})}},s=async(e,t,n)=>{let{notebook:i,currentUser:s}=e;const{tag:a,documentId:c}=t;try{await(0,o.Fv)("/document/".concat(c,"/tag/delete"),{tag:a}),n({type:"deleteTagConfirm",tag:a}),(0,r.MR)((0,r.ym)({type:"notebook:manage:deleteTag",data:{tag:a},eventVersion:1,currentUser:s,notebook:i}))}catch(l){n({type:"showErrorToast",message:"Error deleting tag: ".concat(a)})}},a=(e,t)=>{let{tags:n}=e,{tag:o}=t;return n.push(o),{tags:n}},c=(e,t)=>{let{tags:n}=e,{tag:o}=t;return{tags:n.filter((e=>e!==o))}}},95690:function(e,t,n){"use strict";n.d(t,{v:function(){return h}});var o=n(41799),r=n(52054),i=n(28100),s=n(39978),a=n(83839),c=n(93536),l=n(6917),d=n(1864),u=n(30883),f=n(33042),p=n(3142);function h(e,t){if(t.some((e=>"revert"===e.type)))throw new Error("Revert could not be processed.");const n=[],h=new Set,m=new Set,g=new Set,y=e.model.apply(t,(e=>{(0,s.v)(e,n),(0,s.O)(e,{inserts:h,removes:m,modes:g})}));if(!n.length)return{model:e.model,transactions:e.transactions,editorStates:e.editorStates};y.history=e.model.history.concat(n);const v=y.events.slice(e.model.version+1).filter((e=>"modify_node"===e.type||"mode_node"===e.type));if(!h.size&&!m.size&&!g.size&&!v.length)return{model:y,transactions:e.transactions,editorStates:e.editorStates};let{transactions:x}=e,b=new Map(e.editorStates);const w=new Map,C=e.editorStates.get(e.model.nodes[0].id).field(u.i);for(const o of h){const t=(0,f.DY)(y,o);t&&b.set(o,(0,r.l8)(t,C,e.files,e.owner,(0,p.os)(e)))}for(const o of m)b.delete(o),w.set(o,null);const k=new Set;for(const{node_id:o,new_node_value:r}of v)if(k.add(o),b.has(o)){const e=b.get(o);({transactions:x,editorStates:b}=(0,i.N)({transactions:x,editorStates:b},(0,l.rN)(e,r),o))}e.model.nodes!==y.nodes&&({editorStates:b,transactions:x}=(0,a.C)({editorStates:b,transactions:x},y.nodes));for(const o of g){const e=(0,f.DY)(y,o);e&&({transactions:x,editorStates:b}=(0,i.N)({transactions:x,editorStates:b},{effects:d.g.of(e)},o))}return(0,o.Z)({model:y,editorStates:b,transactions:x},(0,c.a)(e,w))}},28100:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var o=n(78120);function r(e,t,n){let{editorStates:r,transactions:i}=e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;void 0!==i&&0!==i.length||(i=[],r=new Map(r));const a=t instanceof o.YW?t:r.get(n).update(t);return r.set(s,a.state),i.push(a),{editorStates:r,transactions:i}}},39978:function(e,t,n){"use strict";function o(e,t){"noop"!==e.type&&t.push(e)}function r(e,t){let{inserts:n,removes:o,modes:r}=t;switch(e.type){case"insert_node":n.add(e.node_id),o.delete(e.node_id);break;case"remove_node":n.delete(e.node_id),r.delete(e.node_id),o.add(e.node_id);break;case"mode_node":r.add(e.node_id)}}n.d(t,{O:function(){return r},v:function(){return o}})},83839:function(e,t,n){"use strict";n.d(t,{C:function(){return s},e:function(){return a}});var o=n(28100),r=n(18680),i=n(72760);function s(e,t){let{editorStates:n,transactions:i}=e;const s=a(t);for(const[a]of n)({transactions:i,editorStates:n}=(0,o.N)({transactions:i,editorStates:n},{effects:[r.Px.of(s)]},a));return{editorStates:n,transactions:i}}function a(e){return new Set(e.flatMap(i.WN))}},93536:function(e,t,n){"use strict";function o(e,t){let{hoverId:n,focusStack:o,focusId:r,dragId:i,dropId:s,selectionFocusId:a,selection:c}=e;const l={};var d;o.some((e=>t.has(e)))&&(l.focusStack=o.filter((e=>null!==t.get(e))).map((e=>null!==(d=t.get(e))&&void 0!==d?d:e)));for(const u of c)if(t.has(u)){const e=t.get(u);l.selection||(l.selection=new Set(c)),l.selection.delete(u),null!==e&&l.selection.add(e)}if(null!==n&&t.has(n)&&(l.hoverId=t.get(n)),null!==r&&t.has(r)&&(l.focusId=t.get(r)),null!==a&&t.has(a)&&(l.selectionFocusId=t.get(a)),null!==i&&t.has(i)&&(l.dragId=t.get(i)),null===l.dragId)l.dropId=void 0;else if(void 0!==s&&null!==s&&t.has(s)){const e=t.get(s);l.dropId=null===e?void 0:e}return l}n.d(t,{a:function(){return o}})},31788:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var o=n(41799),r=n(69396),i=n(63999),s=n(52054);function a(e,t){let{body:n,editUnpublished:a,currentUser:c}=t;const{model:l}=e,d=i.Z.of(n),[u]=l.patch(d,l.nodes.concat(d.nodes).map((e=>{let{id:t}=e;return[t,t]})));return d.history=new Array(l.history.length).concat(u),{model:d,editorStates:(0,s.AV)((0,r.Z)((0,o.Z)({},e),{model:d}),c),saveVersion:n.version,saveSubversion:0,editUnpublished:a,focusId:null,focusStack:[],dragId:null,dropId:void 0,hoverId:null}}},18494:function(e,t,n){"use strict";n.d(t,{D:function(){return xe},$:function(){return be}});var o=n(21571),r=n(6025),i=n(41799),s=n(69396),a=n(78120),c=n(28100),l=n(730),d=n(27193),u=n(3142);function f(e,t){const n=new Map;for(let i=0;i<t.length;i++){const{node_ids:o,selections:r,avatar_url:s}=t[i];for(let c=0;c<o.length;c++){const f=o[c],p=r[c];if(null!==f&&p){if(n.has(f)||n.set(f,[]),(0,u.kG)(f,e))continue;const o=e.editorStates.get(f);if(o){const e=o.doc.length;for(const t of p.ranges)t.head>e&&(t.head=e),t.anchor>e&&(t.anchor=e)}n.get(f).push(l._O.of({selection:a.jT.fromJSON(p),avatar:s,name:(0,d.KY)(t[i]),order:i}))}}}for(const{node_ids:i}of e.participants)for(const e of i)null===e||n.has(e)||n.set(e,[l._O.of(null)]);let{editorStates:o,transactions:r}=e;for(const[i,a]of n)o.has(i)&&({transactions:r,editorStates:o}=(0,c.N)({transactions:r,editorStates:o},{effects:a},i));const s=e.spotlightParticipant&&!t.some((t=>t.id===e.spotlightParticipant));return(0,i.Z)({participants:t,transactions:r,editorStates:o},s?{spotlightParticipant:null}:{})}var p=n(21312),h=n(60066),m=n(6022),g=n(21684),y=n(30883),v=n(23545),x=n(74080),b=n(66421);var w=n(47977),C=n(67220),k=n(70668),S=n(95690);var _=n(12510),Z=n(92858);var j=n(52054),L=n(81931),M=n(95585);function V(e,t,n,o){const r=(0,i.Z)({editor:0,worker:0,comments:0,display:0,total:0},e.get(n));return r.total+=o-r[t],0===r.total?e.delete(n):(r[t]=o,e.set(n,r)),e}var T=n(3729);var I=n(91398),D=n(33042),R=n(40076);const H=(e,t)=>{let{beforeId:n,afterId:o}=t;const{focusId:r}=e,l=e.editorStates.get(n),d=e.editorStates.get(o),u=l.doc.toString(),f=d.doc.toString(),p=u.length,h=f.length;let m,g,y,v,x;p<h||n===r&&!p?(m=n,g=o,y=v=0,x=u):(m=o,g=n,y=v=p,x=f);const b=(0,D.DY)(e.model,m),w=(0,D.DY)(e.model,g);if(!b||!w)return;if(b.mode!==w.mode&&(!R.qz[b.mode].convertible||!R.qz[w.mode].convertible)&&(r===n?p:r!==o||h))return;const{transactions:C,editorStates:k}=(0,c.N)(e,{changes:{from:y,to:v,insert:x}},g),_=(0,S.v)((0,s.Z)((0,i.Z)({},e),{transactions:C,editorStates:k}),[{type:"remove_node",node_id:m},{type:"modify_node",node_id:g,new_node_value:k.get(g).doc.toString()},..."js"!==b.mode&&"js"!==w.mode&&b.name&&!w.name?[{type:"modify_name",node_id:g,new_node_name:b.name}]:[]]),Z=a.jT.single(p),j=(0,c.N)(_,{selection:Z},g);return(0,i.Z)({},_,j,(0,M.Aq)((0,i.Z)({},e,_,j),g))};var P=n(48453),A=n(30453),$=n(51133);var U=n(99534),E=n(63999),O=n(39978),F=n(83839),N=n(93536),B=n(6917),q=n(1864),z=n(58489);function W(e,t){if(t.some((e=>"revert"===e.type)))throw new Error("Revert could not be processed.");const n=[],o=new Set,r=new Set,s=new Set;let[a,d]=e.model.merge(t,(e=>{(0,O.v)(e,n),(0,O.O)(e,{inserts:o,removes:r,modes:s})}));a===e.model&&(a=new E.Z(a)),a.history=e.model.history.concat(n);const f=t.filter((e=>"modify_node"===e.type||"mode_node"===e.type)),p=(0,j.GD)(f);if(!d.size&&!o.size&&!r.size&&!s.size&&!p.size)return{model:a,editorStates:e.editorStates,transactions:e.transactions};let{transactions:h,files:m}=e,g=new Map(e.editorStates);const v=new Map(d),x=e.editorStates.get(e.model.nodes[0].id).field(y.i);for(const[i,u]of d){if(r.has(u))continue;o.delete(u);const e={effects:[l._O.of(null),z.y.of(u)]};({transactions:h,editorStates:g}=(0,c.N)({transactions:h,editorStates:g},e,i,u))}for(const i of o){const t=(0,D.DY)(a,i);t&&(g.set(i,(0,j.l8)(t,x,m,e.owner,(0,u.os)(e))),p.delete(i))}for(const i of r)g.delete(i),d.has(i)||v.set(i,null),p.delete(i);const b=a.events.slice(t[t.length-1].version+1).filter((e=>"modify_node"===e.type||"mode_node"===e.type)),w=(0,j.GD)(b);for(const[i,l]of g){const e=(0,B.VL)(l),t=w.get(i)||[],n=e.length-t.length;n>0&&({transactions:h,editorStates:g}=(0,c.N)({transactions:h,editorStates:g},(0,B.r)(l,e.slice(0,n)),i))}for(const[i,l]of p){const e=g.get(i),t=l.map((e=>e.new_node_value));({transactions:h,editorStates:g}=(0,c.N)({transactions:h,editorStates:g},(0,B.cK)(e,t),i))}e.model.nodes!==a.nodes&&({editorStates:g,transactions:h}=(0,F.C)({editorStates:g,transactions:h},a.nodes));for(const i of s){const e=(0,D.DY)(a,i);e&&({transactions:h,editorStates:g}=(0,c.N)({transactions:h,editorStates:g},{effects:q.g.of(e)},i))}return(0,i.Z)({model:a,editorStates:g,transactions:h},(0,N.a)(e,v))}function Y(e,t){return!(0,u.ws)(e)&&!1===e.editUnpublished&&t.some((e=>"noop"!==e.type))?{editUnpublished:!0}:void 0}var X=n(38559),J=n(99223),Q=n(29878);var G=n(53556),K=n(34318),ee=n(2093),te=n(72760);var ne=n(23251),oe=n(10019),re=n(99494);function ie(e){if(null===e||void 0===e?void 0:e.display){const{display:t}=e;return(0,U.Z)(e,["display"])}return e}function se(e,t){let{id:n,before:o}=t;const{selection:{ranges:r},doc:l}=e.editorStates.get(n),d=[];for(const{from:i,to:s}of r)d.push([i,s]);const u=[];let f=0;for(const{from:i,to:s}of r)u.push([f,i]),f=s;u.push([f,l.length]);for(let i=u.length-1-+!o;i>=+o;--i){const e=u[i];/^\s*$/.test(l.sliceString(...e))&&(d.push(e),u.splice(i,1))}let p=0,h=-1;for(let i=0;i<u.length;++i){const e=u[i][1]-u[i][0];e>h&&(h=e,p=i)}for(let i=0;i<u.length;++i)i!==p&&d.push(u[i]);const m=u.map((e=>l.sliceString(...e))),{pinned:g,mode:y,data:v}=(0,D.DY)(e.model,n),x=(0,D.o4)(e.model,n),b=[];let w=n;for(let i=0;i<m.length;++i){if(i===p)continue;const t=e.model.version+b.push({type:"insert_node",new_next_node_id:i<p?n:x,new_node_value:m[i],new_node_pinned:g,new_node_mode:y,new_node_data:0===m[i].length?ie(v):v,new_node_name:"js"===y?null:""});(o&&0===i||!o&&i===m.length-1)&&(w=t)}const C={changes:d.map((e=>{let[t,n]=e;return{from:t,to:n}}))},{transactions:k,editorStates:_}=(0,c.N)(e,C,n);b.push({type:"modify_node",node_id:n,new_node_value:m[p]});const Z=(0,S.v)((0,s.Z)((0,i.Z)({},e),{transactions:k,editorStates:_}),b),j=(0,c.N)(Z,{selection:a.jT.single(o?Z.editorStates.get(w).doc.length:0)},w);return(0,i.Z)({},Z,j,(0,M.Aq)((0,i.Z)({},e,Z,j),w))}var ae=n(21390);var ce=n(3361),le=n(8740),de=n(71503);var ue=n(54667),fe=n(58671);function pe(e,t,n){return"RuntimeError"===n.name?function(e,t,n){const{model:o}=e,r=(0,D.DY)(o,t),i=n.input;if(!i)return{id:t,message:n.message,position:0};const{references:s}=(0,te.Qc)(r),a=s.find((e=>i===(0,te.m8)(e)));if(!a)return null;const c={id:t,message:n.message,position:a.start},l=o.nodes.find((e=>(0,te.WN)(e).includes(i)));l&&(c.jumpToError={isJumpToError:!0,id:l.id,position:0});return c}(e,t,n):"SyntaxError"===n.name?function(e,t,n){if(void 0===n.message)return null;const o=/^[\s\S]+\((\d+):(\d+)\)$/m.exec(n.message);if(!o)return null;const r=+o[1],i=+o[2];return{id:t,message:n.message,position:me(e,{id:t,line:r,column:i})}}(e,t,n):void 0!==n.stack?function(e,t,n){const{editorStates:o}=e;let r,a,c=null;const l=n.stack.split("\n");for(let i=l.length-1;i>-1;i--){const s=l[i];if(r=/observablehq-(\d+):(\d+):(\d+)/.exec(s))if(+r[1]===t){const o=+r[2]-1,i=+r[3]-1;c={id:t,message:n.message,position:me(e,he(e,{id:t,line:o,column:i}))}}else{if(!o.has(+r[1]))break;const t=+r[2]-1,n=+r[3]-1;a={isJumpToError:!0,id:+r[1],position:me(e,he(e,{id:+r[1],line:t,column:n}))}}}return c&&(0,s.Z)((0,i.Z)({},c),{jumpToError:a})}(e,t,n):null}function he(e,t){let{id:n,line:o,column:r}=t;const{model:s}=e,a=(0,D.DY)(s,n),c=(0,fe.Z)(a);return"import"===c.type||"empty"===c.type?{id:n,line:1,column:0}:(0,i.Z)({id:n},c.sourcemap.translate({line:o,column:r}))}function me(e,t){let{id:n,line:o,column:r}=t;const{editorStates:i}=e,s=i.get(n);return Math.min(s.doc.line(Math.min(o,s.doc.lines)).from+r,s.doc.length-1)}function ge(e,t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)}var ye=n(88725),ve=n(928);function xe(e){let{initialNotebook:t,initialCurrentUser:n,initialCollection:o,initialSafe:r=!1,initialAutosave:i=!0,initialPaused:s=!1,initialSpecifier:a,initialTags:c=[]}=e,{isCompare:l=!1,saveVersion:d=t.version,baseNotebook:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const f=t.version<=ye.Lr&&(0,b.mG)(t)?0:null,p=(0,L.uu)(t.files),h={authors:t.authors,autosave:i,caseSensitiveSearch:!1,clientState:"closed",collections:t.collections,commentingLock:t.commenting_lock,comments:(0,m.Sh)(t.comments),composingComments:new Set,creator:t.creator,defaultThumbnail:t.default_thumbnail,description:t.description,documentKey:null,dragId:null,dropId:void 0,editorStates:new Map,editUnpublished:t.edit_unpublished,expandedResolvedComments:new Set,files:p,firstPublishedVersion:t.first_public_version,focusId:f,focusStack:null===f?[]:[f],spotlightParticipant:null,forkOf:t.fork_of,forks:t.forks,hasImporters:t.has_importers,heights:new Map,hoverId:null,id:t.id,initialAutosave:i,initialCollection:o,initialLatestVersion:t.latest_version,initialSpecifier:a?new ve.Z(a):null,insertingId:void 0,isClosingSuggestion:!1,isCompare:l,isForking:!1,isFullscreen:!1,isPausedLoad:s,isMerging:!1,isPublishing:!1,isReverting:!1,isSuggesting:!1,isUnpublishing:!1,isUpdatingTrash:!1,like:t.like,likes:t.likes,model:(0,P.kT)(t),openComments:new Set,owner:t.owner,participants:[],pausedVersion:t.paused_version,publishLevel:t.publish_level,publishTime:t.publish_time,publishVersion:t.publish_version,regexSearch:!1,replaceMessage:void 0,replaceTerm:"",roles:t.roles,safe:r,saveSubversion:0,saveTime:t.update_time||new Date,saveVersion:d,searchResults:void 0,searchResultsVisible:!1,searchTerm:"",selectedSearchResult:void 0,selection:new Set,selectionFocusId:null,sharing:t.sharing,slug:t.slug,subscriptionState:t.subscription||"default",suggestionFrom:t.suggestion_from,suggestionsTo:t.suggestions_to,tags:c,thumbnail:t.thumbnail,trashed:t.trashed,wholeWordSearch:!1,workerStatus:new Map,workerTasks:new Set},g=t.edits;return(0,j.Hp)(h,n,g),(0,m.UE)(h,n,u),h}const be={addTagConfirm:de.v5,blur:M.yv,cellHeight:(e,t)=>{let{heights:n}=e,{heights:o}=t;n=new Map(n);for(const{id:r,height:i,type:s}of o)V(n,s,r,i);return{heights:n}},clientStateChanged:(e,t)=>{let{clientState:n}=t;if("aborted"===e.clientState&&"aborted"!==n)throw new Error("Cannot recover an aborted client.");return(0,i.Z)({clientState:n},("reopening"===(o=n)||"closed"===o||"aborted"===o)&&f((0,s.Z)((0,i.Z)({},e),{clientState:n}),[]));var o},closeSuggestion:le.$b,closeSuggestionFailed:le.ky,closeSuggestionSucceeded:le.BO,cloudFileSnippet:w.AK,closeInsertMenu:M.SS,collectionsUpdated:p.Yd,commentComposeCancel:m.Mb,commentComposeOpen:m.hz,commentCreated:m.E,commentDeleted:m.dV,commentSaveConfirmed:m.V5,commentingLockSaved:h.q,commentsDeleteConfirmed:m.hx,commentsUpdated:m.A9,commit:P.th,createDocumentKeySucceeded:k.d,currentUserUpdated:(e,t)=>{let{updatedCurrentUser:n}=t;const{model:{nodes:o},owner:r}=e;let{editorStates:i,transactions:s}=e;const l=i.get(o[0].id).field(y.i),d=(0,u.wW)(n,r),f=(0,u.CD)(n),p=(0,u.OA)(n),h=(0,b.Yb)(n)&&(0,x.j5)(n,e),m=!n,w=(0,u.Sx)(n),C=(0,u.S1)(n);if(d!==l.prettierOn||f!==l.closeBracketsOn||h!==l.fileUploadsOn||p!==l.spellcheckOn||w!==l.defaultCellMode||m!==l.loginToUpload||C!==l.vimKeys){const e=[y.C.of({prettierOn:d,closeBracketsOn:f,fileUploadsOn:h,loginToUpload:m,spellcheckOn:p,defaultCellMode:w,vimKeys:C})];f!==l.closeBracketsOn&&e.push(g.Hk.closeBrackets.reconfigure(f?g._g:[])),C!==l.vimKeys&&v.R.loaded&&e.push(g.Hk.vimKeys.reconfigure(l.vimKeys?a.Wl.highest(v.R.vim()):[]));for(const[t]of i)({editorStates:i,transactions:s}=(0,c.N)({editorStates:i,transactions:s},{effects:e},t));return{editorStates:i,transactions:s}}},deleteTagConfirm:de.j7,descriptionUpdated:C.z,disableAutosave:r.C,dismissPane:X.Pp,dragEnded:e=>{const{dragId:t,dropId:n}=e;return(0,s.Z)((0,i.Z)({},void 0!==n&&(0,S.v)(e,[{type:"move_node",node_id:t,new_next_node_id:n}])),{dragId:null,dropId:void 0})},dragStarted:(e,t)=>{let{id:n}=t;return{dragId:n}},dragged:(e,t)=>{let{dropId:n}=e,{id:o}=t;return n===o?void 0:{dropId:o}},duplicate:_.O,edit:(e,t)=>{let{editorStates:n}=e,{id:o,state:r}=t;if(n.get(o)===r)return;const i=new Map(n);i.set(o,r);const s=r.field(Z.c);return null===s||void 0===s||s.updateFile(o,r.doc.toString()),{editorStates:i}},enableVimKeys:e=>{if(!v.R.loaded)return;const t=[g.Hk.vimKeys.reconfigure(a.Wl.highest(v.R.vim()))];let{editorStates:n,transactions:o}=e;for(const[r]of n)({editorStates:n,transactions:o}=(0,c.N)({editorStates:n,transactions:o},{effects:t},r));return{editorStates:n,transactions:o}},enterSafe:()=>({safe:!0}),exitSafe:()=>({safe:!1}),enterFullscreen:()=>({isFullscreen:!0}),exitFullscreen:()=>({isFullscreen:!1}),fileDeleteSucceeded:L.R$,fileMarkedForDeletion:L.GC,fileReplaced:L.YJ,focus:M.T_,focusAfter:M.ib,focusBefore:M.ug,focusDefinition:M.I$,focusError:M.z1,focusFirst:M.s0,focusLast:M.vG,focusUndo:M.zq,hideComments:m.u0,hover:(e,t)=>{let{id:n}=t;const{hoverId:o}=e;if(o!==n)return{hoverId:n}},insertAfter:P.BE,insertBefore:P.Vt,insertCloudFile:w.GH,insertDatabase:w.q5,insertFile:L.pB,insertSuggestion:w.Qf,insertSnippet:re.I8,liked:I.l,loadedVersion:T.X,localFileUploadSucceeded:L.b1,localFilesAttached:L.QT,merge:H,mergeAfter:(e,t)=>{let{id:n}=t;const{model:o}=e,r=(0,D.$g)(o,n)+1;if(!(r>=o.nodes.length))return H(e,{type:"merge",beforeId:n,afterId:o.nodes[r].id})},mergeBefore:(e,t)=>{let{id:n}=t;const{model:o}=e,r=(0,D.$g)(o,n)-1;if(!(r<0))return H(e,{type:"merge",beforeId:o.nodes[r].id,afterId:n})},moveDown:P.vi,moveUp:P.A1,openInsertMenu:M.L4,pauseLiveEditsSuccess:A.W8,presence:(e,t)=>{let{participants:n}=t;return f(e,n)},relicense:P.XM,remoteFileUpdated:L.zJ,remove:P.Od,removeCloudFile:w.nD,replaceAll:X.wW,replaceCurrent:X.sk,resolveComments:m.Fq,resolveCommentsConfirmed:m.I5,resolveDependencies:(e,t)=>{let{resolutions:n}=t;const o=n.map((e=>({type:"resolve_dependency",specifier_type:e.type,specifier:e.specifier,new_resolution:e.value})));return(0,S.v)(e,o)},resumeLiveEditsSuccess:A.eD,revertFailed:$.tR,revertRequested:$.oc,revertSucceeded:$.$R,saveConfirmed:(e,t)=>{let n,{saveVersion:o,saveSubversion:r,saveTime:s,edits:a,events:l}=t,{editorStates:d}=e;const u=l.filter((e=>"modify_node"===e.type||"mode_node"===e.type)),f=(0,j.GD)(u);for(const[i,m]of f)if(d.has(i)){const e=d.get(i),t=m.map((e=>e.new_node_value));({transactions:n,editorStates:d}=(0,c.N)({transactions:n,editorStates:d},(0,B.r)(e,t),i))}const p=(0,j.GD)(a);for(const[i,m]of p)if(d.has(i)){const e=d.get(i);({transactions:n,editorStates:d}=(0,c.N)({transactions:n,editorStates:d},(0,B.b4)(e,new Array(m.length),m.length),i))}const h={saveVersion:o,saveSubversion:r,saveTime:s,editorStates:d,transactions:n};return(0,i.Z)({},h,Y((0,i.Z)({},e,h),l))},saveReceived:(e,t)=>{let{events:n,edits:o,saveVersion:r,saveTime:s,saveSubversion:a}=t,l=W(e,n),{editorStates:d,transactions:u,model:f}=l,p=(0,U.Z)(l,["editorStates","transactions","model"]);const h=(0,j.GD)(o);for(const[i,g]of h)if(d.has(i)){const e=d.get(i),t=g.map(j.F2);({transactions:u,editorStates:d}=(0,c.N)({transactions:u,editorStates:d},(0,B.b4)(e,t,0),i))}const m=(0,i.Z)({editorStates:d,transactions:u,saveVersion:r,saveTime:s,saveSubversion:a,model:f},p);return(0,i.Z)({},m,Y((0,i.Z)({},e,m),n))},selectionAll:J.qg,selectionBlur:J.Fq,selectionClear:J.TW,selectionComment:J.v2,selectionCut:J.Sx,selectionDelete:J.Sx,selectionDuplicate:J.q6,selectionFocusAfter:J.Kt,selectionFocusBefore:J.Uo,selectionUpstream:J.MP,selectionDownstream:J.AG,selectionFocusEnter:J.wP,selectionFocusToggle:J.WZ,selectionHide:J.PK,selectionInsert:J.SU,selectionMoveDown:J.zq,selectionMoveUp:J.fV,selectionPaste:J.Qs,selectionPin:J.BP,selectionPromote:J.sc,selectionRun:J.bO,selectionToggle:J.vJ,sendSuggestion:le.ls,sendSuggestionFailed:le.Hh,setAuthorAcceptance:o.KV,setAuthors:o.C2,setDataSource:G.j,setDataOperations:(e,t)=>{let{id:n,operations:o}=t;const r=(0,D.DY)(e.model,n);if(!r||"table"!==r.mode)return;const a=r.data,c=function(e,t){var n,o,r;const a=new Map((null!==(r=null!==(o=t.names)&&void 0!==o?o:e.operations.names)&&void 0!==r?r:[]).map((e=>{let{name:t,column:n}=e;return[t,n]})));if(0===a.size)return t;const c={};if(null===(n=t.select)||void 0===n?void 0:n.columns){var l;const e=t.select.columns.map((e=>null!==(l=a.get(e))&&void 0!==l?l:e));c.select={columns:e}}var d,u;return t.filter&&(c.filter=t.filter.map((e=>(0,s.Z)((0,i.Z)({},e),{operands:e.operands.map((e=>{if("column"!==e.type)return e;const t=a.get(e.value);return(0,s.Z)((0,i.Z)({},e),{value:null!==t&&void 0!==t?t:e.value})}))})))),t.sort&&(c.sort=t.sort.map((e=>(0,s.Z)((0,i.Z)({},e),{column:null!==(d=a.get(e.column))&&void 0!==d?d:e.column})))),t.types&&(c.types=t.types.map((e=>(0,s.Z)((0,i.Z)({},e),{name:null!==(u=a.get(e.name))&&void 0!==u?u:e.name})))),(0,i.Z)({},t,c)}(a,o),l=(0,S.v)(e,[{type:"modify_data",node_id:n,new_node_data:(0,s.Z)((0,i.Z)({},r.data),{operations:{select:c.select||a.operations.select,from:c.from||a.operations.from,filter:c.filter||a.operations.filter,sort:c.sort||a.operations.sort,slice:c.slice||a.operations.slice,types:c.types||a.operations.types,names:c.names||a.operations.names}})}]);return(0,i.Z)({},l,(0,M.Aq)((0,i.Z)({},e,l),n))},setChartConfig:Q.TM,setDisplay:K.pk,openCollectionsSidebar:p._O,setMode:(e,t)=>{let{id:n,mode:o,value:r}=t;var s,a;const l=e.editorStates.get(n);if(!l)return;const d=l.field(q.C);if(o===d)return;let u;const f=(0,D.DY)(e.model,n),p=e.editorStates.get(n).doc.toString();let h=f.name;if(f.value!==p&&(u=(0,S.v)(e,[{type:"modify_node",node_id:n,new_node_value:p}])),"js"===d){const t=(0,i.Z)({},e,u).editorStates.get(n),o=(0,ee.G)(t,!1);if(o)if(h=t.doc.sliceString(o.from,o.to),(0,te.r1)(h)){const n=(0,ee.G)(t,!0),o=(0,ee.D)(t);n&&o&&(u=(0,i.Z)({},u,(0,c.N)((0,i.Z)({},e,u),{changes:{from:n.from,to:o.from,insert:""}},f.id)))}else h="";else h=""}if("table"===d||"table"===o){const t=(0,i.Z)({},e,u).editorStates.get(n).doc.length;"table"===d?u=(0,i.Z)({},u,(0,c.N)((0,i.Z)({},e,u),{changes:{from:0,to:t,insert:r||""}},n)):t&&(u=(0,i.Z)({},u,(0,c.N)((0,i.Z)({},e,u),{changes:{from:0,to:t,insert:""}},n)))}else"js"===o&&h&&(0,i.Z)({},e,u).editorStates.get(n).doc.length&&(u=(0,i.Z)({},u,(0,c.N)((0,i.Z)({},e,u),{changes:{from:0,to:0,insert:"".concat(h," = ")}},n)));const m="none"===(null===(s=f.data)||void 0===s||null===(a=s.display)||void 0===a?void 0:a.mode)?{display:{mode:"none"}}:null,g=(0,i.Z)({},e,u).editorStates.get(n).doc;return u=(0,i.Z)({},u,(0,S.v)((0,i.Z)({},e,u),[(0,i.Z)({type:"mode_node",node_id:n,new_node_value:g.toString(),new_node_pinned:g.length?f.pinned:R.qz[o].defaultNode.pinned},"js"===o?{new_node_mode:o,new_node_name:R.xh.defaultNode.name,new_node_data:(0,i.Z)({},R.xh.defaultNode.data,m)}:"sql"===o?{new_node_mode:o,new_node_name:null!==h&&void 0!==h?h:"",new_node_data:(0,i.Z)({},R.d0.defaultNode.data,"table"===d&&{source:f.data.source},m)}:"table"===o?{new_node_mode:o,new_node_name:null!==h&&void 0!==h?h:"",new_node_value:R.Zu.defaultNode.value,new_node_data:(0,i.Z)({},R.Zu.defaultNode.data,m)}:"chart"===o?{new_node_mode:o,new_node_name:null!==h&&void 0!==h?h:"",new_node_value:R.mc.defaultNode.value,new_node_data:(0,i.Z)({},R.mc.defaultNode.data,m)}:{new_node_mode:o,new_node_name:null!==h&&void 0!==h?h:"",new_node_data:(0,i.Z)({},R.qz[o].defaultNode.data,m)})])),u=(0,i.Z)({},u,(0,c.N)((0,i.Z)({},e,u),{effects:q.g.of((0,D.DY)((0,i.Z)({},e,u).model,n))},n)),(0,i.Z)({},u,(0,M.Aq)((0,i.Z)({},e,u),n))},setName:ne.q,selectNextSearchResult:X.hf,selectPreviousSearchResult:X.IY,selectSearchResult:X.oG,setReplaceTerm:X.sA,setSearchTerm:X.Fz,showComments:m.Q8,showFindPane:X.QB,signatureHelp:oe.M9,signatureHelpDismiss:oe.hg,splitAfter:(e,t)=>{let{id:n}=t;return se(e,{id:n,before:!1})},splitBefore:(e,t)=>{let{id:n}=t;return se(e,{id:n,before:!0})},spotlight:(e,t)=>{let{id:n}=t;if(!n)return{spotlightParticipant:null};return e.participants.find((e=>e.id===n))?{spotlightParticipant:n}:{spotlightParticipant:null}},sqlDialectUpdated:(e,t)=>{let{id:n,dialect:o}=t;return(0,c.N)(e,{effects:[g.Hk.sql.reconfigure((0,ae.i6)({dialect:(0,R.D7)(o)}))]},n)},suggestionFromUpdated:le.PZ,synced:(e,t)=>{let{events:n,edits:o,saveVersion:r,saveSubversion:c,saveTime:l}=t,d=W(e,n),{editorStates:p,transactions:h,model:m}=d,g=(0,U.Z)(d,["editorStates","transactions","model"]);({editorStates:p,transactions:h}=(0,j.R9)({editorStates:p,transactions:h},o));let y=(0,i.Z)((0,s.Z)((0,i.Z)({saveVersion:r,saveSubversion:c},n.length||o.length?{saveTime:l}:null),{editorStates:p,transactions:h,model:m}),g);if(y=(0,i.Z)({},y,f((0,i.Z)({},e,y),e.participants)),null===e.focusId&&!(0,u.os)(e)&&(0,b.mG)(e)&&o.length>0){const t=o[0];(e.participants.some((e=>e.self&&e.node_ids.includes(t.node_id)))||!e.participants.some((e=>!e.self&&e.node_ids.includes(t.node_id))))&&p.has(t.node_id)&&(y=(0,i.Z)({},y,(0,M.$c)((0,i.Z)({},e,y),t.node_id,a.jT.single(t.value.length))))}return(0,i.Z)({},y,Y((0,i.Z)({},e,y),n))},title:P.TN,toggleCaseSensitiveSearch:X.tT,toggleDisplay:K.r,togglePane:X.Pp,togglePin:P.aB,toggleRegexSearch:X.J2,toggleResolvedComments:m.m1,toggleWholeWordSearch:X.gL,tierUpdated:(e,t)=>{let{owner:n,roles:o}=e,{login:r,newTier:i}=t;if(n.login===r&&n.tier!==i&&"public"===n.tier)return{roles:o.filter((e=>"readonly"!==e))}},updateComment:m.uA,updateCommentStatus:m.Ty,updateSearchResults:X.YU,updateSubscriptionSucceeded:ce.Q,workerStatus:(e,t)=>{let{workerStatus:n}=e,{displayModes:o,statuses:r,suggestions:a,chartSpecs:c}=t;n=new Map(n);for(const[l,d]of o){const e=n.get(l),t=null===e||void 0===e?void 0:e.display;n.set(l,(0,s.Z)((0,i.Z)({},e),{display:{mode:d,generation:t?t.generation+1:1}}))}for(const[l,d]of r){const e=n.get(l);n.set(l,(0,s.Z)((0,i.Z)({},e),{status:d}))}for(const[l,d]of a){const e=n.get(l);n.set(l,(0,s.Z)((0,i.Z)({},e),{suggestions:d}))}for(const[l,d]of c){const e=n.get(l);n.set(l,(0,s.Z)((0,i.Z)({},e),{chartSpec:d}))}return{workerStatus:n}},workerErrors:(e,t)=>{let{errors:n}=t,{editorStates:o,transactions:r,model:a}=e;const l=new Map,d=new Map;for(const i of a.nodes){const e=o.get(i.id).field(ue.ei);e.length&&l.set(i.id,new Set);for(const t of e){if(t.isJumpToError)continue;const{jumpToError:e}=t;ge(d,i.id,t),e&&ge(d,i.id,e)}}for(const[i,s]of n){if(d.delete(i),!s)continue;const t=pe(e,i,s);if(!t)continue;ge(d,i,t);const{jumpToError:n}=t;n&&ge(d,i,n)}for(const[,i]of d)for(const e of i)ge(l,e.id,e);for(const[u,f]of l){const e=(0,D.DY)(a,u);e&&!(0,R.hN)(e)&&({editorStates:o,transactions:r}=(0,c.N)({editorStates:o,transactions:r},{effects:[ue.Cw.of([...f].map((e=>{var t;return(0,s.Z)((0,i.Z)({},e),{doc:null===(t=o.get(u))||void 0===t?void 0:t.doc})})))]},u))}return{editorStates:o,transactions:r}},workerGoodbye:e=>{let{heights:t}=e;t=new Map(t);for(const[n,{worker:o}]of t)0!==o&&V(t,"worker",n,0);return{heights:t,workerStatus:new Map}},workerTask:(e,t)=>{let{safe:n,workerTasks:o}=e,{task:r}=t;if(!n)return o.add(r),{workerTasks:o};r.reject(new Error("no worker in safe mode"))}}},30169:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var o=n(19671);const r=(e,t)=>{let{currentUser:n,notebook:r}=e;if("setSlug"===t.modal)(0,o.MR)((0,o.ym)({type:"notebook:view:slugModal",data:{isSlugSet:!!r.slug},eventVersion:1,notebook:r,currentUser:n}))}}}]);