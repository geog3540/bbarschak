"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8790],{34049:function(e,t,s){var a=s(85893),n=s(9008),r=s.n(n),i=s(64451);t.Z=e=>{let{content:t,disableSuffix:s=!1}=e;return(0,a.jsx)(r(),{children:(0,a.jsx)("title",{children:s?t:(0,i.q)(t)})})}},776:function(e,t,s){s.d(t,{i:function(){return o}});var a=s(41799),n=s(69396),r=s(99534),i=s(85893),l=s(94184),c=s.n(l);s(67294);const o=e=>{var{className:t=""}=e,s=(0,r.Z)(e,["className"]);return(0,i.jsx)("input",(0,n.Z)((0,a.Z)({},s),{type:"range",style:{height:6},className:c()("form-default-clear form-custom-slider br-pill",s.disabled?"mid-gray bg-black-10 disabled":"dark-gray bg-light-silver hover-near-black",s.disabled?"disabled not-allowed":"animate-all pointer",t)}))}},24576:function(e,t,s){s.d(t,{g:function(){return d}});var a=s(41799),n=s(69396),r=s(99534),i=s(85893),l=s(94184),c=s.n(l);function o(e){let{currentTarget:t}=e;t.style.height="initial",t.style.height="".concat(t.scrollHeight,"px")}const d=s(67294).forwardRef((function(e,t){const{hasError:s=!1,autoResize:l=!1,className:d="",style:m,rows:u}=e,h=(0,r.Z)(e,["hasError","autoResize","className","style","rows"]);return(0,i.jsx)("textarea",(0,n.Z)((0,a.Z)({},h),{ref:e=>{"function"===typeof t?t(e):t&&(t.current=e),e&&l&&o({currentTarget:e})},onInput:l?o:void 0,rows:l?1:u,style:(0,a.Z)({resize:"vertical"},m,l&&{resize:"none",maxHeight:void 0===u?"none":"calc(".concat(u," * 1.5em + 2 * var(--spacing-small))")}),className:c()("form-default-clear form-custom-input pa2 f6 fw5 br2 lh-copy",e.disabled?"mid-gray bg-near-white disabled":"dark-gray bg-white blue-ring-focus",d,s?"has-error":"")}))}))},47829:function(e,t,s){var a=s(41799),n=s(69396),r=s(85893);t.Z=e=>(0,r.jsxs)("svg",(0,n.Z)((0,a.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,r.jsx)("rect",{x:"2",y:"3",width:"12",height:"10",rx:"0.5",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M9.53033 7.46967L13.5303 11.4697L12.4697 12.5303L8.46967 8.53033L9.53033 7.46967ZM2.46967 11.4697L6.46967 7.46967L7.53033 8.53033L3.53033 12.5303L2.46967 11.4697Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M8 9L7.29289 9.70711C7.68342 10.0976 8.31658 10.0976 8.70711 9.70711L8 9ZM2.29289 4.70711L7.29289 9.70711L8.70711 8.29289L3.70711 3.29289L2.29289 4.70711ZM8.70711 9.70711L13.7071 4.70711L12.2929 3.29289L7.29289 8.29289L8.70711 9.70711Z",fill:"currentColor"})]}))},71043:function(e,t,s){s.d(t,{Z:function(){return d}});var a=s(41799),n=s(99534),r=s(85893),i=s(94184),l=s.n(i),c=(s(67294),s(69396));var o=e=>(0,r.jsx)("svg",(0,c.Z)((0,a.Z)({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),{children:(0,r.jsx)("path",{d:"M2.98713 12.6H5.00005V6H2.98713V12.6ZM4 5.16211C4.60352 5.16211 5.10156 4.6875 5.10156 4.08398C5.10156 3.48047 4.60352 3 4 3C3.39648 3 2.89844 3.48047 2.89844 4.08398C2.89844 4.6875 3.39648 5.16211 4 5.16211Z",fill:"currentColor"})}));var d=e=>{var{className:t}=e,s=(0,n.Z)(e,["className"]);return(0,r.jsx)(o,(0,a.Z)({className:l()("br-pill light-blue bg-observable-faint-blue",t),width:"18",height:"18"},s))}},10623:function(e,t,s){s.d(t,{E:function(){return h},I:function(){return u}});var a=s(85893),n=s(56424),r=s(67294),i=s(27011),l=s.n(i),c=s(37497),o=s(75713),d=s(776),m=s(93452);const u=460,h=e=>{let{fileUrl:t,onDismiss:s,onNewAvatar:i}=e;const{0:h,1:g}=(0,r.useState)(1),p=(0,r.useRef)(null);function v(e){if(e.preventDefault(),p.current){const e=p.current.getImage(),t=[0,0,e.width,e.height],a=[0,0,u,u],n=document.createElement("canvas");n.width=u,n.height=u;const r=n.getContext("2d");r.fillStyle="#fff",r.fillRect(...a),r.drawImage(e,...t,...a),i(n.toDataURL("image/webp",100)),s()}}return(0,a.jsx)(n.Vq,{onDismiss:s,"aria-labelledby":"modal-title",children:(0,a.jsxs)(o.l,{onSubmit:v,children:[(0,a.jsx)(m.xB,{title:"Set your avatar",onDismiss:s}),(0,a.jsxs)(m.fe,{children:[(0,a.jsx)(l(),{image:t,ref:p,width:396,height:396,border:10,borderRadius:198,scale:h}),(0,a.jsxs)("div",{className:"flex mt2 justify-center items-center",children:[(0,a.jsx)("label",{className:"mr2 f6 black-70",htmlFor:"scale-range",children:"Zoom"}),(0,a.jsx)(d.i,{name:"scale-range",className:"w4",onChange:e=>g(e.target.valueAsNumber),value:h,step:"any",min:1,max:2})]})]}),(0,a.jsx)(m.mz,{children:(0,a.jsxs)(c.CQ,{children:[(0,a.jsx)(c.kq,{text:"Cancel",onClick:s}),(0,a.jsx)(c.KM,{text:"Save",onClick:v,type:"submit"})]})})]})})}},83745:function(e,t,s){s.d(t,{w:function(){return o}});var a=s(41799),n=s(85893),r=s(11163),i=s.n(r),l=(s(67294),s(10099)),c=s(36448);const o=(0,s(40042).$j)((e=>{let{currentUser:t,context:{context:s}}=e;const a=(0,c.xT)(t,s);return{restricted:!!a&&(0,c.pr)(t,a),orgRestriction:null===a||void 0===a?void 0:a.org_restriction}}),null)((e=>{let{children:t,restricted:s,orgRestriction:r}=e;return(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)(l.l,{onDismiss:()=>{i().push("/")},error:{code:"MISSING_ORG",meta:(0,a.Z)({},r?{provider_org:r}:void 0)}}),!s&&t]})}))},11140:function(e,t,s){s.d(t,{L:function(){return ye}});var a=s(85893),n=s(94184),r=s.n(n),i=s(67294),l=s(77279),c=s(41799),o=s(69396),d=s(99534),m=s(36815),u=s(23080),h=s(28923),g=s(37497),p=s(47829),v=s(3304),f=s(19868),x=s(2845),j=s(8433),b=s(33396),y=s(65091),w=s(36225),k=s(602),N=s(12447),_=s(66421),C=s(3142),S=s(36448),T=s(51959);function U(e){let{provider:t}=e;const s=(0,w.gZ)(t);return"otp"===s?"a link emailed to this address":"sso"===s?"a custom SSO provider":w.pb.get(s)}const E=e=>{var{identity:t,dispatch:s}=e,n=(0,d.Z)(e,["identity","dispatch"]);return(0,a.jsx)("button",(0,o.Z)((0,c.Z)({className:"ph1 f6 fw6 moon-gray hover-red bn no-wrap bg-transparent pointer bg-animate",onClick:()=>s({type:"deleteIdentity",id:t.id})},n),{children:(0,a.jsx)(j.Z,{className:"w1 h1 mr1"})}))};function L(e){switch(e.provider){case"google":return(0,a.jsxs)("div",{className:"f6 fw5 flex items-center",children:[(0,a.jsx)(f.Z,{className:"v-mid mr1"}),e.email]});case"github":return(0,a.jsxs)("div",{className:"f6 fw5 flex items-center",children:[(0,a.jsx)(v.Z,{className:"v-mid mr1"}),(0,a.jsxs)("span",{children:["@",e.login]})]});case"twitter":return(0,a.jsxs)("div",{className:"f6 fw5 flex items-center",children:[(0,a.jsx)(b.Z,{className:"v-mid mr1"}),(0,a.jsxs)("span",{children:["@",e.login]})]});case"microsoft":return(0,a.jsxs)("div",{className:"f6 fw5 flex items-center",children:[(0,a.jsx)(x.ZP,{className:"v-mid mr1"}),e.login]});case"otp":return(0,a.jsxs)("div",{className:"f6 fw5 flex items-center",children:[(0,a.jsx)(p.Z,{className:"v-mid mr1"}),e.email]});default:return null}}const Z=e=>{let{currentUser:t,dispatch:s}=e;function n(e,t){return!(!e.github_login||"github"!==t.provider||t.login!==e.github_login)||(!(!e.twitter_login||"twitter"!==t.provider||t.login!==e.twitter_login)||(!(!e.google_email||"google"!==t.provider||t.email!==e.google_email)||(!(!e.sso_id||"sso"!==(0,w.gZ)(t.provider))||(!(!e.microsoft_id||"microsoft"!==t.provider)||!(!e.otp_id||"otp"!==t.provider)))))}const r=t.identities.filter((e=>e.authenticated)).length>1;function i(e,t){return(0,a.jsxs)("div",{className:"mb3",children:[L(e),(0,a.jsxs)("div",{className:"mt1 f6 mid-gray lh-f6 flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[t&&(0,a.jsxs)(a.Fragment,{children:["This account ",e.authenticated?"is using":"can use"," ",U(e)," to log in."]}),!t&&(0,a.jsxs)(a.Fragment,{children:["This account ",e.authenticated?"is":"can be"," ",e.provider_org?"authenticated to @".concat(e.provider_org):"logged in"," ","using ",U(e),"."]})]}),(!e.authenticated||r)&&(0,a.jsx)(E,{identity:e,dispatch:s,title:"Remove this authentication method"})]})]},e.id)}const l=t.teams.filter((e=>e.org_restriction)).length+2;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:u.R,children:"Authentication"}),(0,a.jsxs)("div",{className:"pt2",children:[t.identities.filter((e=>n(t,e))).map((e=>i(e,!0))),t.identities.filter((e=>!n(t,e))).map((e=>i(e,!1))),t.identities.length<l&&(0,a.jsx)(g.aX,{className:"dib f6 fw5 nowrap dark-blue hover-lightest-blue",disabled:t.identities.length>=l,onClick:()=>s({type:"showModal",modal:"login",modalProps:{loginScreen:"linkAccount"},trigger:"click",source:"accountSettings"}),text:"Add another authentication provider"})]})]})},M=(0,T.$j)((e=>{let{currentUser:t,context:s}=e;return{currentUser:t,team:(0,S.xT)(t,s.context)}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,team:s,dispatch:n}=e;var r,i,l;const c=(0,T.v9)((e=>e.customer.customer)),o=(0,N.GS)(N.ro);var d;const p=null!==(d=null===s||void 0===s?void 0:s.tier)&&void 0!==d?d:t.tier,v=null===c||void 0===c||null===(r=c.stripe_customer)||void 0===r||null===(i=r.subscriptions)||void 0===i?void 0:i.data[0],f=(0,h.aZ)(p,null===v||void 0===v?void 0:v.trial_end,void 0!==(null===c||void 0===c||null===(l=c.stripe_customer)||void 0===l?void 0:l.billing));var x,j;return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"mt4",children:[(0,a.jsx)("div",{className:"mb4 f4 fw6 near-black",children:"Account"}),(0,a.jsxs)("div",{className:"dg",style:(0,u.X)({isMobile:o}),children:[(0,a.jsx)("label",{className:u.R,children:s?"Team username":"Username"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{"data-pw":"userLogin",className:"pv2 f6 fw5",children:s?s.login:t.login}),(0,a.jsxs)("div",{className:"f6 mid-gray lh-f6",children:["This username appears in the URLs of"," ",s?"the team\u2019s":"your"," profile and notebooks."]}),(!s||(0,S.qb)(t,s))&&(0,a.jsx)("div",{className:"dib pt2",children:(0,a.jsx)(g.aX,{text:"Change username",onClick:()=>n({type:"showModal",modal:"changeLogin"})})})]}),!s&&(0,a.jsx)(Z,{currentUser:t,dispatch:n}),(s?s.has_workspace:t.has_workspace)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:u.R,children:s?"Team tier":"Tier"}),(0,a.jsxs)("div",{className:"pt2",children:[(0,a.jsx)("div",{className:"f6 fw5 near-black flex items-center",children:(0,m._n)(p)}),f&&(0,a.jsx)(h.Db,{startDate:null!==(x=null===v||void 0===v?void 0:v.trial_start)&&void 0!==x?x:0,endDate:null!==(j=null===v||void 0===v?void 0:v.trial_end)&&void 0!==j?j:0,className:"mt2"}),(0,a.jsx)("div",{className:"mt2 f6 mid-gray lh-f6",children:m.qJ[p]}),s?(0,a.jsx)(a.Fragment,{children:(0,S.qb)(t,s)?(0,C.qb)(s)?(0,a.jsx)(y.y,{className:"mid-gray"}):(0,a.jsx)("div",{className:"dib pt2",children:(0,a.jsx)(g.aX,{text:f?m.Yo:m.c3,onClick:()=>{n({type:"showModal",modal:"changeUserTier",modalProps:{user:s}})}})}):null}):(0,a.jsx)("div",{className:"dib pt2",children:(0,a.jsx)(g.aX,{text:m.c3,onClick:()=>n({type:"showModal",modal:"changeUserTier",modalProps:{user:t}})})})]})]}),(!s||(0,_.pn)(t,s))&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("label",{className:u.R,children:s?"Team email":"Contact email"}),(0,a.jsxs)("div",{className:"pt2",children:[(0,a.jsx)("div",{className:"f6 fw5 near-black",children:s?s.email:t.email}),(0,a.jsx)("div",{className:"mt2 f6 mid-gray lh-f6",children:"This email will receive notifications and messaging about your account."}),(0,a.jsx)("div",{className:"dib pt2",children:(0,a.jsx)(g.aX,{text:"Change email",onClick:()=>n({type:"showModal",modal:"changeEmail",modalProps:{sending:!1,saved:!1}})})})]})]}),(0,_.Vu)(t,s||t)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:u.R,children:"Databases"}),(0,a.jsxs)("div",{className:"mt2",children:[(0,a.jsx)("div",{className:"f6 mid-gray lh-f6",children:"Securely access your databases."}),(0,a.jsx)("div",{className:"dib mt2",children:(0,a.jsx)(g.Ej,{href:s?"/team/@".concat(s.login,"/settings/databases"):"/settings/databases",text:"Manage databases"})})]})]}),!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:u.R,children:"Sign out everywhere"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mt2 f6 mid-gray lh-f6",children:"Sign out of Observable on all devices."}),(0,a.jsx)("div",{className:"dib pt2",children:(0,a.jsxs)("form",{id:"logout",method:"post",onSubmit:e=>{let{currentTarget:t}=e;t.token.value=(0,k.FN)()},action:(0,S.i8)(),children:[(0,a.jsx)("input",{type:"hidden",name:"token"}),(0,a.jsx)("input",{type:"hidden",name:"all",value:"true"}),(0,a.jsx)(g.aX,{text:"Sign out everywhere",type:"submit"})]})})]}),(0,a.jsx)("span",{className:u.R,children:"Delete account"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mt2 f6 mid-gray lh-f6",children:"Delete your Observable login, notebooks, and collections."}),(0,a.jsx)("div",{className:"dib pt2",children:(0,a.jsx)(g.aX,{text:"Delete account",destructive:!0,onClick:()=>n({type:"showModal",modal:"deleteUser",modalProps:void 0})})})]})]})]})]})})}));var F=s(34722),R=s(16691),D=s(75713),A=s(88601),q=s(72932),P=s(51289);const I=(0,T.$j)((e=>{let{currentUser:t}=e;return{currentUser:t}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,dispatch:s}=e;const n=(0,i.useMemo)((()=>({setting_autoclose_pairs:(0,C.CD)(t),setting_prettier:(0,C.wW)(t),setting_spellcheck:(0,C.OA)(t),setting_default_cell_mode:(0,C.Sx)(t),setting_show_guides:(0,C.FK)(t),setting_vimkeys:(0,C.S1)(t),setting_elasticsearch_sticky:(0,C.lJ)(t)})),[t]),[r,l,c]=(0,q.v)(n);return(0,a.jsxs)(D.l,{onSubmit:function(e){e.preventDefault(),s({type:"saveEditorSettings",settings:r})},className:"flex pt4 mt5 bt b--light-silver flex-column items-stretch",children:[(0,a.jsx)("div",{className:"f4 fw6 near-black",children:"Editor preferences"}),(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex pt4 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>l("setting_autoclose_pairs",e.target.checked),checked:r.setting_autoclose_pairs,name:"setting_autoclose_pairs",id:"setting_autoclose_pairs"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_autoclose_pairs",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"Enable auto-close pairs"}),(0,a.jsxs)("div",{className:"f6 mid-gray lh-f6",children:["When you type the first character of a pair like ","({['\"",", the editor will automatically insert its closing character."]})]})]}),(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex mt3 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>l("setting_prettier",e.target.checked),checked:r.setting_prettier,name:"setting_prettier",id:"setting_prettier"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_prettier",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"Auto-format code"}),(0,a.jsxs)("div",{className:"f6 mid-gray lh-f6",children:["Allow"," ",(0,a.jsx)("a",{href:"https://prettier.io",rel:"noopener noreferrer",className:"fw5 no-underline blue hover-dark-blue",target:"_blank",children:"Prettier"})," ","to format your code automatically."]})]})]}),(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex mt3 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>l("setting_spellcheck",e.target.checked),checked:r.setting_spellcheck,name:"setting_spellcheck",id:"setting_spellcheck"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_spellcheck",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"Spellcheck in Markdown cells and comments"}),(0,a.jsx)("div",{className:"f6 mid-gray lh-f6",children:"Enable spellcheck in Markdown cells and comments on browsers that support it."})]})]}),(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex mt3 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>l("setting_vimkeys",e.target.checked),checked:r.setting_vimkeys,name:"setting_vimkeys",id:"setting_vimkeys"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_vimkeys",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"Vim keys"}),(0,a.jsx)("div",{className:"f6 mid-gray lh-f6",children:"Enable vim-like keyboard shortcuts and modes for editing. (Experimental)"})]})]}),(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex mt3 mb4 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>l("setting_default_cell_mode",e.target.checked?"js":void 0),checked:"js"===r.setting_default_cell_mode,name:"setting_default_cell_mode",id:"setting_default_cell_mode"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_default_cell_mode",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"\u201cNew cell\u201d keyboard shortcut defaults to JavaScript"}),(0,a.jsxs)("div",{className:"f6 mid-gray lh-f6",children:["Use"," ",(0,a.jsx)(A.e,{shortcut:P.Mq?"Cmd-Enter":"Ctrl-Enter"})," ","to create a new JavaScript cell, and"," ",(0,a.jsx)(A.e,{shortcut:P.Mq?"Cmd-Option-Enter":"Ctrl-Alt-Enter"})," ","to open the Add Cell menu."]})]})]}),(0,a.jsx)("div",{className:"f4 fw6 near-black",children:"Misc preferences"}),(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex pt4 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>l("setting_show_guides",e.target.checked),checked:r.setting_show_guides,name:"setting_show_guides",id:"setting_show_guides"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_show_guides",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"Show quick guides on your workspace homepages"}),(0,a.jsx)("div",{className:"f6 mid-gray lh-f6",children:"Hide or show the guides on all your workspaces."})]})]}),(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex pt4 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>l("setting_elasticsearch_sticky",e.target.checked),checked:r.setting_elasticsearch_sticky,name:"setting_elasticsearch_sticky",id:"setting_elasticsearch_sticky"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_elasticsearch_sticky",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"New search backend"}),(0,a.jsx)("div",{className:"f6 mid-gray lh-f6",children:"Use our new, faster search backend. (Experimental)"})]})]}),(0,a.jsx)("div",{"data-testid":"misc-save",className:"mt3",style:{gridColumn:"1/3"},children:(0,a.jsx)(F.k,{dirty:c})})]})}));var O=s(8385),X=s(2741);const V=(0,T.$j)((e=>{let{currentUser:t,context:s}=e;return{currentUser:t,team:s.context}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,team:s,dispatch:n,onNewAvatar:r,avatarUrl:i}=e;const l=(0,N.GS)(N.ro);return(0,a.jsxs)("div",{className:"pb3 dg",style:(0,u.X)({isMobile:l}),children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:u.R,children:"Avatar"})}),(0,a.jsxs)("div",{className:"flex items-center justify-start",children:[(0,a.jsx)(O.q,{className:"br-100",user:i?{avatar_url:i}:s?(0,S.xT)(t,s):t}),(0,a.jsx)("div",{className:"ml3",children:(0,a.jsx)(g.sn,{text:"Upload new",onClick:async()=>{const e=await(0,X.Z)({multiple:!1,accept:".jpg, .jpeg, .png"});e.length&&n({type:"showModal",modal:"changeAvatarOffline",modalProps:{fileUrl:URL.createObjectURL(e[0]),onNewAvatar:r,onDismiss:()=>n({type:"dismissModal"})}})}})})]})]})})),z=["preset","preset-1","preset-2","preset-3","preset-4","preset-5","preset-6","preset-7","preset-8","preset-9","preset-10","preset-11","preset-12","preset-13","preset-14","preset-15","preset-16","preset-17","preset-18","preset-19","preset-20","preset-21","preset-22","preset-23","preset-24","preset-25"],B=(0,T.$j)((e=>{let{currentUser:t,context:s}=e;return{currentUser:t,team:s.context}}),(e=>({dispatch:e})))((e=>{let{onNewBanner:t,selectedBanner:s}=e;const n=2===window.devicePixelRatio?"@2x":"",i=(0,N.GS)(N.ro);return(0,a.jsxs)("div",{className:"pt3 pb3 dg",style:(0,u.X)({isMobile:i}),children:[(0,a.jsx)("div",{className:"flex items-start",children:(0,a.jsxs)("label",{className:u.R,children:["Banner"," ",(0,a.jsxs)("span",{className:"f7",children:["(",(0,a.jsx)("a",{href:"https://observablehq.com/collection/@observablehq/profile-banners",rel:"noopener noreferrer",className:"fw5 no-underline blue hover-lightest-blue",target:"_blank",children:"credits"}),")"]})]})}),(0,a.jsxs)("div",{className:"banner-grid items-center justify-start",children:[(0,a.jsx)("div",{style:{backgroundColor:"white"},className:r()("banner-thumbnail",null===s?"selected":"hover-light-shadow hover-b--light-gray"),onClick:()=>t(null)}),z.map(((e,i)=>(0,a.jsx)("div",{id:"banner_".concat(i),className:r()("banner-thumbnail",s===e?"selected":"hover-light-shadow hover-b--light-gray"),style:{backgroundImage:"url(https://".concat("static.observableusercontent.com","/profiles/").concat(e,"-thumbnail").concat(n,".png)")},onClick:()=>t(e)},i)))]})]})}));var W=s(11233),G=s(24576),$=s(47311);const H=e=>{let{disabled:t,visible:s,i:n,setNewEntry:i}=e;return(0,a.jsx)(g.hU,{type:"button",disabled:t,style:{height:32,visibility:s?void 0:"hidden"},id:"add_button_".concat(n),className:r()("ml1 bn bg-transparent",t?"":"pointer"),onClick:()=>i(!0),icon:$.ZP})},K=(0,T.$j)((e=>{let{currentUser:t,context:s}=e;return{currentUser:t,team:s.context}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,team:s,dispatch:n}=e;const l=s?(0,S.xT)(t,s):t,c=(0,i.useMemo)((()=>({name:l.name,bio:l.bio,profile_email:l.profile_email,links:[l.home_url,...l.links],home_url:l.home_url,pronouns:"pronouns"in l?l.pronouns:void 0})),[l]),[o,d,m]=(0,q.v)(c),[h,g,p]=(0,q.m)(l.avatar_url),[v,f,x]=(0,q.m)(l.selected_banner),j=(0,N.GS)(N.ro),b=j?"mb3":"",{0:y,1:w}=(0,i.useState)(0===o.links.length),k=y?[...o.links,""]:o.links;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V,{onNewAvatar:g,avatarUrl:h}),(0,a.jsx)(B,{onNewBanner:f,selectedBanner:v}),(0,a.jsxs)("form",{className:"pt3 dg",style:(0,u.X)({isMobile:j}),onSubmit:function(e){e.preventDefault(),n({type:"savePersonalSettings",settings:m?o:void 0,avatarUrl:p?h:void 0,selectedBanner:x?v:void 0})},children:[(0,a.jsx)("label",{className:u.R,htmlFor:"name",children:s?"Team display name":"Display name"}),(0,a.jsx)(W.Z,{id:"name",name:"name",spellCheck:!1,maxLength:255,className:b,onChange:e=>d("name",e.target.value),value:o.name}),!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("label",{className:u.R,htmlFor:"pronouns",children:"Pronouns"}),(0,a.jsx)(W.Z,{id:"pronouns",name:"pronouns",maxLength:100,className:b,onChange:e=>d("pronouns",e.target.value),value:o.pronouns})]}),(0,a.jsx)("label",{className:u.R,htmlFor:"bio",children:s?"Team bio":"Bio"}),(0,a.jsx)(G.g,{id:"bio",name:"bio",maxLength:255,onChange:e=>d("bio",e.target.value),rows:3,className:r()(b,"lh-f7"),value:o.bio}),(0,a.jsx)("label",{className:u.R,children:s?"Team websites":"Websites"}),(0,a.jsx)("div",{children:k.map(((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",style:{marginTop:t>0?10:0},children:[(0,a.jsx)(W.Z,{className:"w-100 db",id:"link_".concat(t),name:"link_".concat(t),type:"url",value:e,onChange:e=>{w(!1);const s=[...o.links];s[t]=e.target.value,d("links",s)}},t),(0,a.jsx)(H,{visible:t===k.length-1,disabled:""===e||10===k.length,i:t,setNewEntry:w})]},t)))}),(0,a.jsx)("label",{className:u.R,htmlFor:"email",children:s?"Team email":"Email"}),(0,a.jsx)(W.Z,{id:"profile_email",name:"profile_email",type:"email",maxLength:255,className:b,onChange:e=>d("profile_email",e.target.value),value:o.profile_email}),(0,a.jsx)("div",{className:"mt3",style:j?{}:{gridColumn:"1/3"},children:(0,a.jsx)(F.k,{dirty:m||p||x})})]})]})})),Y=(0,T.$j)((e=>{let{currentUser:t,context:s}=e;return{currentUser:t,team:s.context}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,team:s,dispatch:n}=e;const r=(0,i.useMemo)((()=>({setting_prettier:"true"===(0,S.xT)(t,s).settings.prettier,setting_default_private:"true"===(0,S.xT)(t,s).settings.default_private})),[t,s]),[l,c,o]=(0,q.v)(r);return(0,a.jsxs)(D.l,{onSubmit:function(e){e.preventDefault(),n({type:"saveTeamEditorSettings",settings:l})},className:"flex pt4 mt5 bt b--light-silver flex-column items-stretch",children:[(0,a.jsx)("div",{className:"f4 fw6 near-black",children:"Team preferences"}),(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex pt4 mb4 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>c("setting_prettier",e.target.checked),className:"",checked:l.setting_prettier,name:"setting_prettier",id:"setting_prettier"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_prettier",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"Auto-format code"}),(0,a.jsxs)("div",{className:"f6 mid-gray lh-f6",children:["Allow"," ",(0,a.jsx)("a",{href:"https://prettier.io",rel:"noopener noreferrer",className:"fw5 no-underline blue hover-dark-blue",target:"_blank",children:"Prettier"})," ","to format code in all team notebooks."]})]})]}),"public"!==s.tier&&(0,a.jsxs)("div",{style:{maxWidth:"34rem"},className:"flex mt3 items-start",children:[(0,a.jsx)(R.X,{onChange:e=>c("setting_default_private",e.target.checked),className:"",checked:l.setting_default_private,name:"setting_default_private",id:"setting_default_private"}),(0,a.jsxs)("label",{className:"ml3",htmlFor:"setting_default_private",children:[(0,a.jsx)("div",{className:"pt2 mb2 f6 fw5 dark-gray lh-solid",children:"Notebooks default to private"}),(0,a.jsx)("div",{className:"f6 mid-gray lh-f6",children:"When selected, new team notebooks will default to being private (not shared with the team)."})]})]}),(0,a.jsx)("div",{className:"mt3",style:{gridColumn:"1/3"},children:(0,a.jsx)(F.k,{dirty:o})})]})}));var Q=s(71043),J=s(36307),ee=s(84193);const te=(0,T.$j)((e=>{let{context:t,currentUser:s}=e;return{team:t.context,currentUser:s}}),null)((e=>{let{team:t,currentUser:s}=e;const n=P.Qg?window.location.hash:"";return(0,i.useEffect)((()=>{const e=document.getElementById("profile");"#profile"===n&&e&&e.scrollIntoView()}),[n]),(0,a.jsxs)("div",{className:"pt4 pr4-m pr5-l pr0 mr3-l mr0 flex-auto order-2-ns",children:[(0,a.jsx)("div",{className:"flex pb3 justify-between items-end",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb2 f7 fw6 ttu gray",children:"Settings"}),(0,a.jsx)("h1",{className:"ma0 f2 near-black",children:"General"})]})}),(0,a.jsx)("div",{className:"w-100 mt3 f6 mid-gray lh-f7",children:t?"Team profile and other general settings.":(0,a.jsxs)("p",{children:["Settings shared across your personal and team accounts.",(0,a.jsx)(ee.Z,{href:"/@observablehq/getting-started-with-teams",children:(0,a.jsxs)("a",{className:"flex db mt3 f6 fw5 blue hover-lightest-blue items-center lh-solid link",children:[(0,a.jsx)(Q.Z,{className:"mr2",width:16,height:16}),"Learn more about Teams",(0,a.jsx)(J.Z,{})]})})]})}),(0,a.jsx)(M,{}),(!t||(0,_.qP)(s,t))&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsxs)("div",{id:"profile",className:"pt4 mt5 bt b--light-silver",children:[(0,a.jsx)("div",{className:"ma0 f4 fw6 near-black",children:t?"Team profile":"Personal profile"}),(0,a.jsxs)("div",{className:" mid-gray",style:{marginTop:16,marginBottom:35,fontSize:14,lineHeight:"16px"},children:["Information you enter here will be visible to everyone on ".concat(t?"your team\u2019s ":"your "),(0,a.jsx)(ee.Z,{href:"".concat((0,S.GN)(t||s),"?tab=profile"),children:(0,a.jsx)("a",{className:"fw5 no-underline blue hover-lightest-blue",target:"_blank",children:"public profile"})}),"."]}),(0,a.jsx)(K,{})]})]}),t?(0,S.qb)(s,t)?(0,a.jsx)(Y,{}):null:(0,a.jsx)(I,{})]})}));var se=s(50309),ae=s(34049),ne=s(60443),re=s(83745),ie=s(75288),le=s(56424),ce=s(93452);const oe=(0,T.$j)(null,(e=>({dispatch:e})))((e=>{let{sending:t,saved:s,onDismiss:n,dispatch:r}=e;const{0:l,1:c}=(0,i.useState)("");return(0,a.jsx)(le.Vq,{onDismiss:n,"aria-labelledby":"modal-title",children:(0,a.jsxs)(D.l,{onSubmit:function(e){e.preventDefault(),document.activeElement&&document.activeElement.blur(),r({type:"changeEmail",email:l})},children:[(0,a.jsx)(ce.xB,{title:s?"Please check your email":"Change email address",onDismiss:n}),(0,a.jsx)(ce.fe,{children:s?(0,a.jsx)("div",{children:"You should receive an email momentarily confirming this email address change. If you do not receive it, please check your Spam folder, wait a few minutes, or contact Observable support."}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb2",children:"You will need to verify the new email in order for the change to take effect."}),(0,a.jsx)(W.Z,{id:"email",name:"email",type:"email",placeholder:"name@example.com",required:!0,maxLength:255,className:"w-100",onChange:e=>c(e.target.value),value:l})]})}),(0,a.jsx)(ce.mz,{children:(0,a.jsxs)(g.CQ,{children:[(0,a.jsx)(g.kq,{text:s?"Close":"Cancel",onClick:n}),!s&&(0,a.jsx)(g.KM,{text:"Verify email",loading:t,disabled:!l,type:"submit"})]})})]})})}));var de=s(44754);const me=/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/,ue=e=>{let{title:t,name:s,placeholder:n,initialLogin:l,serverError:c,autoFocus:o,onLoginChange:d,onLoginValid:m}=e;const u=(0,i.useRef)(),[h,g,p]=(0,de.G)(l||"",200),{0:v,1:f}=(0,i.useState)("empty"),{data:x}=(0,k.h_)(p?"/users-exist?login=".concat(p.toLocaleLowerCase()):null);return(0,i.useEffect)((()=>{const e=p.toLowerCase();if(e)if(me.exec(e)){if(x){const[[,e]]=x;f(!0===e||"unavailable"===e?"conflict":"valid")}}else f("invalid");else f("empty")}),[p,f,x]),(0,i.useEffect)((()=>{const e=p.toLowerCase();e&&e===u.current&&m("valid"===v)}),[v,p,m]),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex mt4 flex-column items-stretch",children:[(0,a.jsx)("label",{className:"pb2 f5 fw5 dark-gray",htmlFor:"login",children:t}),(0,a.jsxs)("div",{className:r()("flex items-stretch br2 ba",c||"invalid"===v||"conflict"===v?"b--dark-pink":"b--black-10"),children:[(0,a.jsx)("div",{className:"pa2 pr0 pr1 dark-gray bg-near-white br b--black-10 br2 br--left",onClick:()=>{document.querySelector("#login").focus()},children:"observablehq.com/@"}),(0,a.jsx)(W.Z,{id:"login",name:"login",autoComplete:"off",maxLength:255,autoFocus:o,className:"pa2 black flex-auto bn",style:{boxShadow:"none"},onChange:e=>{const{target:{value:t}}=e,s=t.toLowerCase();u.current=s,d(s),g(t)},value:h,placeholder:n})]}),(0,a.jsx)("div",{className:"h2",children:"LOGIN_CONFLICT"===c||"conflict"===v?(0,a.jsx)("div",{className:"mt1 f7 fw5 dark-pink",children:h===l?"This is your current ".concat(s,"."):"That ".concat(s," is already taken.")}):"LOGIN_INVALID"===c||"invalid"===v?(0,a.jsxs)("div",{className:"mt1 f7 fw5 dark-pink",children:["A ",s," can only include alphanumeric characters or single hyphens, can\u2019t start or end with a hyphen, and should be less than 40 characters long."]}):null})]})})},he=(0,T.$j)((e=>{let{context:t,currentUser:s}=e;return{team:t.context,initialLogin:t.context?t.context.login:s.login}}),(e=>({dispatch:e})))((e=>{let{team:t,initialLogin:s,onDismiss:n,dispatch:r}=e;const{0:l,1:c}=(0,i.useState)(s),{0:o,1:d}=(0,i.useState)(!1);function m(e){e.preventDefault(),o&&r({type:"changeLogin",login:l})}return(0,a.jsx)(le.Vq,{onDismiss:n,"aria-labelledby":"modal-title",children:(0,a.jsxs)(D.l,{onSubmit:m,children:[(0,a.jsx)(ce.xB,{title:"Choose a ".concat(t?"team":"personal"," username"),onDismiss:n}),(0,a.jsxs)(ce.fe,{children:[(0,a.jsxs)("div",{className:"mid-gray lh-copy",children:["Please choose how to identify ",t?"this team":"yourself"," on Observable. Take care: you can only change this once!"]}),(0,a.jsx)(ue,{title:"Your".concat(t?" team\u2019s":""," Observable URL"),name:"".concat(t?"team ":"","username"),placeholder:"login",autoFocus:!0,initialLogin:s,onLoginValid:d,onLoginChange:c})]}),(0,a.jsx)(ce.mz,{children:(0,a.jsxs)(g.CQ,{children:[(0,a.jsx)(g.kq,{text:"Cancel",onClick:n}),(0,a.jsx)(g.KM,{text:"Set username",onClick:e=>{m(e),n()},disabled:!o,type:"submit"})]})})]})})}));var ge=s(19671),pe=s(27193);const ve=(0,T.$j)((e=>{let{currentUser:t}=e;return{currentUser:t}}),(e=>({dispatch:e})))((e=>{let{onDismiss:t,currentUser:s}=e;var n,r;const l=(0,i.useRef)(null),{0:c,1:o}=(0,i.useState)(!1),{0:d,1:m}=(0,i.useState)(""),{0:u,1:h}=(0,i.useState)("");const{0:p,1:v}=(0,i.useState)();(0,i.useEffect)((()=>{Promise.all(s.teams.filter((e=>"owner"===e.role)).map((e=>(0,k.a8)("/team/".concat(e.id,"/members")).then((t=>({team:e,results:t})))))).then((e=>v(e.filter((e=>e.results.length>1)).map((e=>e.team.login)))))}),[s]);const f=void 0!==p,x=p&&p.length>0,j=f&&!x&&null!==l.current&&((null===(n=l.current.loginOrEmail)||void 0===n?void 0:n.value)===s.login||(null===(r=l.current.loginOrEmail)||void 0===r?void 0:r.value.trim().toLowerCase())===s.email)&&"delete my account"===l.current.ack.value;return(0,a.jsx)(le.Vq,{onDismiss:t,"aria-labelledby":"modal-title",children:(0,a.jsxs)(D.l,{ref:l,method:"POST",onSubmit:function(e){o(!0),e.target.token.value=(0,k.FN)(),(0,ge.MR)((0,ge.a$)({type:"user:manage:delete",data:{},currentUser:s,eventVersion:1}))},action:"".concat("https://api.observablehq.com","/user/delete"),children:[(0,a.jsx)("input",{type:"hidden",name:"token"}),(0,a.jsx)(ce.xB,{title:x?"Action required":"Delete your account",onDismiss:t}),(0,a.jsxs)(ce.fe,{children:[x?(0,a.jsxs)("div",{className:"mt2 fw7",children:["You\u2019re currently an owner on the ",(0,pe.If)(p)," ","workspace",p.length>1&&"s",". You must remove yourself from"," ",p.length>1?"these workspaces":"this workspace"," ","before deleting your account."]}):null,f?!x&&(0,a.jsxs)("div",{className:"flex flex-column w-80",children:[(0,a.jsx)("div",{children:"Deleting your account will permanently remove your Observable login, notebooks, collections, and comments. This cannot be undone."}),(0,a.jsx)("label",{className:"mt3 mb2",htmlFor:"email",children:"Enter your username or email:"}),(0,a.jsx)(W.Z,{className:"",spellCheck:!1,name:"loginOrEmail",placeholder:"Username or email",value:d,onChange:e=>m(e.target.value)}),(0,a.jsxs)("label",{className:"mt3 mb2",htmlFor:"ack",children:["Please acknowledge by typing"," ",(0,a.jsx)("span",{className:"i",children:"delete my account"}),":"]}),(0,a.jsx)(W.Z,{className:"",name:"ack",placeholder:"Acknowledgement",value:u,onChange:e=>h(e.target.value)})]}):(0,a.jsx)("div",{className:"mt2 fw7",children:"Checking workspaces\u2026"})]}),(0,a.jsx)(ce.mz,{children:(0,a.jsx)(g.CQ,{children:x?(0,a.jsx)(g.KM,{text:"Close",onClick:t}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.kq,{text:"Cancel",onClick:t}),(0,a.jsx)(g.KM,{text:"Delete account",loading:c,destructive:!0,disabled:!j,type:"submit"})]})})})]})})}));var fe=s(10623),xe=s(39612);const je=(0,ce.zm)((0,o.Z)((0,c.Z)({},xe.V),{changeLogin:he,changeEmail:oe,changeAvatarOffline:fe.E,deleteUser:ve}));var be=s(39736);const ye=()=>{const e=(0,N.GS)(N.ro);return(0,a.jsxs)("div",{children:[(0,a.jsx)(ae.Z,{content:"Settings"}),(0,a.jsx)(ie.Z,{}),(0,a.jsx)(je,{}),(0,a.jsx)(be.F1,{}),(0,a.jsx)("div",{className:"mw-page w-100 center ph4-l ph3 body",children:(0,a.jsx)("div",{className:r()(e?"":"flex","flex-auto justify-between"),style:{minHeight:"calc(100vh - 21rem)"},children:(0,a.jsxs)(re.w,{children:[(0,a.jsx)(se.X,{tab:"settings"}),(0,a.jsx)(l.kT,{}),(0,a.jsx)(te,{})]})})}),(0,a.jsx)(ne.Z,{})]})}},34722:function(e,t,s){s.d(t,{k:function(){return r}});var a=s(85893),n=(s(67294),s(37497));const r=e=>{let{dirty:t}=e;return(0,a.jsx)("div",{className:"flex mt1-ns mt3 mb3 justify-start items-center",children:(0,a.jsx)(n.KM,{text:"Save changes",className:"ph3",disabled:!t,type:"submit"})})}},23080:function(e,t,s){function a(){let{isMobile:e=!1,gap:t=24,rightSize:s="24rem",leftSize:a="160px"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?{gridTemplateColumns:"auto auto",gridGap:"".concat(t,"px 5px")}:{gridTemplateColumns:"".concat(a," minmax(auto, ").concat(s,")"),placeItems:"top stretch",gridGap:"".concat(t,"px 0")}}s.d(t,{R:function(){return n},X:function(){return a}});const n="pv2 f6 gray fw5"},72932:function(e,t,s){s.d(t,{m:function(){return m},v:function(){return d}});var a=s(41799),n=s(69396),r=s(67294),i=s(14416),l=s(11163),c=s.n(l);function o(e,t){(0,r.useEffect)((()=>{function s(e){return(e||window.event).returnValue=t,t}function a(e){if(c().pathname!==e&&!confirm(t))throw c().events.emit("routeChangeError"),'Route change to "'.concat(e,'" was aborted (this error can be safely ignored). See https://github.com/zeit/next.js/issues/2476.')}return e?(window.addEventListener("beforeunload",s),c().events.on("routeChangeStart",a),()=>{window.removeEventListener("beforeunload",s),c().events.off("routeChangeStart",a)}):()=>{}}),[e,t])}function d(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{0:s,1:l}=(0,r.useState)(e);(0,r.useEffect)((()=>l(e)),[e]);const c=(e,t)=>{l((0,n.Z)((0,a.Z)({},s),{[e]:t}))},d=!(0,i.wU)(s,e);return o(t&&d,"Are you sure you want to leave before saving changes?"),[s,c,d]}function m(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{0:s,1:a}=(0,r.useState)(e);(0,r.useEffect)((()=>a(e)),[e]);const n=s!==e;return o(t&&n,"Are you sure you want to leave before saving changes?"),[s,a,n]}},64451:function(e,t,s){s.d(t,{o:function(){return i},q:function(){return r}});var a=s(10198),n=s(72760);function r(e){const t=" | Observable";return e.endsWith(t)?e:"".concat(e.trim()).concat(t)}function i(e){const t=new Set(["Paragraph","ATXHeading2","ATXHeading3","ATXHeading4","ATXHeading5"]),s=new Set(["EmphasisMark","LinkMark","LinkLabel","URL","HeaderMark"]);function r(e){const t=a.E2.startParse(e);let s;for(;!(s=t.advance()););return s}function*i(e){if(!e)return;const s=r(e).cursor();for(;s.next();)t.has(s.name)&&(yield e.slice(s.from,s.to))}function l(e){let t=e;const a=r(e).cursor();for(a.lastChild();a.prev();)s.has(a.name)&&(t=t.slice(0,a.from)+t.slice(a.to));return t.trim()}let c="";for(const a of e){const{body:e,tag:t}=(0,n.Qc)(a);if(e){var o,d;const s="TemplateLiteral"===e.type&&"md"===(null===t||void 0===t?void 0:t.input)?e.quasis:"TaggedTemplateExpression"===e.type&&"md"===(null===(o=e.tag)||void 0===o?void 0:o.name)?null===(d=e.quasi)||void 0===d?void 0:d.quasis:null,a=null===s||void 0===s?void 0:s.map((e=>e.value.raw)).join(" ");for(const e of i(a))if(c+="".concat(l(e)," "),c.length>512)return c.slice(0,512).trim()}}return c.trim()||null}},17053:function(e,t,s){function a(e){return{customer:e.initialCustomer,teamMembers:e.initialTeamMembers}}s.d(t,{X:function(){return n},z:function(){return a}});const n={customerUpdated:s(2545).xl}},40752:function(e,t,s){s.d(t,{b:function(){return r}});var a=s(41799),n=s(69396);function r(e,t,s){return s?(0,n.Z)((0,a.Z)({},t),{teams:t.teams.map((t=>t.id===s.id?(0,a.Z)({},t,e):t))}):(0,a.Z)({},t,e)}},51959:function(e,t,s){s.d(t,{$j:function(){return r},v9:function(){return i},zt:function(){return a.zt}});var a=s(14416),n=s(54924);const r=(0,n.S3)();const i=(0,n.gR)()},41961:function(e,t,s){s.d(t,{f:function(){return p}});var a=s(17053),n=s(2545),r=s(602),i=s(19671),l=s(3142),c=s(40752);var o=s(41799),d=s(69396),m=s(11163),u=s.n(m),h=s(36448);const g={changeLogin:async(e,t,s)=>{let{context:{context:a},currentUser:n}=e,{login:l}=t;s({type:"showProcessingToast",key:"changeLogin",message:'Changing login to "'.concat(l,'"\u2026')});try{await(0,r.Fv)(a?"/team/".concat(a.id,"/login"):"/user/login",{login:l}),s({type:"showSuccessToast",key:"changeLogin",message:"Login changed."}),(0,i.MR)((0,i.a$)({type:"user:manage:setLogin",data:{},currentUser:n,eventVersion:1})),u().replace((0,h.rF)((0,d.Z)((0,o.Z)({},a||n),{login:l})))}catch(m){var c;const e=null===(c=m.errors)||void 0===c?void 0:c[0].code;let t="Oops, changing login failed. Try again?";if("LOGIN_CONFLICT"===e){const e="".concat(a?"team ":"","username");t=l===(a?a.login:n.login)?"This is your current ".concat(e,"."):"That ".concat(e," is already taken.")}else"LOGIN_INVALID"===e?t="Invalid login name.":"TOO_MANY_ALIASES"===e&&(t="You have exceeded the number of times you may change your login.");s({type:"showErrorToast",key:"changeLogin",message:t})}},changeEmail:async(e,t,s)=>{let{context:a,currentUser:n}=e,{email:l}=t;const c=a.context||void 0;s({type:"showModal",modal:"changeEmail",modalProps:{sending:!0,saved:!1}});try{await(0,r.Fv)(c?"/team/".concat(c.id,"/email"):"/user/email",{email:l}),s({type:"showModal",modal:"changeEmail",modalProps:{sending:!1,saved:!0}}),(0,i.MR)((0,i.MI)({userType:"user:manage:requestEmailChange",teamType:"team:manage:requestEmailChange",data:{},eventVersion:1,team:c,currentUser:n}))}catch(o){s({type:"dismissModal"}),s({type:"showErrorToast",key:"changeEmail",message:"Oops, changing email failed. Try again?"})}},deleteIdentity:async(e,t,s)=>{let{id:a}=t;try{s({type:"currentUserUpdated",updatedCurrentUser:await(0,r.Fv)("/user/identity/delete",{id:a})})}catch(n){s({type:"showErrorToast",key:"changeLogin",message:"Unable to delete that identity"})}},savePersonalSettings:async(e,t,s)=>{let{context:a,currentUser:n}=e,{settings:l,avatarUrl:m,selectedBanner:u}=t;const h=a.context||void 0;s({type:"showProcessingToast",key:"saveSettings",message:"Saving settings\u2026"});try{void 0!==m&&(await(0,r.Fv)(h?"/team/".concat(h.id,"/avatar"):"/user/avatar",{avatar:m}),(0,i.MR)((0,i.MI)({teamType:"team:manage:updateAvatar",userType:"user:manage:updateAvatar",data:{},eventVersion:1,team:h,currentUser:n}))),void 0!==u&&((0,r.Fv)(h?"/team/".concat(h.id,"/profile-banner"):"/user/profile-banner",{banner:u,action:"select"}),(0,i.MR)((0,i.MI)({userType:"user:manage:updateBanner",teamType:"team:manage:updateBanner",data:{},eventVersion:1,team:h,currentUser:n})));let e={};if(void 0!==l){const{links:t}=l,s=function(e){return[...new Set(e)].filter((e=>e))}(t),[a="",...c]=s;e=(0,d.Z)((0,o.Z)({},l),{home_url:a,links:c}),await(0,r.Fv)(h?"/team/".concat(h.id,"/edit"):"/user",e),(0,i.MR)((0,i.MI)({userType:"user:manage:updatePersonalSettings",teamType:"team:manage:updatePersonalSettings",data:{},eventVersion:1,team:h,currentUser:n}))}s({type:"currentUserUpdated",updatedCurrentUser:(0,c.b)((0,o.Z)({},e,void 0!==m?{avatar_url:m}:void 0,void 0!==u?{selected_banner:u}:void 0),n,h)}),s({type:"showSuccessToast",key:"saveSettings",message:"Settings saved."})}catch(g){s({type:"showErrorToast",key:"saveSettings",message:"Oops, saving settings failed. Try again?"})}},saveTeamEditorSettings:async(e,t,s)=>{let{context:a,currentUser:n}=e,{settings:o}=t;const d=(0,h.xT)(n,a.context),{setting_prettier:m,setting_default_private:u}=o;s({type:"showProcessingToast",key:"saveTeamEditorSettings",message:"Saving preferences\u2026"});try{await(0,r.Fv)("/team/".concat(d.id,"/setting"),{key:"prettier",value:m?"true":"false"}),await(0,r.Fv)("/team/".concat(d.id,"/setting"),{key:"default_private",value:u?"true":"false"}),s({type:"showSuccessToast",key:"saveTeamEditorSettings",message:"Preferences saved."}),(0,l.wW)(n,d)!==o.setting_prettier&&(ga("send",{hitType:"event",eventCategory:"Settings",eventAction:o.setting_prettier?"Enable prettier":"Disable prettier"}),gtag("event",o.setting_prettier?"Enable prettier":"Disable prettier",{event_category:"Settings"}),(0,i.MR)((0,i.gv)({type:"team:manage:updateEditorSettings",data:{settings:o},eventVersion:1,team:d,currentUser:n}))),s({type:"currentUserUpdated",updatedCurrentUser:(0,c.b)({settings:{prettier:m?"true":"false",default_private:u?"true":"false"}},n,d)})}catch(g){s({type:"showErrorToast",key:"saveTeamEditorSettings",message:"Oops, saving preferences failed. Try again?"})}},saveEditorSettings:async(e,t,s)=>{let{currentUser:a}=e,{settings:n}=t;s({type:"showProcessingToast",key:"saveEditorSettings",message:"Saving preferences\u2026"});try{const{setting_spellcheck:e,setting_default_cell_mode:t,setting_autoclose_pairs:o,setting_prettier:d,setting_show_guides:m,setting_vimkeys:u,setting_elasticsearch_sticky:h}=n;await(0,r.Fv)("/user/setting",{key:"autoclose_pairs",value:o?"true":"false"}),await(0,r.Fv)("/user/setting",{key:"prettier",value:d?"true":"false"}),await(0,r.Fv)("/user/setting",{key:"spellcheck",value:e?"true":"false"}),await(0,r.Fv)("/user/setting",{key:"default_cell_mode",value:t||""}),await(0,r.Fv)("/user/setting",{key:"guides",value:m?"show":"hide"}),await(0,r.Fv)("/user/setting",{key:"vimKeys",value:u?"true":null}),await(0,r.Fv)("/user/setting",{key:"elasticsearchSticky",value:h?"true":null}),s({type:"showSuccessToast",key:"saveEditorSettings",message:"Preferences saved."}),(0,i.MR)((0,i.a$)({type:"user:manage:updateEditorSettings",data:{settings:n},eventVersion:1,currentUser:a})),(0,l.wW)(a)!==n.setting_prettier&&(ga("send",{hitType:"event",eventCategory:"Settings",eventAction:n.setting_prettier?"Enable prettier":"Disable prettier"}),gtag("event",n.setting_prettier?"Enable prettier":"Disable prettier",{event_category:"Settings"})),s({type:"currentUserUpdated",updatedCurrentUser:(0,c.b)({settings:{spellcheck:e?"true":"false",autoclose_pairs:o?"true":"false",prettier:d?"true":"false",default_cell_mode:t,guides:m?"show":"hide",vimKeys:u?"true":"false",elasticsearchSticky:h?"true":"false"}},a)})}catch(o){s({type:"showErrorToast",key:"saveEditorSettings",message:"Oops, saving settings failed. Try again?"})}},updateCustomer:n.gj},p=e=>({type:"profileSettings",slices:{customer:{initialState:(0,a.z)(e),reducers:a.X}},listeners:g})}}]);