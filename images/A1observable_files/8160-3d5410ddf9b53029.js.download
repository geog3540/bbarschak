"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8160],{22007:function(e,n){var t={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},s=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],r=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],l=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],i="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},a="fullscreenEnabled"in i&&Object.keys(t)||s[0]in i&&s||r[0]in i&&r||l[0]in i&&l||[],o={requestFullscreen:function(e){return e[a[t.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[a[t.requestFullscreen]]},get exitFullscreen(){return i[a[t.exitFullscreen]].bind(i)},get fullscreenPseudoClass(){return":"+a[t.fullscreen]},addEventListener:function(e,n,s){return i.addEventListener(a[t[e]],n,s)},removeEventListener:function(e,n,s){return i.removeEventListener(a[t[e]],n,s)},get fullscreenEnabled(){return Boolean(i[a[t.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return i[a[t.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return i[("on"+a[t.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return i[("on"+a[t.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return i[("on"+a[t.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return i[("on"+a[t.fullscreenerror]).toLowerCase()]=e}};n.Z=o},94717:function(e,n,t){t.d(n,{i:function(){return h}});var s=t(41799),r=t(69396),l=t(99534),i=t(85893),a=t(60357),o=t.n(a),c=t(80026),d=t(22007),u=t(67294);const h=e=>{var{isFullscreen:n,children:t,dispatch:a}=e,h=(0,l.Z)(e,["isFullscreen","children","dispatch"]);const m=(0,u.useRef)(null);return(0,u.useEffect)((()=>{function e(){m.current&&(d.Z.fullscreenElement?(m.current.focus(),m.current.classList.add("fullscreen-stretch")):(a({type:"exitFullscreen"}),m.current.classList.remove("fullscreen-stretch")))}function n(){(0,c.uT)("Fullscreen error")}return d.Z.addEventListener("fullscreenchange",e),d.Z.addEventListener("fullscreenerror",n),()=>{d.Z.removeEventListener("fullscreenchange",e),d.Z.removeEventListener("fullscreenerror",n)}}),[a]),(0,u.useEffect)((()=>{n&&!d.Z.fullscreenElement&&m.current&&d.Z.requestFullscreen(m.current)}),[n]),(0,i.jsxs)("div",(0,r.Z)((0,s.Z)({},h),{ref:m,className:"jsx-60a718ae68b8f767 "+(h&&null!=h.className&&h.className||""),children:[t,(0,i.jsx)(o(),{id:"60a718ae68b8f767",children:".fullscreen-stretch.jsx-60a718ae68b8f767{padding:1em 4em;background-color:var(--white);width:100%;height:100%;overflow-y:scroll}"})]}))}},9532:function(e,n,t){var s=t(41799),r=t(69396),l=t(85893);t(67294);n.Z=e=>(0,l.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},e),{children:[(0,l.jsx)("path",{d:"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,l.jsx)("path",{d:"M7 3H9V7.58579L11.2071 9.79289L9.79289 11.2071L7 8.41421V3Z"})]}))},82162:function(e,n,t){var s=t(41799),r=t(69396),l=t(85893);t(67294);n.Z=e=>(0,l.jsx)("svg",(0,r.Z)((0,s.Z)({viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",width:"16",height:"16"},e),{children:(0,l.jsx)("path",{d:"M13.075 3.925A3.157 3.157 0 0 0 10.842 3c-.838 0-1.641.478-2.233 1.07L8 4.68l-.609-.61c-1.233-1.233-3.233-1.378-4.466-.145a3.158 3.158 0 0 0 0 4.467L3.534 9 8 13.788 12.466 9l.609-.608a3.157 3.157 0 0 0 0-4.467z"})}))},31127:function(e,n,t){var s=t(41799),r=t(69396),l=t(85893);t(67294);n.Z=e=>(0,l.jsx)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6C5 4.34315 6.34315 3 8 3C9.65685 3 11 4.34315 11 6V9H5V6ZM3 9V6C3 3.23858 5.23858 1 8 1C10.7614 1 13 3.23858 13 6V9H14V11H2V9H3ZM5 12C5 13.6569 6.34315 15 8 15C9.65685 15 11 13.6569 11 12H9C9 12.5523 8.55228 13 8 13C7.44772 13 7 12.5523 7 12H5Z",fill:"currentColor"})}))},54713:function(e,n,t){t.d(n,{K:function(){return a},y:function(){return i}});var s=t(41799),r=t(69396),l=t(85893);t(67294);const i=e=>(0,l.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},e),{children:[(0,l.jsx)("path",{d:"M10.3438 0.5C10.3438 4.4585 12.483 8 15.5 8C12.483 8 10.3438 11.5417 10.3438 15.5C10.3438 11.5417 8.2045 8 5.1875 8C8.2045 8 10.3438 4.4585 10.3438 0.5Z"}),(0,l.jsx)("path",{d:"M4.25 8C4.25 9.9795 5.31925 11.75 6.82825 11.75C5.31925 11.75 4.25 13.521 4.25 15.5C4.25 13.521 3.18075 11.75 1.67175 11.75C3.18075 11.75 4.25 9.9795 4.25 8Z"}),(0,l.jsx)("path",{d:"M3.078 0.5C3.078 2.47925 4.14725 4.25 5.65625 4.25C4.1475 4.25 3.078 6.021 3.078 8C3.078 6.021 2.00875 4.25 0.49975 4.25C2.00875 4.25 3.078 2.47925 3.078 0.5Z"})]})),a=e=>(0,l.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"90",height:"88",viewBox:"0 0 90 88",fill:"currentColor"},e),{children:[(0,l.jsx)("path",{d:"M38.4229 37.4613C27.2517 37.4613 19.2115 45.538 19.2115 56.7596C19.2115 45.538 11.1712 37.4613 0 37.4613C11.1712 37.4613 19.2115 29.3847 19.2115 18.1631C19.2115 29.3847 27.2517 37.4613 38.4229 37.4613Z"}),(0,l.jsx)("path",{d:"M54.7641 63.8318C48.0401 63.8318 43.2034 68.6904 43.2034 75.4448C43.2034 68.6904 38.3666 63.8318 31.6426 63.8318C38.3666 63.8318 43.2034 58.9731 43.2034 52.2188C43.2034 58.9731 48.0401 63.8318 54.7641 63.8318Z"})]}))},96675:function(e,n,t){t.d(n,{$:function(){return o}});var s=t(85893),r=t(22007),l=(t(67294),t(41799)),i=t(69396);var a=e=>(0,s.jsx)("svg",(0,i.Z)((0,l.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00001 2L3 2H2L2 3L2.00001 8L4.00001 8L4.00001 5.47903L6.93541 8.41443L8.34963 7.00022L5.34941 4L8.00001 4L8.00001 2ZM8.00001 14H13H14V13V8H12V10.6122L9.50723 8.15797L8.10409 9.58317L10.5589 12H8.00001V14Z",fill:"currentColor"})}));const o=e=>{let{dispatch:n}=e;return{onSelect:()=>{n({type:"enterFullscreen"})},disabled:!r.Z.fullscreenEnabled,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a,{className:"mr2 h1 w1"}),"View in fullscreen"]})}}},54098:function(e,n,t){t.d(n,{A:function(){return d}});var s=t(85893),r=(t(67294),t(31127)),l=t(41799),i=t(69396);var a=e=>(0,s.jsx)("svg",(0,i.Z)((0,l.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.03048 5.44473L5 7.41424V9H6.58576L8.58576 11H2V9H3V6C3 5.81231 3.01034 5.62704 3.03048 5.44473ZM11 8.58582L6.09584 3.68166C6.61382 3.25573 7.27705 3 8 3C9.65685 3 11 4.34315 11 6V8.58582ZM13 10.5858V9V6C13 3.23858 10.7614 1 8 1C6.72467 1 5.56087 1.47747 4.67759 2.26341L3.51959 1.10541L2.10538 2.51962L13.5741 13.9884L14.9883 12.5742L13 10.5858ZM10.761 13.1753L9.58576 12H9C9 12.5523 8.55228 13 8 13C7.44772 13 7 12.5523 7 12H5C5 13.6569 6.34315 15 8 15C9.23974 15 10.3038 14.248 10.761 13.1753Z",fill:"currentColor"})})),o=t(3142),c=t(36448);const d=e=>{let{notebook:n,dispatch:t}=e;const{subscriptionState:l}=n;if(!(0,c.jF)(n)||(0,o.ws)(n)&&(0,o.hv)(n))return null;const i="comments"===l;return{onSelect:()=>{t({type:"updateSubscription",status:i?"none":"comments",trigger:"click",source:"notebookHeaderActionsMenu"})},children:(0,s.jsx)(s.Fragment,{children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a,{className:"mr2 h1 w1"})," Disable notifications"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{className:"mr2 h1 w1"})," Enable notifications"]})})}}},43360:function(e,n,t){t.d(n,{A:function(){return l}});var s=t(85893),r=t(25091);const l=e=>{let{notebook:{safe:n},dispatch:t}=e;return{onSelect:()=>t({type:n?"exitSafe":"enterSafe"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{className:"mr2 h1 w1"}),n?"Disable":"Enable"," safe mode"]})}}},5581:function(e,n,t){t.d(n,{e:function(){return l}});var s=t(85893),r=(t(67294),t(3764));const l=e=>{let{dispatch:n,page:t}=e;return{onSelect:()=>n({type:"togglePane",pane:"databases"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{className:"mr2 h1 w1"}),"databases"===(null===t||void 0===t?void 0:t.pane)?"Hide databases":"Show databases"]})}}},30410:function(e,n,t){t.d(n,{m:function(){return l}});var s=t(85893),r=(t(67294),t(28041));const l=e=>{let{dispatch:n,page:t}=e;return{onSelect:()=>n({type:"togglePane",pane:"files"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{className:"mr2 h1 w1"}),"files"===(null===t||void 0===t?void 0:t.pane)?"Hide files":"Show files"]})}}},18530:function(e,n,t){t.d(n,{S:function(){return l}});var s=t(85893),r=t(98807);const l=e=>{let{dispatch:n,page:t}=e;return{onSelect:()=>n({type:"togglePane",pane:"help"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{className:"mr2 h1 w1"}),"help"===(null===t||void 0===t?void 0:t.pane)?"Hide help":"Show help"]})}}},23929:function(e,n,t){t.d(n,{P:function(){return c}});var s=t(85893),r=(t(67294),t(15706)),l=t(89905),i=t(74080),a=t(66421),o=t(3142);const c=e=>{let{notebook:n,dispatch:t}=e;return(0,o.Or)(n)?(0,a.sm)(n.suggestionFrom)?{onSelect:()=>t({type:"showModal",modal:"closeSuggestion",modalProps:{trigger:"click",source:"notebookContextMenu"}}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"mr2 h1 w1"}),"Close suggestion"]})}:null:(0,a.uh)(n)?{onSelect:()=>t({type:"showModal",modal:"suggest"}),disabled:!(0,i.MJ)(n),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.v,{className:"mr2 h1 w1"}),"Suggest"]})}:null}},19702:function(e,n,t){t.d(n,{EX:function(){return g},N_:function(){return x},TR:function(){return b},jL:function(){return j},y:function(){return v}});var s=t(41799),r=t(69396),l=t(99534),i=t(85893),a=t(60357),o=t.n(a),c=t(94184),d=t.n(c),u=t(67294),h=t(89905),m=t(21142),p=t(49282);const f=(0,u.createContext)("white"),x=e=>{var{className:n="",title:t,children:a,icon:o,iconPosition:c="left"}=e,u=(0,l.Z)(e,["className","title","children","icon","iconPosition"]);return(0,i.jsx)(f.Consumer,{children:e=>(0,i.jsxs)("button",(0,r.Z)((0,s.Z)({className:d()(n,"nowrap hover-bg-black-translucent-1 fw6 pa2 br2 no-underline",e,"bn bg-transparent pointer flex items-center animate-all")},u),{title:t,children:["right"===c&&a,o&&(0,i.jsx)(o,{className:a?"right"===c?"ml1":"mr1":""}),"left"===c&&a]}))})},b=e=>{var{className:n="",children:t}=e,a=(0,l.Z)(e,["className","children"]);return(0,i.jsx)("b",(0,r.Z)((0,s.Z)({className:d()(n,"nowrap")},a),{children:t}))},g=e=>{var{className:n="",children:t}=e,a=(0,l.Z)(e,["className","children"]);return(0,i.jsx)("span",(0,r.Z)((0,s.Z)({className:d()("overflow-hidden",n)},a),{children:t}))},v=e=>{let{title:n,children:t,icon:s}=e;return(0,i.jsx)("div",{className:"flex-auto overflow-hidden mv2",children:(0,i.jsxs)("div",{className:d()("flex items-center",n?"tooltipped tooltipped-sw":""),"aria-label":n,children:[s&&(0,i.jsx)(s,{className:"mr1 flex-shrink-0 self-start"}),(0,i.jsx)("div",{className:"overflow-hidden",style:{textOverflow:"ellipsis"},children:t})]})})},j=e=>{let{children:n,onExit:t,exitLabel:s,bgColor:r,color:l="white",stuck:a,menuActionList:c}=e;const u=(0,i.jsxs)(f.Provider,{value:l,children:[(0,i.jsx)("div",{className:d()("pv2",l,"flex-auto flex-wrap flex items-center"),children:n}),(0,i.jsxs)("div",{className:"self-start flex items-center mv2",children:[a&&(0,i.jsx)(p._i,{buttonType:"banner",actions:c,buttonClassname:l}),t&&(0,i.jsx)(x,{onClick:t,title:s,icon:h.Z})]})]});return a?(0,i.jsx)("div",{className:r,"data-cy":"notebook-banner",children:(0,i.jsx)(m.Z,{children:(0,i.jsx)("div",{className:"flex justify-between items-center lh-copy",children:u})})}):(0,i.jsxs)(m.Z,{children:[(0,i.jsx)("div",{"data-cy":"notebook-banner",className:"jsx-29da0802843cbb56 "+(d()("banner flex ph3 br2 justify-between items-center",r)||""),children:u}),(0,i.jsx)(o(),{id:"29da0802843cbb56",children:".banner.jsx-29da0802843cbb56{margin-left:-webkit-calc(var(--spacing-medium)*-1);margin-left:-moz-calc(var(--spacing-medium)*-1);margin-left:calc(var(--spacing-medium)*-1);margin-right:-webkit-calc(var(--spacing-medium)*-1);margin-right:-moz-calc(var(--spacing-medium)*-1);margin-right:calc(var(--spacing-medium)*-1);min-height:46px}"})]})}},73102:function(e,n,t){t.d(n,{n:function(){return Me}});var s=t(41799),r=t(69396),l=t(99534),i=t(85893),a=t(60357),o=t.n(a),c=t(94184),d=t.n(c),u=t(67294),h=t(11210),m=t(78009),p=t(21142),f=t(80453),x=t(48634),b=t(54329),g=t(84193),v=t(42568),j=t(45578),w=t(42019),y=t(12447),k=t(70915),N=t(27193),Z=t(36448);const C="flex items-center pa0 bg-transparent bn hover-blue pointer no-underline",L=e=>{let{notebook:n,dispatch:t}=e;const s=(0,w.h)(n),{collections:r}=n,l=(0,y.GS)(y.hs);return 1===r.length?(0,i.jsx)(g.Z,{href:l?(0,k.L7)(n,s):(0,k.WG)(s),children:(0,i.jsxs)("a",{"data-cy":"collections","aria-label":"Open collections browser",className:C,onClick:e=>{e.metaKey||e.ctrlKey||(t({type:"setOpenCollection",collection:r[0]}),e.preventDefault())},children:[(0,i.jsx)(b.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),(0,N.Ui)(s)]})}):(0,i.jsxs)(x.v2,{children:[(0,i.jsxs)(x.j2,{className:C,children:[(0,i.jsx)(b.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),(0,N.CZ)(r.length),"\xa0collections"]}),(0,i.jsx)(x.qy,{className:"reach-menu",children:(0,i.jsx)("div",{className:"pt2",children:(0,i.jsxs)("div",{className:"overflow-y-auto bg-white z-5 shadow-3 br2",style:{maxHeight:320,maxWidth:260},children:[(0,i.jsx)("div",{className:"flex pa2 f7 fw5 items-center justify-between bb b--light-silver",children:(0,i.jsx)("span",{children:"Listed in..."})}),r.map(((e,s)=>(0,i.jsxs)(x.Uk,{style:{display:"grid",gridTemplateColumns:"60px auto",alignItems:"center",gridGap:"0 10px"},onClick:n=>{n.metaKey||n.ctrlKey||(t({type:"setOpenCollection",collection:e}),n.preventDefault())},href:l?(0,k.L7)(n,e):(0,k.WG)(e),className:d()("pa2",v.np),children:[(0,i.jsx)(S,{thumbnail:e.thumbnail}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"pt1 f6 fw6 mr1 near-black ws-normal",title:(0,N.Ui)(e),children:(0,N.Ui)(e)}),(0,i.jsx)("div",{className:"pt1 f7 inline-flex items-center mid-gray",children:(0,i.jsx)(j.Gz,{owner:e.owner,buttonless:!0,children:(0,Z.RX)(e.owner)})})]})]},s)))]})})})]})};function S(e){let{thumbnail:n}=e;const t={width:"calc(100% - ".concat(6,"px)"),height:"calc(100% - ".concat(6,"px)")};return(0,i.jsxs)("div",{className:"relative",style:{width:54,height:40},children:[(0,i.jsx)("div",{className:"absolute bg-white ba b--silver br2",style:(0,s.Z)({top:6,left:6},t)}),(0,i.jsx)("div",{className:"absolute bg-white ba b--silver br2",style:(0,s.Z)({top:3,left:3},t)}),(0,i.jsx)("div",{className:d()("absolute ba b--silver br2",n?"bg-center cover ":" "),style:(0,r.Z)((0,s.Z)({top:0,left:0},t),{backgroundImage:n?"url(".concat("https://static.observableusercontent.com","/thumbnail/").concat(n,".jpg)"):"var(--checkerboard)"})})]})}L.applies=e=>{let{notebook:n}=e;return n.collections.length>0};var F=t(17905),E=t(76267),M=t(22027),V=t(37720),D=t(52155),H=t(602),R=t(82893),A=t(88725),U=t(3142),T=t(62990);const P=()=>(0,i.jsx)("span",{className:"mh1 light-gray",children:"\u2022"});function z(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,i.jsx)("div",{className:d()("br2 ba b--silver",e.thumbnail&&"cover"),style:{paddingTop:"62.5%",backgroundImage:e.thumbnail?"url(".concat((0,A.Nl)(e.thumbnail),")"):"var(--checkerboard)"}},n)}function I(e,n,t){const s=n.length>1;if(s){const e=n.concat(n).slice(0,4);n=e}const r=n[0],l=s?"".concat((0,A.Bi)(e),"/forks"):(0,A.Bi)(r),a=s?"".concat(t," more..."):(0,N.Ui)(n[0]);return(0,i.jsx)(g.Z,{href:l,children:(0,i.jsxs)("a",{className:"pa2 nl2 nr2 no-underline near-black hover-light-blue hover-bg-near-white b--silver",style:{display:"grid",gridTemplateColumns:"60px auto",alignItems:"center",gridGap:"0 10px"},children:[1===n.length?z(r):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridColumn:"1 / 2",gap:"2px"},children:n.map(z)}),(0,i.jsxs)("div",{className:"overflow-hidden",children:[(0,i.jsx)("div",{className:"truncate pv1 f6 fw5",children:(0,i.jsx)("span",{title:a,className:"mr1",children:a})}),!s&&(0,i.jsx)("div",{className:"pb1 f7 mid-gray",children:(0,i.jsxs)("div",{className:"inline-flex items-center",children:[(0,i.jsx)("span",{children:(0,Z.RX)(r.owner)}),(0,i.jsx)("span",{title:(0,T.mr)(new Date(r.update_time)),className:"ml2 nowrap",children:(0,T.LN)(new Date(r.update_time),new Date)}),r.likes>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.Z,{className:"mh1 moon-gray"}),(0,i.jsx)("span",{children:(0,N.CZ)(r.likes)})]}):null]})})]})]})},r.id)}function B(e,n){return e.authors.some((n=>e.owner.id===n.id))||n.owner.id===e.owner.id}function G(e){let{notebook:n,numForks:t,forks:s,title:r}=e,l=s.slice(0,3),a=t-l.length;1===a&&(a=0,l=s.slice(0,4));const o=s.slice(t).concat(s);return(0,i.jsx)(i.Fragment,{children:0!==l.length&&(0,i.jsxs)("div",{className:"f7 bt mid-gray pa2 b--silver",children:[(0,i.jsx)("div",{className:"pb2",children:r}),l.map((e=>I(n,[e]))),a?I(n,o,a):""]})})}function K(e){let{notebook:n,currentUser:t,numForks:s}=e;const{data:r}=(0,H.h_)("/document/".concat(n.slug?"@".concat(n.owner.login,"/").concat(n.slug):n.id,"/forks?type=").concat(t?"all":"public")),l=r||[],a=l.filter((e=>B(n,e))),o=l.filter((e=>!B(n,e)));return(0,i.jsx)("div",{className:"dark-gray",children:r?(0,i.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:500},children:[(0,i.jsxs)("div",{className:"flex pa2 f7 fw5 items-center justify-between",children:[(0,i.jsx)("span",{children:(0,U.YY)(s,"fork","forks")}),(0,i.jsx)(g.Z,{href:"".concat((0,A.Bi)(n),"/forks"),children:(0,i.jsxs)("a",{className:"inline-flex fw5 no-underline blue hover-dark-blue items-center",children:[(0,i.jsx)("span",{className:"nowrap",children:"View all forks"})," ",(0,i.jsx)(F.Z,{className:"ml1"})]})})]}),G({notebook:n,numForks:s,forks:a,title:"Author forks"}),G({notebook:n,numForks:s,forks:o,title:"Community forks"})]}):(0,i.jsxs)("div",{className:"flex pa2 f7 fw5 gray items-center",children:[(0,i.jsx)(M.Z,{className:"mr2 blue"}),(0,i.jsx)("span",{children:"Loading\u2026"})]})})}const _=e=>{const{open:n,openMenu:t,triggerRef:r,uiRef:l}=(0,R.O)(),{forks:a,forkOf:o}=e.notebook;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),o&&(0,i.jsxs)("div",{className:"truncate",children:["Fork of"," ",(0,i.jsx)(g.Z,{href:(0,A.Bi)(o),children:(0,i.jsx)("a",{className:"no-underline hover-blue",children:(0,N.Ui)(o)})})]}),a&&o?(0,i.jsx)(P,{}):null,a>0&&(0,i.jsxs)("div",{className:d()("relative",n?"":"hover-blue","pointer inline-flex items-center"),ref:r,onClick:t,"data-cy":"forks-dropdown",children:[(0,i.jsx)("span",{className:"inline-flex items-center",children:(0,U.YY)(a,"fork","forks")}),n&&(0,i.jsx)(V.J,{ref:l,extraStyle:{right:"auto",left:0,width:"17rem",marginTop:"0.5rem"},children:(0,i.jsx)(K,(0,s.Z)({numForks:a},e))})]})]})};_.applies=e=>{let{notebook:n}=e;return!!n.forks||!!n.forkOf};var q=t(61777);const O=e=>{let{notebook:n}=e;return(0,i.jsx)(g.Z,{href:(0,A.Bi)(n),children:(0,i.jsxs)("a",{className:"pa2 no-underline near-black hover-light-blue hover-bg-near-white bt b--silver",style:{display:"grid",gridTemplateColumns:"60px auto",alignItems:"center",gridGap:"0 10px"},children:[(0,i.jsx)("div",{className:d()("relative br2 ba b--silver",n.thumbnail?"cover bg-center":""),style:{paddingTop:"62.5%",backgroundColor:"#fff",backgroundImage:n.thumbnail?"url(".concat("https://static.observableusercontent.com","/thumbnail/").concat(n.thumbnail,".jpg)"):"var(--checkerboard)"}}),(0,i.jsxs)("div",{className:"overflow-hidden",children:[(0,i.jsx)("div",{className:"truncate pv1 f6 fw5",children:(0,i.jsx)("span",{title:(0,N.Ui)(n),className:"mr1",children:(0,N.Ui)(n)})}),(0,i.jsx)("div",{className:"pb1 f7 fw5 dark-gray",children:(0,i.jsxs)("div",{className:"inline-flex items-center",children:[(0,i.jsx)("span",{children:(0,Z.RX)(n.owner)}),!!n.update_time&&(0,i.jsx)("span",{title:(0,T.mr)(new Date(n.update_time)),className:"ml1 nowrap",children:(0,T.LN)(new Date(n.update_time),new Date)}),n.likes>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.Z,{className:"mh1 moon-gray"}),(0,i.jsx)("span",{children:(0,N.CZ)(n.likes)})]}):null]})})]})]})},n.id)};function Y(e){let{notebook:n}=e;const{slug:t,id:s,owner:r}=n,{data:l}=(0,H.h_)("/document/".concat(t?"@".concat(r.login,"/").concat(t):s,"/importers?page=1"));return(0,i.jsx)("div",{className:"dark-gray",children:void 0===l?(0,i.jsxs)("div",{className:"flex pa2 f7 fw5 gray items-center",children:[(0,i.jsx)(M.Z,{className:"mr2 blue"}),(0,i.jsx)("span",{children:"Loading\u2026"})]}):0===l.total?(0,i.jsx)("div",{className:"flex pa2 f7 fw5 items-center",children:(0,i.jsx)("span",{children:"This notebook has private importers"})}):(0,i.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:500},children:[(0,i.jsxs)("div",{className:"flex pa2 f7 fw5 items-center justify-between",children:[(0,i.jsx)("span",{children:(0,U.YY)(l.total,"importer")}),(0,i.jsx)(g.Z,{href:"".concat((0,A.Bi)(n),"/importers"),children:(0,i.jsxs)("a",{className:"inline-flex fw5 no-underline blue hover-dark-blue items-center",children:[(0,i.jsx)("span",{className:"nowrap",children:"View all importers"})," ",(0,i.jsx)(F.Z,{className:"ml1"})]})})]}),l.results.map(((e,n)=>(0,i.jsx)(O,{notebook:e},n))),(0,i.jsx)("div",{className:"pa2 f7 fw5 gray bt b--silver",children:"Imports indexed every 10 minutes"})]})})}const J=e=>{const{open:n,openMenu:t,triggerRef:r,uiRef:l}=(0,R.O)(),{hasImporters:a}=e.notebook;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),a&&(0,i.jsxs)("div",{className:d()("relative",n?"":"hover-blue","pointer inline-flex items-center"),ref:r,onClick:t,"data-cy":"importers-dropdown",children:[(0,i.jsx)("span",{className:"inline-flex items-center",children:(0,i.jsx)("span",{children:"Importers"})}),n&&(0,i.jsx)(V.J,{ref:l,extraStyle:{right:"auto",left:0,width:"17rem",marginTop:"0.5rem",cursor:"default"},children:(0,i.jsx)(Y,(0,s.Z)({},e))})]})]})};J.applies=e=>{let{notebook:n}=e;return n.hasImporters};var W=t(93797),X=t(89642),Q=t(66421);function $(){}const ee=e=>{let{notebook:n}=e;const{model:{license:t}}=n,s=(0,Q.mG)(n)||"other"!==t;return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsx)("button",{className:d()("flex pa0 f6 dark-gray bg-white button-reset items-center",s?"pointer hover-blue":"","bn hg lh-solid"),style:{marginTop:-2},"aria-label":"View license",onClick:s?$:void 0,children:(0,i.jsxs)("span",{className:"flex f6 nowrap items-center",children:[(0,i.jsx)(W.Z,{className:"mr2 moon-gray"}),(0,i.jsxs)("span",{className:"inline-flex items-center",children:[(0,i.jsx)("span",{className:"ph1 code f7 black-50 br2 br--left bg-lightest-red",style:{padding:"3px 5px"},children:"-"}),(0,i.jsx)("span",{className:"ph1 bg-washed-red",style:{padding:"2px 8px 2px 5px"},children:(0,X.ax)("")}),(0,i.jsx)("span",{className:"ph1 code f7 black-50 bg-lightest-green",style:{marginLeft:1,padding:"3px 5px"},children:"+"}),(0,i.jsx)("span",{className:"ph1 bg-washed-green br2 br--right",style:{padding:"2px 8px 2px 5px"},children:(0,X.ax)(t)})]})]})})})};ee.applies=e=>{let{notebook:n}=e;return n.model.license,!1};const ne=(0,t(54924).ZV)((e=>{const{notebook:n}=e;if("notebookCompare"===e.type){const{baseNotebook:t}=e;return{notebook:n,baseLicense:t.model.license,baseCopyright:t.model.copyright}}return{notebook:n}}),(e=>({dispatch:e})))((e=>{let{notebook:n,baseLicense:t,baseCopyright:s,dispatch:r}=e;const{model:{license:l,copyright:a}}=n,o=(0,Q.mG)(n)||"other"!==l;function c(){o&&r({type:"showModal",modal:"license"})}return(0,i.jsx)(i.Fragment,{children:(l||t)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(W.Z,{className:"mr1 moon-gray"}),void 0===t||t===l&&s===a?(0,i.jsx)("button",{className:d()("flex pa0 f6 dark-gray bg-white button-reset items-center bn",o?"pointer hover-blue":""),"aria-label":"View license",onClick:c,children:(0,i.jsx)("span",{children:"\xa0".concat((0,X.ax)(l))})}):(0,i.jsx)("button",{className:d()("flex pa0 f6 dark-gray bg-white button-reset items-center",o?"pointer hover-blue":"","bn hg lh-solid"),style:{marginTop:-2},"aria-label":"View license",onClick:c,children:(0,i.jsxs)("span",{className:"inline-flex items-center",children:[(0,i.jsx)("span",{className:"ph1 code f7 black-50 br2 br--left bg-lightest-red",style:{padding:"3px 5px"},children:"-"}),(0,i.jsx)("span",{className:"ph1 bg-washed-red",style:{padding:"2px 8px 2px 5px"},children:(0,X.ax)(t)}),(0,i.jsx)("span",{className:"ph1 code f7 black-50 bg-lightest-green",style:{marginLeft:1,padding:"3px 5px"},children:"+"}),(0,i.jsx)("span",{className:"ph1 bg-washed-green br2 br--right",style:{padding:"2px 8px 2px 5px"},children:(0,X.ax)(l)})]})})]})})}));ne.applies=e=>{let{notebook:n,baseNotebook:t}=e;return!!n.model.license||!!(null===t||void 0===t?void 0:t.model.license)};var te=t(8385),se=t(82162);const re=e=>{let{notebook:{id:n,likes:t}}=e;const{data:s}=(0,H.h_)("/document/".concat(n,"/likes"));return(0,i.jsx)("div",{className:"dark-gray",children:(0,i.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:160},children:[(0,i.jsx)("div",{className:"flex pa2 f7 fw5 items-center justify-between",children:(0,i.jsxs)("span",{children:[(0,N.CZ)(t)," like",1===t?"":"s"]})}),s?s.map((e=>(0,i.jsx)(g.Z,{href:(0,Z.GN)(e),children:(0,i.jsxs)("a",{className:"pa2 no-underline near-black hover-light-blue hover-bg-near-white bt b--silver",style:{display:"grid",gridTemplateColumns:"16px auto",alignItems:"center",gridGap:"0 10px"},children:[(0,i.jsx)(j.Gz,{owner:e,buttonless:!0,children:(0,i.jsx)(te.q,{user:e,size:16,className:"br-pill"})}),(0,i.jsx)("div",{className:"overflow-hidden",children:(0,i.jsx)("div",{className:"truncate pv1 f6 fw5",children:(0,i.jsx)("span",{title:(0,Z.RX)(e),className:"flex mr1",children:(0,Z.RX)(e)})})})]})},e.id))):null]})})},le=e=>{const{notebook:n,notebook:{likes:t}}=e,{open:r,openMenu:l,triggerRef:a,uiRef:o}=(0,R.O)(),c=(0,i.jsx)(se.Z,{className:"mr1",fill:"var(--white)",stroke:"var(--moon-gray)",style:{width:16,height:16,strokeWidth:2}});return(0,Q.mG)(n)?(0,i.jsxs)("div",{className:"relative inline-flex items-center",children:[c,(0,i.jsxs)("button",{"aria-label":r?"":"See who liked this notebook",onClick:l,ref:a,className:"flex items-center pa0 bn bg-transparent pointer hover-blue",children:[(0,N.CZ)(t),"\xa0like",1===t?"":"s"]}),r?(0,i.jsx)(V.J,{ref:o,extraStyle:{right:"auto",left:0,width:"15rem",marginTop:"0.5rem"},children:(0,i.jsx)(re,(0,s.Z)({},e))}):null]}):(0,i.jsxs)(i.Fragment,{children:[c,(0,N.CZ)(t),"\xa0Like",1===t?"":"s"]})};le.applies=e=>{let{notebook:n}=e;return n.likes>0};var ie=t(94726);const ae=e=>{let{notebook:n}=e;return(0,i.jsx)(ie.h,{commentingLock:n.commentingLock})};ae.applies=e=>{let{notebook:n}=e;return null!==n.commentingLock&&(n.commentingLock.admin_locked||n.commentingLock.user_locked)};var oe=t(86466),ce=t(1105);const de=e=>{let{notebook:n}=e;const{open:t,openMenu:s,triggerRef:r,uiRef:l}=(0,R.O)(),{id:a,initialLatestVersion:o,isPausedLoad:c,pausedVersion:u}=n,{data:h}=(0,H.h_)("/document/".concat(a,"@").concat(c?o:u)),m={date:(0,T.p6)((null===h||void 0===h?void 0:h.update_time)||new Date),owner:(null===h||void 0===h?void 0:h.owner)||n.owner,path:(0,A.UW)(n)+(c?"@latest":"@paused"),thumbnail:null===h||void 0===h?void 0:h.thumbnail,version:c?o:u},p="/compare/".concat(a,"@").concat(c?u:Math.max(n.saveVersion,o),"...").concat(a,"@").concat(c?Math.max(n.saveVersion,o):u),f="Compare ".concat(c?"latest":"paused"," version to ").concat(c?"paused":"latest"," version");return(0,i.jsxs)("div",{className:"relative inline-flex items-center",children:[(0,i.jsxs)("div",{className:"inline-flex items-center",children:[(0,i.jsx)(oe.Z,{className:"mr1 moon-gray"}),(0,i.jsx)("span",{className:"pointer",onClick:s,ref:r,title:"This is the ".concat(c?"paused":"latest"," version of the notebook. Click here to see information about the ").concat(c?"latest":"paused"," version."),children:c?"Paused":"Latest"})]}),t&&(0,i.jsx)(V.J,{ref:l,extraStyle:{right:"auto",left:0,width:"17rem",marginTop:"0.5rem"},children:(0,i.jsxs)("div",{className:"pa0 bg-transparent bn",children:[(0,i.jsx)("div",{className:"pa2 lh-title fw6",children:"Live editing paused"}),(0,i.jsxs)("div",{className:"pa2 flex items-center bt b--silver w-100",children:[(0,i.jsx)("div",{className:d()("mr2 ba br2 b--silver flex-no-shrink",m.thumbnail&&"cover"),style:{backgroundImage:m.thumbnail?"url(".concat((0,A.Nl)(m.thumbnail),")"):"var(--checkerboard)",height:38,width:60}}),(0,i.jsxs)("div",{className:"mid-gray w-100 truncate",children:[(0,i.jsx)(g.Z,{href:m.path,children:(0,i.jsxs)("a",{className:"flex items-center lh-copy fw6 blue animate-all",children:["View ".concat(c?"latest":"paused"," version"),(0,i.jsx)(F.Z,{className:"ml1"})]})}),(0,i.jsxs)("div",{className:"flex items-center f7 mt1",children:[(0,i.jsx)(g.Z,{href:p,children:(0,i.jsxs)("a",{className:"flex-no-shrink hover-blue",title:f,children:["v",m.version]})}),(0,i.jsx)("div",{className:"light-gray mh1",children:"\u2022"}),(0,i.jsx)("div",{className:"flex-no-shrink",children:m.date}),(0,i.jsx)("div",{className:"light-gray mh1",children:"\u2022"}),(0,i.jsx)(j.GL,{className:"mid-gray",user:m.owner})]})]})]}),(0,i.jsx)("div",{className:"pa2 bg-near-white f7 lh-f7",children:(0,Q.mG)(n)?ce.H:ce.r})]})})]})};de.applies=e=>{let{notebook:n}=e;return!!(0,U.z4)(n)&&(!n.isCompare&&!!(n.isPausedLoad||(0,U.tK)(n)&&n.autosave))};var ue=t(63231),he=t(14151),me=t(93939);const pe=e=>{let{notebook:n,dispatch:t}=e;const{publishTime:s,saveTime:r}=n,l=s||r,a=(0,me.L)(l),o=(0,he.d)((0,u.useCallback)((()=>"Edited ".concat((0,T.mr)(r))),[r]),""),c=(0,he.d)((0,u.useCallback)((()=>{const e=(0,Q.pT)(n);function s(){e&&t({type:"togglePane",pane:"history"})}return(0,i.jsx)("div",{className:d()("pl1 no-underline",{"pointer hover-blue":e}),onKeyDown:s,onClick:s,children:(0,T.LN)(r,a)})}),[n,r,a,t]),(0,i.jsx)(i.Fragment,{}));return(0,i.jsxs)("div",{className:"flex items-center",title:o,children:[(0,i.jsx)(ue.Z,{className:"mr1 moon-gray"}),"Edited ",c]})};pe.applies=()=>!0;var fe=t(88379);const xe=e=>{var{dispatch:n}=e,t=(0,l.Z)(e,["dispatch"]);const{notebook:r}=t,a=(0,Q.yF)(r)&&!r.isCompare,o=(0,i.jsx)(fe.i,(0,s.Z)({addHover:a},t));return a?(0,i.jsx)("button",{onClick:()=>n({type:"showModal",modal:"share"}),className:"pa0 bg-transparent bn pointer",children:o}):(0,i.jsxs)(i.Fragment,{children:[" ",o," "]})};xe.applies=()=>!0;const be=[xe,L,f.M,pe,de,ne,ee,_,J,ae,le];var ge=e=>{let{notebook:n,baseNotebook:t,currentUser:s,dispatch:r}=e;const l={notebook:n,baseNotebook:t,currentUser:s,user:!0,dispatch:r};return(0,i.jsx)("div",{className:"flex pb3 f6 dark-gray items-center flex-row flex-wrap lh-f6 mw-100","data-cy":"metadata-bar",children:be.map(((e,n)=>e.applies(l)?(0,i.jsx)("div",{className:"flex items-center mt2 mr3 min-w-0",children:u.createElement(e,l)},n):null))})},ve=t(49282),je=t(73598),we=t(28087),ye=t(40042),ke=t(4242);const Ne=/\B@([\w-]{1,39})/g,Ze=e=>{const{text:n}=e,{0:t}=(0,u.useState)(n.match(Ne)),{data:s}=(0,H.h_)(t?"/users-exist?".concat(t.map((e=>"login=".concat(e.substr(1).toLowerCase()))).join("&")):null);if(!s)return(0,i.jsx)(i.Fragment,{children:n});const r=new Map(s),l=[];let a,o=0;for(;null!==(a=Ne.exec(n));){const e=n.substring(o,a.index);e&&l.push((0,i.jsx)(i.Fragment,{children:e}));const t=a[1],s=r.get(t.toLowerCase());s&&"unavailable"!==s?l.push((0,i.jsx)(g.Z,{href:(0,Z.GN)({login:t.toLowerCase()}),children:(0,i.jsxs)("a",{className:"no-underline black-70 hover-blue",children:["@",t]})},o)):l.push((0,i.jsxs)(i.Fragment,{children:["@",t]})),o=a.index+a[0].length}return o!==n.length&&l.push((0,i.jsx)(i.Fragment,{children:n.substring(o,n.length)})),l.reduce(((e,n)=>(0,i.jsxs)(i.Fragment,{children:[e,n]})))},Ce=e=>{let{owner:n}=e;return(0,i.jsx)("div",{className:"line-clamp-2 fw4 f6 lh-f7 mid-gray",style:{paddingTop:".3em"},children:n.bio?(0,i.jsx)(Ze,{text:n.bio}):null})};var Le=u.memo((function(e){let{owner:n,currentUser:t}=e;const s=(0,ke.I0)();return(0,ye.v9)((e=>{const[t,s]=(0,we.f)(n,e);s&&(n=t)})),(0,i.jsxs)("div",{className:"flex items-center mw6",children:[(0,i.jsx)(g.Z,{href:(0,Z.GN)(n),children:(0,i.jsx)("a",{children:(0,i.jsx)(te.q,{user:n,className:"inline-flex br-100 mw-none",size:46})})}),(0,i.jsxs)("div",{className:"pl2 f6 lh-f6 w-100",children:[(0,i.jsxs)("div",{className:"flex items-center justify-start",children:[(0,i.jsx)(j.Gz,{owner:n,containerStyle:"fit",children:(0,i.jsx)(j.GL,{user:n,className:"flex flex-shrink-0 mw-100 pr2 fw7"})}),t&&(0,Q.$y)(t,n)&&(0,i.jsx)(je.e,{dispatch:s,currentUser:t,followUser:n,buttonContext:"notebookHeader",type:"follow",style:"skinny"})]}),(0,i.jsx)(Ce,{owner:n})]})]})})),Se=t(34236),Fe=t(69150);const Ee=e=>{var{stuck:n}=e,t=(0,l.Z)(e,["stuck"]);const{notebook:r}=t,{model:{title:a}}=r;return(0,i.jsxs)(p.Z,{className:"mt2 flex flex-column-reverse justify-center flex-row-ns justify-between-ns items-center-ns",style:{minHeight:Fe.MT},children:[n?(0,i.jsx)("div",{className:"dn db-ns serif f5 dark-gray b truncate",children:a}):(0,i.jsx)(Le,{owner:r.owner,currentUser:t.currentUser}),(0,i.jsx)("div",{className:d()("self-end self-center-ns nowrap body",n?"":"mb3 mb0-ns"),"data-cy":"notebook-title",children:(0,i.jsx)(ve.ZP,(0,s.Z)({},t))})]})},Me=e=>{var{SelectedBanner:n,baseNotebook:t}=e,a=(0,l.Z)(e,["SelectedBanner","baseNotebook"]);const{notebook:c,currentUser:f,promotedActions:x,dispatch:b}=a,g=(0,h.C)(c)||x.some((e=>e.highlight))||void 0!==n,v=(0,u.useRef)(null),j=(0,Se.E)(v,{defaultValue:!0}),w=(0,he.d)((0,u.useCallback)((()=>!j&&g),[j,g]),!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:v,className:"jsx-e0896dacb97d8241 mt2 mt3-ns"}),(0,i.jsx)("div",{className:"jsx-e0896dacb97d8241 "+(d()("mb2 mb3-ns bg-white z-1 dn-print",n?"bn banner":"bb","body",g?"sticky":"",w?"stuck b--light-silver":"b--transparent")||""),children:n?(0,i.jsx)(n,(0,r.Z)((0,s.Z)({stuck:w},a),{className:"jsx-e0896dacb97d8241 "+(a&&null!=a.className&&a.className||"")})):(0,i.jsx)(Ee,(0,s.Z)({stuck:w},a))}),n&&(0,i.jsx)("div",{className:"jsx-e0896dacb97d8241 dn-print",children:(0,i.jsx)(Ee,(0,s.Z)({stuck:!1},a))}),(0,i.jsx)(p.Z,{className:"mt1 mt2-ns mb3 mb2-ns dn-print",children:(0,i.jsxs)("div",{className:"jsx-e0896dacb97d8241 flex justify-between items-center bb b--light-silver",children:[(0,i.jsx)(ge,{notebook:c,baseNotebook:t,currentUser:f,dispatch:b}),(0,i.jsx)(m.l,{size:24,participants:c.participants})]})}),(0,i.jsx)(o(),{id:"e0896dacb97d8241",children:'.sticky.jsx-e0896dacb97d8241{top:0}.body.jsx-e0896dacb97d8241{padding-right:"calc(420px - max((100vw - 64rem)/2, 0px))"}'})]})}},65074:function(e,n,t){t.d(n,{P:function(){return v},y:function(){return b}});var s=t(85893),r=t(3764),l=t(61777),i=t(86057),a=t(28041),o=t(9532),c=t(26492),d=t(98807),u=t(60138),h=t(52433),m=t(54713),p=t(11222),f=t(66421),x=t(3142);function b(e){let n=0;for(const{status:t}of e.files.values())"deleted"!==t&&"deletepending"!==t&&++n;return(0,x.cE)(e)&&(n+=e.model.resolutions.filter(x.HC).length),n>0?n:void 0}function g(e){return e.suggestionsTo.length?e.suggestionsTo.length:void 0}const v=(0,t(4242).$j)((e=>{let{page:n,notebook:t,decorations:s}=e;return{paneType:n.pane,guide:n.guide,canViewHelpSignpost:null!==t.focusId||"help"===s.signpost,canViewHistoryPane:(0,f.pT)(t),canViewInsights:(0,f.ED)(t),filesCount:b(t),suggestionCount:g(t),hasCloudFileError:(0,x.wy)(t)}}),(e=>({dispatch:e})))((e=>{let{guide:n,canViewHelpSignpost:t,canViewHistoryPane:f,canViewInsights:x,hasCloudFileError:b,filesCount:g,suggestionCount:v}=e;const j=[n?{type:"guide",icon:()=>(0,s.jsx)(m.y,{color:"var(--blue)",width:"16"}),label:"guide pane"}:null,{type:"files",icon:a.Z,count:g,label:"files pane",badgeStyle:b?"error":void 0},{type:"databases",icon:r.Z,label:"databases pane"},!n&&f?{type:"history",icon:o.Z,count:v,badgeStyle:"filled",label:v?"history pane (".concat(1===v?"1 suggestion":"".concat(v," suggestions"),")"):"history pane"}:null,{type:"minimap",icon:c.Z,label:"minimap pane"},n?null:{type:"dependencies",icon:l.Z,label:"dependencies pane"},!n&&x?{type:"insights",icon:i.Z,label:"insights pane"}:null,{type:"find",icon:u.Z,label:"find pane"},{type:"help",icon:d.Z,label:"help pane",signpost:t?"help":null}];return(0,s.jsx)(h.YE,{panes:j.filter(p.K)})}))},65878:function(e,n,t){t.d(n,{Z:function(){return o}});var s=t(41799),r=t(99534),l=t(85893),i=(t(67294),t(95542)),a=t(51970);function o(e){return n=>{var{error:t}=n,o=(0,r.Z)(n,["error"]);const c=(0,a.S)(o);return t?(0,l.jsx)(i.Z,{error:t,initialCurrentUser:c.initialCurrentUser,initialContext:null}):(0,l.jsx)(e,(0,s.Z)({},c))}}},82029:function(e,n,t){t.d(n,{D:function(){return g}});var s=t(67294),r=t(11163);var l=t(51289),i=t(18274),a=t(63527),o=t(3142);function c(e){return null!==e.focusId}function d(e){return null!==e.selectionFocusId||0!==e.selection.size}function u(e){return null!==e.selectionFocusId}function h(){return null!=document.querySelector("[role=dialog]")}const m=(0,a.V)([["Alt-Tab","Shift-Alt-Tab",(e,n)=>{let{editors:t,dispatch:s}=e;return t.refocus()||s({type:n.shiftKey?"focusLast":"focusFirst"}),!0}],["Shift-Mod-j",(e,n)=>{let{editors:t,dispatch:s}=e;return!(0,i.Z)(n)&&(t.refocus()||s({type:"focusLast"}),!0)}],["Escape",()=>document.activeElement instanceof HTMLElement&&document.activeElement!==document.body&&!(0,i.hz)(document.activeElement)&&(document.activeElement.blur(),!0)],[l.Mq?"Mod-g":"F3",l.Mq?"Shift-Mod-g":"Shift-F3",(e,n)=>{let{notebook:t,dispatch:s}=e;return!(!t.searchTerm||!t.searchResultsVisible)&&(s({type:n.shiftKey?"selectPreviousSearchResult":"selectNextSearchResult"}),!0)}]]),p=(e,n)=>{let{notebook:t,dispatch:s}=e;const{focusStack:r,selectionFocusId:l}=t,i=null===l&&r.length?r[r.length-1]:l;return s({type:"openInsertMenu",id:i,before:n.shiftKey!==(null===i),trigger:"keypress",source:"nodeSelection"}),!0},f=(e,n)=>{let{dispatch:t,currentUser:s}=e;return t({type:"selectionInsert",mode:(0,o.Sx)(s),before:n.shiftKey,trigger:"keypress"}),!0},x=(0,a.V)([["?","Shift-?",e=>{let{dispatch:n}=e;return n({type:"togglePane",pane:"help",focusKeyboardShortcuts:!0}),!0}],["k","Shift-k",(e,n)=>{let{dispatch:t}=e;return t({type:"selectionFocusBefore",add:n.shiftKey}),!0}],["j","Shift-j",(e,n)=>{let{dispatch:t}=e;return t({type:"selectionFocusAfter",add:n.shiftKey}),!0}],["ArrowUp","Shift-ArrowUp",(e,n)=>{let{notebook:t,dispatch:s}=e;return!!u(t)&&(s({type:"selectionFocusBefore",add:n.shiftKey}),!0)}],["ArrowDown","Shift-ArrowDown",(e,n)=>{let{notebook:t,dispatch:s}=e;return!!u(t)&&(s({type:"selectionFocusAfter",add:n.shiftKey}),!0)}],["Shift-ArrowLeft",e=>{let{notebook:n,dispatch:t}=e;return!!u(n)&&(t({type:"selectionUpstream"}),!0)}],["Shift-ArrowRight",e=>{let{notebook:n,dispatch:t}=e;return!!u(n)&&(t({type:"selectionDownstream"}),!0)}],["d","Shift-d","Alt-Backspace",e=>{let{dispatch:n}=e;return n({type:"selectionDelete"}),!0}],[".","Mod-.","p","Shift-p","Shift-Ctrl-p",e=>{let{dispatch:n}=e;return n({type:"selectionPin"}),!0}],[",","Mod-,",e=>{let{dispatch:n}=e;return n({type:"selectionHide"}),!0}],["x","Shift-x",e=>{let{dispatch:n}=e;return n({type:"selectionFocusToggle"}),!0}],["c","Shift-c",e=>{let{dispatch:n}=e;return n({type:"selectionComment"}),!0}],["a","Shift-a",e=>{let{dispatch:n}=e;return n({type:"selectionAll"}),!0}],["o","Shift-o",p],["Mod-Enter","Shift-Mod-Enter",(e,n)=>{const{currentUser:t}=e;return((0,o.Sx)(t)?f:p)(e,n)}],["f",e=>{let{dispatch:n}=e;return n({type:"enterFullscreen"}),!0}],["Alt-Enter","Shift-Alt-Enter",(e,n)=>{let{dispatch:t}=e;return t({type:"selectionInsert",inherit:!0,before:n.shiftKey,trigger:"keypress"}),!0}],["Mod-Alt-Enter","Shift-Mod-Alt-Enter",(e,n)=>{const{currentUser:t}=e;return((0,o.Sx)(t)?p:f)(e,n)}],["Enter",e=>{let{notebook:n,dispatch:t}=e;return u(n)?t({type:"selectionFocusEnter"}):t({type:"selectionFocusAfter",add:!1}),!0}],["Shift-Enter",e=>{let{dispatch:n}=e;return n({type:"selectionRun"}),!0}],["Alt-ArrowDown","Ctrl-Shift-ArrowDown",e=>{let{dispatch:n}=e;return n({type:"selectionMoveDown"}),!0}],["Alt-ArrowUp","Ctrl-Shift-ArrowUp",e=>{let{dispatch:n}=e;return n({type:"selectionMoveUp"}),!0}],["Shift-Alt-ArrowDown",e=>{let{dispatch:n}=e;return n({type:"selectionDuplicate",before:!1}),!0}],["Shift-Alt-ArrowUp",e=>{let{dispatch:n}=e;return n({type:"selectionDuplicate",before:!0}),!0}],["Escape",e=>{let{notebook:n,dispatch:t}=e;return t({type:c(n)||d(n)?"selectionBlur":"dismissPane"}),!0}],["Mod-z","Shift-Mod-z",()=>!0],["Shift-Mod-f",e=>{let{dispatch:n}=e;return n({type:"showFindPane"}),!0}]]);var b=t(64889);function g(e,n,t,l){(0,b.C)(n,l),function(e,n,t,r){const l=(0,s.useRef)(e),a=(0,s.useRef)(r);l.current=e,a.current=r,(0,s.useEffect)((()=>{function e(e){if(h())return;const s={notebook:l.current,editors:n,dispatch:t,currentUser:a.current};return m(s,e)||(!(0,i.Z)(e)||!(0,i.hz)(e.target)&&d(l.current))&&!(0,i.bh)(e)&&!(0,o.os)(s.notebook)&&x(s,e)?(e.preventDefault(),void e.stopPropagation()):void 0}function s(e){var n,s;!h()&&d(l.current)&&(null===(s=null===(n=getSelection())||void 0===n?void 0:n.isCollapsed)||void 0===s||s)&&e.clipboardData&&(t({type:"selectionCut",clipboardData:e.clipboardData}),e.preventDefault())}function r(e){var n,s;!h()&&d(l.current)&&(null===(s=null===(n=getSelection())||void 0===n?void 0:n.isCollapsed)||void 0===s||s)&&e.clipboardData&&(t({type:"selectionCopy",clipboardData:e.clipboardData}),e.preventDefault())}function u(e){if(!h()&&!c(l.current)&&e.clipboardData)for(const n of e.clipboardData.items)"string"===n.kind&&"application/vnd.observablehq+json"===n.type&&(n.getAsString((e=>{const n=JSON.parse(e);t({type:"selectionPaste",nodes:n})})),e.preventDefault())}return addEventListener("keydown",e),document.addEventListener("cut",s),document.addEventListener("copy",r),document.addEventListener("paste",u),()=>{removeEventListener("keydown",e),document.removeEventListener("cut",s),document.removeEventListener("copy",r),document.removeEventListener("paste",u)}}),[t,n])}(e,t,l,n),function(e){const{asPath:n,query:{cloudFileProvider:t}}=(0,r.useRouter)();(0,s.useEffect)((()=>{"microsoftData"!==t&&"googleData"!==t||(window.history.replaceState(null,"",n.split("?")[0]),e({type:"showModal",modal:"cloudFile",modalProps:{provider:t}}))}),[t,e,n])}(l),(0,s.useEffect)((()=>{function e(e){var n;(null===(n=e.dataTransfer)||void 0===n?void 0:n.types.includes("Files"))&&l({type:"showPane",pane:"files"})}return addEventListener("dragenter",e),()=>removeEventListener("dragenter",e)}),[l])}},35831:function(e,n,t){t.d(n,{D:function(){return c}});var s=t(67294),r=t(18643),l=t(74080),i=t(51289),a=t(66421),o=t(76020);function c(e){let n;function t(){n&&n.close(),n=void 0}const c=(0,o.x)(e,(()=>{if(!i.Qg)return;const{notebook:s,currentUser:c}=e.getState(),{id:d}=s,u=(0,a.ZK)(s);(0,l.QY)(s)?(n&&n.id===d&&n.clientRole===u||(t(),n=new r.Z((0,o.Q)(e),u,d)),n.setState(s,c)):t()}));(0,s.useEffect)((()=>()=>{t(),c()}))}},42019:function(e,n,t){t.d(n,{h:function(){return r}});var s=t(27193);function r(e){return e.initialCollection||e.collections.find(function(e){const n=(0,s.Ui)(e);return e=>n.includes((0,s.Ui)(e))}(e.model))||e.collections[0]}}}]);