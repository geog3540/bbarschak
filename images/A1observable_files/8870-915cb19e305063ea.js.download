(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8870],{27011:function(t,e,n){t.exports=function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(t),o=n(e);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function u(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){if(null==t)return{};var n,r=function(t,e){if(null==t)return{};for(var n,r={},o=Object.keys(t),a=0;a<o.length;a++)n=o[a],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),a=0;a<o.length;a++)n=o[a],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var t,r,o=h(e);return!(r=n?(t=h(this).constructor,Reflect.construct(o,arguments,t)):o.apply(this,arguments))||"object"!=typeof r&&"function"!=typeof r?f(this):r}}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){return new Promise((function(n,r){var o,a=new Image;a.onload=function(){return n(a)},a.onerror=r,0==(null!==(o=t)&&!!o.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&e&&(a.crossOrigin=e),a.src=t}))}var w,b=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),M="undefined"!=typeof File,C={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},O=b?C.touch:C.desktop,I="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,P={x:.5,y:.5},D=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(u,o.default.Component);var t,e,n,r=g(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i(f(e=r.call(this,t)),"state",{drag:!1,my:null,mx:null,image:P}),i(f(e),"handleImageReady",(function(t){var n=e.getInitialSize(t.width,t.height);n.resource=t,n.x=.5,n.y=.5,n.backgroundColor=e.props.backgroundColor,e.setState({drag:!1,image:n},e.props.onImageReady),e.props.onLoadSuccess(n)})),i(f(e),"clearImage",(function(){e.canvas.getContext("2d").clearRect(0,0,e.canvas.width,e.canvas.height),e.setState({image:P})})),i(f(e),"handleMouseDown",(function(t){(t=t||window.event).preventDefault(),e.setState({drag:!0,mx:null,my:null})})),i(f(e),"handleMouseUp",(function(){e.state.drag&&(e.setState({drag:!1}),e.props.onMouseUp())})),i(f(e),"handleMouseMove",(function(t){var n,r,o,a,i,s,u,h,l,d,f,g,p,m,v,y;t=t||window.event,!1!==e.state.drag&&(t.preventDefault(),o={mx:n=t.targetTouches?t.targetTouches[0].pageX:t.clientX,my:r=t.targetTouches?t.targetTouches[0].pageY:t.clientY},y=e.props.rotate,y=(y%=360)<0?y+360:y,e.state.mx&&e.state.my&&(a=e.state.mx-n,i=e.state.my-r,s=e.state.image.width*e.props.scale,u=e.state.image.height*e.props.scale,l=(h=e.getCroppingRect()).x,d=h.y,l*=s,d*=u,f=function(t){return t*(Math.PI/180)},g=Math.cos(f(y)),m=d+-a*(p=Math.sin(f(y)))+i*g,v={x:(l+a*g+i*p)/s+1/e.props.scale*e.getXScale()/2,y:m/u+1/e.props.scale*e.getYScale()/2},e.props.onPositionChange(v),o.image=c(c({},e.state.image),v)),e.setState(o),e.props.onMouseMove(t))})),i(f(e),"setCanvas",(function(t){e.canvas=t})),e.canvas=null,e}return t=u,(e=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(I=1);var t,e,n=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(n),document&&(t=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){t=!1}return t}()&&{passive:!1},e=O.native,document.addEventListener(e.move,this.handleMouseMove,t),document.addEventListener(e.up,this.handleMouseUp,t),b&&(document.addEventListener(e.mouseMove,this.handleMouseMove,t),document.addEventListener(e.mouseUp,this.handleMouseUp,t)))}},{key:"componentDidUpdate",value:function(t,e){this.props.image&&this.props.image!==t.image||this.props.width!==t.width||this.props.height!==t.height||this.props.backgroundColor!==t.backgroundColor?this.loadImage(this.props.image):this.props.image||e.image===P||this.clearImage();var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(n),this.paintImage(n,this.state.image,this.props.border),t.image===this.props.image&&t.width===this.props.width&&t.height===this.props.height&&t.position===this.props.position&&t.scale===this.props.scale&&t.rotate===this.props.rotate&&e.my===this.state.my&&e.mx===this.state.mx&&e.image.x===this.state.image.x&&e.image.y===this.state.image.y&&e.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var t;document&&(t=O.native,document.removeEventListener(t.move,this.handleMouseMove,!1),document.removeEventListener(t.up,this.handleMouseUp,!1),b&&(document.removeEventListener(t.mouseMove,this.handleMouseMove,!1),document.removeEventListener(t.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var t=this.props,e=t.width,n=t.height,r=t.rotate,o=t.border,a={},i=p(this.getBorders(o),2),s=i[0],u=i[1],c=e,h=n;return this.isVertical()?(a.width=h,a.height=c):(a.width=c,a.height=h),a.width+=2*s,a.height+=2*u,{canvas:a,rotate:r,width:e,height:n,border:o}}},{key:"getImage",value:function(){var t=this.getCroppingRect(),e=this.state.image;t.x*=e.resource.width,t.y*=e.resource.height,t.width*=e.resource.width,t.height*=e.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=t.height,n.height=t.width):(n.width=t.width,n.height=t.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),e.backgroundColor&&(r.fillStyle=e.backgroundColor,r.fillRect(-t.x,-t.y,e.resource.width,e.resource.height)),r.drawImage(e.resource,-t.x,-t.y),n}},{key:"getImageScaledToCanvas",value:function(){var t=this.getDimensions(),e=t.width,n=t.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=e):(r.width=e,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var t=this.props.width/this.props.height,e=this.state.image.width/this.state.image.height;return Math.min(1,t/e)}},{key:"getYScale",value:function(){var t=this.props.height/this.props.width,e=this.state.image.height/this.state.image.width;return Math.min(1,t/e)}},{key:"getCroppingRect",value:function(){var t=this.props.position||{x:this.state.image.x,y:this.state.image.y},e=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:t.x-e/2,y:t.y-n/2,width:e,height:n},o=0,a=1-r.width,i=0,s=1-r.height;return(this.props.disableBoundaryChecks||1<e||1<n)&&(o=-r.width,i=-r.height,s=a=1),c(c({},r),{},{x:Math.max(o,Math.min(r.x,a)),y:Math.max(i,Math.min(r.y,s))})}},{key:"loadImage",value:function(t){var e;M&&t instanceof File?this.loadingImage=(e=t,new Promise((function(t,n){var r=new FileReader;r.onload=function(e){try{var r=y(e.target.result);t(r)}catch(e){n(e)}},r.readAsDataURL(e)})).then(this.handleImageReady).catch(this.props.onLoadFailure)):"string"==typeof t&&(this.loadingImage=y(t,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(t,e){var n,r,o=this.getDimensions();return e/t<o.height/o.width?r=t*((n=this.getDimensions().height)/e):n=e*((r=this.getDimensions().width)/t),{height:n,width:r}}},{key:"paintImage",value:function(t,e,n,r){var o,a=3<arguments.length&&void 0!==r?r:I;e.resource&&(o=this.calculatePosition(e,n),t.save(),t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(this.props.rotate*Math.PI/180),t.translate(-t.canvas.width/2,-t.canvas.height/2),this.isVertical()&&t.translate((t.canvas.width-t.canvas.height)/2,(t.canvas.height-t.canvas.width)/2),t.scale(a,a),t.globalCompositeOperation="destination-over",t.drawImage(e.resource,o.x,o.y,o.width,o.height),e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.fillRect(o.x,o.y,o.width,o.height)),t.restore())}},{key:"calculatePosition",value:function(t,e){t=t||this.state.image;var n=p(this.getBorders(e),2),r=n[0],o=n[1],a=this.getCroppingRect(),i=t.width*this.props.scale,s=t.height*this.props.scale,u=-a.x*i,c=-a.y*s;return this.isVertical()?(u+=o,c+=r):(u+=r,c+=o),{x:u,y:c,height:s,width:i}}},{key:"paint",value:function(t){t.save(),t.scale(I,I),t.translate(0,0),t.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var e,n,r,o,a,i,s,u,c=this.props.borderRadius,h=this.getDimensions(),l=p(this.getBorders(h.border),2),d=l[0],f=l[1],g=h.canvas.height,m=h.canvas.width;c=Math.max(c,0),c=Math.min(c,m/2-d,g/2-f),t.beginPath(),e=t,o=m-2*(n=d),a=g-2*(r=f),0===(i=c)?e.rect(n,r,o,a):(s=o-i,u=a-i,e.translate(n,r),e.arc(i,i,i,Math.PI,1.5*Math.PI),e.lineTo(s,0),e.arc(s,i,i,1.5*Math.PI,2*Math.PI),e.lineTo(o,u),e.arc(s,u,i,2*Math.PI,.5*Math.PI),e.lineTo(i,a),e.arc(i,u,i,.5*Math.PI,Math.PI),e.translate(-n,-r)),t.rect(m,0,-m,g),t.fill("evenodd"),t.restore()}},{key:"render",value:function(){var t=this.props,e=(t.scale,t.rotate,t.image,t.border,t.borderRadius,t.width,t.height,t.position,t.color,t.backgroundColor,t.style),n=(t.crossOrigin,t.onLoadFailure,t.onLoadSuccess,t.onImageReady,t.onImageChange,t.onMouseUp,t.onMouseMove,t.onPositionChange,t.disableBoundaryChecks,t.disableHiDPIScaling,t.disableCanvasRotation,d(t,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),r=this.getDimensions(),a={width:r.canvas.width,height:r.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},i={width:r.canvas.width*I,height:r.canvas.height*I,style:c(c({},a),e)};return i[O.react.down]=this.handleMouseDown,b&&(i[O.react.mouseDown]=this.handleMouseDown),o.default.createElement("canvas",s({ref:this.setCanvas},i,n))}}])&&a(t.prototype,e),n&&a(t,n),u}();return i(D,"propTypes",{scale:r.default.number,rotate:r.default.number,image:r.default.oneOfType([r.default.string].concat(function(t){if(Array.isArray(t))return v(t)}(w=M?[r.default.instanceOf(File)]:[])||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(w)||m(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:r.default.oneOfType([r.default.number,r.default.arrayOf(r.default.number)]),borderRadius:r.default.number,width:r.default.number,height:r.default.number,position:r.default.shape({x:r.default.number,y:r.default.number}),color:r.default.arrayOf(r.default.number),backgroundColor:r.default.string,crossOrigin:r.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:r.default.func,onLoadSuccess:r.default.func,onImageReady:r.default.func,onImageChange:r.default.func,onMouseUp:r.default.func,onMouseMove:r.default.func,onPositionChange:r.default.func,disableBoundaryChecks:r.default.bool,disableHiDPIScaling:r.default.bool,disableCanvasRotation:r.default.bool}),i(D,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),D}(n(45697),n(67294))},98280:function(t,e,n){"use strict";n.d(e,{ZP:function(){return s},wx:function(){return a},yi:function(){return i}});var r=n(22954);function o(t,e){return function(n){return t+n*e}}function a(t,e){var n=e-t;return n?o(t,n>180||n<-180?n-360*Math.round(n/360):n):(0,r.Z)(isNaN(t)?e:t)}function i(t){return 1===(t=+t)?s:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):(0,r.Z)(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?o(t,n):(0,r.Z)(isNaN(t)?e:t)}},22954:function(t,e){"use strict";e.Z=t=>()=>t},79591:function(t,e,n){"use strict";n.d(e,{ZP:function(){return i},hD:function(){return u}});var r=n(4447);function o(t,e,n,r,o){var a=t*t,i=a*t;return((1-3*t+3*a-i)*e+(4-6*a+3*i)*n+(1+3*t+3*a-3*i)*r+i*o)/6}var a=n(98280),i=function t(e){var n=(0,a.yi)(e);function o(t,e){var o=n((t=(0,r.B8)(t)).r,(e=(0,r.B8)(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),u=(0,a.ZP)(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=i(e),t.b=s(e),t.opacity=u(e),t+""}}return o.gamma=t,o}(1);function s(t){return function(e){var n,o,a=e.length,i=new Array(a),s=new Array(a),u=new Array(a);for(n=0;n<a;++n)o=(0,r.B8)(e[n]),i[n]=o.r||0,s[n]=o.g||0,u[n]=o.b||0;return i=t(i),s=t(s),u=t(u),o.opacity=1,function(t){return o.r=i(t),o.g=s(t),o.b=u(t),o+""}}}var u=s((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[r],i=t[r+1],s=r>0?t[r-1]:2*a-i,u=r<e-1?t[r+2]:2*i-a;return o((n-r/e)*e,s,a,i,u)}}));s((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),a=t[(r+e-1)%e],i=t[r%e],s=t[(r+1)%e],u=t[(r+2)%e];return o((n-r/e)*e,a,i,s,u)}}))},11262:function(t,e,n){"use strict";n.d(e,{UD:function(){return i},Y2:function(){return a},Ym:function(){return r},iM:function(){return s},yB:function(){return o}});const r=1e3,o=60*r,a=60*o,i=24*a,s=7*i},52576:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=new Date,o=new Date;function a(t,e,n,i){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return t(e=new Date(+e)),e},s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,r,o){var a,i=[];if(n=s.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return i;do{i.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return i},s.filter=function(n){return a((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(s.count=function(e,a){return r.setTime(+e),o.setTime(+a),t(r),t(o),Math.floor(n(r,o))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(i?function(e){return i(e)%t===0}:function(e){return s.count(0,e)%t===0}):s:null}),s}},74834:function(t,e,n){"use strict";var r=n(52576),o=n(11262),a=(0,r.Z)((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/o.UD}),(function(t){return t.getUTCDate()-1}));e.Z=a;a.range},81416:function(t,e,n){"use strict";n.d(e,{Ox:function(){return i},l6:function(){return s}});var r=n(52576),o=n(11262);function a(t){return(0,r.Z)((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/o.iM}))}var i=a(0),s=a(1),u=a(2),c=a(3),h=a(4),l=a(5),d=a(6);i.range,s.range,u.range,c.range,h.range,l.range,d.range}}]);