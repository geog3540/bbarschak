(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6869],{76364:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collection/[at]/[...specifier]",function(){return n(22194)}])},26561:function(e,t,n){"use strict";n.d(t,{H:function(){return c},I:function(){return o}});var s=n(85893),i=n(94184),r=n.n(i),l=n(12447);const o="w-100 mw-max-width ph4-l ph3 center",c=e=>{let{children:t}=e;const n=(0,l.GS)(l.ro);return(0,s.jsx)("div",{className:r()(o,n?"":"flex"),children:t})}},3896:function(e,t,n){"use strict";n.d(t,{m:function(){return l}});var s=n(85893),i=n(67294),r=n(60443);const l=()=>{const e=(0,i.useRef)(null);return(0,s.jsx)("footer",{ref:e,style:{zIndex:1,background:"linear-gradient(to bottom, rgba(255,255,255,0.0), white 2em)"},children:(0,s.jsx)("div",{className:"mv3",children:(0,s.jsx)(r.Z,{})})})}},73779:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var s=n(85893);n(67294);const i=[1,2,3,4,5].map((e=>(0,s.jsx)("div",{},e)))},23559:function(e,t,n){"use strict";n.d(t,{T:function(){return l},u:function(){return r}});var s=n(85893),i=n(36448);const r=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"ph3 pv4 tc ba b--silver br3 b--dashed bw1",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"f6 tc mid-gray lh-copy",children:t})})})};function l(e){let{type:t,owner:n,context:s}=e;const r=s?"team"===s.type?"Your team doesn't have":"You don't have":"".concat((0,i.RX)(n)," doesn't have");return"".concat(r," any public ").concat(t,".")}},9234:function(e,t,n){"use strict";n.d(t,{a:function(){return b}});var s=n(41799),i=n(69396),r=n(99534),l=n(85893),o=n(60357),c=n.n(o),a=n(94184),d=n.n(a),m=n(67294),u=n(51440),f=n(73779),h=n(23559);var x=e=>(0,l.jsx)("svg",(0,i.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 2C2.22386 2 2 2.22386 2 2.5V6.5C2 6.77614 2.22386 7 2.5 7H6.5C6.77614 7 7 6.77614 7 6.5V2.5C7 2.22386 6.77614 2 6.5 2H2.5ZM9.5 2C9.22386 2 9 2.22386 9 2.5V6.5C9 6.77614 9.22386 7 9.5 7H13.5C13.7761 7 14 6.77614 14 6.5V2.5C14 2.22386 13.7761 2 13.5 2H9.5ZM2 9.5C2 9.22386 2.22386 9 2.5 9H6.5C6.77614 9 7 9.22386 7 9.5V13.5C7 13.7761 6.77614 14 6.5 14H2.5C2.22386 14 2 13.7761 2 13.5V9.5ZM9.5 9C9.22386 9 9 9.22386 9 9.5V13.5C9 13.7761 9.22386 14 9.5 14H13.5C13.7761 14 14 13.7761 14 13.5V9.5C14 9.22386 13.7761 9 13.5 9H9.5Z",fill:"currentColor"})}));var g=e=>(0,l.jsx)("svg",(0,i.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2.5C2 2.22386 2.22386 2 2.5 2H13.5C13.7761 2 14 2.22386 14 2.5V3.5C14 3.77614 13.7761 4 13.5 4H2.5C2.22386 4 2 3.77614 2 3.5V2.5ZM2 5.5C2 5.22386 2.22386 5 2.5 5H8.5C8.77614 5 9 5.22386 9 5.5V6.5C9 6.77614 8.77614 7 8.5 7H2.5C2.22386 7 2 6.77614 2 6.5V5.5ZM2.5 9C2.22386 9 2 9.22386 2 9.5V10.5C2 10.7761 2.22386 11 2.5 11H13.5C13.7761 11 14 10.7761 14 10.5V9.5C14 9.22386 13.7761 9 13.5 9H2.5ZM2 12.5C2 12.2239 2.22386 12 2.5 12H8.5C8.77614 12 9 12.2239 9 12.5V13.5C9 13.7761 8.77614 14 8.5 14H2.5C2.22386 14 2 13.7761 2 13.5V12.5Z",fill:"currentColor"})})),p=n(37724);function b(e){var{listTitle:t,response:n,items:o,filters:a,filterName:b,emptyMessage:j,children:v,ordered:y=!1,pagination:N=!0,sorts:w,canFormat:C=!0,columns:Z=1,headingSeparator:k,className:_="mb7"}=e,S=(0,r.Z)(e,["listTitle","response","items","filters","filterName","emptyMessage","children","ordered","pagination","sorts","canFormat","columns","headingSeparator","className"]);const[U,H]=function(e,t){const{0:n,1:s}=(0,m.useState)(t);return(0,m.useEffect)((()=>{const t=p.X.getItem(e);t&&s(t)}),[e]),(0,m.useEffect)((()=>{p.X.setItem(e,n.toString())}),[e,n]),[n,s]}("listFormat","grid"),M=C&&!y?U:"list",V=2===Z,T=(0,l.jsxs)("div",{className:"grid"===M?"listing-grid":"",style:V?{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))",gridColumnGap:"2rem"}:{},children:[0===n.results.length&&j&&(0,l.jsx)("div",{className:"mb4",style:{gridColumn:"1 / -1"},children:(0,l.jsx)(h.u,{children:j})}),n.results.map(((e,t)=>(0,l.jsx)("div",{className:d()("display-grid","list"===M&&t>0&&"curated_result"!==e.type&&!V?"bt b--light-silver pt2":""),children:v(e,M,t)},e.id))),f.y]});return(0,l.jsxs)("div",(0,i.Z)((0,s.Z)({},S),{className:"jsx-bef707de879ebfe8 "+(_||""),children:[(0,l.jsxs)("div",{className:"jsx-bef707de879ebfe8 flex pv2 justify-between",children:[t,a?a():(0,l.jsx)("div",{className:"jsx-bef707de879ebfe8"}),!y&&(0,l.jsxs)("div",{className:"jsx-bef707de879ebfe8 flex items-center flex-column flex-row-ns self-end",children:[w||(0,l.jsx)("div",{className:"jsx-bef707de879ebfe8"}),C&&(0,l.jsxs)("div",{className:"jsx-bef707de879ebfe8 mv1 flex mt0-ns mt2 ba b--silver br2 items-stretch self-end",children:[(0,l.jsx)("button",{"aria-label":"Display as grid",onClick:()=>H("grid"),className:"jsx-bef707de879ebfe8 "+(d()("clean-button bn ma0 pointer br2 br--left tooltipped tooltipped-s hover-dark-gray hover-bg-near-white pa1 flex items-center","grid"===U?"dark-gray bg-near-white":"moon-gray bg-transparent")||""),children:(0,l.jsx)(x,{})}),(0,l.jsx)("div",{className:"jsx-bef707de879ebfe8 br b--silver"}),(0,l.jsx)("button",{"aria-label":"Display as list",onClick:()=>H("list"),className:"jsx-bef707de879ebfe8 "+(d()("clean-button bn ma0 pointer br2 br--left tooltipped tooltipped-s hover-dark-gray hover-bg-near-white pa1 flex items-center","list"===U?"dark-gray bg-near-white ":"moon-gray bg-transparent")||""),children:(0,l.jsx)(g,{})})]})]})]}),N?(0,l.jsx)(u.t,{response:n,itemName:o,filterName:b,headingSeparator:k,children:T}):T,(0,l.jsx)(c(),{id:"bef707de879ebfe8",children:".listing-grid.jsx-bef707de879ebfe8{display:grid;grid-gap:1.75em;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}@media screen and (min-width:30em)and (max-width:50em){.listing-grid.jsx-bef707de879ebfe8{grid-template-columns:repeat(2,1fr)}}.clean-button.jsx-bef707de879ebfe8:focus{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}"})]}))}},51440:function(e,t,n){"use strict";n.d(t,{t:function(){return f}});var s=n(41799),i=n(69396),r=n(85893),l=n(60357),o=n.n(l),c=n(94184),a=n.n(c),d=n(11163);n(67294);var m=n(40287),u=n(84193);function f(e){let{response:t,itemName:n="items",children:l,filterName:c,headingSeparator:f=!0}=e;const{page:h,per_page:x,total:g,truncated:p,results:{length:b}}=t,j=Math.ceil(g/x),v=(h-1)*x+1,y=v+b-1;let N=c&&"all"!==c?"".concat(c," ").concat(n):n;function w(){return g>x?(0,r.jsxs)("div",{className:"gray",children:["Showing"," ",v===y?(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"dark-gray",children:y.toLocaleString("en-US")})," of ",(0,r.jsx)("span",{className:"dark-gray",children:v.toLocaleString("en-US")})," ",N]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"dark-gray",children:[v.toLocaleString("en-US"),"-",y.toLocaleString("en-US")]})," of ",(0,r.jsxs)("span",{className:"dark-gray",children:[g.toLocaleString("en-US"),p?"+":""]})," ",N]})]}):(0,r.jsxs)("div",{className:"gray",children:[g>1?"Showing all ":g>0?"Showing ":"",(0,r.jsxs)("span",{className:"dark-gray",children:[g.toLocaleString("en-US"),p?"+":""]})," ",N]})}function C(e){let{direction:t,currentPage:n}=e;const{asPath:l}=(0,d.useRouter)(),o=new URL(l,"https://observablehq.com"),c=n+("prev"===t?-1:1);c<=1?o.searchParams.delete("page"):o.searchParams.set("page",String(Math.min(c,j)));const f={prev:c<1,next:c>Math.min(j,100)}[t],h="prev"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr1 ph2s",style:{transform:"rotate(180deg)"}})," ","Prev"]}):(0,r.jsxs)(r.Fragment,{children:["Next ",(0,r.jsx)(m.Z,{className:"ml1"})]}),x={title:"".concat("prev"===t?"Previous":"Next"," page"),className:a()(f?"o-40 pen":"hover-blue","mh1 gray f7 lh-solid pv2 clean-button dib ph2 no-underline flex items-center justify-center")};return f?(0,r.jsx)("span",(0,i.Z)((0,s.Z)({},x),{children:h})):(0,r.jsx)(u.Z,{href:o.toString(),children:(0,r.jsx)("a",(0,i.Z)((0,s.Z)({},x),{children:h}))})}function Z(e){let{className:t=""}=e;return g>x?(0,r.jsxs)("div",{className:"jsx-6dbde6417f0925cf "+(a()("flex",t)||""),children:[(0,r.jsx)(C,{direction:"prev",currentPage:h}),(0,r.jsx)(C,{direction:"next",currentPage:h}),(0,r.jsx)(o(),{id:"6dbde6417f0925cf",children:".clean-button:focus{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}"})]}):(0,r.jsx)("div",{style:{height:32}})}return 1===g&&(N=N.slice(0,-1)),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:a()("flex items-center justify-between pv1 mb2 f7 fw5",f?"bt b--light-silver":""),children:[(0,r.jsx)(w,{}),(0,r.jsx)(Z,{className:"nr2"})]}),l,g>x&&(0,r.jsxs)("div",{className:"mt4 f7 fw5 tc",children:[(0,r.jsx)(w,{}),(0,r.jsx)("div",{className:"mt2",children:(0,r.jsx)(Z,{className:"justify-center"})})]})]})}},18943:function(e,t,n){"use strict";n.d(t,{GR:function(){return o},r_:function(){return c}});var s=n(41799),i=n(69396),r=(n(42474),n(10159),n(39593)),l=n.n(r);n(83454);new(l())({max:1e3,ttl:6e5});function o(e){if(!e.startsWith("/"))return e;return new URL(e,"https://observablehq.com").toString()}function c(e,t){const n=e.items.filter(t);return(0,i.Z)((0,s.Z)({},e),{items:n})}},22194:function(e,t,n){"use strict";n.r(t),n.d(t,{CollectionPage:function(){return Y},__N_SSP:function(){return K},default:function(){return B}});var s=n(41799),i=n(69396),r=n(85893),l=n(9008),o=n.n(l),c=n(41664),a=n.n(c),d=n(67294),m=n(57787),u=n(9383),f=n(26561),h=n(3896),x=n(50309),g=n(40452),p=n(34049),b=n(37497),j=n(99414),v=n(9234),y=n(62806),N=n(23105),w=n(75288),C=n(77419),Z=n(39736),k=n(65878),_=n(19671),S=n(27193),U=n(64451),H=n(66421),M=n(56651),V=n(602);var T=n(11163),P=n.n(T);function F(){P().replace(P().asPath)}const R={collectionsUpdated:(e,t)=>{let{collection:n}=e,{removedFrom:s}=t;s.some((e=>e.id===n.id))&&F()},updatedNotebook:(e,t,n)=>{let{collection:r,notebook:l}=e;if(!r.listings.results.find((e=>"notebook"===e.listing_type&&e.id===l.id))||l.trashed)return void F();const o=(0,i.Z)((0,s.Z)({},r.listings),{results:r.listings.results.map((e=>"notebook"===e.listing_type&&e.id===l.id?(0,s.Z)({},e,l):e))});n({type:"updatedCollection",collection:(0,i.Z)((0,s.Z)({},r),{listings:o})})},reorderCollection:async(e,t,n)=>{let{collection:r}=e,{document_listing_id:l,collection_listing_id:o,oldOrder:c,newOrder:a}=t;try{await(0,V.Fv)("/collection/".concat(r.id,"/reorder"),{document_listing_id:l,collection_listing_id:o,order:a});const e=[...r.listings.results],[t]=e.splice(c,1);e.splice(a,0,t),n({type:"editCollectionSucceeded",collection:(0,i.Z)((0,s.Z)({},r),{listings:(0,i.Z)((0,s.Z)({},r.listings),{results:e})})})}catch(d){n({type:"showErrorToast",key:"editCollection",message:"Oops, reordering collection failed. Try again?"})}}};function L(e){return e.collection}const E={editCollectionSucceeded:(e,t)=>{let{collection:n}=t;return n},updatedCollection:(e,t)=>{let{collection:n}=t;return n}};var I=n(68298),O=n(77180),X=n(810),z=n(54937);const D=e=>({type:"collection",slices:{collection:{initialState:L(e),reducers:E},notebook:{initialState:{},reducers:(0,s.Z)({},z.x,O.L)}},listeners:(0,s.Z)({},X.l,I.R,R)});var q=n(21252),K=!0;const Y=e=>{const t=(0,q.M)(D,e);return(0,r.jsx)(M.zt,{store:t,children:(0,r.jsx)(G,{})})};var B=(0,k.Z)(Y);const G=(0,M.$j)((e=>{let{collection:t,currentUser:n,context:{defaultTeam:s}}=e;return{collection:t,currentUser:n,defaultTeam:s}}),(e=>({dispatch:e})))((e=>{let{collection:t,dispatch:n,currentUser:l,defaultTeam:c}=e;const a=(0,d.useCallback)(((e,r,o)=>{let c;if(c=null===o?r:null===r?o:o===e||r===e?e:r<e?r:o,null!==c&&c!==e){const r=t.listings.results[e];n((0,i.Z)((0,s.Z)({type:"reorderCollection"},"notebook"===r.listing_type?{document_listing_id:r.id}:{collection_listing_id:r.id}),{oldOrder:e,newOrder:c})),"notebook"===r.listing_type?(0,_.MR)((0,_.y6)({type:"collection:manage:reorderNotebookListing",data:{},collection:t,currentUser:l,eventVersion:1})):(0,_.MR)((0,_.y6)({type:"collection:manage:reorderCollectionListing",data:{},collection:t,currentUser:l,eventVersion:1}))}}),[t,n,l]),m=l&&(t.owner.login===l.login||l.teams.some((e=>t.owner.login===e.login)));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{content:"".concat((0,S.Ui)(t)," / ").concat((0,S.KY)(t.owner))}),(0,r.jsxs)(o(),{children:[(0,r.jsx)("link",{rel:"alternate",type:"application/rss+xml",title:(0,U.q)("".concat((0,S.Ui)(t)," / ").concat((0,S.KY)(t.owner))),href:"".concat("https://api.observablehq.com","/collection/@").concat(t.owner.login,"/").concat(t.slug,".rss")}),(0,r.jsx)(C.p1,{collection:t})]}),(0,r.jsxs)("div",{className:"flex flex-column min-vh-100",children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)("main",{className:"relative",style:{flex:1,zIndex:0},children:(0,r.jsxs)(f.H,{children:[m?(0,r.jsx)(x.X,{tab:"collections"}):(0,r.jsx)(x.mx,{currentUser:l,profileUser:t.owner,tab:"collections",collectionSlug:t.slug}),(0,r.jsx)("div",{className:"mt4 mb4 flex-auto",children:(0,r.jsx)(W,{collection:t,currentUser:l,dispatch:n,reorder:a,defaultTeam:c})})]})}),(0,r.jsx)(g.j,{}),(0,r.jsx)(Z.F1,{}),(0,r.jsx)(h.m,{})]})]})})),W=e=>{let{collection:t,currentUser:n,dispatch:s,reorder:i,defaultTeam:l}=e;const{owner:o}=t,c=t.listings.per_page*(t.listings.page-1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{style:N.r2,className:"ma0 fw7 near-black",children:[(0,r.jsxs)("div",{className:"flex mb2 f6 fw4 mid-gray items-center",children:[(0,r.jsx)(m.od,{title:"This collection is ".concat("private"===t.type?"team"===o.type?"only visible to team members":"only visible to you":"visible to everyone","."),collection:t,size:{height:16,width:16},className:"mr3"}),(0,r.jsx)(m.fI,{collection:t})]}),t.title]}),(0,r.jsx)("div",{className:"measure-wide mt2 f6 mid-gray lh-copy",children:t.description})]}),(0,H.D7)(n,t)&&(0,r.jsxs)("div",{className:"flex flex-no-shrink",children:[(0,r.jsx)(u.W,{collection:t}),(0,r.jsx)(a(),{href:"".concat(l?"/team/@".concat(l.login,"/new"):"/new","?collection=").concat(t.id),className:"no-underline",onClick:e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),s({type:"showModal",modal:"newNotebook",trigger:"click",source:"newNotebookButton",modalProps:{presetTeam:l,presetCollectionId:t.id}}))},children:(0,r.jsx)(b.aX,{"data-cy":"add-notebook",text:"New notebook",className:"ml2",colorless:!0,icon:j.Z})})]})]}),(0,r.jsx)(v.a,{emptyMessage:"This collection doesn\u2019t contain any listings yet.",response:t.listings,ordered:t.ordered,items:"listings",children:(e,l,o)=>(0,r.jsxs)("div",{"data-collection-order":o,className:"relative",children:[(0,r.jsx)("div",{className:"bg-light-blue drag-marker-before",style:{top:-2,right:0,left:0}}),"notebook"===e.listing_type?(0,r.jsx)(N.pg,{format:l,notebook:(0,y.H)(e),currentUser:n,dispatch:s,reorder:i,collection:t,index:o+c}):(0,H.D7)(n,e)?(0,r.jsx)(m.b3,{collection:e,format:l,reorder:i,parentCollection:t,parentCount:e.parent_collection_count,index:o+c}):(0,r.jsx)(m.Fl,{collection:e,format:l,parentCollection:t,index:o+c}),(0,r.jsx)("div",{className:"bg-light-blue drag-marker-after",style:{bottom:-1,right:0,left:0}})]})})]})}},24654:function(){}},function(e){e.O(0,[3714,5021,2656,8764,6817,270,793,6086,3993,1581,6646,6948,8367,9853,8780,5542,4905,7105,8616,709,8111,1861,8017,9774,2888,179],(function(){return t=76364,e(e.s=t);var t}));var t=e.O();_N_E=t}]);