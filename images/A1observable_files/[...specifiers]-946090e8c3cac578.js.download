(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9898],{62907:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[at]/[...specifiers]",function(){return n(42712)}])},82469:function(e,t,n){"use strict";var s=n(85893),o=n(94184),r=n.n(o),i=n(60443);t.Z=e=>{let{children:t,singleScreen:n=!1}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:r()("w-100 mw-max-width ph4-l ph3 center",n?"flex flex-column":""),style:n?{minHeight:"calc(100vh - 8rem)"}:{},children:(0,s.jsx)("div",{className:n?"flex-grow-1":"",style:n?{}:{minHeight:"calc(100vh - 24rem)"},children:t})}),(0,s.jsx)(i.Z,{minimal:n})]})}},73779:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var s=n(85893);n(67294);const o=[1,2,3,4,5].map((e=>(0,s.jsx)("div",{},e)))},77025:function(e,t,n){"use strict";n.d(t,{H:function(){return b},W:function(){return f}});var s=n(85893),o=n(56424),r=n(67294),i=n(37497),a=n(16691),l=n(75713),c=n(11233),d=n(58171),h=n(24576),m=n(93452),u=n(19671),p=n(66421),x=n(65538);const g=e=>{let{collection:t,isNew:n,onDismiss:x,submitCollection:g,currentUser:f}=e;const{owner:b}=t,{0:j,1:v}=(0,r.useState)(""),{0:k,1:y}=(0,r.useState)("private"),{0:w,1:N}=(0,r.useState)(!1),{0:C,1:L}=(0,r.useState)("");function S(e){e.preventDefault(),x(),j!==t.title&&(0,u.MR)((0,u.y6)({type:"collection:manage:setTitle",data:{},collection:t,currentUser:f,eventVersion:1})),k!==t.type&&(0,u.MR)((0,u.y6)({type:"collection:manage:setType",data:{newSetting:k},collection:t,currentUser:f,eventVersion:1})),w!==t.ordered&&(0,u.MR)((0,u.y6)({type:"collection:manage:setOrdered",data:{newSetting:w},collection:t,currentUser:f,eventVersion:1})),C!==t.description&&(0,u.MR)((0,u.y6)({type:"collection:manage:setDescription",data:{},collection:t,currentUser:f,eventVersion:1})),g({id:t.id,title:j,type:k,ordered:w,description:C,owner:b},t.title)}return(0,r.useEffect)((()=>{v(t.title),y(t.type),N(t.ordered),L(t.description)}),[v,y,N,L,t]),(0,s.jsx)(o.Vq,{onDismiss:x,"aria-labelledby":"modal-title",children:(0,s.jsxs)(l.l,{onSubmit:S,children:[(0,s.jsx)(m.xB,{title:n?"Create collection":"Edit collection",onDismiss:x}),(0,s.jsx)(m.fe,{children:(0,s.jsxs)("div",{className:"pt3",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"var(--spacing-medium)"},children:[(0,s.jsxs)("div",{className:"flex flex-column",children:[(0,s.jsx)("label",{className:"pb2 f6 fw5 mid-gray",htmlFor:"name",children:"Title"}),(0,s.jsx)(c.Z,{type:"text",name:"title",value:j,maxLength:250,placeholder:"Collection Title",onChange:e=>v(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex flex-column",children:[(0,s.jsx)("label",{className:"pb2 f6 fw5 mid-gray",htmlFor:"type",children:"Visibility"}),(0,s.jsxs)(d.P,{name:"type",className:"w-100",onChange:e=>y(e.target.value),value:k,children:[(0,s.jsx)("option",{value:"private",children:"team"===b.type?"Team Private":"Private"}),(0,p.Fh)(f,b)&&(0,s.jsx)("option",{value:"public",children:"Public"})]})]}),(0,s.jsxs)("div",{className:"flex flex-column",style:{gridColumnEnd:"span 2"},children:[(0,s.jsx)("label",{className:"pb2 f6 fw5 mid-gray",htmlFor:"name",children:"Description"}),(0,s.jsx)(h.g,{className:"h3 lh-copy",name:"description",value:C,maxLength:250,autoResize:!0,onChange:e=>L(e.target.value)})]}),(0,s.jsxs)("div",{style:{gridColumnEnd:"span 2"},children:[(0,s.jsx)(a.X,{id:"ordered",label:"Ordered",checked:w,onChange:e=>N(e.target.checked)}),(0,s.jsx)("div",{className:"pt2 pb1 f6 gray lh-f6",children:"Ordered collections allow you to configure the order in which notebooks are displayed to readers."})]})]})}),(0,s.jsx)(m.mz,{children:(0,s.jsxs)(i.CQ,{children:[(0,s.jsx)(i.kq,{text:"Cancel",onClick:x}),(0,s.jsx)(i.KM,{text:n?"Create collection":"Save changes",onClick:S})]})})]})})},f=(0,x.$j)((e=>{let{context:t,currentUser:n}=e;return{isNew:!0,currentUser:n,collection:{id:"",title:"",type:"private",description:"",ordered:!1,owner:t.context||n}}}),(e=>({submitCollection(t){e({type:"createCollection",collection:t})}})))(g),b=(0,x.$j)(((e,t)=>{let{currentUser:n}=e,{collection:s}=t;return{isNew:!1,collection:s,currentUser:n}}),(e=>({submitCollection(t,n){e({type:"editCollection",collection:t,oldTitle:n})}})))(g)},40452:function(e,t,n){"use strict";n.d(t,{j:function(){return v}});var s=n(41799),o=n(69396),r=n(93452),i=n(78111),a=n(85893),l=n(67294),c=n(8433),d=n(19671),h=n(65538);const m=(0,h.$j)((e=>{let{currentUser:t}=e;return{currentUser:t}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,onDismiss:n,collection:s,dispatch:o}=e;return(0,a.jsx)(r.On,{title:"Move to trash",icon:c.Z,description:"Are you sure you want to delete this collection? This operation cannot be undone. Notebooks in the collection will not be deleted.",onCancel:n,onConfirm:()=>{n(),o({type:"deleteCollection",collection:s}),(0,d.MR)((0,d.y6)({type:"collection:manage:delete",data:{},collection:s,currentUser:t,eventVersion:1}))},destructive:!0})}));var u=n(77025);const p=(0,h.$j)(null,(e=>({dispatch:e})))((e=>{let{onDismiss:t,dispatch:n}=e;return(0,a.jsx)(r.On,{title:"Remove section from homepage",icon:c.Z,description:"If you delete the \u201cQuick guides\u201d section from your homepage, you can add it back at any time on your Settings page.",onCancel:t,onConfirm:()=>{t(),n({type:"updateCurrentUserSetting",key:"guides",value:"hide"})}})}));var x=n(56424),g=n(28925),f=n(37497),b=n(75713);const j=(0,h.$j)((e=>{let{currentUser:t}=e;return{currentUser:t}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,dispatch:n,onDismiss:s,collection:o}=e;const{0:i,1:c}=(0,l.useState)(""),{custom_thumbnail:h,default_thumbnail:m}=o;return(0,a.jsx)(x.Vq,{onDismiss:s,"aria-labelledby":"modal-title",children:(0,a.jsxs)(b.l,{onSubmit:function(e){e.preventDefault(),n({type:"setCollectionThumbnail",thumbnail:i,collection:o}),(0,d.MR)((0,d.y6)({type:"collection:manage:setThumbnail",data:{},collection:o,currentUser:t,eventVersion:1})),s()},children:[(0,a.jsx)(r.xB,{title:"Set thumbnail",onDismiss:s}),(0,a.jsx)(r.fe,{children:(0,a.jsx)(g.E,{thumbnail:h,defaultThumbnail:m,onValueChange:e=>{c(e)}})}),(0,a.jsx)(r.mz,{children:(0,a.jsxs)(f.CQ,{children:[(0,a.jsx)(f.kq,{text:"Cancel",onClick:s}),(0,a.jsx)(f.KM,{text:"Set image",type:"submit"})]})})]})})})),v=(0,r.zm)((0,o.Z)((0,s.Z)({},i.$),{createCollection:u.W,editCollection:u.H,deleteCollection:m,hideGuides:p,setThumbnail:j}))},23559:function(e,t,n){"use strict";n.d(t,{T:function(){return i},u:function(){return r}});var s=n(85893),o=n(36448);const r=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"ph3 pv4 tc ba b--silver br3 b--dashed bw1",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"f6 tc mid-gray lh-copy",children:t})})})};function i(e){let{type:t,owner:n,context:s}=e;const r=s?"team"===s.type?"Your team doesn't have":"You don't have":"".concat((0,o.RX)(n)," doesn't have");return"".concat(r," any public ").concat(t,".")}},88188:function(e,t,n){"use strict";var s=n(41799),o=n(69396),r=n(85893);n(67294);t.Z=e=>(0,r.jsxs)("svg",(0,o.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2"},e),{children:[(0,r.jsx)("path",{d:"M3 15V1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M13 15V1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M15 3L1 3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M15 13L1 13",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("line",{x1:"5",y1:"10",x2:"10",y2:"10"}),(0,r.jsx)("line",{x1:"5",y1:"7",x2:"9",y2:"7"})]}))},9234:function(e,t,n){"use strict";n.d(t,{a:function(){return b}});var s=n(41799),o=n(69396),r=n(99534),i=n(85893),a=n(60357),l=n.n(a),c=n(94184),d=n.n(c),h=n(67294),m=n(51440),u=n(73779),p=n(23559);var x=e=>(0,i.jsx)("svg",(0,o.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 2C2.22386 2 2 2.22386 2 2.5V6.5C2 6.77614 2.22386 7 2.5 7H6.5C6.77614 7 7 6.77614 7 6.5V2.5C7 2.22386 6.77614 2 6.5 2H2.5ZM9.5 2C9.22386 2 9 2.22386 9 2.5V6.5C9 6.77614 9.22386 7 9.5 7H13.5C13.7761 7 14 6.77614 14 6.5V2.5C14 2.22386 13.7761 2 13.5 2H9.5ZM2 9.5C2 9.22386 2.22386 9 2.5 9H6.5C6.77614 9 7 9.22386 7 9.5V13.5C7 13.7761 6.77614 14 6.5 14H2.5C2.22386 14 2 13.7761 2 13.5V9.5ZM9.5 9C9.22386 9 9 9.22386 9 9.5V13.5C9 13.7761 9.22386 14 9.5 14H13.5C13.7761 14 14 13.7761 14 13.5V9.5C14 9.22386 13.7761 9 13.5 9H9.5Z",fill:"currentColor"})}));var g=e=>(0,i.jsx)("svg",(0,o.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2.5C2 2.22386 2.22386 2 2.5 2H13.5C13.7761 2 14 2.22386 14 2.5V3.5C14 3.77614 13.7761 4 13.5 4H2.5C2.22386 4 2 3.77614 2 3.5V2.5ZM2 5.5C2 5.22386 2.22386 5 2.5 5H8.5C8.77614 5 9 5.22386 9 5.5V6.5C9 6.77614 8.77614 7 8.5 7H2.5C2.22386 7 2 6.77614 2 6.5V5.5ZM2.5 9C2.22386 9 2 9.22386 2 9.5V10.5C2 10.7761 2.22386 11 2.5 11H13.5C13.7761 11 14 10.7761 14 10.5V9.5C14 9.22386 13.7761 9 13.5 9H2.5ZM2 12.5C2 12.2239 2.22386 12 2.5 12H8.5C8.77614 12 9 12.2239 9 12.5V13.5C9 13.7761 8.77614 14 8.5 14H2.5C2.22386 14 2 13.7761 2 13.5V12.5Z",fill:"currentColor"})})),f=n(37724);function b(e){var{listTitle:t,response:n,items:a,filters:c,filterName:b,emptyMessage:j,children:v,ordered:k=!1,pagination:y=!0,sorts:w,canFormat:N=!0,columns:C=1,headingSeparator:L,className:S="mb7"}=e,Z=(0,r.Z)(e,["listTitle","response","items","filters","filterName","emptyMessage","children","ordered","pagination","sorts","canFormat","columns","headingSeparator","className"]);const[T,U]=function(e,t){const{0:n,1:s}=(0,h.useState)(t);return(0,h.useEffect)((()=>{const t=f.X.getItem(e);t&&s(t)}),[e]),(0,h.useEffect)((()=>{f.X.setItem(e,n.toString())}),[e,n]),[n,s]}("listFormat","grid"),F=N&&!k?T:"list",M=2===C,R=(0,i.jsxs)("div",{className:"grid"===F?"listing-grid":"",style:M?{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))",gridColumnGap:"2rem"}:{},children:[0===n.results.length&&j&&(0,i.jsx)("div",{className:"mb4",style:{gridColumn:"1 / -1"},children:(0,i.jsx)(p.u,{children:j})}),n.results.map(((e,t)=>(0,i.jsx)("div",{className:d()("display-grid","list"===F&&t>0&&"curated_result"!==e.type&&!M?"bt b--light-silver pt2":""),children:v(e,F,t)},e.id))),u.y]});return(0,i.jsxs)("div",(0,o.Z)((0,s.Z)({},Z),{className:"jsx-bef707de879ebfe8 "+(S||""),children:[(0,i.jsxs)("div",{className:"jsx-bef707de879ebfe8 flex pv2 justify-between",children:[t,c?c():(0,i.jsx)("div",{className:"jsx-bef707de879ebfe8"}),!k&&(0,i.jsxs)("div",{className:"jsx-bef707de879ebfe8 flex items-center flex-column flex-row-ns self-end",children:[w||(0,i.jsx)("div",{className:"jsx-bef707de879ebfe8"}),N&&(0,i.jsxs)("div",{className:"jsx-bef707de879ebfe8 mv1 flex mt0-ns mt2 ba b--silver br2 items-stretch self-end",children:[(0,i.jsx)("button",{"aria-label":"Display as grid",onClick:()=>U("grid"),className:"jsx-bef707de879ebfe8 "+(d()("clean-button bn ma0 pointer br2 br--left tooltipped tooltipped-s hover-dark-gray hover-bg-near-white pa1 flex items-center","grid"===T?"dark-gray bg-near-white":"moon-gray bg-transparent")||""),children:(0,i.jsx)(x,{})}),(0,i.jsx)("div",{className:"jsx-bef707de879ebfe8 br b--silver"}),(0,i.jsx)("button",{"aria-label":"Display as list",onClick:()=>U("list"),className:"jsx-bef707de879ebfe8 "+(d()("clean-button bn ma0 pointer br2 br--left tooltipped tooltipped-s hover-dark-gray hover-bg-near-white pa1 flex items-center","list"===T?"dark-gray bg-near-white ":"moon-gray bg-transparent")||""),children:(0,i.jsx)(g,{})})]})]})]}),y?(0,i.jsx)(m.t,{response:n,itemName:a,filterName:b,headingSeparator:L,children:R}):R,(0,i.jsx)(l(),{id:"bef707de879ebfe8",children:".listing-grid.jsx-bef707de879ebfe8{display:grid;grid-gap:1.75em;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}@media screen and (min-width:30em)and (max-width:50em){.listing-grid.jsx-bef707de879ebfe8{grid-template-columns:repeat(2,1fr)}}.clean-button.jsx-bef707de879ebfe8:focus{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}"})]}))}},51440:function(e,t,n){"use strict";n.d(t,{t:function(){return u}});var s=n(41799),o=n(69396),r=n(85893),i=n(60357),a=n.n(i),l=n(94184),c=n.n(l),d=n(11163);n(67294);var h=n(40287),m=n(84193);function u(e){let{response:t,itemName:n="items",children:i,filterName:l,headingSeparator:u=!0}=e;const{page:p,per_page:x,total:g,truncated:f,results:{length:b}}=t,j=Math.ceil(g/x),v=(p-1)*x+1,k=v+b-1;let y=l&&"all"!==l?"".concat(l," ").concat(n):n;function w(){return g>x?(0,r.jsxs)("div",{className:"gray",children:["Showing"," ",v===k?(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"dark-gray",children:k.toLocaleString("en-US")})," of ",(0,r.jsx)("span",{className:"dark-gray",children:v.toLocaleString("en-US")})," ",y]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"dark-gray",children:[v.toLocaleString("en-US"),"-",k.toLocaleString("en-US")]})," of ",(0,r.jsxs)("span",{className:"dark-gray",children:[g.toLocaleString("en-US"),f?"+":""]})," ",y]})]}):(0,r.jsxs)("div",{className:"gray",children:[g>1?"Showing all ":g>0?"Showing ":"",(0,r.jsxs)("span",{className:"dark-gray",children:[g.toLocaleString("en-US"),f?"+":""]})," ",y]})}function N(e){let{direction:t,currentPage:n}=e;const{asPath:i}=(0,d.useRouter)(),a=new URL(i,"https://observablehq.com"),l=n+("prev"===t?-1:1);l<=1?a.searchParams.delete("page"):a.searchParams.set("page",String(Math.min(l,j)));const u={prev:l<1,next:l>Math.min(j,100)}[t],p="prev"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{className:"mr1 ph2s",style:{transform:"rotate(180deg)"}})," ","Prev"]}):(0,r.jsxs)(r.Fragment,{children:["Next ",(0,r.jsx)(h.Z,{className:"ml1"})]}),x={title:"".concat("prev"===t?"Previous":"Next"," page"),className:c()(u?"o-40 pen":"hover-blue","mh1 gray f7 lh-solid pv2 clean-button dib ph2 no-underline flex items-center justify-center")};return u?(0,r.jsx)("span",(0,o.Z)((0,s.Z)({},x),{children:p})):(0,r.jsx)(m.Z,{href:a.toString(),children:(0,r.jsx)("a",(0,o.Z)((0,s.Z)({},x),{children:p}))})}function C(e){let{className:t=""}=e;return g>x?(0,r.jsxs)("div",{className:"jsx-6dbde6417f0925cf "+(c()("flex",t)||""),children:[(0,r.jsx)(N,{direction:"prev",currentPage:p}),(0,r.jsx)(N,{direction:"next",currentPage:p}),(0,r.jsx)(a(),{id:"6dbde6417f0925cf",children:".clean-button:focus{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}"})]}):(0,r.jsx)("div",{style:{height:32}})}return 1===g&&(y=y.slice(0,-1)),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:c()("flex items-center justify-between pv1 mb2 f7 fw5",u?"bt b--light-silver":""),children:[(0,r.jsx)(w,{}),(0,r.jsx)(C,{className:"nr2"})]}),i,g>x&&(0,r.jsxs)("div",{className:"mt4 f7 fw5 tc",children:[(0,r.jsx)(w,{}),(0,r.jsx)("div",{className:"mt2",children:(0,r.jsx)(C,{className:"justify-center"})})]})]})}},5675:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var s=n(85893),o=n(93452),r=n(8433),i=n(66421),a=n(36448);const l=e=>{let{notebook:t,dispatch:n}=e;return(0,s.jsx)(o.On,{title:"Notebook is in the trash",icon:r.Z,description:"Notebooks can\u2019t be edited from the trash. ".concat((0,i.rY)(t)?" To edit this notebook, first move it out of the trash.":" Only team owners can move published or shared notebooks out of the trash."),onCancel:function(){history.length>2?history.back():location.replace((0,a.GN)(t.owner))},cancelText:(0,i.rY)(t)?"Leave in trash":"Back",onConfirm:function(){n({type:"trashRequested",trashed:!1})},confirmText:"Move out of trash",isConfirming:t.isUpdatingTrash})}},28067:function(e,t,n){"use strict";n.d(t,{T:function(){return o},r:function(){return r}});var s=n(51289);function o(e,t,n){let s=e[t];return void 0===s&&void 0!==n?n:(Array.isArray(s)&&(s=s[0]),"boolean"===typeof n?!!s&&"false"!==s:s)}function r(e){const t=s.Qg?location.pathname:"/",n=new URLSearchParams;return Object.entries(e).forEach((e=>{let[t,s]=e;s&&n.append(t,String(s))})),"".concat(t,"?").concat(n.toString())}},42712:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return yn},default:function(){return wn},parseParams:function(){return Nn}});var s=n(41799),o=n(85893),r=n(69396),i=n(60357),a=n.n(i),l=n(9008),c=n.n(l),d=n(67294),h=n(41664),m=n.n(h),u=n(37497),p=n(17905),x=n(74878),g=n(23869),f=n(54329),b=n(89905),j=n(42019),v=n(602),k=n(12447),y=n(19671),w=n(70915),N=n(27193),C=n(69150),L=n(88725),S=n(4242);const Z=e=>{let{notebook:t,collection:n,currentUser:s,formatTitleInCollection:r}=e;const{0:i,1:a}=(0,d.useState)(!1),{data:l}=(0,v.h_)(i?"/collection/@".concat(n.owner.login,"/").concat(n.slug):null),c=l?l.listings:[];return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-start mt3",children:[(0,o.jsx)(u.hU,{colorless:!0,icon:x.Z,onClick:()=>{a(!i)},className:"align-start mh2",style:i?{transform:"rotate(90deg)",padding:0}:{padding:0}}),(0,o.jsxs)(m(),{href:(0,w.WG)(n),className:"flex no-underline mid-gray hover-blue db pr2",onClick:()=>{(0,y.MR)((0,y.a$)({type:"collectionRequested",data:{trigger:"click",source:"collectionsSidebar"},eventVersion:1,currentUser:s}))},children:[(0,o.jsx)("div",{className:"break-word",title:(0,N.Ui)(n),children:r(n)}),(0,o.jsxs)("span",{className:"mh1",children:[" (",n.listing_count,") "]}),(0,o.jsx)(p.Z,{className:"flex-shrink-0"})]})]}),i?c.map(((e,s)=>(0,o.jsx)(d.Fragment,{children:"collection"===e.listing_type?(0,o.jsxs)(m(),{href:(0,w.WG)(e),className:"flex items-top no-underline mid-gray hover-blue ml4 pl2 mt3 db pr1",children:[(0,o.jsx)("div",{className:"break-word",title:(0,N.Ui)(e),children:r(e)}),(0,o.jsxs)("span",{className:"mh1 align-start",children:["(",e.listing_count,")"]}),(0,o.jsx)(p.Z,{className:"flex-shrink-0"})]}):e.id===t.id?(0,o.jsxs)("div",{className:"flex near-black items-center mt3 ml2 near-black",children:[(0,o.jsx)(g.Z,{className:"pa2"}),(0,o.jsx)("span",{className:"break-word",children:r(e)})]}):(0,o.jsx)(m(),{href:"".concat((0,L.Bi)(e),"?collection=@").concat(n.owner.login,"/").concat(n.slug),className:"no-underline mid-gray hover-blue ml4 pl2 mt3 db pr2",title:(0,N.Ui)(e),children:(0,o.jsx)("div",{className:"break-word",children:r(e)})})},s))):null]})},T=e=>{let{notebook:t,currentCollection:n,dispatch:s}=e;const{collections:r}=t;return r.length>1?(0,o.jsxs)("div",{className:"ph2 mt3 bt b--silver",children:[(0,o.jsx)("div",{className:"ph2 mt3 near-black",children:"Also listed in\u2026"}),r.map((e=>e.id!==n.id&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(m(),{href:"".concat((0,L.Bi)(t),"?collection=@").concat(e.owner.login,"/").concat(e.slug),className:"no-underline hover-blue",onClick:t=>{t.metaKey||t.ctrlKey||(s({type:"setOpenCollection",collection:e}),t.preventDefault())},children:(0,o.jsxs)("div",{className:"flex items-start ph2 mv3",children:[(0,o.jsx)(f.Z,{className:"mr2 flex-shrink-0",style:{marginTop:1}}),(0,o.jsx)("div",{title:(0,N.Ui)(e),className:"mr1 f6 fw5 lh-title break-word",children:(0,N.Ui)(e)})]})},e.id)})))]}):null},U=(0,S.$j)((e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}}),(e=>({dispatch:e})))((e=>{let{notebook:t,currentUser:n,dispatch:s}=e;const r=(0,j.h)(t),i=function(e){const t=(0,N.go)((0,N.Ui)(e)),n=new RegExp("(?:^".concat(t,"\\s*[-:/])|(?:[-:/]\\s*").concat(t,"$)"));return e=>{const t=(0,N.Ui)(e);return t.replace(n,"").trim()||t}}(r),{initialCollection:l}=t,c=l?l.listings:[];return(0,o.jsxs)("div",{className:a().dynamic([["f23edcff6078a1b8",[k.pp,C.Lv+15,C.Lv]]])+" fixed self-start bg-near-white overflow-y-auto pane z-1 br3 br--right dn-print",children:[(0,o.jsxs)("div",{className:a().dynamic([["f23edcff6078a1b8",[k.pp,C.Lv+15,C.Lv]]])+" pv3",children:[(0,o.jsxs)("div",{className:a().dynamic([["f23edcff6078a1b8",[k.pp,C.Lv+15,C.Lv]]])+" flex justify-between items-start ph2 mb1",children:[(0,o.jsx)("div",{className:a().dynamic([["f23edcff6078a1b8",[k.pp,C.Lv+15,C.Lv]]])+" flex items-start ",children:(0,o.jsxs)(m(),{href:(0,w.WG)(r),className:"flex no-underline hover-blue pv2 db near-black items-start",onClick:()=>{(0,y.MR)((0,y.a$)({type:"collectionRequested",data:{trigger:"click",source:"collectionsSidebar"},eventVersion:1,currentUser:n}))},children:[(0,o.jsx)(f.Z,{className:"flex-shrink-0 mr2"}),(0,o.jsx)("span",{style:{marginTop:-2},className:a().dynamic([["f23edcff6078a1b8",[k.pp,C.Lv+15,C.Lv]]])+" f5 lh-title fw6 mr1 break-word",children:(0,N.Ui)(r)}),(0,o.jsx)(p.Z,{className:"flex-shrink-0"})]})}),(0,o.jsx)(u.hU,{colorless:!0,icon:b.Z,onClick:()=>s({type:"toggleCollectionsSidebar"})})]}),(0,o.jsx)("div",{className:a().dynamic([["f23edcff6078a1b8",[k.pp,C.Lv+15,C.Lv]]]),children:c.map(((e,s)=>(0,o.jsx)(d.Fragment,{children:"collection"===e.listing_type?(0,o.jsx)(Z,{collection:e,formatTitleInCollection:i,notebook:t,currentUser:n}):e.id===t.id?(0,o.jsxs)("div",{title:(0,N.Ui)(e),className:a().dynamic([["f23edcff6078a1b8",[k.pp,C.Lv+15,C.Lv]]])+" flex near-black mt3 near-black break-word",children:[(0,o.jsx)(g.Z,{className:"ph2 flex-shrink-0 self-start",style:{marginTop:1}}),(0,o.jsx)("div",{className:a().dynamic([["f23edcff6078a1b8",[k.pp,C.Lv+15,C.Lv]]])+" pr2",children:i(e)})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(m(),{href:"".concat((0,L.Bi)(e),"?collection=@").concat(r.owner.login,"/").concat(r.slug),style:{marginLeft:16},className:"no-underline mid-gray hover-blue mt3 pl3 pr2 db break-word",onClick:()=>{(0,y.MR)((0,y.a$)({type:"notebookRequested",data:{trigger:"click",source:"collectionsSidebar"},eventVersion:1,currentUser:n}))},title:(0,N.Ui)(e),children:i(e)})})},s)))})]}),(0,o.jsx)(T,{notebook:t,currentCollection:r,dispatch:s}),(0,o.jsx)(a(),{id:"f23edcff6078a1b8",dynamic:[k.pp,C.Lv+15,C.Lv],children:".pane.__jsx-style-dynamic-selector{bottom:0;left:0;right:0;top:0}@media ".concat(k.pp,"{.pane.__jsx-style-dynamic-selector{top:").concat(C.Lv+15,"px;width:220px;max-height:-webkit-calc(100vh - 2 * ").concat(C.Lv,"px);max-height:-moz-calc(100vh - 2 * ").concat(C.Lv,"px);max-height:calc(100vh - 2 * ").concat(C.Lv,"px)}}")})]})}));var F=n(60443),M=n(94717),R=n(75288),E=n(77419),_=n(39736),P=n(94184),V=n.n(P),D=n(62806),A=n(23105),H=n(21142),I=n(34236);const z={bannerText:"Create interactive documents like this one.",buttonText:"Sign up for free",footerText:(0,o.jsxs)(o.Fragment,{children:["Learn new data visualization techniques. Perform complex data analysis."," ",(0,o.jsx)("br",{})," Publish your findings in a compelling document. All in the same tool."]})},O="@observablehq/featured-creators",B=(0,S.$j)((e=>{let{notebook:t}=e;return{canShowBanner:null===t.focusId&&null===t.selectionFocusId&&0===t.selection.size}}),(e=>({dispatch:e})))((e=>{let{canShowBanner:t,dispatch:n}=e;const{0:s,1:r}=(0,d.useState)(t);function i(){n({type:"showModal",modal:"login",modalProps:{loginScreen:"signup"},trigger:"click",source:"welcomeMat"})}(0,d.useEffect)((()=>{s&&(document.cookie.split("; ").includes("dismissedWelcomeBanner=true")||"fork"===new URLSearchParams(location.search).get("intent"))&&r(!1)}),[s]),(0,d.useEffect)((()=>{s&&!t&&r(!1)}),[s,t]);const a=(0,d.useRef)(null),l=(0,I.E)(a,{defaultValue:!0}),c=(0,k.GS)(k.ro),h=!(0,k.GS)(k.hs)?4:8;let u=!0,x=new Array(h).fill(null);const{data:g,error:f}=(0,v.h_)("/collection/".concat(O,"?with_listings=false"));g&&(x=g.listings.filter((e=>"notebook_reader"===e.type)),0===x.length&&(u=!1)),f&&(u=!1,console.error("/collection/".concat(O," failed to load.")));const j=x.map((e=>null!==e?(0,D.H)(e):null));return(0,o.jsxs)(o.Fragment,{children:[s&&(0,o.jsx)("div",{className:"fixed bottom-0 w-100 z-1 dn-print",children:(0,o.jsx)("div",{className:"flex absolute left-0 right-0 f6 fw6 white bg-observable-navy z-2 items-center","data-cy":"welcome-mat-banner",style:{transition:"transform 0.1s",transform:l?"translateY(0)":"translateY(-100%)"},children:(0,o.jsxs)("div",{className:V()("w-100 mw-page ph4-ns ph3 center","pv2 flex items-center"),children:[(0,o.jsx)("span",{className:"mr3 lh-copy",children:z.bannerText}),(0,o.jsx)("div",{className:"flex-grow-1",children:(0,o.jsx)("button",{className:"pa2 f6 fw6 nowrap white br2 pointer bn bg-observable-blue-light",onClick:i,children:z.buttonText})}),(0,o.jsx)("button",{className:"flex ph3 nr3 moon-gray hover-white items-center self-stretch bg-transparent bn pointer","aria-label":"Close welcome message",onClick:function(){r(!1),n({type:"dismissWelcomeMatBanner"});const e=new Date(Date.now()+864e5).toUTCString();document.cookie="dismissedWelcomeBanner=true; Expires=".concat(e,"; Path=/")},children:(0,o.jsx)(b.Z,{className:"w1 h1"})})]})})}),(0,o.jsxs)("div",{ref:a,className:"dn-print",children:[(0,o.jsx)("div",{className:"flex mt6 pa4 serif tc white items-center justify-center bg-observable-navy","data-cy":"welcome-mat-footer",style:{height:250},children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"pb3 f4-ns f5 lh-copy",children:(0,o.jsx)("span",{children:z.footerText})}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"ph4 pv2 f6 fw6 white br2 pointer bn bg-observable-blue-light",onClick:i,children:z.buttonText})})]})}),(0,o.jsx)(H.Z,{children:u?(0,o.jsxs)("div",{className:"pv3",children:[(0,o.jsxs)("div",{className:"pv3 flex justify-between items-baseline",children:[(0,o.jsx)("div",{className:"truncate serif f4 fw7 near-black",children:c?"More from Observable":"More from Observable creators"}),j.length>h?(0,o.jsxs)(m(),{href:"/collection/".concat(O),className:"db flex mt2 ml2 f7 fw6 nowrap no-underline blue hover-lightest-blue items-center lh-f7",children:["View all",(0,o.jsx)(p.Z,{})]}):null]}),(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)("div",{className:"nb4 nr3 flex-auto",children:j.slice(0,h).map(((e,t)=>e&&(0,o.jsx)("div",{className:"dib w-50-m w-25-l w-100 pr3 mb4",children:(0,o.jsx)(A.c1,{notebook:e,format:"grid",saveListingSelectionEvent:()=>{n({type:"welcomeMatNotebookClick",clickedNotebookId:e.id})},dispatch:n,currentUser:null})},t)))})})]}):null}),(0,o.jsx)(F.Z,{reduceTopMargin:!0})]})]})}));var q=n(5675),G=n(88184),$=n(96455),X=n(93177),W=n(11163),Y=n(19702),K=n(87769),Q=n(84193),J=n(3142);const ee=e=>{let{dispatch:t,notebook:n,stuck:s,menuActionList:r}=e;const{id:i,publishVersion:a,saveVersion:l,model:c}=n,h=(0,J.cg)(n),{data:m}=(0,v.h_)(a&&l>a?"/document/".concat(i,"/history"):null),u=(0,d.useMemo)((()=>m?function(e,t,n){let s=0,o=e+1;for(let r=n.length-1;r>=0;r--){const e=n[r];if(e.version===t)break;e.version>=o||("revert"!==e.type?("modify_title"!==e.type&&s++,o=e.version):o=e.node_id+1)}return s}(l,a,[...m.events,...c.history.filter(Boolean)]):0),[a,l,c,m]);return(0,o.jsx)(Y.jL,{bgColor:"bg-observable-dark-gold",color:"white",stuck:s,menuActionList:r,children:(0,o.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,o.jsxs)(Y.y,{icon:K.Z,children:[(0,o.jsx)(Y.TR,{children:u>0?"".concat(u," unpublished edit").concat(u>1?"s":""):"Published version"}),(0,o.jsxs)("span",{className:"ml2",children:["This notebook needs to be made"," ",(0,o.jsx)("b",{children:h?"unlisted":"public"})," to share these changes."]})]}),(0,o.jsxs)("div",{className:"flex items-center flex-wrap justify-end",children:[(0,o.jsxs)(Y.N_,{icon:K.Z,onClick:()=>{t({type:"publishLiveRequested",unlisted:h})},children:["Make ",h?"unlisted":"public"]}),(0,o.jsx)(Q.Z,{href:"/@observablehq/public-and-published-notebooks",children:(0,o.jsx)(Y.N_,{icon:p.Z,iconPosition:"right",children:"Learn more"})})]})]})})};var te=n(34091),ne=n(66421),se=n(36448);const oe=d.memo((function(e){let t,{dispatch:n,notebook:i,currentUser:a}=e;const l=(0,ne.iW)(a,i.owner),c=(0,ne.zB)(i);return"public"===i.owner.tier&&(t="This notebook is read-only until you make it public, or upgrade your ".concat("team"===i.owner.type?"team":"account"," to work in private.")),(0,o.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,o.jsxs)(Y.y,{icon:te.Z,children:[(0,o.jsx)(Y.TR,{className:"truncate mr2",children:"Read-only"}),(0,o.jsx)(Y.EX,{children:t})]}),(0,o.jsxs)("div",{className:"flex items-center flex-wrap justify-end",children:[c&&(0,o.jsx)(Y.N_,{icon:K.Z,onClick:()=>{n({type:"publishLiveRequested",unlisted:!1})},children:"Make public"}),l&&(0,o.jsx)(Y.N_,{onClick:()=>{const e=i.owner.id===(null===a||void 0===a?void 0:a.id)?(0,r.Z)((0,s.Z)({},a),{type:"individual"}):(0,se.xT)(a,i.owner);e&&n({type:"showModal",modal:"changeUserTier",modalProps:{user:e,initialTier:"pro"}})},children:"Upgrade to Pro\u2026"})]})]})})),re=e=>{let{dispatch:t,notebook:n,stuck:s,menuActionList:r,currentUser:i}=e;return(0,o.jsx)(Y.jL,{bgColor:"bg-observable-dark-gold",color:"white",stuck:s,menuActionList:r,children:(0,o.jsx)(oe,{dispatch:t,notebook:n,currentUser:i})})};var ie=n(25091);const ae=e=>{let{dispatch:t,stuck:n,menuActionList:s}=e;return(0,o.jsx)(Y.jL,{bgColor:"bg-gold",onExit:()=>t({type:"exitSafe"}),exitLabel:"Exit Safe Mode",stuck:n,menuActionList:s,children:(0,o.jsxs)(Y.y,{icon:ie.Z,children:[(0,o.jsx)(Y.TR,{children:"Safe mode enabled."})," ",(0,o.jsx)("span",{className:"dn di-ns",children:"Use this code-only view to fix issues that might crash or hang the normal editor."})]})})};var le=n(730),ce=n(5163),de=n(78009);const he=e=>{let{stuck:t,notebook:{spotlightParticipant:n,participants:s},dispatch:r,menuActionList:i}=e;const a=s.findIndex((e=>e.id===n));if(a<0)return null;const l=s[a];return(0,o.jsx)(Y.jL,{bgColor:"bg-".concat((0,le.mQ)(a)),color:"white",stuck:t,menuActionList:i,exitLabel:"Stop spotlighting",onExit:()=>r({type:"spotlight",id:null}),children:(0,o.jsxs)("div",{className:"flex justify-between w-100",children:[(0,o.jsxs)(Y.y,{icon:ce.Z,children:[(0,o.jsx)(Y.TR,{children:"Spotlighting"})," ",(0,o.jsx)(Y.EX,{children:(0,N.KY)(l)})]}),t&&(0,o.jsx)(de.l,{size:24,participants:[l]})]})})};var me=n(8433),ue=n(62990);const pe=d.memo((function(e){let{suggestionFrom:t}=e;return(0,o.jsxs)(Y.y,{icon:me.Z,children:[(0,o.jsx)(Y.TR,{className:"truncate",children:(0,se.RX)(t.closer)})," ",(0,o.jsx)(Y.EX,{children:"closed this suggestion to"})," ",(0,o.jsx)(Y.TR,{className:"truncate",children:(0,N.Ui)(t.to_title)})," ",(0,o.jsxs)(Y.EX,{children:["on ",(0,ue.LN)(t.close_time),"."]})]})})),xe=e=>{let{dispatch:t,notebook:n,stuck:s,menuActionList:r}=e;return(0,o.jsx)(Y.jL,{bgColor:"bg-near-white",color:"black",stuck:s,menuActionList:r,onExit:()=>t({type:"acknowledgeSuggestionClosed"}),exitLabel:"Dismiss this banner",children:(0,o.jsx)(pe,{suggestionFrom:n.suggestionFrom})})};var ge=n(71922);const fe=d.memo((function(e){let{suggestionFrom:t}=e;return(0,o.jsxs)(Y.y,{icon:ge.Z,children:[(0,o.jsx)(Y.TR,{className:"truncate",children:(0,se.RX)(t.closer)})," ",(0,o.jsx)(Y.EX,{children:"merged this into"})," ",(0,o.jsx)(Y.TR,{className:"truncate",children:(0,N.Ui)(t.to_title)})," ",(0,o.jsxs)(Y.EX,{children:["on ",(0,ue.LN)(t.close_time),"."]})]})})),be=e=>{let{dispatch:t,notebook:n,stuck:s,menuActionList:r}=e;return(0,o.jsx)(Y.jL,{bgColor:"bg-near-white",color:"black",stuck:s,menuActionList:r,onExit:()=>t({type:"acknowledgeSuggestionClosed"}),exitLabel:"Dismiss this banner",children:(0,o.jsx)(fe,{suggestionFrom:n.suggestionFrom})})};var je=n(51517),ve=n(15706);const ke=d.memo((function(e){let{id:t,owner:n,suggestionFrom:s,isClosingSuggestion:r,dispatch:i}=e;return(0,o.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,o.jsxs)(Y.y,{icon:ve.v,children:[(0,o.jsx)(Y.TR,{children:"Suggestion"})," ",(0,o.jsx)(Y.EX,{children:"sent to"})," ",(0,o.jsx)(Y.TR,{className:"truncate",children:(0,o.jsx)(Q.Z,{href:(0,L.Bi)({slug:null,id:s.to_id,owner:s.to_owner}),children:(0,o.jsxs)("a",{children:[(0,N.Ui)(s.to_title),s.description&&":"]})})}),s.description&&(0,o.jsxs)(Y.EX,{title:s.description,children:[" ","\u201c",s.description,"\u201d"]})]}),(0,o.jsxs)("div",{className:"flex items-center flex-wrap justify-end",children:[(0,o.jsx)(Y.N_,{icon:je.Z,onClick:()=>i({type:"loadCompare",base:{id:s.to_id,owner:s.to_owner},target:{id:t,owner:n},trigger:"click",source:"notebookContextMenu",loadType:"fork"}),children:"Compare"}),(0,o.jsx)(Y.N_,{disabled:r,icon:me.Z,onClick:()=>{i({type:"showModal",modal:"closeSuggestion",modalProps:{trigger:"click",source:"compareBanner"}})},children:"Close"})]})]})})),ye=e=>{let{dispatch:t,notebook:n,stuck:s,menuActionList:r}=e;return(0,o.jsx)(Y.jL,{bgColor:"bg-near-white",color:"black",stuck:s,menuActionList:r,onExit:()=>t({type:"dismissSuggestionOpenBanner"}),exitLabel:"Dismiss this banner for the remainder of this session",children:(0,o.jsx)(ke,{id:n.id,owner:n.owner,suggestionFrom:n.suggestionFrom,isClosingSuggestion:n.isClosingSuggestion,dispatch:t})})};var we=n(88188),Ne=n(76267),Ce=n(74080);const Le=e=>{let{dispatch:t,currentUser:n,notebook:s,stuck:r,menuActionList:i}=e;return(0,o.jsx)(Y.jL,{bgColor:"bg--observable-light-green",stuck:r,menuActionList:i,children:(0,o.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,o.jsxs)(Y.y,{icon:we.Z,children:[(0,o.jsxs)(Y.TR,{children:[(0,o.jsx)(Q.Z,{href:"/templates",children:(0,o.jsx)("a",{className:"no-underline",children:"Templates"})})," / "]}),(0,o.jsx)(Y.EX,{className:"fw4 white-80",children:(0,N.Ui)(s.model)})]}),(0,ne.rk)(n,s)&&(0,Ce.YW)(s)&&(0,o.jsx)(Y.N_,{disabled:s.isForking,icon:Ne.Z,onClick:()=>t({type:"forkRequested",trigger:"click",source:"templateBanner"}),children:"Fork to get started"})]})})};var Se=n(43164),Ze=n(63231),Te=n(98768);const Ue=d.memo((function(e){let{dispatch:t,notebook:n,currentUser:s}=e;const r=(0,W.useRouter)(),i=(0,ne.rk)(s,n);return(0,o.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,o.jsxs)(Y.y,{icon:Ze.Z,children:[(0,o.jsx)(Y.TR,{children:"Making temporary edits"}),i&&(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsx)(Y.EX,{children:"Fork to save your changes"})]})]}),(0,o.jsxs)("div",{className:"flex items-center flex-wrap justify-end",children:[(0,o.jsx)(Y.N_,{icon:Te.Z,onClick:()=>{n.saveVersion<n.initialLatestVersion?t({type:"loadVersion",version:n.saveVersion,autosave:!0}):r.replace(r.asPath)},children:"Discard"}),i&&(0,o.jsx)(Y.N_,{icon:Ne.Z,disabled:n.isForking,onClick:()=>t({type:"forkRequested",source:"tinkerBanner",trigger:"click"}),children:(0,Se.tJ)(n,s)})]})]})})),Fe=e=>{let{dispatch:t,notebook:n,stuck:s,menuActionList:r,currentUser:i}=e;return(0,o.jsx)(Y.jL,{bgColor:"bg-observable-dark-gold",color:"white",stuck:s,menuActionList:r,children:(0,o.jsx)(Ue,{dispatch:t,notebook:n,currentUser:i})})};var Me=n(9532);const Re=e=>{let{dispatch:t,notebook:n,stuck:s,menuActionList:r}=e;const i=(0,J.tK)(n)?"latest version":"version ".concat(n.saveVersion);return(0,o.jsx)(Y.jL,{bgColor:"bg-blue",onExit:()=>t({type:"exitVersionedMode"}),exitLabel:"Exit versioned mode",stuck:s,menuActionList:r,children:(0,o.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,o.jsxs)(Y.y,{icon:Me.Z,children:[(0,o.jsxs)(Y.TR,{children:["Showing ".concat(i),"."]})," ",(0,o.jsx)(Y.EX,{children:"Changes will not be saved."})]}),(0,ne.i3)(n)&&(0,Ce.g)(n)&&(0,o.jsx)(Y.N_,{icon:Te.Z,onClick:()=>t({type:"revertRequested",version:n.saveVersion,remote:!1}),children:"Restore version ".concat(n.saveVersion," of ").concat(n.initialLatestVersion)})]})})};var Ee=n(81685);const _e=e=>{let{notebook:t,dispatch:n}=e;return(0,ne.mG)(t)?{onSelect:()=>n({type:"showModal",modal:"authors"}),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ee.Z,{className:"mr2 h1 w1"}),"Set authors\u2026"]})}:null};var Pe=n(86384);const Ve=e=>{let{notebook:t,dispatch:n}=e;return(0,Ce.YE)(t)?{onSelect:()=>n({type:"loadCompare",base:{id:t.forkOf.id,owner:t.forkOf.owner},target:{id:t.id,owner:t.owner},trigger:"click",source:"notebookContextMenu",loadType:"fork"}),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(je.Z,{className:"mr2 h1 w1"}),"Compare fork"]})}:null},De=e=>{let{notebook:t,dispatch:n}=e;return(0,Ce.kh)(t)?{onSelect:e=>n({type:"loadCompare",base:{id:t.id,version:t.saveVersion,owner:t.owner},target:{id:t.id,owner:t.owner},trigger:"click",source:"notebookHeaderPromotedAction"===e?"notebookHeaderPromotedAction":"notebookContextMenu",loadType:"latest"}),disabled:(0,J.tK)(t),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(je.Z,{className:"mr2 h1 w1"}),"Compare latest"]})}:null},Ae=e=>{let{notebook:t,dispatch:n}=e;return(0,Ce.yj)(t)?{onSelect:()=>n({type:"loadCompare",base:{id:t.id,version:t.publishVersion,owner:t.owner},target:{id:t.id,version:t.saveVersion,owner:t.owner},trigger:"click",source:"notebookContextMenu",loadType:"published"}),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(je.Z,{className:"mr2 h1 w1"}),"Compare published"]})}:null};var He=n(26825);const Ie=e=>{let{notebook:t,dispatch:n}=e;const{id:s,slug:r,owner:i,saveVersion:a}=t;return{as:"a",href:"".concat("https://api.observablehq.com").concat((0,L.UW)({id:s,slug:r,owner:i}),"@").concat(a,".tgz?v=3"),className:"flex items-center no-underline",onClick:(0,ne.pT)(t)?e=>{e.preventDefault(),n({type:"downloadCode",trigger:"click",source:"notebookContextMenu"})}:void 0,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(He.Z,{className:"mr2 h1 w1"})," Download code"]})}};var ze=n(64804);const Oe=e=>{let{dispatch:t}=e;return{onSelect:()=>{t({type:"showModal",modal:"embed",modalProps:{},source:"notebookContextMenu"})},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ze.Z,{className:"mr2 h1 w1"}),"Embed cells"]})}};var Be=n(96675),qe=n(93797);const Ge=e=>{let{notebook:t,dispatch:n}=e;return(0,ne.GL)(t)?{onSelect:()=>n({type:"showModal",modal:"license"}),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(qe.Z,{className:"mr2 h1 w1"}),"Set license\u2026"]})}:null};var $e=n(82162);const Xe=e=>{let{notebook:{like:t},currentUser:n,dispatch:s}=e;return{onSelect:()=>s({type:"like",trigger:"click",source:"notebookHeaderPromotedAction"}),tooltip:n?"".concat(t?"Unlike":"Like"," this notebook"):"Sign in to like this notebook",children:(0,o.jsx)(Ye,{like:t})}},We=e=>{let{notebook:{like:t},currentUser:n,dispatch:s}=e;return n?{onSelect:()=>{s({type:"like",trigger:"click",source:"notebookContextMenu"})},tooltip:"".concat(t?"Unlike":"Like"," this notebook"),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($e.Z,{className:"mr2 w1 h1"}),t?"Unlike":"Like"]})}:null},Ye=e=>{let{like:t}=e;const n=(0,d.useRef)(t),s=t&&!n.current;return n.current=t,(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($e.Z,{className:s?"bump":"",color:t?"var(--dark-gray)":"inherit",fill:t?"var(--dark-gray)":"transparent"}),(0,o.jsx)(a(),{id:"6659368c4cbab750",children:"@-webkit-keyframes bump{0%{-webkit-transform:none;transform:none}25%{-webkit-transform:scale(1.5);transform:scale(1.5)}100%{-webkit-transform:none;transform:none}}@-moz-keyframes bump{0%{-moz-transform:none;transform:none}25%{-moz-transform:scale(1.5);transform:scale(1.5)}100%{-moz-transform:none;transform:none}}@-o-keyframes bump{0%{-o-transform:none;transform:none}25%{-o-transform:scale(1.5);transform:scale(1.5)}100%{-o-transform:none;transform:none}}@keyframes bump{0%{-webkit-transform:none;-moz-transform:none;-o-transform:none;transform:none}25%{-webkit-transform:scale(1.5);-moz-transform:scale(1.5);-o-transform:scale(1.5);transform:scale(1.5)}100%{-webkit-transform:none;-moz-transform:none;-o-transform:none;transform:none}}.bump{-webkit-animation-duration:350ms;-moz-animation-duration:350ms;-o-animation-duration:350ms;animation-duration:350ms;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;-o-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-name:bump;-moz-animation-name:bump;-o-animation-name:bump;animation-name:bump}"})]})};var Ke=n(84749),Qe=n(99534);var Je=e=>{var{title:t}=e,n=(0,Qe.Z)(e,["title"]);return(0,o.jsx)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",fill:"none"},n),{children:(0,o.jsxs)("g",{transform:"translate(3, 2)",children:[t&&(0,o.jsx)("title",{children:t}),(0,o.jsx)("rect",{x:"0",y:"5",width:"10",height:"7",rx:"2",fill:"currentColor"}),(0,o.jsx)("path",{d:"M3.5 6.5V4c0-4-6-4-6 0v1.5",stroke:"currentColor",strokeWidth:"2"})]})}))};const et=e=>{let{notebook:t,dispatch:n}=e;var s;if(!(0,Ce.H7)(t)||!(0,Ce.GT)(t)||!(0,ne.PG)(t))return null;const r=null===(s=t.commentingLock)||void 0===s?void 0:s.user_locked;return{onSelect:()=>{n({type:"updateCommentingLock",locked:!r})},children:r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Je,{className:"mr2 h1 w1"})," Unlock comments"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ke.Z,{className:"mr2 h1 w1"})," Lock comments"]})}};var tt=n(54098);var nt=e=>(0,o.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2"},e),{children:[(0,o.jsx)("rect",{x:"10",y:"2",width:"4",height:"12",rx:"1"}),(0,o.jsx)("path",{d:"M3.6585 13.5488L9.13991 8.75258C9.59524 8.35417 9.59524 7.64584 9.13991 7.24742L3.6585 2.45119C3.01192 1.88543 2 2.34461 2 3.20377V12.7962C2 13.6554 3.01192 14.1146 3.6585 13.5488Z"})]})),st=n(86466),ot=n(3338);const rt=e=>{let{dispatch:t,notebook:n}=e;if(!(0,J.fN)(n)||!(0,ne.mG)(n)||(0,J.os)(n)||!n.autosave)return null;const s=(0,J.z4)(n);return{children:s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ot.Z,{className:"mr2 h1 w1"}),"Resume live editing"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(st.Z,{className:"mr2 h1 w1"}),"Pause live editing"]}),onSelect:()=>t(s?{type:"resumeLiveEdits"}:{type:"pauseLiveEdits"})}},it=e=>{let{dispatch:t,notebook:n}=e;const s=(0,J.XO)(n);return s?{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nt,{className:"mr2 h1 w1"}),"Republish",(0,o.jsx)("span",{className:"ml1 fw4",children:(0,J.YY)(s,"edit")})]}),onSelect:()=>t({type:"pauseLiveEdits"}),tooltip:"Update the paused version to the latest version"}:null};var at=n(83065);const lt=e=>{let{notebook:t,dispatch:n}=e;const{saveVersion:s,autosave:r}=t;return!(0,ne.i3)(t)||r?null:{onSelect:()=>n({type:"revertRequested",version:s,remote:!1}),disabled:!(0,Ce.g)(t),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Te.Z,{className:"mr2 h1 w1"}),"Revert to v",s]})}};var ct=n(43360),dt=n(5581),ht=n(61777);const mt=e=>{let{page:t,dispatch:n}=e;return{onSelect:()=>{n({type:"togglePane",pane:"dependencies"})},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ht.Z,{className:"mr2 h1 w1"}),"dependencies"===(null===t||void 0===t?void 0:t.pane)?"Hide dependencies":"Show dependencies"]})}};var ut=n(30410),pt=n(60138);const xt=e=>{let{dispatch:t,page:n}=e;return{onSelect:()=>{t({type:"togglePane",pane:"find"})},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(pt.Z,{className:"mr2 h1 w1"}),"find"===(null===n||void 0===n?void 0:n.pane)?"Hide find":"Show find"]})}};var gt=n(18530);const ft=e=>{let{notebook:t,page:n,dispatch:s}=e;return(0,ne.pT)(t)?{onSelect:()=>{s({type:"togglePane",pane:"history"})},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Me.Z,{className:"mr2 h1 w1"}),"history"===(null===n||void 0===n?void 0:n.pane)?"Hide history":"Show history"]})}:null};var bt=n(86057);const jt=e=>{let{notebook:t,page:n,dispatch:s}=e;return(0,ne.ED)(t)?{onSelect:()=>s({type:"togglePane",pane:"insights"}),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(bt.Z,{className:"mr2 h1 w1"}),"insights"===(null===n||void 0===n?void 0:n.pane)?"Hide insights":"Show insights"]})}:null};var vt=n(26492);const kt=e=>{let{page:t,dispatch:n}=e;return{onSelect:()=>{n({type:"togglePane",pane:"minimap"})},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(vt.Z,{className:"mr2 h1 w1"}),"minimap"===(null===t||void 0===t?void 0:t.pane)?"Hide minimap":"Show minimap"]})}};var yt=n(2239),wt=n(23929);const Nt=e=>{let{dispatch:t,notebook:n}=e;return!(0,ne.mG)(n)||(0,J.os)(n)?null:{onSelect:()=>n.autosave?t({type:"disableAutosave"}):t({type:"loadVersion",version:n.saveVersion,autosave:!0}),children:n.autosave?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ze.Z,{className:"mr2 h1 w1"}),"Tinker"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Te.Z,{className:"mr2 h1 w1"}),"Discard"]})}};var Ct=n(2840),Lt=n(77061),St=n(73102);function Zt(e,t,n){const s=[],o=(0,J.wd)(t);return(0,ne.mG)(t)&&t.autosave?((0,J.XO)(t)?(s.push({name:"pauseResume",highlight:!0}),s.push({name:"publishShareIcon"})):s.push({name:"publishShare"}),s.push({name:"forkIcon"})):(0,ne.rk)(e,t)&&n!==Le?s.push({name:"fork",highlight:o}):(0,Ce.kh)(t)&&s.push({name:"compareToLatest",highlight:!1}),(0,Ce.ws)(t)&&s.push({name:"like",highlight:!1}),s}const Tt=(0,S.$j)((e=>{let{notebook:t,page:n,currentUser:s}=e;return{notebook:t,page:n,currentUser:s}}),(e=>({dispatch:e})))((e=>{let{notebook:t,page:n,currentUser:s,dispatch:r}=e;const i=(0,W.useRouter)();let a;t.spotlightParticipant?a=he:t.safe?a=ae:(0,ne.mG)(t)&&t.autosave||!(0,J.oI)(t)?t.autosave||t.isPausedLoad?(0,J.os)(t)&&!t.isPausedLoad?a=re:((0,J.s9)(t)||(0,J.cg)(t))&&(0,ne._l)(t)&&(0,J.ly)(t)&&!(0,J.dI)(t)?a=ee:(0,J.Or)(t)&&(0,ne.sm)(t.suggestionFrom)&&!n.suggestionOpenBannerDismissed?a=ye:(0,J.to)(t)?a=xe:(0,J.Y8)(t)?a=be:("fork"===i.query.intent||(0,J.zC)(t))&&(a=Le):a=Re:a=Fe;const l={notebook:t,currentUser:s,dispatch:r,page:n},c={suggest:(0,wt.P)(l),revertToVersion:lt(l),compareToPublished:Ae(l),compareToFork:Ve(l),compareToLatest:De(l),divider_0:null,Share:(0,at.Y)(l),Fork:(0,Se.AH)(l),divider_1:null,like:We(l),collections:(0,Pe.b)(l),pauseResume:rt(l),divider_2:null,View:{showFiles:(0,ut.m)(l),showDatabases:(0,dt.e)(l),showHistory:ft(l),showHelp:(0,gt.S)(l),showMinimap:kt(l),showDependencies:mt(l),showInsights:jt(l),showFind:xt(l),divider_0:null,fullscreen:(0,Be.$)(l),safeMode:(0,ct.A)(l),tinkerMode:Nt(l)},Export:{embed:Oe(l),downloadCode:Ie(l)},Settings:{slug:(0,yt.t)(l),license:Ge(l),authors:_e(l),divider_0:null,lockComments:et(l),notifications:(0,tt.A)(l),divider_1:null,transfer:(0,Ct.M)(l)},divider_3:null,Delete:(0,Lt.q)(l)},d={compareToLatest:De,like:Xe,fork:Se.AH,forkIcon:Se.iE,pauseResume:it,publishShare:at.Y,publishShareIcon:at.i};return(0,o.jsx)(St.n,{SelectedBanner:a,menuActionList:c,promotedActions:Zt(s,t,a),promotableActions:d,notebook:t,currentUser:s,dispatch:r})}));var Ut=n(65074),Ft=n(54397),Mt=n(34049);var Rt=e=>(0,o.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,o.jsx)("path",{d:"M14.5 4.5L14.5 11.5C14.5 12.0523 14.0523 12.5 13.5 12.5L5.03518 12.5C4.70083 12.5 4.3886 12.3329 4.20313 12.0547L1.5 8L4.20313 3.9453C4.3886 3.6671 4.70083 3.5 5.03518 3.5L13.5 3.5C14.0523 3.5 14.5 3.94771 14.5 4.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M6 8H7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})),Et=n(37720),_t=n(82893),Pt=n(81816);const Vt=e=>{let{tag:t,removeTag:n,canEditTags:s,documentId:r}=e;const{open:i,openMenu:a,triggerRef:l,uiRef:c}=(0,_t.O)();return(0,o.jsxs)("div",{className:"flex items-center br2 mr2 mv1 pointer bg-light-silver overflow-hidden",children:[(0,o.jsxs)("div",{className:V()("pv1 dark-gray hover-blue outline-0 b--transparent truncate",s?"pl2":"ph2"),"data-pw":"".concat(t,"-popover"),role:"button",tabIndex:0,ref:l,onClick:a,onKeyDown:e=>{"Enter"===e.key&&a()},children:["#",t,i&&(0,o.jsx)(Dt,{tag:t,documentId:r,uiRef:c})]}),s&&(0,o.jsx)("div",{className:"pl0 pr1 pv1 b--transparent","data-pw":"".concat(t,"-delete"),role:"button",tabIndex:0,onClick:()=>n(t),onKeyDown:e=>{"Enter"===e.key&&n(t)},children:(0,o.jsx)(b.Z,{className:"dib v-btm gray hover-blue"})})]})},Dt=e=>{const{tag:t,documentId:n,uiRef:s}=e,{data:r}=(0,v.h_)("/tag/".concat(t,"/documents?").concat((0,Pt.P)({exact:!0,page:1,filter:"yours",limit:3}))),{data:i}=(0,v.h_)("/tag/".concat(t,"/documents?").concat((0,Pt.P)({exact:!0,page:1,limit:3}))),a=null===r||void 0===r?void 0:r.results,l=null===a||void 0===a?void 0:a.map((e=>e.id)),c=null===i||void 0===i?void 0:i.results.filter((e=>!(null===l||void 0===l?void 0:l.includes(e.id))));return a&&a.length>0||c&&c.length>0?(0,o.jsx)(Et.J,{ref:s,extraStyle:{top:"auto",right:"auto",left:"auto",width:"17rem",marginTop:"0.75rem",marginLeft:"-0.50rem"},children:(0,o.jsx)("div",{className:"dark-gray",children:(0,o.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:500},children:[(0,o.jsxs)("div",{className:"flex pa2 f7 items-center justify-between",children:[(0,o.jsxs)("span",{className:"truncate fw5",children:["#",t]}),(null===i||void 0===i?void 0:i.total)&&(0,o.jsxs)("span",{className:"mid-gray",children:[(0,N.CZ)(i.total)," notebooks"]})]}),(0,o.jsx)(At,{tag:t,documentId:n,filter:"yours",title:"Your notebooks",tagDocuments:a}),(0,o.jsx)(At,{filter:"recent",tag:t,documentId:n,title:"All notebooks",tagDocuments:c})]})})}):null},At=e=>{const{tag:t,title:n,tagDocuments:s,filter:r}=e,i=encodeURIComponent(t);return(0,o.jsx)(o.Fragment,{children:s&&s.length>0&&(0,o.jsxs)("div",{className:"f7 bt mid-gray pa2 b--silver",children:[(0,o.jsx)("div",{className:"pb2",children:n}),s.map(((e,t)=>function(e,t){const n=(0,L.Bi)(e),s=(0,N.Ui)(e.title);return(0,o.jsx)(Q.Z,{href:n,children:(0,o.jsxs)("a",{className:"pa2 nl2 nr2 no-underline near-black hover-light-blue hover-bg-near-white b--silver",style:{display:"grid",gridTemplateColumns:"60px auto",alignItems:"center",gridGap:"0 10px"},children:[(0,o.jsx)("div",{className:"br2 ba b--silver",style:{paddingTop:"62.5%",backgroundImage:e.thumbnail?"url(".concat((0,L.Nl)(e.thumbnail),")"):"var(--checkerboard)"}},t),(0,o.jsxs)("div",{className:"overflow-hidden",children:[(0,o.jsx)("div",{className:"truncate pv1 f6 fw5",children:(0,o.jsx)("span",{title:s,className:"mr1",children:s})}),(0,o.jsx)("div",{className:"pb1 f7 mid-gray",children:(0,o.jsxs)("div",{className:"inline-flex items-center",children:[(0,o.jsx)("span",{children:(0,se.RX)(e.owner)}),(0,o.jsx)("span",{title:(0,ue.mr)(new Date(e.update_time)),className:"ml2 nowrap",children:(0,ue.LN)(new Date(e.update_time),new Date)})]})})]})]})},t)}(e,t))),(0,o.jsx)(Q.Z,{href:"/tag/".concat(i,"?filter=").concat(r),children:(0,o.jsxs)("a",{className:"inline-flex no-underline pt1 fw5 blue hover-dark-blue items-center",children:[(0,o.jsx)("span",{className:"nowrap",children:"View all"})," ",(0,o.jsx)(p.Z,{className:"ml1"})]})})]})})};var Ht=n(15612),It=n(47311),zt=n(44754),Ot=n(98055),Bt=n(61107);const qt=RegExp("[\\p{P}\\p{Z}]+","u");let Gt;const $t=e=>{let{addTag:t,tags:n,currentUser:s,notebook:r}=e;const{open:i,openMenu:a,triggerRef:l,uiRef:c}=(0,_t.O)();function d(){a(),(0,y.MR)((0,y.ym)({type:"notebook:view:addTagClick",eventVersion:1,currentUser:s,notebook:r}))}return(0,o.jsxs)("div",{"aria-label":"Add tags",className:"ba br2 b--light-gray mr2 mv1 f6 fw5 dark-gray bg-white hover-bg-near-white pointer",role:"button",tabIndex:0,ref:l,onClick:d,onKeyDown:e=>{"Enter"===e.key&&d()},onMouseDown:Bt.P,children:[(0,o.jsxs)("div",{className:"flex flex-row items-center flex-grow-0 pv1 ph2",children:[(0,o.jsx)(It.ZP,{className:"order-0 mr1"}),(0,o.jsx)("span",{className:"order-1",children:"Add tags"})]}),i&&(0,o.jsx)(Et.J,{ref:c,extraStyle:{top:"auto",right:"auto",left:"auto",width:"300px",marginTop:"0.5rem"},children:(0,o.jsx)(Xt,{addTag:t,tags:n})})]})},Xt=e=>{let{addTag:t,tags:i}=e;var a;const[l,c,h]=(0,zt.G)("",1e3),{value:m,set:u}=(0,Ot.$)(),p=(0,d.useRef)(null);(0,d.useEffect)((()=>{const e=l.toLowerCase();u("tag-duplicated",!!i.find((t=>t.toLowerCase()===e))),u("tag-invalid",!!e&&qt.test(e)),u("tag-length-exceeded",!!e&&e.length>50),u("tag-num-exceeded",i.length>=50),(async()=>{const t=await async function(){Gt||(Gt=n.e(2238).then(n.t.bind(n,14169,23)).then((e=>{const{default:t}=e;return new t})));try{return await Gt}catch(e){return console.error("error importing bad-words",e),void(Gt=void 0)}}();u("tag-inappropriate",!!e&&!!(null===t||void 0===t?void 0:t.isProfane(e)))})()}),[l,u,i,i.length]),(0,d.useEffect)((()=>{p.current&&p.current!==document.activeElement&&p.current.select()}),[]);const{data:x=[],isValidating:g}=(0,v.h_)("/tags/search?".concat((0,Pt.P)((0,r.Z)((0,s.Z)({},h?{searchTag:h}:void 0,i.length>0?{excludedTags:i.join(",")}:void 0),{limit:5})))),f=x.filter((e=>e.tag===l)),b=1===f.length,j=x.filter((e=>e.tag!==l)),k=(0,d.useCallback)((e=>{t(e),c("")}),[t,c]);return(0,o.jsxs)(Ht.hQ,{onSelect:k,className:"flex flex-column overflow-hidden w-100 br2 bg-white relative",children:[(0,o.jsx)("div",{className:"pa2 relative flex items-center",children:(0,o.jsx)(Ht.gA,{autocomplete:!1,spellCheck:!1,onChange:e=>c(e.target.value),className:"form-default-clear w-100 border-box bg--transparent",type:"text",placeholder:"Type to add a tag",value:l,disabled:i.length>=50,ref:p})}),(0,o.jsx)(Ht.Gk,{className:"overflow-y-auto mt1 near-black",children:0===m.size?(0,o.jsxs)(o.Fragment,{children:[l&&(0,o.jsxs)(Ht.O2,{className:"flex flex-row justify-between items-center ph2 pv2",value:l,children:[(0,o.jsxs)("div",{className:"ph1 near-black f6 lh-f6 fw5 pr3 truncate",children:["#",l]}),(0,o.jsx)("div",{className:"ph1 mid-gray f7 lh-f7",children:b?null===(a=f[0])||void 0===a?void 0:a.count:"new"})]},l),!g&&j.map((e=>{let{tag:t,count:n}=e;return(0,o.jsxs)(Ht.O2,{className:"flex flex-row justify-between items-center ph2 pv2",value:t,children:[(0,o.jsxs)("div",{className:"ph1 near-black f6 lh-f6 fw5 truncate",children:["#",t]}),(0,o.jsx)("div",{className:"ph1 mid-gray f7 lh-f7",children:(0,N.CZ)(n)})]},t)}))]}):m.has("tag-num-exceeded")?(0,o.jsxs)("div",{className:"ph2 pv2 bg-washed-yellow observable-dark-gold f6 lh-f6 fw5",children:["This notebook has reached its limit of ",50," tags. If you want to add another tag you\u2019ll have to remove an existing one first."]}):m.has("tag-inappropriate")?(0,o.jsxs)("div",{className:"flex flex-row justify-between items-center ph2 pv2 bg-washed-red red f6 lh-f6 fw5",children:[(0,o.jsxs)("div",{className:"f6 lh-f6 fw5 pr3 truncate",children:["#",l]}),(0,o.jsx)("div",{className:"f7 lh-f7",children:"not allowed"})]}):(0,o.jsx)("div",{className:"ph2 pv2 bg-washed-red red f6 lh-f6 fw5",children:m.has("tag-duplicated")?"Duplicate tag":m.has("tag-invalid")?"Punctuation and symbols are not allowed":m.has("tag-length-exceeded")?"Tag length exceeds ".concat(50," characters"):null})})]})},Wt=e=>{let{dispatch:t,notebook:n,currentUser:s}=e;const r=n.id,i=(0,ne.mG)(n),a=n.tags.length>0,l=(0,d.useCallback)((e=>{t({type:"addTag",documentId:r,tag:e})}),[r,t]),c=(0,d.useCallback)((e=>{t({type:"deleteTag",documentId:r,tag:e})}),[r,t]);return(0,o.jsxs)("div",{className:"flex flex-row flex-wrap items-start items-center dn-print",children:[i?(0,o.jsx)($t,{addTag:l,tags:n.tags,currentUser:s,notebook:n}):a?(0,o.jsxs)("div",{className:"b--transparent mr2 br2 f6 fw4 dark-gray",children:[(0,o.jsx)(Rt,{className:"dib v-btm moon-gray"})," Tags"]}):null,n.tags.length>0?n.tags.map((e=>(0,o.jsx)(Vt,{tag:e,removeTag:c,canEditTags:i,documentId:r},e))):null]})};var Yt=n(82029),Kt=n(80548),Qt=n(35831),Jt=n(28445),en=n(64451),tn=n(8802),nn=(n(28067),n(928)),sn=n(41824),on=n(21252);const rn=e=>{const t=(0,on.M)(sn.f,e),n=(0,Kt.w)(t);return(0,Qt.D)(t),(0,o.jsx)(S.zt,{store:t,children:(0,o.jsx)(dn,{editors:n})})};var an=e=>(0,o.jsx)(rn,(0,s.Z)({},e),(0,tn.Z)(e));const ln=()=>!0,cn=()=>!1;const dn=(0,S.$j)((e=>{let{notebook:t,decorations:n,page:s,currentUser:o}=e;return{notebook:t,decorations:n,page:s,currentUser:o}}),(e=>({dispatch:e})))((e=>{let{notebook:t,currentUser:n,decorations:i,editors:l,dispatch:h,page:m}=e;const u=function(e){const{saveVersion:t,safe:n,pausedVersion:s,initialSpecifier:o,isPausedLoad:r,autosave:i}=e,a=[(0,L.UW)(e)];(0,J.tK)(e)&&i||r?(null===o||void 0===o?void 0:o.versionAlias)&&s&&a.push("@".concat(o.versionAlias)):a.push("@".concat(t));n&&a.push("/safe");return a.join("")}(t),p=function(e,t){if("undefined"===typeof location)return"";let n=location.search;const s=t.collectionsSidebarOpen&&e.initialCollection?function(e){let{owner:t,slug:n}=e;return"@".concat(t.login,"/").concat(n)}(e.initialCollection):null,o=s?"?collection=".concat(s):"";if(n===o)return n;const r=new URLSearchParams(n);r.get("collection")!==s&&(r.delete("collection"),n="".concat(r),n&&(n="?".concat(n)),s&&(n="".concat(n?"".concat(n,"&"):"?","collection=").concat(s)));return n}(t,m),{owner:x,model:g,isFullscreen:f,safe:b,autosave:j,spotlightParticipant:v,isPausedLoad:w}=t;return(0,Yt.D)(t,n,l,h),(0,Jt.f)(t.editorStates,t.searchTerm,h),(0,d.useEffect)((()=>{if(location.pathname!==u||location.search!==p){const e="".concat(u).concat(p).concat(location.hash);history.replaceState((0,r.Z)((0,s.Z)({},history.state),{as:e,url:e}),"",e)}})),(0,d.useEffect)((()=>{m.collectionsSidebarOpen&&t.initialCollection&&!window.matchMedia(k.hs).matches&&h({type:"toggleCollectionsSidebar"}),(0,y.MR)((0,y.ym)({type:"notebook:view:view",data:{numCells:t.model.nodes.length},eventVersion:4,notebook:t,currentUser:n}))}),[]),(0,d.useEffect)((()=>{v?document.documentElement.classList.add("following"):document.documentElement.classList.remove("following")}),[v]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Mt.Z,{content:"".concat(b?"Safe Mode:":j||w?"":"History:"," ").concat((0,N.Ui)(g)," / ").concat((0,N.KY)(x))}),(0,o.jsxs)(c(),{children:[(0,o.jsx)("link",{rel:"canonical",href:"".concat("https://observablehq.com").concat(u),className:"jsx-89ba54f59fad5733"}),(0,o.jsx)("link",{rel:"alternate",type:"application/rss+xml",title:(0,en.q)((0,N.KY)(x)),href:"".concat("https://api.observablehq.com","/documents/@").concat(x.login,".rss"),className:"jsx-89ba54f59fad5733"}),t.collections.filter((e=>"public"===e.type)).map((e=>(0,o.jsx)("link",{rel:"alternate",type:"application/rss+xml",title:(0,en.q)("".concat((0,N.Ui)(e)," / ").concat((0,N.KY)(e.owner))),href:"".concat("https://api.observablehq.com","/collection/@").concat(e.owner.login,"/").concat(e.slug,".rss"),className:"jsx-89ba54f59fad5733"},"@".concat(e.owner.login,"/").concat(e.slug)))),(0,o.jsx)(E.bd,{notebook:t})]}),(0,o.jsx)(R.Z,{}),(0,o.jsx)(G.b,{}),(0,J.dI)(t)&&(0,o.jsx)(q.z,{notebook:t,dispatch:h}),(0,o.jsx)(Tt,{}),(0,o.jsx)(Ut.P,{}),m.collectionsSidebarOpen?(0,o.jsx)(U,{}):null,(0,o.jsxs)(H.Z,{children:[(0,o.jsxs)(M.i,{isFullscreen:f,style:{minHeight:"calc(100vh - ".concat(n?34:85,"rem)")},dispatch:h,children:[(0,o.jsx)(Wt,{currentUser:n,notebook:t,dispatch:h}),(0,o.jsx)(X.a,{notebook:t,dispatch:h,editors:l,currentUser:n,disablePointerEvents:"none"!==i.modal,editorComponent:$.i,isNodeCommentable:(0,Ce.H7)(t)?ln:cn})]}),(0,o.jsx)(Ft.W,{}),(0,o.jsx)(_.F1,{})]}),n&&(0,o.jsx)(F.Z,{empty:(0,J.ws)(t)||(0,ne.mG)(t)}),(0,o.jsx)(a(),{id:"89ba54f59fad5733",children:".following{scroll-behavior:smooth}"}),!n&&(0,o.jsx)(B,{})]})}));var hn=n(82469),mn=n(40452),un=n(9234),pn=n(65538),xn=n(24165);const gn=(0,pn.$j)((e=>{let{decorations:t,currentUser:n}=e;return{decorations:t,currentUser:n}}),null)((e=>{let{forks:t,parentNotebook:n}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Mt.Z,{content:"Forks of \u2018".concat((0,L.$h)(n),"\u2019")}),(0,o.jsx)(R.Z,{}),(0,o.jsxs)(hn.Z,{children:[(0,o.jsx)(mn.j,{}),(0,o.jsx)(_.F1,{}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("h2",{className:"mv4 fw7 gray",style:{fontSize:"2rem"},children:["Forks of"," ",(0,o.jsx)(m(),{href:(0,L.Bi)(n),className:"no-underline black hover-blue",children:(0,L.$h)(n)})]}),(0,o.jsx)("div",{children:(0,o.jsx)(un.a,{emptyMessage:"This notebook has no forks",response:t,items:"forks",children:(e,t)=>(0,o.jsx)(A.pg,{format:t,notebook:e})})})]})]})]})})),fn=e=>{const t=(0,on.M)(xn.f,e);return(0,o.jsx)(pn.zt,{store:t,children:(0,o.jsx)(gn,{parentNotebook:e.initialParentNotebook,forks:(0,D.x)(e.forks)})})};const bn=(0,pn.$j)((e=>{let{decorations:t,currentUser:n}=e;return{decorations:t,currentUser:n}}),null)((e=>{let{importers:t,parentNotebook:n}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Mt.Z,{content:"Importers of \u2018".concat((0,L.$h)(n),"\u2019")}),(0,o.jsx)(R.Z,{}),(0,o.jsxs)(hn.Z,{children:[(0,o.jsx)(mn.j,{}),(0,o.jsx)(_.F1,{}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("h2",{className:"mv4 fw7 gray",style:{fontSize:"2rem"},children:["Importers of"," ",(0,o.jsx)(m(),{href:(0,L.Bi)(n),className:"no-underline black hover-blue",children:(0,L.$h)(n)})]}),(0,o.jsx)("div",{children:(0,o.jsx)(un.a,{emptyMessage:"This notebook has no importers",response:t,items:"importers",children:(e,t)=>(0,o.jsx)(A.pg,{format:t,notebook:e})})})]})]})]})})),jn=e=>{const t=(0,on.M)(xn.f,e);return(0,o.jsx)(pn.zt,{store:t,children:(0,o.jsx)(bn,{parentNotebook:e.initialParentNotebook,importers:(0,D.x)(e.importers)})})};var vn=n(65878),kn=n(31343);var yn=!0,wn=(0,vn.Z)((e=>"initialNotebook"in e?(0,o.jsx)(an,(0,s.Z)({},e)):"forks"in e?(0,o.jsx)(fn,(0,s.Z)({},e)):"importers"in e?(0,o.jsx)(jn,(0,s.Z)({},e)):null));function Nn(e,t){let{at:n,specifiers:s}=e;const o="d"===n||(s.unshift(n),!1),r={allowId:o,allowSlug:!o,allowTilde:!0};let i=null;if(t.includes(s[s.length-1])&&(i=nn.Z.parse(s.slice(0,-1).join("/"),r),i))return[s.pop(),i];if(i=nn.Z.parse(s.join("/"),r),!i)throw(0,kn.v6)();return[null,i]}},68298:function(e,t,n){"use strict";n.d(t,{R:function(){return h}});var s=n(11163),o=n.n(s),r=n(602),i=n(19671),a=n(70915),l=n(36448);function c(){o().replace(o().asPath)}var d=n(17152);const h={forkRequested:async(e,t,n)=>{let{notebook:s,currentUser:o}=e;if(s.isForking)return;const r=await(0,d.Fe)(o,s,t,n);r?(n({type:"showSuccessToast",message:"Notebook forked to ".concat(r.owner.login),key:"fork"}),n({type:"forkSucceeded",id:r.id})):n({type:"forkFailed"})},createCollection:async(e,t,n)=>{let{context:s,currentUser:r}=e,{collection:{type:l,title:c,description:d}}=t;const h=s.context;n({type:"showProcessingToast",key:"createCollection",message:"Creating collection\u2026"});try{const e=await(0,a.BL)(c,l,h||r,d);if(!e)return void n({type:"showErrorToast",key:"createCollection",message:"Oops, Creating collection failed. Try again?"});(0,i.MR)((0,i.y6)({type:"collection:manage:create",data:{trigger:"click",source:"createCollectionModal"},eventVersion:1,collection:e,currentUser:r})),n({type:"showSuccessToast",key:"createCollection",message:"Collection created."}),o().push((0,a.WG)(e))}catch(m){n({type:"showErrorToast",key:"createCollection",message:"Oops, Creating collection failed. Try again?"})}},editCollection:async(e,t,n)=>{let{collection:s,oldTitle:o}=t;n({type:"showProcessingToast",key:"editCollection",message:'Editing collection "'.concat(o,'"\u2026')});try{const{id:e,title:t,description:i,type:a,ordered:l}=s;await(0,r.Fv)("/collection/".concat(e,"/edit"),{title:t,description:i,type:a,ordered:l}),n({type:"showSuccessToast",key:"editCollection",message:'Collection "'.concat(o,'" edited.')}),c()}catch(i){n({type:"showErrorToast",key:"editCollection",message:'Oops, Editing collection "'.concat(o,'" failed. Try again?')})}},deleteCollection:async(e,t,n)=>{let{collection:s}=t;const{id:i}=s;n({type:"showProcessingToast",key:"deleteCollection",message:"Deleting collection\u2026"});try{await(0,r.Fv)("/collection/".concat(i,"/delete")),n({type:"showSuccessToast",key:"deleteCollection",message:"Collection deleted successfully!."}),o().replace((0,l.$2)(s.owner))}catch(a){n({type:"showErrorToast",key:"deleteCollection",message:"Oops, deleting collection failed. Try again?"})}},setCollectionThumbnail:async(e,t,n)=>{let{collection:s,thumbnail:o}=t;const{title:i,id:a}=s;n({type:"showProcessingToast",key:"setCollectionThumbnail",message:"Setting thumbnail for ".concat(i,"\u2026")});try{await(0,r.Fv)("/collection/".concat(a,"/thumbnail"),{thumbnail:o||null}),n({type:"showSuccessToast",key:"setCollectionThumbnail",message:'Collection "'.concat(i,'" thumbnail set.')}),c()}catch(l){n({type:"showErrorToast",key:"setCollectionThumbnail",message:"Oops, setting thumbnail failed. Try again?"})}},updateCollectionInCollections:async(e,t,n)=>{let{currentUser:s}=e,{addTo:o,removeFrom:a,onDismiss:l,collectionId:d}=t;(await Promise.allSettled([...o.map((e=>(0,r.Fv)("/collection/".concat(e.id,"/add"),{collection_listing_id:d}))),...a.map((e=>(0,r.Fv)("/collection/".concat(e.id,"/remove"),{collection_listing_id:d})))])).some((e=>"fulfilled"!==e.status))?n({type:"showErrorToast",message:"Oops, collections update failed. Try again?",key:"collections"}):(o.forEach((e=>(0,i.MR)((0,i.y6)({type:"collection:manage:addCollectionListing",data:{addedListingId:d},collection:e,currentUser:s,eventVersion:1})))),a.forEach((e=>(0,i.MR)((0,i.y6)({type:"collection:manage:removeCollectionListing",data:{removedListingId:d},collection:e,currentUser:s,eventVersion:1}))))),c(),l()}}},77180:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});const s={selectNotebook:(e,t)=>{let{notebook:n}=t;return n}}},24165:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var s=n(41799),o=n(68298),r=n(77180),i=n(810),a=n(54937);const l=()=>({type:"dashboard",slices:{notebook:{initialState:{},reducers:(0,s.Z)({},a.x,r.L)}},listeners:(0,s.Z)({},i.l,o.R)})}},function(e){e.O(0,[3714,5021,2656,8764,6817,270,6954,637,322,793,6086,3993,4162,8352,5665,6646,6948,8367,9853,8780,5542,7105,8616,709,8111,2218,6883,4834,8160,9660,9774,2888,179],(function(){return t=62907,e(e.s=t);var t}));var t=e.O();_N_E=t}]);