"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2796,1861],{64804:function(e,t,s){var n=s(41799),i=s(69396),l=s(85893);s(67294);t.Z=e=>(0,l.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,l.jsx)("path",{d:"M2 6C2 5.44772 2.44772 5 3 5H10C10.5523 5 11 5.44772 11 6V13C11 13.5523 10.5523 14 10 14H3C2.44772 14 2 13.5523 2 13V6Z",stroke:"currentColor",strokeWidth:"2"}),(0,l.jsx)("path",{d:"M4 2.00004L12 2.00001C13.1046 2 14 2.89544 14 4.00001V12",stroke:"currentColor",strokeWidth:"2"}),e.children]}))},3338:function(e,t,s){s.d(t,{s:function(){return a}});var n=s(41799),i=s(69396),l=s(85893);s(67294);const r=e=>(0,l.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"16",height:"16",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 16 16"},e),{children:[(0,l.jsx)("path",{d:"M4 12.4788V3.52116C4 2.23802 5.50646 1.54723 6.47878 2.38451L11.68 6.86335C12.375 7.46178 12.375 8.53822 11.68 9.13665L6.47878 13.6155C5.50646 14.4528 4 13.762 4 12.4788Z"}),e.children]}));t.Z=r;const a=e=>(0,l.jsx)(r,(0,n.Z)({fill:"currentColor"},e))},64600:function(e,t,s){s.d(t,{I:function(){return l}});var n=s(85893),i=(s(67294),s(51811));const l=e=>{let{sort:t,direction:s,setSort:l,setDirection:r,relevance:a,publicOnly:o=!1}=e;return(0,n.jsx)(i.P,{sort:t,direction:s,setSort:l,setDirection:r,sortOptions:(0,n.jsxs)(n.Fragment,{children:[a?(0,n.jsx)("option",{value:"relevance",children:"Relevance"}):null,o?null:(0,n.jsx)("option",{value:"edited",children:"Edited"}),o?null:(0,n.jsx)("option",{value:"created",children:"Created"}),(0,n.jsx)("option",{value:"title",children:"Title"}),(0,n.jsx)("option",{value:"likes",children:"Likes"}),(0,n.jsx)("option",{value:"published",children:"Published"})]})})}},3683:function(e,t,s){s.d(t,{q:function(){return u}});var n=s(41799),i=s(69396),l=s(99534),r=s(85893),a=s(67294),o=s(14151),c=s(93939),d=s(62990);const u=e=>{var{time:t,absolute:s,numeric:u,precision:h}=e,m=(0,l.Z)(e,["time","absolute","numeric","precision"]);const p=(0,c.L)(t),b=(0,o.d)((0,a.useCallback)((()=>t.toLocaleString("en")),[t]));return(0,r.jsx)("span",(0,i.Z)((0,n.Z)({title:b},m),{children:s?u?(0,d.WB)(t):(0,d.p6)(t):h?(0,d.aP)(t,p,h):(0,d.lY)(t,p)}))}},97196:function(e,t,s){s.r(t),s.d(t,{DashboardPageContainer:function(){return Mt},__N_SSP:function(){return Ft},default:function(){return Et}});var n=s(41799),i=s(69396),l=s(99534),r=s(85893),a=s(11163),o=s(67294),c=s(40821),d=s(9008),u=s.n(d),h=s(10099),m=s(75288),p=s(39736),b=s(26561),f=s(57787),x=s(77025),v=s(37497),g=s(58171),j=s(33112),y=s(9234),w=s(23105),k=s(602),N=s(66421),C=s(28067),Z=s(81816);function L(e){return{tab:(0,C.T)(e,"tab"),page:(0,C.T)(e,"page"),type:(0,C.T)(e,"type"),new:(0,C.T)(e,"new")}}const T=e=>{let{context:t,user:s,dispatch:o}=e;const{push:c,replace:d,query:u}=(0,a.useRouter)(),h=L(u),{new:m}=h,p=(0,l.Z)(h,["new"]),{type:b}=p;const{data:T}=(0,k.h_)(function(e,t){const s=L(t);return"/collections/@".concat(e.login,"?").concat((0,Z.P)((0,n.Z)({page:s.page||1},s.type?{type:s.type}:null)))}(t,u));return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:w.r2,className:"flex mb3 fw7 near-black justify-between items-center",children:["Collections",(0,N.pq)(s,t)&&(0,r.jsx)(v.aX,{"data-cy":"new-collection",onClick:()=>o({type:"showModal",modal:"createCollection"}),text:"New",colorless:!0,icon:j.Z})]}),T?(0,r.jsx)(y.a,{response:T,items:"collections",filters:()=>(0,r.jsxs)("div",{className:"f7",children:[(0,r.jsx)("label",{className:"mr1 f7 fw6 gray lh-f7",htmlFor:"type",children:"Type"}),(0,r.jsxs)(g.g,{className:"ml1 near-black",id:"type",value:b||"",onChange:e=>{return t=e.target.value||void 0,void c((0,C.r)((0,i.Z)((0,n.Z)({},p),{type:t})));var t},children:[(0,r.jsx)("option",{value:"",children:"All"}),(0,r.jsx)("option",{value:"public",children:"Public"}),(0,r.jsx)("option",{value:"private",children:"team"===t.type?"Team Private":"Private"})]})]}),emptyMessage:"\u261d\ufe0f You haven\u2019t created any collections yet.",children:(e,t)=>(0,N.D7)(s,e)?(0,r.jsx)(f.b3,{collection:e,format:t,parentCount:e.parent_collection_count}):(0,r.jsx)(f.Fl,{collection:e,format:t})}):null,m&&(0,r.jsx)(x.W,{onDismiss:()=>d((0,C.r)((0,n.Z)({},p)))})]})};var _=s(3896),S=s(74834),R=s(81416),U=s(94184),P=s.n(U),F=s(8385);const M=e=>(0,r.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,r.jsx)("rect",{x:"4",y:"4",width:"14",height:"16",rx:"2",fill:"#DAE4FF"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 8C7 7.44772 7.44772 7 8 7H14C14.5523 7 15 7.44772 15 8C15 8.55228 14.5523 9 14 9H8C7.44772 9 7 8.55228 7 8ZM8 11C7.44772 11 7 11.4477 7 12C7 12.5523 7.44772 13 8 13H10C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11H8ZM8 15C7.44772 15 7 15.4477 7 16C7 16.5523 7.44772 17 8 17H9C9.55228 17 10 16.5523 10 16C10 15.4477 9.55228 15 9 15H8ZM19.5136 8.76598C19.1505 8.34429 18.5129 8.30017 18.0952 8.66784L12.8763 13.261C12.7346 13.3857 12.631 13.5481 12.5777 13.7293L11.9423 15.888C11.7373 16.5844 12.3194 17.2603 13.0385 17.1609L15.2559 16.8545C15.4503 16.8277 15.6325 16.7442 15.7797 16.6146L21.006 12.015C21.4174 11.6529 21.4607 11.0271 21.1031 10.6118L19.5136 8.76598Z",fill:"#4269D0"})]}));var V=s(84193),E=s(7483),I=s(45578),D=s(3683),H=s(12447),q=s(88725),O=s(36448);function Y(e){return[e.id,e]}function B(e,t,s){const n=t.shift();e.has(n)||e.set(n,t.length?new Map:[]),t.length?B(e.get(n),t,s):e.get(n).push(s)}function z(e){return"edit"===e||"publish"===e||"merge"===e?"edit":e}function W(e){switch(e.type){case"create":return"created";case"edit":return"edited";case"publish":return e.public?e.first_public?"published":"republished":e.first_publish?"shared":"reshared";case"comment":return"commented";case"fork":return"forked";case"merge":return"merged";case"like":return"liked";case"trash":return"put in the trash"}}const A={create:e=>(0,r.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,r.jsx)("rect",{x:"5",y:"4",width:"14",height:"16",rx:"2",fill:"#D4E6DD"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 7C8.44772 7 8 7.44772 8 8C8 8.55228 8.44772 9 9 9H15C15.5523 9 16 8.55228 16 8C16 7.44772 15.5523 7 15 7H9ZM8 12C8 11.4477 8.44772 11 9 11H15C15.5523 11 16 11.4477 16 12C16 12.5523 15.5523 13 15 13H9C8.44772 13 8 12.5523 8 12ZM8 16C8 15.4477 8.44772 15 9 15H12C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17H9C8.44772 17 8 16.5523 8 16Z",fill:"#38A070"})]})),fork:e=>(0,r.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,r.jsx)("rect",{x:"5",y:"4",width:"14",height:"16",rx:"2",fill:"#F6EDCC"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3713 9.92435C10.8332 9.65068 11.1429 9.14722 11.1429 8.57143C11.1429 7.70355 10.4393 7 9.57143 7C8.70355 7 8 7.70355 8 8.57143C8 9.1471 8.30955 9.65048 8.77129 9.92418L8.77129 15.0758C8.30955 15.3495 8 15.8529 8 16.4285C8 17.2964 8.70355 18 9.57143 18C10.4393 18 11.1429 17.2964 11.1429 16.4285C11.1429 15.8528 10.8332 15.3493 10.3713 15.0756L10.3713 13.3H12.0714C14.0216 13.3 15.6287 11.8308 15.8463 9.93885C16.322 9.66872 16.6429 9.15755 16.6429 8.57143C16.6429 7.70355 15.9393 7 15.0714 7C14.2036 7 13.5 7.70355 13.5 8.57143C13.5 9.13178 13.7933 9.62363 14.2347 9.90184C14.0459 10.925 13.1491 11.7 12.0714 11.7H10.3713V9.92435Z",fill:"#EAC13B"})]})),comment:e=>(0,r.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,r.jsx)("rect",{x:"7",y:"4",width:"14",height:"10",rx:"2",fill:"#EBC855"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 8C16.1046 8 17 8.89543 17 10V17C17 18.1046 16.1046 19 15 19H9.42453L8.2206 20.2512C7.8272 20.66 7.17285 20.66 6.77945 20.2512L5.57552 19H5C3.89543 19 3 18.1046 3 17V10C3 8.89543 3.89543 8 5 8H15Z",fill:"#F3E9C7"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 11C5.44772 11 5 11.4477 5 12C5 12.5523 5.44772 13 6 13H14C14.5523 13 15 12.5523 15 12C15 11.4477 14.5523 11 14 11H6ZM6 14C5.44772 14 5 14.4477 5 15C5 15.5523 5.44772 16 6 16H12C12.5523 16 13 15.5523 13 15C13 14.4477 12.5523 14 12 14H6Z",fill:"#EAC13B"})]})),like:e=>(0,r.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,r.jsx)("path",{d:"M18.92 4.11466C18.5779 3.76123 18.1718 3.48088 17.7249 3.28962C17.2779 3.09836 16.7989 2.99995 16.3151 3C15.3375 3 14.4008 3.57601 13.7102 4.2894L12.9998 5.02447L12.2893 4.2894C10.851 2.80358 8.51789 2.62885 7.07954 4.11466C6.73729 4.46806 6.4658 4.88765 6.28057 5.34946C6.09534 5.81127 6 6.30625 6 6.80613C6 7.30601 6.09534 7.80099 6.28057 8.2628C6.4658 8.72461 6.73729 9.14419 7.07954 9.49759L7.78996 10.2303L11.5153 14.356C12.3095 15.2356 13.69 15.2356 14.4842 14.356L18.2096 10.2303L18.92 9.49759C19.2624 9.14427 19.534 8.72471 19.7193 8.26289C19.9046 7.80107 20 7.30605 20 6.80613C20 6.3062 19.9046 5.81118 19.7193 5.34936C19.534 4.88754 19.2624 4.46798 18.92 4.11466Z",fill:"#FAE1E1"}),(0,r.jsx)("path",{d:"M16.92 8.11466C16.5779 7.76123 16.1718 7.48088 15.7249 7.28962C15.2779 7.09836 14.7989 6.99995 14.3151 7C13.3375 7 12.4008 7.57601 11.7102 8.2894L10.9998 9.02447L10.2893 8.2894C8.85098 6.80358 6.51789 6.62885 5.07954 8.11466C4.73729 8.46806 4.4658 8.88765 4.28057 9.34946C4.09534 9.81127 4 10.3062 4 10.8061C4 11.306 4.09534 11.801 4.28057 12.2628C4.4658 12.7246 4.73729 13.1442 5.07954 13.4976L5.78996 14.2303L9.51535 18.356C10.3095 19.2356 11.69 19.2356 12.4842 18.356L16.2096 14.2303L16.92 13.4976C17.2624 13.1443 17.534 12.7247 17.7193 12.2629C17.9046 11.8011 18 11.3061 18 10.8061C18 10.3062 17.9046 9.81118 17.7193 9.34936C17.534 8.88754 17.2624 8.46798 16.92 8.11466Z",fill:"#E14747"})]})),edit:M,trash:e=>(0,r.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,r.jsx)("path",{d:"M8 10H16V17C16 17.5523 15.5523 18 15 18H9C8.44772 18 8 17.5523 8 17V10Z",stroke:"#4269D0",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M8 10H16V7C16 6.44772 15.5523 6 15 6H9C8.44772 6 8 6.44772 8 7V10Z",stroke:"#4269D0",strokeWidth:"2"}),(0,r.jsx)("rect",{x:"5.5",y:"9.5",width:"13",height:"1",rx:"0.5",stroke:"#4269D0"}),(0,r.jsx)("rect",{x:"12.5",y:"10.5",width:"7",height:"1",transform:"rotate(90 12.5 10.5)",stroke:"#4269D0"})]})),merge:M,publish:M};function G(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,O.v3)(e,t.user)?s?"You":"you":(0,O.RX)(t.user)}function X(e,t){if(1===t.length)return"trash"===t[0].type?"This notebook was ".concat(W(t[0])):"".concat(G(e,t[0])," ").concat(W(t[0]));let s=[];const n=t.slice().reverse();if(1===new Set(t.map((e=>W(e)))).size)s=n.map(((t,s)=>G(e,t,0===s))),s[s.length-1]+=" ".concat(W(t[0]));else{let t;for(const[i,l]of n.entries()){const n=G(e,l,0===i),r=W(l),a=n.toLowerCase()!==t?"".concat(n," ").concat(r):r;s.push(a),t=n.toLowerCase()}}const i=s.pop();return"".concat(s.join(", ")," and ").concat(i)}const $=e=>{let{days:t,type:s}=e;return(0,r.jsx)("div",{className:"pv3 mt3 tc ba b--silver br3 b--dashed bw1",children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"f6 tc mid-gray lh-copy",children:["No ","public"===s?"public":""," activity"," ","1"===t?"today":"7"===t?"this week":"in the past 30 days","."]})})})},Q=e=>{let{user:t,items:s,index:n,unified:i}=e;const l=(0,H.GS)(H.ro),a=s[0],{notebook:{owner:c,title:d,thumbnail:u},content:h,type:m}=a,p=(0,o.useMemo)((()=>({id:a.notebook.id,owner:a.notebook.owner,title:a.notebook.title,thumbnail:a.notebook.thumbnail,publishLevel:a.notebook.publish_level,publishTime:a.notebook.publish_time,trashed:a.notebook.trashed,roles:a.notebook.roles,sharing:a.notebook.sharing,slug:a.notebook.slug})),[a]),b=(0,H.GS)("(max-width: 640px)"),f=s.length>1,x=Array.from(new Set(s.map((e=>e.user)))).reverse().slice(0,l?5:20),v=x.length>1||x[0]!==c,g=A[a.type];let j=(0,q.Bi)(a.notebook);return"fork"===m&&(j+="/forks"),(0,r.jsx)(V.Z,{href:j,children:(0,r.jsxs)("a",{className:P()("flex items-center justify-between pv2-ns pv3 f6 no-underline near-black hover-blue",0===n?"":"bt b--light-silver"),children:[(0,r.jsxs)("div",{className:"flex flex-auto",children:[(0,r.jsxs)("div",{className:"flex relative mr2 flex-no-shrink items-center",children:[i&&(0,r.jsx)(I.Gz,{owner:c,children:(0,r.jsx)(F.q,{user:c,size:12,className:"h1 bg-white ba b--white br-100 bw1"})}),(0,r.jsx)(g,{})]}),(0,r.jsx)("div",{className:"pr3-ns flex-auto",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex f7 fw5 gray lh-title flex-wrap items-center",children:[(0,r.jsx)(w.vR,{notebook:p}),(0,r.jsx)("span",{className:"mh1 silver",children:"\u2022"}),X(t,s),(0,r.jsx)(D.q,{className:"ml1",time:new Date(a.time),precision:f?"day":null})]}),(0,r.jsx)("div",{className:"flex mt1 f6 fw6 items-center justify-between lh-f7",children:(0,r.jsx)("div",{children:d||"Untitled"})})]})}),(0,r.jsxs)("div",{className:"flex relative mr2 flex-no-shrink items-center",children:[v?(0,r.jsx)("div",{className:"flex h1 ml2 mr2 flex-no-shrink items-center",children:x.map(((e,t)=>(0,r.jsx)(I.Gz,{owner:e,children:(0,r.jsx)(F.q,{user:e,size:20,className:"relative b--white b--solid br-100",style:{marginRight:-8,borderWidth:3,zIndex:x.length-t}},e.id)},e.id)))}):null,!f&&h&&(0,r.jsx)("div",{className:"truncate mt1 mr3 f7 fw5 gray",children:h})]})]}),(0,r.jsx)(E.p,{className:"relative ml2 ba b--silver br2 hover-light-shadow overflow-hidden",style:{width:b?72:90,height:b?48:60,flexShrink:0},hash:u})]})})};function K(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"7";const i="1"===n?Intl.DateTimeFormat().resolvedOptions().timeZone:void 0;return"".concat(e||"team"!==t.type?"/user":"/team/".concat(t.id),"/activity?").concat((0,Z.P)({type:s,days:n,timezone:i,all:e}))}const J=e=>{let{user:t,context:s,unified:a,itemsShown:c=7}=e;const{0:d,1:u}=(0,o.useState)(!0),{0:h,1:m}=(0,o.useState)(!1),{0:p,1:b}=(0,o.useState)("all"),{0:f,1:x}=(0,o.useState)("7"),{data:v}=(0,k.h_)(K(a,s,p,f)),{0:j,1:y}=(0,o.useState)([]);(0,o.useEffect)((()=>{v&&(m(!1),y(function(e,t){let{activity:s,documents:r,users:a}=t;const o=new Map(r.map(Y)),c=new Map(a.map(Y)),d=new Map;for(const f of s){var{document_id:u,user_id:h,owner_id:m}=f,p=(0,l.Z)(f,["document_id","user_id","owner_id"]);const t=m?c.get(m):e,s=u&&o.get(u);if(!s)continue;const r=h&&c.get(h);if(!r)continue;const a=(0,i.Z)((0,n.Z)({},p),{notebook:(0,n.Z)({owner:t},s),user:r}),{date:b,type:x,notebook:{id:v}}=a;B(d,[b,v,z(x)],a)}const b=[];for(const n of d.values())for(const e of n.values())for(const t of e.values())b.push(t);return b.sort(((e,t)=>t[0].time.toISOString().localeCompare(e[0].time.toISOString())))}(s,v)),u(!1))}),[s,v]);const w=h?j:j.slice(0,c);return(0,O.EO)(t)&&w.length<3?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex-ns pb2 mt4 mb2 b--light-silver bb-ns items-center justify-between",children:[(0,r.jsx)("div",{className:"mb0-ns mb3 f4 fw7 near-black",children:"Recent activity"}),(0,r.jsxs)("span",{children:[(0,r.jsxs)(g.g,{"aria-label":"Activity types",id:"type",value:p,onChange:e=>b(e.target.value),className:"mr3",children:[(0,r.jsx)("option",{value:"all",children:"All activity"}),(0,r.jsx)("option",{value:"user",children:"Your activity"}),"team"===s.type&&(0,r.jsx)("option",{value:"team",children:"Team activity"}),(0,r.jsx)("option",{value:"public",children:"Public activity"})]}),(0,r.jsxs)(g.g,{"aria-label":"Time range",id:"days",value:f||"",onChange:e=>x(e.target.value),children:[(0,r.jsx)("option",{value:"1",children:"Today"}),(0,r.jsx)("option",{value:"7",children:"This week"}),(0,r.jsx)("option",{value:"30",children:"Last 30 days"})]})]})]}),(0,r.jsx)("div",{className:"relative",children:!d&&(w.length?(0,r.jsxs)(r.Fragment,{children:[w.map(((e,s)=>(0,r.jsx)(Q,{index:s,user:t,items:e,unified:a},s))),!h&&j.length>c?(0,r.jsx)("div",{className:"flex items-center justify-center",style:{margin:"0 -1rem",background:"linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 60%)"},children:(0,r.jsx)("button",{className:"ph3 pv2 mb3 f7 fw6 mid-gray hover-blue bg-white ba b--light-silver light-shadow hover-light-shadow br-pill pointer",onClick:()=>m(!0),children:"Show all"})}):(0,r.jsxs)("div",{className:"pt4 f7 fw5 tc gray",children:[(0,r.jsx)("span",{role:"img","aria-label":"star",children:"\ud83c\udf1f"})," ","You are all caught up!"]})]}):(0,r.jsx)($,{days:f,type:p}))})]})};var ee=s(60357),te=s.n(ee),se=s(89905),ne=s(40042);const ie="https://static.observablehq.com",le="free_pro_trial_notice",re="show_pro_downgrade_banner",ae=e=>{let{title:t,learnMoreHref:s,description:n,actionButtons:i,onDismiss:l,graphic:a="".concat(ie,"/assets/expired-trial-illustration.svg")}=e;return(0,r.jsxs)("div",{className:"jsx-7caf8bc2ff3002f1 flex items-center ba br2 b--light-gray pa3 mb3",children:[(0,r.jsx)("img",{src:a,alt:"","aria-hidden":"true",style:{width:265,height:166,objectFit:"contain"},className:"jsx-7caf8bc2ff3002f1"}),(0,r.jsxs)("div",{className:"jsx-7caf8bc2ff3002f1 flex flex-column w-100",children:[(0,r.jsxs)("div",{className:"jsx-7caf8bc2ff3002f1 flex justify-between",children:[(0,r.jsx)("div",{className:"jsx-7caf8bc2ff3002f1 f5 fw6",children:t}),l&&(0,r.jsx)(v.hU,{icon:se.Z,onClick:l,colorless:!0,tabIndex:-1})]}),(0,r.jsxs)("div",{className:"jsx-7caf8bc2ff3002f1 fw4 textBlock lh-copy",children:[n,s&&(0,r.jsx)("p",{className:"jsx-7caf8bc2ff3002f1",children:(0,r.jsx)(V.Z,{href:s,children:(0,r.jsx)("a",{className:"jsx-7caf8bc2ff3002f1 flex db mt3 f6 fw5 blue hover-lightest-blue items-center lh-solid link",children:"Learn more"})})})]}),i]}),(0,r.jsx)(te(),{id:"7caf8bc2ff3002f1",children:".textBlock.jsx-7caf8bc2ff3002f1{max-width:528px}"})]})},oe=e=>{let{context:t}=e;const s=(0,ne.I0)();return(0,r.jsx)(ae,{learnMoreHref:"/@observablehq/hello-pro",title:"You have a Free Individual account",description:(0,r.jsxs)("p",{children:["Your private and unlisted notebooks will be read-only until you make them public with the ",(0,r.jsx)("b",{children:"Share"})," button ",(0,r.jsx)("em",{children:"or"})," upgrade to a Pro Individual account."]}),actionButtons:(0,r.jsxs)(v.CQ,{children:[(0,r.jsx)(v.kq,{text:"Dismiss",onClick:()=>s({type:"updateCurrentUserSetting",key:le,value:"hide"})}),(0,r.jsx)(v.KM,{text:"Upgrade",onClick:()=>s({type:"showModal",modal:"changeUserTier",modalProps:{user:t}})})]})})},ce=e=>{let{context:t,isOwner:s}=e;const n=(0,ne.I0)(),i=(0,o.useCallback)((()=>n({type:"updateTeamSetting",teamId:t.id,key:re,value:null})),[n,t.id]);return(0,r.jsx)(ae,{title:"This workspace\u2019s free trial of Pro has ended",description:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"You can continue working here for free, or have the workspace owner upgrade to Pro and regain access to features like:"}),(0,r.jsxs)("ul",{className:"pl3",children:[(0,r.jsx)("li",{children:"Private notebooks and collections"}),(0,r.jsx)("li",{children:"Private sharing and collaboration with team members"}),(0,r.jsx)("li",{children:"Database connectors and secrets for accessing your data"})]})]}),onDismiss:s?i:void 0,actionButtons:s?(0,r.jsx)(v.CQ,{children:(0,r.jsx)(v.KM,{text:"Upgrade to Pro",onClick:()=>n({type:"showModal",modal:"changeUserTier",modalProps:{user:t}})})}):(0,r.jsx)(r.Fragment,{}),graphic:"".concat(ie,"/assets/hourglass-illustration.svg")})};var de=s(24741),ue=s(39912),he=s(36307),me=s(62806),pe=s(19671),be=s(4242);const fe=e=>{let{user:t}=e;const{data:s}=(0,k.h_)("/documents/following?limit=12"),n=!(s&&s.total>0),i=(0,be.v9)((e=>e.currentUser));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex pb2 mt4 mb2 b--light-silver bb-ns justify-between",children:[(0,r.jsx)("div",{className:"mt2 f4 fw7",children:"From people you follow"}),(0,r.jsx)(V.Z,{href:"/following",onClick:()=>{(0,pe.MR)((0,pe.a$)({type:"user:social:followFeedViewMore",eventVersion:1,currentUser:t}))},children:(0,r.jsxs)("a",{className:"db flex mt2 f7 fw6 no-underline blue hover-lightest-blue items-center lh-f7",children:["View more",(0,r.jsx)(he.Z,{className:"child"})]})})]}),n?(0,r.jsxs)("div",{className:"pt4 f7 fw5 tc gray",children:[0===t.following_count?ue._L:ue.Wh,"."]}):(0,r.jsx)(y.a,{response:s,items:"notebooks",pagination:!1,className:"mb2",canFormat:!1,columns:2,children:(e,t)=>{const s=(0,me.H)(e);function n(){(0,pe.MR)((0,pe.a$)({type:"user:social:followFeedViewNotebook",eventVersion:1,currentUser:i}))}return(0,r.jsx)("div",{role:"button",tabIndex:0,onKeyDown:n,onClick:n,children:(0,r.jsx)(w.pg,{type:"reader",format:t,notebook:s})},e.id)}})]})};var xe=s(41664),ve=s.n(xe),ge=s(10559);const je=e=>{let{dispatch:t}=e;return(0,r.jsxs)("div",{className:"jsx-64de02390d27bec9",children:[(0,r.jsxs)("div",{className:"jsx-64de02390d27bec9 flex items-center justify-between bb b--light-silver",children:[(0,r.jsx)("div",{className:"jsx-64de02390d27bec9 mt2 f4 fw7 mb1",children:"Quick guides"}),(0,r.jsx)(v.hU,{icon:se.Z,onClick:()=>t({type:"showModal",modal:"hideGuides"}),colorless:!0})]}),(0,r.jsxs)("div",{className:"jsx-64de02390d27bec9",children:[(0,r.jsx)("div",{className:"jsx-64de02390d27bec9 mv3 mid-gray",children:"These 5-minute explorations show you how to build useful notebooks using real data."}),(0,r.jsx)("div",{className:"jsx-64de02390d27bec9 guide-grid",children:ge.guides.map(((e,t)=>{let{title:s,type:n,image:i,tags:l}=e;return(0,r.jsx)(ye,{title:s,type:n,image:i,tags:l},t)}))})]}),(0,r.jsx)(te(),{id:"64de02390d27bec9",children:".guide-grid.jsx-64de02390d27bec9{display:grid;grid-gap:1.5em;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}"})]})},ye=e=>{let{title:t,type:s,image:n}=e;return(0,r.jsxs)(ve(),{href:"/guide/".concat(s),className:"flex ba br2 pa3 b--light-gray hover-light-shadow items-center blue lh-f6 fw5 g3",children:[(0,r.jsx)("img",{src:n,alt:t,className:"flex-shrink-0",style:{width:80,height:80,objectFit:"contain"}}),t]})},we=e=>{let{tutorials:t,user:s}=e;return t?(0,r.jsxs)("div",{className:"mt4",children:[(0,r.jsxs)("div",{className:"flex pb2 mb2 f4 fw7 near-black b--light-silver bb-ns justify-between items-center",children:["Learn",(0,r.jsx)(V.Z,{href:"/tutorials",children:(0,r.jsxs)("a",{className:"db flex f7 fw6 no-underline blue hover-lightest-blue justify-end items-center lh-f5",onClick:()=>{(0,pe.MR)((0,pe.a$)({type:"user:manage:clickLearnTutorials",eventVersion:1,currentUser:s}))},children:["All tutorials ",(0,r.jsx)(he.Z,{className:"child"})]})})]}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))",gridColumnGap:"2rem"},children:t.map(((e,t)=>(0,r.jsxs)("div",{onClick:()=>{(0,pe.MR)((0,pe.a$)({type:"user:manage:clickLearnLink",data:{slug:e.slug},eventVersion:1,currentUser:s}))},children:[(0,r.jsx)(f.Fl,{collection:e},t)," "]},t)))})]}):null};var ke=s(73779),Ne=s(99414),Ce=s(14416);const Ze=["collectionCount","forked","likes","publishLevel","publishTime","publishVersion","roles","saveTime","saveVersion","sharing","slug","thumbnail","trashed"];function Le(e,t){if(!e.id)return!1;const s=t.find((t=>t.id===e.id));return!(s&&!Ze.find((t=>e[t]!==s[t]))&&e.owner.id===s.owner.id)}const Te=e=>{let{context:t}=e;return(0,r.jsx)(V.Z,{href:t&&"team"===t.type?"/team/@".concat(t.login,"/new"):"/new",children:(0,r.jsxs)("a",{tabIndex:-1,className:"jsx-ff3b855c25dc0850 outline-0",children:[(0,r.jsx)("div",{className:"jsx-ff3b855c25dc0850 relative mb2 gray hover-dark-gray bg-white ba b--silver br2 hover-b--light-gray hover-light-shadow thumbnail-grid",children:(0,r.jsxs)("div",{style:{top:"45%"},className:"jsx-ff3b855c25dc0850 inline-flex absolute left-0 right-0 w3 f6 fw6 ml-auto mr-auto",children:[(0,r.jsx)(Ne.Z,{className:"mr1"}),(0,r.jsx)("span",{className:"jsx-ff3b855c25dc0850",children:"New"})]})}),(0,r.jsx)(te(),{id:"ff3b855c25dc0850",children:".thumbnail-grid{padding-top:62.5%}"})]})})};function _e(e){return e?"team"===e.type?"/team/".concat(e.id,"/continue-editing"):"/user/continue-editing":"/user/continue-editing?unified=true"}const Se=e=>{let{context:t,user:s}=e;const n=t?3:4,[i]=function(e,t){const{data:s,isValidating:n,mutate:i}=(0,k.h_)(e),{0:l,1:r}=(0,o.useState)(s?(0,me.x)(s):void 0),c=(0,Ce.oR)(),d=(0,a.useRouter)();return(0,o.useEffect)((()=>{const e=s?(0,me.x)(t?s.slice(0,t):s):void 0;if(r(e),e)return c.subscribe((()=>{Le(c.getState().notebook,e)&&i(s)}))}),[r,s,c,e,d,t,i]),[l,n,i]}(_e(t),n);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex pb2 mb2 b--light-silver bb-ns justify-between",children:[(0,r.jsx)("div",{className:"mt2 f4 fw7",children:" Recent notebooks"}),t&&i&&i.length>=n?(0,r.jsx)(V.Z,{href:(0,O.m6)(t),children:(0,r.jsxs)("a",{className:"db flex mt2 f7 fw6 no-underline blue hover-lightest-blue items-center lh-f7",children:["View all","team"===t.type?" in ".concat((0,O.RX)(t)):null,(0,r.jsx)(he.Z,{className:"child"})]})}):null]}),i&&0===i.length?(0,r.jsxs)("div",{className:"pv4 mt3 mb3 tc ba b--silver br3 b--dashed bw1",children:[(0,r.jsxs)("div",{className:"mh2 mb3 f7 tc mid-gray lh-copy",children:["You haven\u2019t edited any notebooks recently",t&&"team"===t.type?" in ".concat((0,O.RX)(t)):null,"."]}),(0,N.So)(s)&&(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(V.Z,{href:t&&"team"===t.type?"/team/@".concat(t.login,"/new"):"/new",children:(0,r.jsxs)("a",{className:"flex dib center ph3 pv2 f7 fw6 mid-gray bg-light-silver hover-bg-silver br2 items-center lh-f7 link",children:[(0,r.jsx)(Ne.Z,{className:"mr1"}),(0,r.jsx)("div",{children:"Create notebook"})]})})})]}):(0,r.jsx)("div",{className:"listing-grid",style:{rowGap:"0"},children:i&&(0,r.jsxs)(r.Fragment,{children:[i.map(((e,t)=>(0,r.jsx)("div",{className:"mb0-ns mb3",children:(0,r.jsx)(w.pg,{index:t,format:"grid",notebook:e,currentUser:s})},e.id))),(0,r.jsxs)(r.Fragment,{children:[i.length<n&&(0,N.So)(s)&&(0,r.jsx)(Te,{context:t}),ke.y.slice(0,n-i.length)]})]})})]})};var Re=s(27193);const Ue=e=>{let{stats:t}=e;const s="fw6 dark-gray",n="gray ml1 fw5";return(0,r.jsxs)("div",{className:"f7",children:[(0,r.jsxs)("span",{className:"dib mr3",children:[(0,r.jsx)("span",{className:s,children:(0,Re.CZ)(t.document_count)}),(0,r.jsx)("span",{className:n,children:1===t.document_count?"Notebook":"Notebooks"})]}),(0,r.jsxs)("span",{className:"dib mr3",children:[(0,r.jsx)("span",{className:s,children:(0,Re.CZ)(t.like_count)}),(0,r.jsx)("span",{className:n,children:1===t.like_count?"Like":"Likes"})]}),(0,r.jsxs)("span",{className:"dib mr3",children:[(0,r.jsx)("span",{className:s,children:(0,Re.CZ)(t.fork_count)}),(0,r.jsx)("span",{className:n,children:1===t.fork_count?"Fork":"Forks"})]})]})};var Pe=s(28923);function Fe(){return{path:"/documents/public/popular?".concat((0,Z.P)({date:S.Z.offset((0,R.l6)(),-2).toISOString(),limit:10})),anonymous:!0}}function Me(){return{path:"/documents/public/trending?".concat((0,Z.P)({limit:6})),anonymous:!0}}function Ve(e){return{path:"/billing/".concat(e.login,"/trial"),anonymous:!1}}function Ee(e){return"team"===e.type?"/team/".concat(e.id,"/stats"):"/user/stats"}const Ie=e=>{let{context:t,user:s,dispatch:n}=e;const i=(0,O.xT)(s,t),l="team"===t.type&&(0,O.qb)(s,t);var a;const o=null!==(a=null===i||void 0===i?void 0:i.tier)&&void 0!==a?a:s.tier,{data:c,isValidating:d}=(0,k.h_)(Ee(t)),{data:u}=(0,k.h_)(Fe().path),h=u?(0,me.x)(u):void 0,{data:m}=(0,k.h_)(Me().path),p=m?(0,me.x)(m):void 0,{data:b}=(0,k.h_)("/explore/public/tutorials"),{data:f}=(0,k.h_)(Ve(t).path);let{data:x,error:v}=(0,k.h_)("/user/has-private-or-unlisted-documents");var g;v&&(x=!1),x=!!x;const j=(0,Pe.aZ)(o,null===f||void 0===f?void 0:f.trial_end,null!==(g=null===f||void 0===f?void 0:f.has_billing_info)&&void 0!==g&&g),y="public"===o&&"individual"===t.type&&"hide"!==s.settings.free_pro_trial_notice&&x,C=!j&&!y&&"public"===t.tier&&"show"===t.settings[re]&&(0,N.Yz)(s,t),Z="hide"!==s.settings.guides&&("team"!==t.type||!s.has_workspace);return(0,r.jsxs)("div",{style:{minHeight:"22em"},children:[y&&(0,r.jsx)(oe,{context:t}),C&&(0,r.jsx)(ce,{context:t,isOwner:l}),(0,r.jsxs)("div",{className:"flex-ns items-end justify-between",children:[(0,r.jsx)("div",{style:w.r2,className:"ma0 mb0-ns mb3 fw7 near-black",children:"Home"}),(0,r.jsx)("div",{className:"flex relative items-center justify-between",children:!d&&c&&(0,r.jsx)(Ue,{stats:c})})]}),(0,r.jsxs)("div",{className:"mt4",children:[j&&(0,r.jsx)(Pe.Je,{trialInfo:f,context:t,user:s,dispatch:n}),Z&&(0,r.jsx)("div",{className:"dn db-ns",children:(0,r.jsx)(je,{dispatch:n})}),(0,N.wW)(s,t)?(0,r.jsx)(Se,{user:s,context:t,dispatch:n},t.id):null,(0,r.jsx)("div",{className:"flex-auto",children:(0,r.jsx)(J,{user:s,context:t})}),"individual"===t.type&&(0,O.v3)(s,t)&&(0,r.jsx)("div",{className:"flex-auto",children:(0,r.jsx)(fe,{user:s})}),b&&(0,r.jsx)(we,{user:s,tutorials:b})]}),p&&h&&(0,r.jsx)(de.r,{trending:p,popular:h})]})};var De=s(50309),He=s(64063),qe=s.n(He),Oe=s(64600);function Ye(e){return(0,r.jsx)("h2",{className:"ma0 fw7 near-black",style:w.r2,children:e})}const Be=e=>{let{notebooks:t,owner:s,sort:n,tab:i,direction:l,setSort:a,setDirection:o}=e;return(0,r.jsx)(y.a,{response:t,items:"notebooks",emptyMessage:"".concat((0,O.RX)(s)," doesn\u2019t have any public notebooks."),filters:()=>Ye("notebooks"===i?"Notebooks":"Public notebooks"),sorts:(0,r.jsx)(Oe.I,{sort:n,direction:l,setSort:a,setDirection:o,publicOnly:!0}),children:(e,t)=>(0,r.jsx)(w.pg,{format:t,notebook:e,type:"reader"})})};var ze=s(90627);const We={notebooks:"Notebooks",public:"Public notebooks",trash:"Trash",likes:"Likes"};function Ae(e){return{tab:(0,C.T)(e,"tab"),page:(0,C.T)(e,"page"),publishLevel:(0,C.T)(e,"publishLevel"),shareLevel:(0,C.T)(e,"shareLevel"),sort:(0,C.T)(e,"sort","edited"),direction:(0,C.T)(e,"direction","desc")}}const Ge=e=>{let{context:t,user:s,dispatch:l}=e;const{push:c,query:d}=(0,a.useRouter)(),u=Ae(d),{tab:h}=u;if("likes"===h&&s.id!==t.id)throw new Error("unexpected tab");(0,o.useEffect)((()=>{"team"===t.type?(0,pe.MR)((0,pe.gv)({type:"team:view:notebookList",data:{},currentUser:s,team:t,eventVersion:1})):(0,pe.MR)((0,pe.a$)({type:"user:view:notebookList",data:{},currentUser:s,eventVersion:1}))}),[t,s]);const[m,,p]=function(e){const{data:t,isValidating:s,mutate:n}=(0,k.h_)(e),{0:i,1:l}=(0,o.useState)(t?(0,me.x)(t):void 0),r=(0,Ce.oR)(),c=(0,a.useRouter)();return(0,o.useEffect)((()=>{const e=t?(0,me.x)(t):void 0;if(l(e),e)return r.subscribe((()=>{Le(r.getState().notebook,e.results)&&n(t)}))}),[l,t,r,e,c,n]),[i,s,n]}(function(e,t){const s=Ae(t);return"likes"===s.tab?"/user/likes?".concat((0,Z.P)({page:s.page||1})):"public"===s.tab?"/documents/@".concat(e.login,"?").concat((0,Z.P)({sort:(0,C.T)(t,"sort"),direction:s.direction,page:s.page||1})):"".concat("team"===e.type?"/team/".concat(e.id):"/user","/documents?").concat((0,Z.P)({types:"trash"===s.tab?["trash"]:s.publishLevel?[s.publishLevel]:void 0,share_level:s.shareLevel,sort:s.sort,direction:s.direction,page:s.page||1}))}(t,d));const b={all:{publishLevel:null,shareLevel:null},only_you:{publishLevel:["private"],shareLevel:"private"},shared:{publishLevel:["private"],shareLevel:"shared"},team:{publishLevel:["private"],shareLevel:"team"},unlisted:{publishLevel:["live_unlisted","shared"],shareLevel:null},public:{publishLevel:["live","public"],shareLevel:null}};function f(){var e;const t=(null===(e=u.publishLevel)||void 0===e?void 0:e.split(","))||[];var s;const n=null!==(s=u.shareLevel)&&void 0!==s?s:null;for(const[i,{publishLevel:l,shareLevel:r}]of Object.entries(b))if(qe()(t,l)&&n===r)return i;return""}const x=["pro","pro_enterprise","public"].includes(t.tier),j=!!("likes"===h||"trash"===h||"public"===h)&&!(0,N.wW)(s,t)&&"trash"!==h;return(0,r.jsxs)(r.Fragment,{children:[!j&&(0,r.jsxs)("div",{className:P()("flex justify-between items-center","likes"===h?"":"mb3"),children:[(0,r.jsx)("div",{style:(0,i.Z)((0,n.Z)({},w.r2),{height:"likes"===h?0:"auto"}),className:P()("fw7 near-black","likes"===h?"":"mb0-ns mb2"),children:h&&We[h]}),"notebooks"===h||"public"===h?(0,N.wW)(s,t)&&(0,r.jsx)(V.Z,{"data-cy":"new-notebook",href:"team"===t.type?"/team/@".concat(t.login,"/new"):"/new",children:(0,r.jsxs)("a",{className:"inline-flex h2 ph3 pv2 f6 fw6 no-underline dark-gray hover-near-black bg-silver hover-bg-light-silver br2 items-center gray-button blue-ring-focus bn pointer animate-all",children:[(0,r.jsx)(Ne.Z,{className:"mr1"}),"New"]})}):"trash"===h&&(0,N.Db)(s,t)&&m&&m.total>0?(0,r.jsx)(v.aX,{onClick:async function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{await(0,k.Fv)("/user/trash/empty","team"===t.type?{team:t.id}:{}),l({type:"showSuccessToast",message:"Trash emptied"}),p()}catch(e){(0,ze.S)({dispatch:l,message:"Unable to empty the trash. Try again?",key:"emptyTrash",error:e})}},className:"ph3 nowrap hover-red",text:"Empty trash"}):null]}),"trash"===h?(0,r.jsx)("div",{className:"mb3 f6 mid-gray",children:"Notebooks in the trash for more than 30 days will be automatically deleted."}):null,m&&(0,r.jsx)(y.a,{listTitle:j?Ye("Public notebooks"):void 0,response:m,filters:"likes"===h||"trash"===h||"public"===h?null:()=>(0,r.jsx)("div",{className:"flex flex-column flex-row-ns items-center-ns",children:x?(0,r.jsxs)("div",{className:"dib-ns db mt0-ns mt2",children:[(0,r.jsx)("label",{className:"mr2 f7 fw6 gray lh-f7",htmlFor:"sharePublishLevel",children:"Access"}),(0,r.jsxs)(g.g,{id:"sharePublishLevel",onChange:e=>function(e){const{publishLevel:t,shareLevel:s}=b[e];c((0,C.r)((0,i.Z)((0,n.Z)({},u),{page:void 0,publishLevel:t,shareLevel:s})),void 0,{shallow:!0})}(e.target.value),value:f(),children:[(0,r.jsx)("option",{value:"all",children:"All"}),(0,r.jsx)("option",{value:"only_you",children:"Only you"}),(0,r.jsx)("option",{value:"shared",children:"Shared"}),"team"===t.type&&(0,r.jsx)("option",{value:"team",children:"Team"}),(0,r.jsx)("option",{value:"unlisted",children:"Unlisted"}),(0,r.jsx)("option",{value:"public",children:"Public"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"dib-ns db",children:[(0,r.jsx)("label",{className:"mr2 f7 fw6 gray lh-f7",htmlFor:"shareLevel",children:"Access"}),(0,r.jsxs)(g.g,{id:"shareLevel",className:"mr4",value:u.shareLevel||"",onChange:e=>{return t=e.target.value,void c((0,C.r)((0,i.Z)((0,n.Z)({},u),{shareLevel:t,page:void 0})),void 0,{shallow:!0});var t},children:[(0,r.jsx)("option",{value:"",children:"All"}),(0,r.jsx)("option",{value:"private",children:"You"}),(0,r.jsx)("option",{value:"shared",children:"Shared"}),"team"===t.type&&(0,r.jsx)("option",{value:"team",children:"Team"})]})]}),(0,r.jsxs)("div",{className:"dib-ns db mt0-ns mt2",children:[(0,r.jsx)("label",{className:"mr2 f7 fw6 gray lh-f7",htmlFor:"publishLevel",children:"Published"}),(0,r.jsxs)(g.g,{id:"publishLevel",value:u.publishLevel||"",onChange:e=>{return t=e.target.value,void c((0,C.r)((0,i.Z)((0,n.Z)({},u),{publishLevel:t,page:void 0})),void 0,{shallow:!0});var t},children:[(0,r.jsx)("option",{value:"",children:"All"}),(0,r.jsx)("option",{value:"private",children:"Not published"}),(0,r.jsx)("option",{value:"shared",children:"Published (unlisted)"}),(0,r.jsx)("option",{value:"public",children:"Published"})]})]})]})}),sorts:"likes"===h||"trash"===h?null:(0,r.jsx)(Oe.I,{sort:u.sort,direction:u.direction,setSort:function(e){c((0,C.r)((0,i.Z)((0,n.Z)({},u,e?{sort:e,direction:["title"].includes(e)?"asc":"desc"}:null),{page:void 0})),void 0,{shallow:!0})},setDirection:function(e){c((0,C.r)((0,i.Z)((0,n.Z)({},u,e?{direction:e}:null),{page:void 0})),void 0,{shallow:!0})}}),items:"trash"===h?"trashed notebooks":h,emptyMessage:"notebooks"===h||"public"===h?"\u261d\ufe0f No notebooks found.":"trash"===h?"\u2728 Your trash is empty.":"likes"===h?"\ud83d\udc94 You haven't liked any notebooks yet.":null,children:(e,t)=>(0,r.jsx)(w.pg,{type:"likes"===h?"reader":void 0,format:t,notebook:e,currentUser:s})})]})};var Xe=s(51440),$e=s(23559);const Qe="minmax(160px, 80%) minmax(15%, 200px) auto",Ke=e=>{let{suggestion:t,first:s,user:n}=e;const{to_title:i,from_id:l,description:a,create_time:o,close_time:c,merge:d,creator:u}=t,h=(0,r.jsx)(D.q,{time:new Date(c||o)}),m=(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("div",{className:"truncate fw6",children:i||"Untitled"}),(0,r.jsx)("div",{className:"mid-gray",children:a?"".concat(a):""})]});return(0,r.jsx)(V.Z,{href:c?"/d/".concat(l):(0,q.yY)(t),children:(0,r.jsx)("a",{className:P()("db ph3 pv2 no-underline dark-gray hover-blue",s?"":"bt b--light-silver"),children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:Qe,alignItems:"start"},children:[(0,r.jsx)("div",{className:"pr4",children:m}),(0,r.jsxs)("div",{className:"flex truncate mr2 items-center",children:[(0,r.jsx)(F.q,{user:u,size:28,className:"mh2 br-100"}),(0,r.jsxs)("div",{className:"",children:[" ",(0,r.jsx)("div",{className:"fw5 dark-gray",children:(0,O.v3)(n,u)?"You":(0,O.RX)(u)}),(0,r.jsxs)("div",{className:"gray",children:[" ",h]})]})]}),(0,r.jsx)("div",{className:"tr mid-gray",title:null!==d?"Merged":c?"Closed":"Open",children:null!==d?"Merged":c?"Closed":"Pending"})]})})})},Je=e=>{let{suggestions:t,youDont:s,type:n,user:i}=e;return(0,r.jsx)("div",{className:"mt2 overflow-x-auto",style:{marginBottom:240},children:t.length?(0,r.jsxs)("div",{style:{minWidth:600},className:"w-100 f6 bg-white ba b--light-silver br2 lh-copy overflow-x-auto",children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:Qe,alignItems:"start"},className:"f6 bg-white",children:[(0,r.jsx)("div",{className:"ph3 pv2 f7 fw5 ttu mid-gray bg-near-white",children:"Suggestion"}),(0,r.jsx)("div",{className:"ph3 pv2 f7 fw5 nowrap ttu mid-gray bg-near-white",children:"Submitted by"}),(0,r.jsx)("div",{className:"ph3 pv2 f7 fw5 tr ttu mid-gray bg-near-white",children:"Status"})]}),t.map(((e,t)=>(0,r.jsx)(Ke,{suggestion:e,user:i,first:0===t},e.id)))]}):(0,r.jsxs)($e.u,{children:[s," have any ","closed"===n?"closed ":"open ","suggestions."]})})};var et=s(51289);const tt=e=>{let{context:t,user:s}=e;const i="team"===t.type?"Your team doesn\u2019t":"You don\u2019t",{push:l,query:o}=(0,a.useRouter)(),c=(0,C.T)(o,"type"),d=(0,C.T)(o,"page",1),u=(0,C.T)(o,"tab"),{data:h}=(0,k.h_)("".concat("team"===t.type?"/team/".concat(t.id):"/user","/suggestions?").concat((0,Z.P)((0,n.Z)({page:d},c?{type:c}:null))));return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:w.r2,className:"mb3 fw7 near-black",children:"Suggestions"}),(0,r.jsxs)("div",{className:"pv2 f7",children:[(0,r.jsx)("label",{className:"mr2 fw6 gray",htmlFor:"type",children:"Type"}),(0,r.jsxs)(g.g,{className:"near-black",id:"type",value:c||"",onChange:e=>l(function(e){const t=et.Qg?location.pathname:"/",s=new URLSearchParams;return Object.entries(e).forEach((e=>{let[t,n]=e;void 0!==n&&null!==n&&s.append(t,String(n))})),"".concat(t,"?").concat(s.toString())}({tab:u,type:e.target.value||void 0,page:d>1?d:void 0})),children:[(0,r.jsx)("option",{value:"",children:"Open"}),(0,r.jsx)("option",{value:"closed",children:"Closed"})]})]}),h&&(0,r.jsx)(Xe.t,{itemName:"suggestions",response:h,filterName:c||"open",children:(0,r.jsx)(Je,{suggestions:h.results,youDont:i,user:s})})]})};const st=e=>{let{user:t,date:s,dispatch:n}=e;s||(s=S.Z.offset((0,R.l6)(),-2));const{data:i,isValidating:l}=(0,k.h_)("/documents/public/popular?".concat((0,Z.P)({date:s.toISOString(),limit:10}))),a=i?(0,me.x)(i):void 0,{data:o,isValidating:c}=(0,k.h_)("/documents/public/trending?".concat((0,Z.P)({limit:9}))),d=o?(0,me.x)(o):void 0;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{minHeight:"22em"},className:"flex-l mt4 flex-row-reverse items-start",children:(0,r.jsxs)("div",{className:"mb4 flex-auto",children:[(0,r.jsx)(Se,{user:t,dispatch:n}),(0,r.jsx)(J,{context:t,user:t,unified:!0,itemsShown:20}),(0,r.jsx)(fe,{user:t})]})}),!(l||c)&&d&&a&&(0,r.jsx)(de.r,{trending:d,popular:a})]})};var nt=s(28087);const it=e=>{let{tab:t,owner:s}=e;const{push:l,query:o}=(0,a.useRouter)(),c=function(e){return{tab:(0,C.T)(e,"tab"),page:(0,C.T)(e,"page"),sort:(0,C.T)(e,"sort","follow_time"),direction:(0,C.T)(e,"direction","desc")}}(o);let{data:d,mutate:u}=(0,k.h_)(function(e,t,s){return{path:"/user/@".concat(e,"/").concat(t,"?").concat((0,Z.P)({page:s.page||1,sort:s.sort||"follow_time",direction:s.direction})),anonymous:!1}}(s.login,t,c).path);return(0,ne.v9)((e=>{if(null===d||void 0===d?void 0:d.results){const[t,s]=(0,nt.r)(d.results,e);s&&u((0,i.Z)((0,n.Z)({},d),{results:t}))}})),d||(d={results:[],total:0,page:0,per_page:30,truncated:!1}),(0,r.jsx)(ue.tY,{tab:t,followList:d,owner:s,sort:c.sort,setSort:function(e){"name"===e&&(c.direction="asc"),l((0,C.r)((0,i.Z)((0,n.Z)({},c),{sort:e})))},direction:c.direction,setDirection:function(e){l((0,C.r)((0,i.Z)((0,n.Z)({},c),{direction:e})))}})};var lt=s(40287);var rt=e=>(0,r.jsxs)("svg",(0,i.Z)((0,n.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,r.jsx)("rect",{x:"3",y:"7",width:"10",height:"7",rx:"0.5",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M11 7.5V5C11 0.999963 5 1.00004 5 5V7.5",stroke:"currentColor",strokeWidth:"2"})]})),at=s(47311),ot=s(43489),ct=s(36815);const dt=e=>{let{user:t,restricted:s}=e;const n=t?(0,O.GN)(t):"/team/new?source=navMenu";return(0,r.jsx)(V.Z,{href:n,children:(0,r.jsxs)("a",{className:"flex db ph3 pv3 mb1 no-underline dark-gray hover-near-black bg-white br2 items-center justify-between light-shadow hover-light-shadow hide-child min-w-0",children:[(0,r.jsx)("div",{className:"w-100",children:t?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(F.q,{user:t,size:28,className:"br-100"}),(0,r.jsxs)("div",{className:"ml3 min-w-0",children:[(0,r.jsx)("div",{className:"flex near-black items-center",children:(0,r.jsx)("span",{className:"db truncate f6 fw6",children:(0,O.RX)(t)})}),s?(0,r.jsxs)("div",{className:"mt1 f7 fw5 blue flex",children:[(0,r.jsx)(rt,{className:"mr1",style:{width:15,height:15}}),"Sign in"]}):(0,r.jsxs)("div",{className:"mt1 f7 fw5 ttc gray",children:[(0,ct._n)(t.tier),"team"===t.type&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)("span",{className:"light-gray",children:"\u2022"})," ",(0,ot.y)(t.role)]})]})]})]}):(0,r.jsxs)("div",{className:"flex items-center",title:"A workspace for you and your collaborators",children:[(0,r.jsx)(at.ZP,{style:{width:28,height:28}}),(0,r.jsxs)("div",{className:"ml3 no-underline dark-gray hover-black pointer lh-copy",children:[(0,r.jsx)("div",{className:"f6 fw6",children:"Create a new team"}),(0,r.jsx)(V.Z,{href:"/@observablehq/getting-started-with-teams",children:(0,r.jsx)("a",{onClick:e=>e.stopPropagation(),className:"pa0 fw5 blue bn bg-transparent pointer",children:"Learn more"})})]})]})}),t?(0,r.jsx)(lt.Z,{className:"w1 h1 ml1 gray",style:{strokeWidth:1}}):null]})})},ut=e=>{let{user:t}=e;return(0,r.jsx)("div",{className:"pv4",children:(0,r.jsxs)("div",{className:"dg listing-grid",children:[(0,O.wZ)(t).map((e=>(0,r.jsx)(dt,{user:e,restricted:"team"===e.type&&(0,O.pr)(t,e)},e.id))),(0,r.jsx)(dt,{user:null,restricted:!1},-1)]})})};var ht=s(54397),mt=s(40452),pt=s(34049),bt=s(51238);s(31343);[void 0,"notebooks","public","trash","likes","collections","suggestions","followers","following"].filter((e=>"likes"!==e));const ft=e=>{let{to:t}=e;const{replace:s}=(0,a.useRouter)();return(0,o.useEffect)((()=>{s(t)}),[s,t]),null},xt=e=>{let{owner:t,collections:s}=e;return(0,r.jsx)(y.a,{response:s,items:"collections",emptyMessage:"".concat((0,O.RX)(t)," doesn\u2019t have any public collections."),filters:()=>Ye("Collections"),children:(e,t)=>(0,r.jsx)(f.Fl,{format:t,collection:e})})};var vt=s(92946),gt=s(22255),jt=s(39612),yt=s(77419),wt=s(3142);const kt=e=>{let{title:t,type:s,owner:n,listings:i,context:l}=e;const a=!i||0===i.length,o="notebooks"===s?(0,O.m6)(n):(0,O.$2)(n);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex pb1 mt4 bb b--light-silver items-baseline justify-between",children:[(0,r.jsx)("h3",{className:"ma0 f4 fw7 near-black",children:t}),!a&&(0,r.jsx)("div",{className:"flex justify-between items-baseline",children:(0,r.jsx)(V.Z,{href:o,children:(0,r.jsxs)("a",{className:"flex f7 fw6 no-underline blue items-center",children:["View all ",(0,r.jsx)(he.Z,{className:"child"})]})})})]}),(0,r.jsxs)("div",{className:P()("mt3","notebooks"===s?"listing-grid":"profile-collections-grid"),children:[a&&(0,r.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,r.jsx)($e.u,{children:(0,$e.T)({type:s,owner:n,context:l})})}),null===i||void 0===i?void 0:i.slice(0,6).map(((e,t)=>"notebooks"===s?(0,r.jsx)(w.pg,{format:"grid",notebook:e,type:"reader"},t):(0,r.jsx)(f.Fl,{collection:e},t))),i&&"notebooks"===s&&ke.y.slice(0,6-i.length)]})]})},Nt=e=>{let{canEdit:t,owner:s,context:n}=e;const i=0===[s.home_url,s.profile_email,s.bio].filter((e=>e)).length;return t&&i?(0,r.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,r.jsx)($e.u,{children:function(e){const t="team"===e?"Your team hasn't":"You haven't";return(0,r.jsxs)("div",{children:[t," written"," ",(0,r.jsx)("a",{className:"no-underline blue",href:n?"".concat((0,O.rF)(n),"#profile"):"/",children:"a bio"})," ","yet."]})}(s.type)})}):(0,r.jsxs)("div",{className:"mb4 observable-mid-gray",children:[(0,r.jsx)("div",{className:"fw4",children:s.bio}),s.home_url?(0,r.jsxs)("div",{className:"flex flex-wrap",style:{marginTop:25},children:[[s.home_url,...s.links].map(((e,t)=>(0,r.jsxs)("div",{className:"flex f6 fw4 mt3 mr4 items-center",children:[(0,r.jsx)(vt.o8,{style:{marginRight:7}}),(0,r.jsx)("a",{href:e,className:"no-underline hover-blue observable-mid-gray",rel:"nofollow me",children:e.replace(/(^\w+:|^)\/\/www./,"")})]},t))),s.profile_email&&(0,r.jsxs)("div",{className:"flex f6 fw4 mt3 mr4 items-center",children:[(0,r.jsx)(gt.Z,{style:{marginRight:7}}),(0,r.jsx)("a",{href:"mailto:".concat(s.profile_email),className:"no-underline hover-blue observable-mid-gray",children:s.profile_email})]})]}):null]})};function Ct(e,t){return{path:"/documents/@".concat(e,"?").concat(t?(0,Z.P)({page:t.page||1,sort:t.sort,direction:t.direction}):""),anonymous:!1}}function Zt(e){const t=(0,C.T)(e,"tab"),s="followers"===t||"following"===t?(0,C.T)(e,"sort","follow_time"):(0,C.T)(e,"sort","published");return{tab:t,page:(0,C.T)(e,"page",1),sort:s,direction:(0,C.T)(e,"direction","desc")}}function Lt(e,t){if(e){if(t===e.login)return e;const s=e.teams.find((e=>e.login===t));if(s)return s}}function Tt(e){return{path:"/user/@".concat(e),anonymous:!1}}function _t(e,t){return{path:"/collections/@".concat(e,"/public?").concat(void 0!==t?(0,Z.P)({page:t}):""),anonymous:!0}}var St=s(65878),Rt=s(65538),Ut=s(24165),Pt=s(21252),Ft=!0;const Mt=(0,Rt.$j)((e=>{let{decorations:t,currentUser:s}=e;return{decorations:t,currentUser:s}}),(e=>({dispatch:e})))((e=>{const{currentUser:t,profileUserLogin:s,dispatch:l}=e,{query:c,replace:d}=(0,a.useRouter)(),f=(0,C.T)(c,"tab","home"),{0:x,1:v}=(0,o.useState)((0,bt.x)(t,s)),g="team"===(null===x||void 0===x?void 0:x.type)&&(0,O.pr)(t,x);return(0,ne.v9)((e=>{if(x){const[t,s]=(0,nt.f)(x,e);s&&v(t)}})),(0,o.useEffect)((()=>{v((0,bt.x)(t,s))}),[t,s]),(0,o.useEffect)((()=>{"ALREADY_SIGNED_IN"===(0,C.T)(c,"error")&&l({type:"showErrorToast",message:"You\u2019re already signed in. If you need to sign in as another user, please sign out first."})}),[l,c]),x||t.teams.length?(0,r.jsxs)("div",{className:"flex flex-column min-vh-100",children:[(0,r.jsx)(pt.Z,{content:"Home"}),(0,r.jsx)(u(),{children:(0,r.jsx)("meta",{name:"description",content:"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."})}),(0,r.jsx)(m.Z,{}),(0,r.jsxs)("main",{className:"relative",style:{flex:1,zIndex:0},children:[g&&(0,r.jsx)(h.l,{onDismiss:()=>history.replaceState({},"","/"),error:{code:"MISSING_ORG",meta:(0,n.Z)({},x.org_restriction?{provider_org:x.org_restriction}:void 0)}}),!g&&(0,r.jsxs)(r.Fragment,{children:[!x&&(0,r.jsx)("div",{className:"bg-near-white",children:(0,r.jsx)("div",{className:b.I,children:(0,r.jsx)(ut,{user:t})})}),(0,r.jsxs)(b.H,{children:[x&&(0,r.jsx)(De.bT,{context:x,profileUserLogin:s,currentUser:t,tab:f}),(0,r.jsx)("div",{className:"flex-auto",style:{marginTop:45},children:x?"home"===f?(0,r.jsx)(Ie,(0,i.Z)((0,n.Z)({},e),{context:x,user:t,dispatch:l})):"notebooks"===f||"public"===f||"trash"===f||"likes"===f?(0,r.jsx)(Ge,(0,i.Z)((0,n.Z)({},e),{context:x,user:t})):"collections"===f?(0,r.jsx)(T,(0,i.Z)((0,n.Z)({},e),{context:x,user:t})):"suggestions"===f?(0,r.jsx)(tt,(0,i.Z)((0,n.Z)({},e),{context:x,user:t})):"followers"===f||"following"===f?(0,r.jsx)(it,{owner:x,tab:f}):null:t.teams.length?(0,r.jsx)(st,{user:t,dispatch:l}):(0,r.jsx)(ft,{to:"/@".concat(t.login)})})]})]})]}),(0,r.jsx)(mt.j,{}),(0,r.jsx)(p.F1,{}),(0,r.jsx)(ht.W,{}),(0,r.jsx)(_.m,{})]}):(d("/@".concat(t.login)),null)})),Vt=(0,Rt.$j)((e=>{let{decorations:t,currentUser:s}=e;return{decorations:t,currentUser:s}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,profileUserLogin:s}=e;const{push:i,query:l}=(0,a.useRouter)(),c=Zt(l),d=c.tab||"profile",h=Lt(t,s),f=!!h&&(0,O.MB)(t,h,["owner"]),x="profile"===d,{data:v,mutate:g}=(0,k.h_)(f?null:Tt(s).path),j=f?h:v;(0,ne.v9)((e=>{if(v){const[t,s]=(0,nt.f)(v,e);s&&g(t)}}));const{data:y}=(0,k.h_)(x?Ct(s).path:null),N=y?(0,me.x)(y):void 0,{data:Z}=(0,k.h_)("notebooks"===d||"public"===d?Ct(s,c).path:null),L=Z?(0,me.x)(Z):void 0,{data:T}=(0,k.h_)(x?_t(s).path:null),{data:S}=(0,k.h_)("collections"===d?_t(s,c.page||1).path:null),R=(0,o.useCallback)((()=>t&&h?(0,r.jsx)(De.bT,{tab:d,context:h,currentUser:t,profileUserLogin:s,bannerPresent:x&&!!(null===j||void 0===j?void 0:j.selected_banner)}):j?(0,r.jsx)(De.mx,{currentUser:t,profileUser:j,tab:x?"profile":d,bannerPresent:x&&!!j.selected_banner}):null),[t,h,d,s,x,j]),U=2===window.devicePixelRatio?"@2x":"",F=(0,H.GS)(H.ro);return(0,r.jsxs)("div",{className:"flex flex-column min-vh-100",children:[j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pt.Z,{content:(0,O.RX)(j)}),(0,r.jsxs)(u(),{children:[(0,r.jsx)("link",{rel:"alternate",type:"application/rss+xml",href:"".concat("https://api.observablehq.com","/documents/@").concat(j.login,".rss")}),(0,r.jsx)(yt.wd,{user:j})]})]}):null,(0,r.jsx)(m.Z,{}),(0,r.jsxs)("main",{style:{flex:1,zIndex:0},className:"jsx-7556d8d0f294154a relative",children:[x&&(null===j||void 0===j?void 0:j.selected_banner)&&(0,r.jsx)("div",{style:{backgroundImage:"url(https://".concat("static.observableusercontent.com","/profiles/").concat(j.selected_banner).concat(U,".png)")},className:"jsx-7556d8d0f294154a profile-banner"}),(0,r.jsxs)(b.H,{children:[R(),(0,r.jsx)("div",{style:{marginTop:F?30:45},className:"jsx-7556d8d0f294154a mb4 sans-serif flex-auto",children:x?(0,r.jsxs)("div",{className:"jsx-7556d8d0f294154a profile-content",children:[(0,r.jsxs)("div",{className:"jsx-7556d8d0f294154a "+(P()("flex bb b--light-silver justify-between pb1",{"items-baseline":!F})||""),children:[(0,r.jsxs)("div",{style:{maxWidth:"80%"},className:"jsx-7556d8d0f294154a flex justify-between items-baseline",children:[(0,r.jsx)("h2",{style:w.r2,className:"jsx-7556d8d0f294154a flex ma0 fw7 near-black truncate truncate-two-lines",children:j&&(0,O.RX)(j)}),"individual"===(null===j||void 0===j?void 0:j.type)&&j.pronouns&&(0,r.jsxs)("div",{className:"jsx-7556d8d0f294154a fw4 dark-gray ml2",children:["(",j.pronouns,")"]})]}),(0,r.jsxs)("div",{className:"jsx-7556d8d0f294154a "+((F?"flex flex-column justify-center":"")||""),children:[j&&(0,r.jsxs)(r.Fragment,{children:["individual"===j.type&&(0,r.jsx)(V.Z,{href:"/@".concat(j.login,"?tab=following"),children:(0,r.jsxs)("a",{className:"jsx-7556d8d0f294154a ph2 fw6 dark-gray",children:[j.following_count||0,"\xa0",(0,wt.xC)(j.following_count||0,"following","following")]})}),(0,r.jsx)(V.Z,{href:"/@".concat(j.login,"?tab=followers"),children:(0,r.jsxs)("a",{className:"jsx-7556d8d0f294154a ph2 fw6 dark-gray",children:[j.followers_count||0,"\xa0",(0,wt.xC)(j.followers_count||0,"follower")]})})]}),f&&(0,r.jsx)("a",{href:"".concat((0,O.rF)(h),"#profile"),className:"jsx-7556d8d0f294154a ml2 f6 fw6 no-underline blue pointer",children:"Edit profile"})]})]}),(0,r.jsx)("div",{style:{marginTop:25},className:"jsx-7556d8d0f294154a",children:j&&(0,r.jsx)(Nt,{owner:j,canEdit:f,context:h})}),j&&N&&(0,r.jsx)(kt,{title:"Public notebooks",type:"notebooks",listings:N,owner:j,context:h}),(null===j||void 0===j?void 0:j.has_workspace)&&T&&(0,r.jsx)(kt,{title:"Public collections",type:"collections",listings:T,owner:j,context:h})]}):"notebooks"===d||"public"===d?j&&L&&(0,r.jsx)(Be,{notebooks:L,owner:j,sort:c.sort,direction:c.direction,setSort:function(e){i((0,C.r)((0,n.Z)({},c,e?{sort:e}:null)))},setDirection:function(e){i((0,C.r)((0,n.Z)({},c,e?{direction:e}:null)))},tab:d}):"collections"===d?j&&S&&(0,r.jsx)(xt,{collections:S,owner:j}):"followers"===d||"following"===d?j&&(0,r.jsx)(it,{owner:j,tab:d}):null})]}),(0,r.jsx)(te(),{id:"7556d8d0f294154a",children:".profile-banner{-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;background-repeat:no-repeat;background-position:left center;position:relative;width:100%}@media screen and (max-width:640px){.profile-banner{height:60px}}@media screen and (min-width:640px){.profile-banner{height:125px}}"})]}),(0,r.jsx)(jt.Z,{}),(0,r.jsx)(p.F1,{}),(0,r.jsx)(ht.W,{}),(0,r.jsx)(_.m,{})]})}));var Et=(0,St.Z)((e=>{const{fallback:t}=e,s=(0,l.Z)(e,["fallback"]),d=(0,Pt.M)(Ut.f,e),{query:u}=(0,a.useRouter)(),h=s.initialCurrentUser&&(0,bt.x)(s.initialCurrentUser,s.profileUserLogin),m=function(e,t){let{initialCurrentUser:s,profileUserLogin:n}=e;return s&&(0,O.X_)(s,n)&&"profile"!==t?"dashboard":"profile"}(e,(0,C.T)(u,"tab",!1===(null===h||void 0===h?void 0:h.has_workspace)?"profile":void 0)),{0:p}=(0,o.useState)(new Map);return(0,r.jsx)(c.J$,{value:{fallback:t,revalidateOnFocus:!1,revalidateIfStale:!1,provider:()=>p},children:(0,r.jsx)(Rt.zt,{store:d,children:"profile"===m?(0,r.jsx)(Vt,(0,i.Z)((0,n.Z)({},s),{profileUserLogin:s.profileUserLogin})):"dashboard"===m?(0,r.jsx)(Mt,(0,n.Z)({},s)):null})})}))},24165:function(e,t,s){s.d(t,{f:function(){return o}});var n=s(41799),i=s(68298),l=s(77180),r=s(810),a=s(54937);const o=()=>({type:"dashboard",slices:{notebook:{initialState:{},reducers:(0,n.Z)({},a.x,l.L)}},listeners:(0,n.Z)({},r.l,i.R)})},61870:function(e,t,s){s.d(t,{CU:function(){return d},Kj:function(){return v},au:function(){return u},dY:function(){return x},gg:function(){return p},iQ:function(){return o},kO:function(){return h},qc:function(){return b},r2:function(){return m},rw:function(){return f}});var n=s(41799),i=s(52054),l=s(602),r=s(27193),a=s(3142);const o=()=>({isPublishing:!0});function c(e,t){e({type:"showErrorToast",message:t,key:"publish"}),e({type:"publishFailed"})}const d=async(e,t,s)=>{let{notebook:n}=e,{unlisted:i,customSlug:o,customThumbnail:d,live:u}=t;if(n.isPublishing)return;const{id:h,slug:m,thumbnail:p}=n,b=(0,r.Ui)("model"in n?n.model:"title"in n?n:null);if(void 0!==o&&m!==o){s({type:"showProcessingToast",key:"publish",message:"Setting slug for ".concat(b,"\u2026")});try{await(0,l.Fv)("/document/".concat(h,"/slug"),{slug:o||null})}catch(v){return void(v.errors&&v.errors.length>0&&"SLUG_INVALID"===(null===v||void 0===v?void 0:v.errors[0].code)?c(s,"Setting notebook URL failed: URL invalid."):c(s,"Oops, setting notebook URL failed. Try again?"))}}let f=p;if(void 0!==d&&(d||p!==n.defaultThumbnail)&&d!==p){s({type:"showProcessingToast",key:"publish",message:"Setting thumbnail for ".concat(b,"\u2026")});try{f=await(0,l.Fv)("/document/".concat(h,"/thumbnail"),{thumbnail:d||null})||n.defaultThumbnail}catch(g){return void c(s,"Oops, setting notebook thumbnail failed. Try again?")}}const x={version:n.saveVersion,title:b,unlisted:i,live:u};try{s({type:"showProcessingToast",key:"publish",message:u?"Making ".concat(b," public\u2026"):"Publishing ".concat(b,"\u2026")});const{slug:e,update_time:t,access_level:r}=await(0,l.Fv)("/document/".concat(h,"/publish"),x);s({type:"showSuccessToast",message:u?"".concat(b," made public"):i?(0,a.cg)(n)?"Republished '".concat(b,"' (unlisted)"):"Published '".concat(b,"' (unlisted)"):(0,a.s9)(n)?"Republished '".concat(b,"'"):"Published '".concat(b,"'"),key:"publish"}),s({type:"publishSucceeded",publishVersion:n.saveVersion,updateTime:t,publishLevel:r,slug:e,thumbnail:f}),s({type:"updatedNotebook"})}catch(j){c(s,i?"Oops, unlisted publishing failed. Try again?":"Oops, publishing failed. Try again?")}},u=(e,t)=>{let{publishVersion:s,updateTime:l,slug:r,thumbnail:o,publishLevel:c}=t;const{publishTime:d,roles:u}=e,h="live"===c&&"editorStates"in e&&(0,a.os)(e)?(0,i.qk)(e,!1):null,m="live"===c?u.filter((e=>"readonly"!==e)):u;return(0,n.Z)({publishLevel:c,publishVersion:s,publishTime:d||l,editUnpublished:!1,thumbnail:o,slug:r,isPublishing:!1,roles:m},h)},h=async(e,t,s)=>{let{notebook:n}=e,{unlisted:i}=t;if(n.isPublishing)return;const a=(0,r.Ui)("model"in n?n.model:"title"in n?n:null),o={version:n.saveVersion,live:!0,unlisted:i};try{let e=n.publishLevel;e!==(i?"live_unlisted":"live")&&(s({type:"showProcessingToast",key:"publish",message:"Making ".concat(a," public").concat(i?" (unlisted)":"","\u2026")}),({access_level:e}=await(0,l.Fv)("/document/".concat(n.id,"/publish"),o)),s({type:"showSuccessToast",message:"".concat(a," made public").concat(i?" (unlisted)":""),key:"publish"})),s({type:"publishLiveSucceeded",publishLevel:e}),s({type:"updatedNotebook"})}catch(d){c(s,"Oops, making public failed. Try again?")}},m=(e,t)=>{let{publishLevel:s}=t;const{roles:l}=e,r="live"===s&&"editorStates"in e&&(0,a.os)(e)?(0,i.qk)(e,!1):null,o="live"===s?l.filter((e=>"readonly"!==e)):l;return(0,n.Z)({publishLevel:s,editUnpublished:!1,isPublishing:!1,roles:o},r)},p=()=>({isPublishing:!1}),b=()=>({isUnpublishing:!0}),f=async(e,t,s)=>{let{notebook:n}=e;if(n.isUnpublishing)return;const i=(0,r.Ui)("model"in n?n.model:"title"in n?n:null),a="live"===n.publishLevel||"live_unlisted"===n.publishLevel;try{s({type:"showProcessingToast",key:"unpublish",message:a?"Removing public access to ".concat(i,"\u2026"):"Unpublishing ".concat(i,"\u2026")});const e=await(0,l.Fv)("/document/".concat(n.id,"/unpublish"),void 0);s({type:"showSuccessToast",message:a?"Removed public access to ".concat(i):"Unpublished '".concat(i,"'"),key:"unpublish"}),s({type:"unpublishSucceeded",slug:e.slug||null})}catch(o){s({type:"showErrorToast",message:a?"Oops, removing public access failed. Try again?":"Oops, unpublishing failed. Try again?",key:"unpublish"}),s({type:"unpublishFailed"})}},x=(e,t)=>{let{slug:s}=t;return{publishLevel:"private",publishVersion:null,publishTime:null,editUnpublished:!1,slug:s,isUnpublishing:!1,pausedVersion:null}},v=()=>({isUnpublishing:!1})},6826:function(e,t,s){s.d(t,{B:function(){return a},b:function(){return o}});var n=s(602),i=s(19671),l=s(90627);function r(e){const t=new Set(e.map((e=>e.login)));return e=>!t.has(e.login)}const a=async(e,t,s)=>{let{notebook:a,currentUser:o}=e;const{currentMembers:c,newMembers:d,newRoles:u,message:h}=t,{id:m}=a,p=e=>"invited"===e.status,b=e=>"member"===e.status,f=function(e){const t=new Map(e.map((e=>[e.login,e])));return e=>t.has(e.login)&&t.get(e.login).role!==e.role}(c),x=r(d),v=r(c),g=d.filter(b).filter(v),j=d.filter(b).filter(f),y=c.filter(b).filter(x),w=d.filter(p).filter(v).map((e=>({email:e.login,role:e.role}))),k=c.filter(p).filter(x).map((e=>({email:e.login}))),N=d.some((e=>"team"===e.type))?"team":d.length>1||d.some((e=>"group"===e.type))?"shared":"private";try{await(0,n.Fv)("/document/".concat(m,"/roles"),{roles:[...g,...j].map((e=>{let{id:t,role:s}=e;return{user_id:t,role:s}})).concat(y.map((e=>{let{id:t}=e;return{user_id:t,role:null}}))),invitations:w.map((e=>({email:e.email,role:e.role}))).concat(k.map((e=>({email:e.email,role:null})))),message:h})}catch(L){return void(0,l.S)({key:"setRoles",error:L,dispatch:s,message:"Unable to set roles"})}for(const{id:n,role:l,team_role:r,type:T}of g){var C;(0,i.MR)((0,i.ym)({type:"notebook:manage:changeRole",notebook:a,currentUser:o,data:{prevRole:(null===(C=c.find((e=>e.id===n)))||void 0===C?void 0:C.role)||null,newRole:l,userId:n,userType:T,memberId:r?n:void 0,memberRole:null!==r&&void 0!==r?r:void 0},eventVersion:5})),ga("send","event","Notebook","Change role"),gtag("event","Change role",{event_category:"Notebook"})}for(const{id:n,team_role:l,type:r}of y){var Z;(0,i.MR)((0,i.ym)({type:"notebook:manage:changeRole",notebook:a,currentUser:o,data:{prevRole:(null===(Z=y.find((e=>e.id===n)))||void 0===Z?void 0:Z.role)||null,newRole:null,userId:n,userType:r,memberId:l?n:void 0,memberRole:null!==l&&void 0!==l?l:void 0},eventVersion:5})),ga("send","event","Notebook","Change role"),gtag("event","Change role",{event_category:"Notebook"})}s({type:"shareSucceeded",newSharing:N,newRoles:u}),s({type:"updatedNotebook"})},o=(e,t)=>{let{newSharing:s,newRoles:n}=t;if(0!==n.length)return{sharing:s,roles:n};location.replace("/")}},41894:function(e,t,s){s.d(t,{g:function(){return l},m:function(){return i}});var n=s(602);const i=async(e,t,s)=>{let i,{slug:l}=t;const{notebook:{id:r}}=e;try{i=await(0,n.Fv)("/document/".concat(r,"/slug"),{slug:l})}catch(a){return void(a.errors&&a.errors.length>0&&"SLUG_INVALID"===a.errors[0].code?s({type:"showErrorToast",message:"Setting notebook URL failed: URL invalid.",key:"setSlug"}):s({type:"showErrorToast",message:"Oops, setting notebook URL failed. Try again?",key:"setSlug"}))}s({type:"setSlugSucceeded",slug:i.slug}),s({type:"updatedNotebook"})},l=(e,t)=>{let{slug:s}=t;return{slug:s}}},16504:function(e,t,s){s.d(t,{QJ:function(){return c},fv:function(){return a},pT:function(){return o},zu:function(){return d}});var n=s(85893),i=s(39736),l=s(602),r=s(36448);const a=async(e,t,s)=>{let{notebook:{id:r}}=e,{trashed:a,relocate:o=!0}=t;const c={trashed:a};try{await(0,l.Fv)("/document/".concat(r,"/trash"),c),s({type:"trashSucceeded",trashed:a,relocate:o}),o||(s({type:"showSuccessToast",message:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center",children:[i.MI,"Moved to trash"]}),(0,n.jsx)("button",{onClick:()=>{s({type:"trashRequested",trashed:!1,relocate:o})},className:"pa0 fw6 no-underline gray hover-dark-gray bg-transparent bn pointer",children:"Undo"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center",children:[i.MI,"Moved out of trash"]}),(0,n.jsx)("button",{onClick:()=>{s({type:"trashRequested",trashed:!0,relocate:o})},className:"pa0 fw6 no-underline gray hover-dark-gray bg-transparent bn pointer",children:"Undo"})]}),key:"trash"}),s({type:"updatedNotebook"}))}catch(d){s({type:"trashFailed"}),s({type:"showErrorToast",message:a?"Oops, trashing failed. Try again?":"Oops, moving out of trash failed. Try again?",key:"trash"})}},o=()=>({isUpdatingTrash:!0}),c=(e,t)=>{let{owner:s}=e,{trashed:n,relocate:i}=t;if(!n||!i)return{trashed:n,isUpdatingTrash:!1};location.replace((0,r.GN)(s))},d=()=>({isUpdatingTrash:!1})},4387:function(e,t,s){s.d(t,{$:function(){return l},W:function(){return r}});var n=s(602),i=s(27193);const l=async(e,t,s)=>{let{notebook:l}=e,{customThumbnail:r}=t;const{id:a,thumbnail:o}=l,c=(0,i.Ui)("model"in l?l.model:"title"in l?l:null);if((r||o!==l.defaultThumbnail)&&r!==o){s({type:"showProcessingToast",key:"thumbnail",message:"Setting thumbnail for ".concat(c,"\u2026")});try{const e=await(0,n.Fv)("/document/".concat(a,"/thumbnail"),{thumbnail:r||null});s({type:"showSuccessToast",key:"thumbnail",message:"Updated thumbnail"}),s({type:"setNotebookThumbnailSucceeded",customThumbnail:e}),s({type:"updatedNotebook"})}catch(d){return void s({type:"showErrorToast",message:"Oops, setting notebook thumbnail failed. Try again?",key:"thumbnail"})}}},r=(e,t)=>{let{defaultThumbnail:s}=e,{customThumbnail:n}=t;return{customThumbnail:n,thumbnail:n||s}}},810:function(e,t,s){s.d(t,{l:function(){return m}});var n=s(30169),i=s(4387),l=s(24205),r=s(21312),a=s(67220),o=s(61870),c=s(6826),d=s(41894),u=s(59533),h=s(16504);const m={collections:r.N5,descriptionUpdate:a.y,publishLiveRequested:o.kO,publishRequested:o.CU,publishSucceeded:l.dE,publishLiveSucceeded:l.dE,showModal:n.k,setNotebookThumbnail:i.$,setSlug:d.m,setSlugSucceeded:l.pf,share:c.B,transfer:u.r,trashRequested:h.fv,trashSucceeded:l.d$,unpublishRequested:o.rw,unpublishSucceeded:l.CL}},54937:function(e,t,s){s.d(t,{x:function(){return d}});var n=s(4387),i=s(17152),l=s(61870),r=s(6826),a=s(41894),o=s(59533),c=s(16504);const d={forkFailed:i.L3,forkPending:i.cL,publishRequested:l.iQ,publishSucceeded:l.au,publishFailed:l.gg,publishLiveSucceeded:l.r2,setNotebookThumbnailSucceeded:n.W,setSlugSucceeded:a.g,shareSucceeded:r.b,trashFailed:c.zu,trashRequested:c.pT,transferSucceeded:o.I,trashSucceeded:c.QJ,unpublishRequested:l.qc,unpublishSucceeded:l.dY,unpublishFailed:l.Kj}}}]);